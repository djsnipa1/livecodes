{
  "version": 3,
  "sources": ["../../src/livecodes/services/modules.ts", "../../src/livecodes/vendors.ts", "../../src/livecodes/languages/r/lang-r-script-esm.ts"],
  "sourcesContent": ["import type { CDN } from '../models';\r\n\r\ndeclare const globalThis: { appCDN: CDN };\r\n\r\nconst moduleCDNs: CDN[] = ['jspm', 'skypack'];\r\nconst npmCDNs: CDN[] = ['unpkg', 'jsdelivr'];\r\nconst ghCDNs: CDN[] = ['jsdelivr.gh', 'statically'];\r\n\r\nexport const modulesService = {\r\n  getModuleUrl: (\r\n    moduleName: string,\r\n    { isModule = true, defaultCDN = 'jspm' }: { isModule?: boolean; defaultCDN?: CDN } = {},\r\n  ) => {\r\n    moduleName = moduleName.replace(/#nobundle/g, '');\r\n\r\n    const moduleUrl = getCdnUrl(moduleName, isModule, defaultCDN);\r\n    if (moduleUrl) {\r\n      return moduleUrl;\r\n    }\r\n\r\n    return isModule\r\n      ? 'https://jspm.dev/' + moduleName\r\n      : 'https://cdn.jsdelivr.net/npm/' + moduleName;\r\n  },\r\n\r\n  getUrl: (path: string, cdn?: CDN) =>\r\n    path.startsWith('http') ? path : getCdnUrl(path, false, cdn || getAppCDN()) || path,\r\n\r\n  cdnLists: { npm: npmCDNs, module: moduleCDNs, gh: ghCDNs },\r\n\r\n  checkCDNs: async (testModule: string, preferredCDN?: CDN) => {\r\n    const cdns: CDN[] = [preferredCDN, ...modulesService.cdnLists.npm].filter(Boolean) as CDN[];\r\n    for (const cdn of cdns) {\r\n      try {\r\n        const res = await fetch(modulesService.getUrl(testModule, cdn), {\r\n          method: 'HEAD',\r\n        });\r\n        if (res.ok) return cdn;\r\n      } catch {\r\n        // continue;\r\n      }\r\n    }\r\n    // fall back to first\r\n    return modulesService.cdnLists.npm[0];\r\n  },\r\n};\r\n\r\nexport const getAppCDN = (): CDN => {\r\n  if (globalThis.appCDN) return globalThis.appCDN;\r\n  try {\r\n    const url = new URL(location.href);\r\n    return (url.searchParams.get('appCDN') as CDN) || modulesService.cdnLists.npm[0];\r\n  } catch {\r\n    return modulesService.cdnLists.npm[0] as CDN;\r\n  }\r\n};\r\n\r\nconst getCdnUrl = (modName: string, isModule: boolean, defaultCDN?: CDN) => {\r\n  const post = isModule && modName.startsWith('unpkg:') ? '?module' : '';\r\n  if (modName.startsWith('gh:')) {\r\n    modName = modName.replace('gh', ghCDNs[0]);\r\n  } else if (!modName.includes(':')) {\r\n    const prefix = defaultCDN || (isModule ? moduleCDNs[0] : npmCDNs[0]);\r\n    modName = prefix + ':' + modName;\r\n  }\r\n  for (const i of TEMPLATES) {\r\n    const [pattern, template] = i;\r\n    if (pattern.test(modName)) {\r\n      return modName.replace(pattern, template) + post;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n// based on https://github.com/neoascetic/rawgithack/blob/master/web/rawgithack.js\r\nconst TEMPLATES: Array<[RegExp, string]> = [\r\n  [/^(jspm:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(npm:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(node:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(skypack:)(.+)/i, 'https://cdn.skypack.dev/$2'],\r\n\r\n  [/^(jsdelivr:)(.+)/i, 'https://cdn.jsdelivr.net/npm/$2'],\r\n\r\n  [/^(jsdelivr.gh:)(.+)/i, 'https://cdn.jsdelivr.net/gh/$2'],\r\n\r\n  [/^(statically:)(.+)/i, 'https://cdn.statically.io/gh/$2'],\r\n\r\n  [/^(esm.run:)(.+)/i, 'https://esm.run/$2'],\r\n\r\n  [/^(esm.sh:)(.+)/i, 'https://esm.sh/$2'],\r\n\r\n  [/^(esbuild:)(.+)/i, 'https://esbuild.vercel.app/$2'],\r\n\r\n  [/^(bundle.run:)(.+)/i, 'https://bundle.run/$2'],\r\n\r\n  [/^(unpkg:)(.+)/i, 'https://unpkg.com/$2'],\r\n\r\n  [/^(bundlejs:)(.+)/i, 'https://deno.bundlejs.com/?file&q=$2'],\r\n\r\n  [/^(bundle:)(.+)/i, 'https://deno.bundlejs.com/?file&q=$2'],\r\n\r\n  [/^(deno:)(.+)/i, 'https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts'],\r\n\r\n  [/^(https:\\/\\/deno\\.land\\/.+)/i, 'https://deno.bundlejs.com/?file&q=$1'],\r\n\r\n  [\r\n    /^(github:|https:\\/\\/github\\.com\\/)(.[^\\/]+?)\\/(.[^\\/]+?)\\/(?!releases\\/)(?:(?:blob|raw)\\/)?(.+?\\/.+)/i,\r\n    'https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4',\r\n  ],\r\n\r\n  [/^(gist\\.github:)(.+?\\/[0-9a-f]+\\/raw\\/(?:[0-9a-f]+\\/)?.+)$/i, 'https://gist.githack.com/$2'],\r\n\r\n  [\r\n    /^(gitlab:|https:\\/\\/gitlab\\.com\\/)([^\\/]+.*\\/[^\\/]+)\\/(?:raw|blob)\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3',\r\n  ],\r\n  [\r\n    /^(bitbucket:|https:\\/\\/bitbucket\\.org\\/)([^\\/]+\\/[^\\/]+)\\/(?:raw|src)\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3',\r\n  ],\r\n\r\n  // snippet file URL from web interface, with revision\r\n  [\r\n    /^(bitbucket:)snippets\\/([^\\/]+\\/[^\\/]+)\\/revisions\\/([^\\/\\#\\?]+)(?:\\?[^#]*)?(?:\\#file-(.+?))$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4',\r\n  ],\r\n  // snippet file URL from web interface, no revision\r\n  [\r\n    /^(bitbucket:)snippets\\/([^\\/]+\\/[^\\/\\#\\?]+)(?:\\?[^#]*)?(?:\\#file-(.+?))$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3',\r\n  ],\r\n  // snippet file URLs from REST API\r\n  [\r\n    /^(bitbucket:)\\!api\\/2.0\\/snippets\\/([^\\/]+\\/[^\\/]+\\/[^\\/]+)\\/files\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/files/$3',\r\n  ],\r\n  [\r\n    /^(api\\.bitbucket:)2.0\\/snippets\\/([^\\/]+\\/[^\\/]+\\/[^\\/]+)\\/files\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/files/$3',\r\n  ],\r\n\r\n  [/^(rawgit:)(.+?\\/[0-9a-f]+\\/raw\\/(?:[0-9a-f]+\\/)?.+)$/i, 'https://gist.githack.com/$2'],\r\n  [\r\n    /^(rawgit:|https:\\/\\/raw\\.githubusercontent\\.com)(\\/[^\\/]+\\/[^\\/]+|[0-9A-Za-z-]+\\/[0-9a-f]+\\/raw)\\/(.+)/i,\r\n    'https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3',\r\n  ],\r\n];\r\n", "// eslint-disable-next-line import/no-internal-modules\r\nimport { modulesService } from './services/modules';\r\n\r\nconst { getUrl, getModuleUrl } = modulesService;\r\n\r\nexport const vendorsBaseUrl = // 'http://127.0.0.1:8081/';\r\n  /* @__PURE__ */ getUrl('@live-codes/browser-compilers@0.7.4/dist/');\r\n\r\nexport const acornUrl = /* @__PURE__ */ getUrl('acorn@8.8.2/dist/acorn.js');\r\n\r\nexport const artTemplateUrl = /* @__PURE__ */ getUrl('art-template@4.13.2/lib/template-web.js');\r\n\r\nexport const asciidocUrl = /* @__PURE__ */ getUrl(\r\n  '@asciidoctor/core@2.2.6/dist/browser/asciidoctor.js',\r\n);\r\n\r\nexport const assemblyscriptLoaderUrl = /* @__PURE__ */ getUrl(\r\n  '@assemblyscript/loader@0.27.5/umd/index.js',\r\n);\r\n\r\nexport const astringUrl = /* @__PURE__ */ getUrl('astring@1.8.1/dist/astring.min.js');\r\n\r\nexport const astroBaseUrl = /* @__PURE__ */ getUrl('@hatemhosny/astro-internal@0.0.4/');\r\n\r\nexport const astroWasmURL = /* @__PURE__ */ getUrl('@astrojs/compiler@0.9.2/astro.wasm');\r\n\r\nexport const autoCompleteUrl = /* @__PURE__ */ getUrl(\r\n  '@tarekraafat/autocomplete.js@10.2.6/dist/autoComplete.js',\r\n);\r\n\r\nexport const babelUrl = /* @__PURE__ */ getUrl('@babel/standalone@7.22.4/babel.js');\r\n\r\nexport const biwaschemeUrl = /* @__PURE__ */ getUrl('biwascheme@0.8.0/release/biwascheme.js');\r\n\r\nexport const blocklyCdnBaseUrl = /* @__PURE__ */ getUrl('blockly@9.3.3/');\r\n\r\nexport const brythonBaseUrl = /* @__PURE__ */ getUrl('brython@3.11.2/');\r\n\r\nexport const chaiUrl = /* @__PURE__ */ getModuleUrl('chai@4.3.6');\r\n\r\nexport const chaiTypesUrl = /* @__PURE__ */ getUrl('@types/chai@4.2.22/index.d.ts');\r\n\r\nexport const cherryCljsBaseUrl = /* @__PURE__ */ getUrl('cherry-cljs@0.0.4/');\r\n\r\nexport const cjs2esUrl = /* @__PURE__ */ getUrl('cjs2es@1.1.1/dist/cjs2es.browser.js');\r\n\r\nexport const clioBaseUrl = /* @__PURE__ */ getUrl(\r\n  '@live-codes/clio-browser-compiler@0.0.3/public/build/',\r\n);\r\n\r\nexport const coffeeScriptUrl = /* @__PURE__ */ getUrl(\r\n  'coffeescript@2.7.0/lib/coffeescript-browser-compiler-legacy/coffeescript.js',\r\n);\r\n\r\nexport const cppWasmBaseUrl = /* @__PURE__ */ getUrl('@chriskoch/cpp-wasm@1.0.2');\r\n\r\nexport const csstreeUrl = /* @__PURE__ */ getUrl('css-tree@1.1.3/dist/csstree.js');\r\n\r\nexport const cytoscapeSvgUrl = /* @__PURE__ */ getUrl('cytoscape-svg@0.4.0/cytoscape-svg.js');\r\n\r\nexport const cytoscapeUrl = /* @__PURE__ */ getUrl('cytoscape@3.25.0/dist/cytoscape.min.js');\r\n\r\nexport const dotUrl = /* @__PURE__ */ getUrl('dot@1.1.3/doT.js');\r\n\r\nexport const ejsUrl = /* @__PURE__ */ getUrl('ejs@3.1.9/ejs.js');\r\n\r\nexport const elkjsBaseUrl = /* @__PURE__ */ getUrl('elkjs@0.8.2/lib/');\r\n\r\nexport const emmetMonacoUrl = /* @__PURE__ */ getUrl('emmet-monaco-es@5.0.0/dist/emmet-monaco.js');\r\n\r\nexport const esModuleShimsPath = 'es-module-shims@1.4.4/dist/es-module-shims.js';\r\n\r\nexport const etaUrl = /* @__PURE__ */ getUrl('eta@2.2.0/dist/eta.umd.js');\r\n\r\nexport const flexSearchUrl = /* @__PURE__ */ getUrl('flexsearch@0.7.21/dist/flexsearch.bundle.js');\r\n\r\nexport const fontAnonymousProUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/anonymous-pro@4.5.9/index.css',\r\n);\r\n\r\nexport const fontCascadiaCodeUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/cascadia-code@4.2.1/index.css',\r\n);\r\n\r\nexport const fontCodeNewRomanUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/code-new-roman-2',\r\n);\r\n\r\nexport const fontComicMonoUrl = /* @__PURE__ */ getUrl('comic-mono@0.0.1/index.css');\r\n\r\nexport const fontCourierPrimeUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/courier-prime@4.5.9/index.css',\r\n);\r\n\r\nexport const fontDECTerminalModernUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/dec-terminal-modern',\r\n);\r\n\r\nexport const fontDejaVuMonoUrl = /* @__PURE__ */ getUrl('@fontsource/dejavu-mono@4.5.4/index.css');\r\n\r\nexport const fontFantasqueUrl = /* @__PURE__ */ getUrl(\r\n  '@typopro/web-fantasque-sans-mono@3.7.5/TypoPRO-FantasqueSansMono.css',\r\n);\r\n\r\nexport const fontFiraCodeUrl = /* @__PURE__ */ getUrl('firacode@6.2.0/distr/fira_code.css');\r\n\r\nexport const fontFixedsysUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/fixedsys-62');\r\n\r\nexport const fontHackUrl = /* @__PURE__ */ getUrl('hack-font@3.3.0/build/web/hack.css');\r\n\r\nexport const fontHermitUrl = /* @__PURE__ */ getUrl('typeface-hermit@0.0.44/index.css');\r\n\r\nexport const fontIBMPlexMonoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap',\r\n);\r\n\r\nexport const fontInconsolataUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Inconsolata&display=swap',\r\n);\r\n\r\nexport const fontIosevkaUrl = /* @__PURE__ */ getUrl('@fontsource/iosevka@4.5.4/index.css');\r\n\r\nexport const fontJetbrainsMonoUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/jetbrains-mono@4.5.11/index.css',\r\n);\r\n\r\nexport const fontMenloUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/menlo');\r\n\r\nexport const fontMonofurUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/monofur');\r\n\r\nexport const fontMonoidUrl = /* @__PURE__ */ getUrl('@typopro/web-monoid@3.7.5/TypoPRO-Monoid.css');\r\n\r\nexport const fontNotoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&display=swap',\r\n);\r\n\r\nexport const fontNovaMonoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Nova+Mono&display=swap',\r\n);\r\n\r\nexport const fontOpenDyslexicUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/opendyslexic@4.5.4/index.css',\r\n);\r\n\r\nexport const fontProFontWindowsUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/profontwindows',\r\n);\r\n\r\nexport const fontRobotoMonoUrl = /* @__PURE__ */ getUrl('@fontsource/roboto-mono@4.5.8/index.css');\r\n\r\nexport const fontSFMonoUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/sf-mono');\r\n\r\nexport const fontSourceCodeProUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/source-code-pro@4.5.12/index.css',\r\n);\r\n\r\nexport const fontSpaceMonoUrl = /* @__PURE__ */ getUrl('@fontsource/space-mono@4.5.10/index.css');\r\n\r\nexport const fontSudoVarUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/sudo-var');\r\n\r\nexport const fontUbuntuMonoUrl = /* @__PURE__ */ getUrl('@fontsource/ubuntu-mono@4.5.11/index.css');\r\n\r\nexport const fontVictorMonoUrl = /* @__PURE__ */ getUrl('victormono@1.5.4/dist/index.css');\r\n\r\nexport const fscreenUrl = /* @__PURE__ */ getUrl('fscreen@1.2.0/dist/fscreen.esm.js');\r\n\r\nexport const githubMarkdownCss = /* @__PURE__ */ getUrl(\r\n  'github-markdown-css@5.1.0/github-markdown.css',\r\n);\r\n\r\nexport const go2jsBaseUrl = /* @__PURE__ */ getUrl('@live-codes/go2js@0.4.0/build/');\r\n\r\nexport const graphreCdnUrl = /* @__PURE__ */ getUrl('graphre@0.1.3/dist/graphre.js');\r\n\r\nexport const handlebarsBaseUrl = /* @__PURE__ */ getUrl('handlebars@4.7.7/dist/');\r\n\r\nexport const highlightjsUrl = /* @__PURE__ */ getModuleUrl('highlight.js@11.5.1');\r\n\r\nexport const hintCssUrl = /* @__PURE__ */ getUrl('hint.css@2.7.0/hint.css');\r\n\r\nexport const hpccJsCdnUrl = /* @__PURE__ */ getUrl('@hpcc-js/wasm@2.13.0/dist/index.js');\r\n\r\nexport const imbaBaseUrl = /* @__PURE__ */ getUrl('imba@2.0.0-alpha.229/dist/');\r\n\r\nexport const jestLiteUrl = /* @__PURE__ */ getUrl('jest-lite@1.0.0-alpha.4/dist/core.js');\r\n\r\nexport const jestTypesUrl = /* @__PURE__ */ getUrl('@types/jest@27.4.1/index.d.ts');\r\n\r\nexport const jsclUrl = /* @__PURE__ */ getUrl(\r\n  'gh:jscl-project/jscl-project.github.io@efd3aecdba496d132ed650b7b5be976fd0ca278f/jscl.js',\r\n);\r\n\r\nexport const jsZipUrl = /* @__PURE__ */ getUrl('jszip@3.10.1/dist/jszip.js');\r\n\r\nexport const juliaWasmBaseUrl = /* @__PURE__ */ getUrl('@chriskoch/julia-wasm@1.0.4');\r\n\r\nexport const liquidJsUrl = /* @__PURE__ */ getUrl('liquidjs@10.8.2/dist/liquid.browser.min.js');\r\n\r\nexport const localforageUrl = /* @__PURE__ */ getUrl('localforage@1.10.0/dist/localforage.js');\r\n\r\nexport const luaUrl = /* @__PURE__ */ getUrl('fengari-web@0.1.4/dist/fengari-web.js');\r\n\r\nexport const lunaObjViewerStylesUrl = /* @__PURE__ */ getUrl(\r\n  'luna-object-viewer@0.2.0/luna-object-viewer.css',\r\n);\r\n\r\nexport const lunaConsoleStylesUrl = /* @__PURE__ */ getUrl('luna-console@0.2.1/luna-console.css');\r\n\r\nexport const malinaVersion = '0.6.64';\r\nexport const malinaUrl = /* @__PURE__ */ getUrl(`malinajs@${malinaVersion}/malina.js`);\r\n\r\nexport const markedUrl = /* @__PURE__ */ getUrl('marked@5.0.4/marked.min.js');\r\n\r\nexport const mermaidCdnUrl = /* @__PURE__ */ getUrl('mermaid@10.2.2/dist/mermaid.esm.mjs');\r\n\r\nexport const mjmlUrl = /* @__PURE__ */ getUrl('mjml-browser@4.14.1/lib/index.js');\r\n\r\nexport const monacoEmacsUrl = /* @__PURE__ */ getUrl('monaco-emacs@0.3.0/dist/monaco-emacs.js');\r\n\r\nexport const monacoVimUrl = /* @__PURE__ */ getUrl('monaco-vim@0.4.0/dist/monaco-vim.js');\r\n\r\nexport const mustacheUrl = /* @__PURE__ */ getUrl('mustache@4.2.0/mustache.js');\r\n\r\nexport const nomnomlCdnUrl = /* @__PURE__ */ getUrl('nomnoml@1.6.1/dist/nomnoml.js');\r\n\r\nexport const normalizeCssUrl = /* @__PURE__ */ getUrl('normalize.css@8.0.1/normalize.css');\r\n\r\nexport const nunjucksBaseUrl = /* @__PURE__ */ getUrl('nunjucks@3.2.4/browser/');\r\n\r\nexport const opalBaseUrl = /* @__PURE__ */ getUrl('https://cdn.opalrb.com/opal/1.7.3/');\r\n\r\nexport const parinferUrl = /* @__PURE__ */ getUrl('parinfer@3.13.1/parinfer.js');\r\n\r\nexport const pintoraUrl = /* @__PURE__ */ getUrl(\r\n  '@pintora/standalone@0.6.2/lib/pintora-standalone.umd.js',\r\n);\r\n\r\nexport const plotlyCdnUrl = /* @__PURE__ */ getUrl('plotly.js@2.23.2/dist/plotly.js');\r\n\r\nexport const postcssImportUrlUrl = /* @__PURE__ */ getUrl(\r\n  '@live-codes/postcss-import-url@0.1.2/dist/postcss-import-url.js',\r\n);\r\n\r\nexport const prettierBaseUrl = /* @__PURE__ */ getUrl('prettier@2.5.1/');\r\n\r\nexport const prettierPhpUrl = /* @__PURE__ */ getUrl('@prettier/plugin-php@0.18.0/standalone.js');\r\n\r\nexport const prismBaseUrl = /* @__PURE__ */ getUrl('prismjs@1.26.0/components/');\r\n\r\nexport const pyodideBaseUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.jsdelivr.net/pyodide/v0.23.2/full/',\r\n);\r\n\r\nexport const qrcodeUrl = /* @__PURE__ */ getUrl('qrcode-generator@1.4.4/qrcode.js');\r\n\r\nexport const quillEditorCdnBaseUrl = /* @__PURE__ */ getUrl('quill@2.0.0-dev.4/dist/');\r\n\r\nexport const quillHtmlEditUrl = /* @__PURE__ */ getUrl(\r\n  'quill-html-edit-button@2.2.7/dist/quill.htmlEditButton.min.js',\r\n);\r\n\r\nexport const quillBlotFormaterUrl = /* @__PURE__ */ getUrl(\r\n  'quill-blot-formatter@1.0.5/dist/quill-blot-formatter.min.js',\r\n);\r\n\r\nexport const quillBetterTableBaseUrl = /* @__PURE__ */ getUrl('quill-better-table@1.2.10/dist/');\r\n\r\nexport const requireUrl = /* @__PURE__ */ getUrl('requirejs@2.3.6/require.js');\r\n\r\nexport const reasonCompilerUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v9.1.2/compiler.js',\r\n);\r\n\r\nexport const reasonReactUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v9.1.2/%40rescript/react/cmij.js',\r\n);\r\n\r\nexport const reasonStdLibBaseUrl = /* @__PURE__ */ getUrl('@rescript/std@9.1.3/lib/es6/');\r\n\r\nexport const rescriptCompilerUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v10.1.2/compiler.js',\r\n);\r\n\r\nexport const rescriptReactUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v10.1.2/%40rescript/react/cmij.js',\r\n);\r\n\r\nexport const rescriptStdLibBaseUrl = /* @__PURE__ */ getUrl('@rescript/std@10.1.2/lib/es6/');\r\n\r\nexport const resetCssUrl = /* @__PURE__ */ getUrl('reset-css@5.0.1/reset.css');\r\n\r\nexport const riotBaseUrl = /* @__PURE__ */ getUrl('riot@7.1.0/');\r\n\r\nexport const snackbarUrl = /* @__PURE__ */ getUrl('@snackbar/core@1.7.0/dist/snackbar.css');\r\n\r\nexport const spacingJsUrl = /* @__PURE__ */ getUrl('spacingjs@1.0.7/dist/bundle.js');\r\n\r\nexport const sqlFormatterUrl = /* @__PURE__ */ getUrl(\r\n  'sql-formatter@12.2.1/dist/sql-formatter.min.js',\r\n);\r\n\r\nexport const sqljsBaseUrl = /* @__PURE__ */ getUrl('sql.js@1.8.0/dist/');\r\n\r\nexport const stencilUrl = /* @__PURE__ */ getUrl('@stencil/core@3.2.2/compiler/stencil.js');\r\n\r\nexport const stylisUrl = /* @__PURE__ */ getUrl('stylis@4.2.0/dist/umd/stylis.js');\r\n\r\nexport const svgbobWasmCdnUrl = /* @__PURE__ */ getUrl('svgbob-wasm@0.4.1-a0/svgbob_wasm_bg.wasm');\r\n\r\nexport const tagifyBaseUrl = /* @__PURE__ */ getUrl('@yaireo/tagify@4.9.6/dist/');\r\n\r\nexport const tailwindcssUrl = /* @__PURE__ */ getUrl(\r\n  '@mhsdesign/jit-browser-tailwindcss@0.3.0/dist/cdn.min.js',\r\n);\r\n\r\nexport const tauPrologBaseUrl = /* @__PURE__ */ getUrl('tau-prolog@0.3.4/modules/');\r\n\r\nexport const tealUrl = /* @__PURE__ */ getUrl(\r\n  'gh:teal-language/tl@d2fc36b5ff9a52d7265e63eb74cce70fd1cdbcb2/tl.lua',\r\n);\r\n\r\nexport const twigUrl = /* @__PURE__ */ getUrl('twig@1.16.0/twig.min.js');\r\n\r\nexport const typescriptUrl = /* @__PURE__ */ getUrl('typescript@5.1.3/lib/typescript.js');\r\n\r\nexport const uniterUrl = /* @__PURE__ */ getUrl('uniter@2.18.0/dist/uniter.js');\r\n\r\nexport const vegaCdnUrl = /* @__PURE__ */ getUrl('vega@5.25.0/build/vega.js');\r\n\r\nexport const vegaLiteCdnUrl = /* @__PURE__ */ getUrl('vega-lite@5.9.3/build/vega-lite.js');\r\n\r\nexport const vue3CdnUrl = /* @__PURE__ */ getUrl('vue@3');\r\n\r\nexport const vue2CdnUrl = /* @__PURE__ */ getUrl('vue@2');\r\n\r\nexport const vueSfcLoaderCdnBaseUrl = /* @__PURE__ */ getUrl('vue3-sfc-loader@0.8.4/dist/');\r\n\r\nexport const wabtjsUrl = /* @__PURE__ */ getUrl('wabt@1.0.32/index.js');\r\n\r\nexport const waveDromBaseUrl = /* @__PURE__ */ getUrl('wavedrom@3.2.0/');\r\n\r\nexport const webRBaseUrl = /* @__PURE__ */ getUrl('@r-wasm/webr@0.1.1/dist/');\r\n", "/* eslint-disable no-console */\nimport { webRBaseUrl } from '../../vendors';\n\nconst importPattern = /((?:(?:library)|(?:require))\\s*?\\(\\s*?((?:\".*?\")|(?:'.*?')|(?:.*?))\\s*?\\))/g;\nconst removeComments = (src: string) => src.replace(/#.*$/gm, '');\n\nconst getImports = (code: string) =>\n  [...[...removeComments(code).matchAll(new RegExp(importPattern))]]\n    .map((arr) => arr[2].replace(/\"/g, '').replace(/'/g, '').split(',')[0].trim())\n    .filter(Boolean);\n\ninterface RunOptions {\n  code?: string;\n  container?: Element | string | null;\n  canvasHeight?: number;\n  canvasWidth?: number;\n  env?: any;\n}\n\nconst defaultConfig = {\n  canvasHeight: 309,\n  canvasWidth: 500,\n};\n\nlivecodes.r.packages = [];\nlivecodes.r.run =\n  livecodes.r.run ||\n  (async ({ code, container, canvasHeight, canvasWidth, env }: RunOptions = {}) => {\n    livecodes.r.output = '';\n\n    if (container !== null && livecodes.r.config?.container !== null) {\n      if (typeof container === 'string') {\n        container = document.querySelector(container);\n      } else if (typeof livecodes.r.config?.container === 'string') {\n        container = document.querySelector(livecodes.r.config.container);\n      }\n      container = container || livecodes.r.config?.container || document.body;\n    }\n\n    canvasHeight =\n      Number(canvasHeight) ||\n      Number(livecodes.r.config?.canvasHeight) ||\n      defaultConfig.canvasHeight;\n    canvasWidth =\n      Number(canvasWidth) || Number(livecodes.r.config?.canvasWidth) || defaultConfig.canvasWidth;\n\n    if (code == null) {\n      code = '';\n      const scripts = document.querySelectorAll('script[type=\"text/r\"]');\n      scripts.forEach((script) => (code += script.innerHTML + '\\n'));\n    }\n\n    const imports = getImports(code).filter((pkg) => !livecodes.r.packages.includes(pkg));\n    if (imports.length > 0) {\n      await initialization;\n      console.log('Installing packages: ' + imports.join(', '));\n      const pkgCode = imports.map((pkg) => `webr::install(\"${pkg}\")\\n`).join('');\n      await livecodes.r.run({ code: pkgCode, container: null });\n      livecodes.r.packages = [...new Set([...livecodes.r.packages, ...imports])];\n    }\n\n    parent.postMessage({ type: 'loading', payload: true }, '*');\n\n    let result: { output: Array<{ type: 'stdout' | 'stderr'; data: string[] }> } | undefined;\n    if (code.trim()) {\n      await initialization;\n\n      // based on https://github.com/georgestagg/webr-vue-example-editor/blob/main/src/components/WebREditor.vue\n      const { webR, webRCodeShelter } = livecodes.r;\n\n      let canvas: HTMLCanvasElement | null = null;\n      const canvasList: HTMLCanvasElement[] = [];\n      await webR.init();\n      await webR.evalRVoid(`canvas(width=${canvasWidth}, height=${canvasHeight})`);\n      result = await webRCodeShelter.captureR(code, {\n        withAutoprint: true,\n        captureStreams: true,\n        captureConditions: false,\n        env: env || livecodes.r.config?.env || webR.objs.emptyEnv,\n      });\n\n      try {\n        await webR.evalRVoid('dev.off()');\n\n        const getOutput = (type: 'stdout' | 'stderr') =>\n          result?.output\n            .filter((evt) => evt.type === type)\n            .map((evt) => evt.data)\n            .join('\\n') || '';\n\n        const stdout = getOutput('stdout');\n        const stderr = getOutput('stderr');\n        if (stderr.trim()) {\n          console.log(stderr);\n        }\n\n        livecodes.r.output = stdout;\n\n        const msgs = await webR.flush();\n\n        if (container && typeof container !== 'string') {\n          msgs.forEach((msg: { type: string; data: string }) => {\n            if (msg.type === 'canvasExec') {\n              if (!canvas || msg.data.startsWith('clearRect(0')) {\n                canvas = document.createElement('canvas');\n                canvas.setAttribute('width', String(2 * canvasWidth!));\n                canvas.setAttribute('height', String(2 * canvasHeight!));\n                canvas.style.width = `${canvasWidth}px`;\n                canvas.style.display = 'block';\n                canvas.style.margin = 'auto';\n                canvasList.push(canvas);\n              }\n              // eslint-disable-next-line no-new-func\n              Function(`this.getContext('2d').${msg.data}`).bind(canvas)();\n            }\n          });\n\n          container.innerHTML = '';\n          const pre = document.createElement('pre');\n          if (/\\S/.test(stdout)) {\n            const code = document.createElement('code');\n            code.innerText = stdout;\n            pre.appendChild(code);\n          } else {\n            pre.style.visibility = 'hidden';\n          }\n          container.appendChild(pre);\n\n          for (const canvas of canvasList) {\n            const div = document.createElement('div');\n            div.appendChild(canvas);\n            container.appendChild(div);\n          }\n        }\n      } finally {\n        webRCodeShelter.purge();\n      }\n    }\n\n    parent.postMessage({ type: 'loading', payload: false }, '*');\n    return result;\n  });\n\nconst initialization = (async () => {\n  parent.postMessage({ type: 'loading', payload: true }, '*');\n  const getChannelType = () => {\n    try {\n      new SharedArrayBuffer(1);\n      return 1;\n    } catch {\n      return 2;\n    }\n  };\n  const init = async () => {\n    if (livecodes.r.ready) {\n      await livecodes.r.webR.init();\n      return;\n    }\n    console.log('Loading WebR...');\n    const { WebR } = await import(webRBaseUrl + 'webr.mjs');\n    livecodes.r.webR = new WebR({\n      baseUrl: webRBaseUrl,\n      channelType: getChannelType(),\n    });\n    await livecodes.r.webR.init();\n    livecodes.r.webRCodeShelter = await new livecodes.r.webR.Shelter();\n    livecodes.r.ready = true;\n    console.log('WebR loaded.');\n  };\n  await init();\n  parent.postMessage({ type: 'loading', payload: false }, '*');\n})();\n\nlivecodes.r.loaded = initialization;\n"],
  "mappings": "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",
  "names": ["moduleCDNs", "npmCDNs", "ghCDNs", "modulesService", "moduleName", "isModule", "defaultCDN", "moduleUrl", "getCdnUrl", "path", "cdn", "getAppCDN", "testModule", "preferredCDN", "cdns", "modName", "post", "i", "TEMPLATES", "pattern", "template", "getUrl", "getModuleUrl", "modulesService", "malinaVersion", "malinaUrl", "getUrl", "webRBaseUrl", "getUrl", "importPattern", "removeComments", "src", "getImports", "code", "arr", "defaultConfig", "container", "canvasHeight", "canvasWidth", "env", "script", "imports", "pkg", "initialization", "pkgCode", "result", "webR", "webRCodeShelter", "canvas", "canvasList", "getOutput", "type", "evt", "stdout", "stderr", "msgs", "msg", "pre", "div", "getChannelType", "WebR", "webRBaseUrl"]
}
