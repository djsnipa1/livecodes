"use strict";(()=>{var a=t=>{function e(s){return typeof HTMLElement=="object"?s instanceof HTMLElement:s&&typeof s=="object"&&s!==null&&s.nodeType===1&&typeof s.nodeName=="string"}function r(s){return typeof Node=="object"?s instanceof Node:s&&typeof s=="object"&&typeof s.nodeType=="number"&&typeof s.nodeName=="string"}function o(s){return Object.prototype.toString.call(s)==="[object HTMLDocument]"}function c(s){return Object.prototype.toString.call(s)==="[object Window]"}let i=Object.prototype.toString.call(t);if(t===void 0)return"undefined";if(t===null)return"null";if(c(t))return"window";if(o(t))return"document";if(e(t))return"element";if(r(t))return"node";if(t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t))return"buffer";if(typeof window=="object"&&t===window)return"window";if(typeof global=="object"&&t===global)return"global";if(typeof t=="number"&&isNaN(t)||typeof t=="object"&&i==="[object Number]"&&isNaN(t))return"nan";if(typeof t=="object"&&i.substr(-6)==="Event]")return"event";if(i.substr(0,12)==="[object HTML")return"element";if(i.substr(0,12)==="[object Node")return"node";let n=i.match(/\[object\s*([^\]]+)\]/);return n?n[1].toLowerCase():"object"};function p(t){return t.map(e=>{switch(a(e)){case"window":case"function":case"date":case"symbol":return{type:a(e),content:e.toString()};case"document":return{type:a(e),content:e.documentElement.outerHTML};case"element":return{type:a(e),content:e.outerHTML};case"node":return{type:a(e),content:e.textContent};case"array":return{type:a(e),content:e.map(r=>p([r])[0].content)};case"object":return{type:a(e),content:Object.keys(e).reduce((r,o)=>({...r,[o]:p([e[o]])[0].content}),{})};case"error":return{type:a(e),content:e.constructor.name+": "+e.message}}return{type:"other",content:e}})}var u=()=>{window.console=new Proxy(console,{get(t,e){return function(...r){if(!(e in t)){let o=`Uncaught TypeError: console.${String(e)} is not a function`;t.error(o),parent.postMessage({type:"console",method:"error",args:p([o])},"*");return}t[e](...r),parent.postMessage({type:"console",method:e,args:p(r)},"*")}}}),window.addEventListener("error",t=>{parent.postMessage({type:"console",method:"error",args:p([t.message])},"*")})};var h=["jspm","skypack"],m=["jsdelivr","unpkg","fastly.jsdelivr"],y=["jsdelivr.gh","statically"],l={getModuleUrl:(t,{isModule:e=!0,defaultCDN:r="jspm"}={})=>{t=t.replace(/#nobundle/g,"");let o=f(t,e,r);return o||(e?"https://jspm.dev/"+t:"https://cdn.jsdelivr.net/npm/"+t)},getUrl:(t,e)=>t.startsWith("http")?t:f(t,!1,e||d())||t,cdnLists:{npm:m,module:h,gh:y},checkCDNs:async(t,e)=>{let r=[e,...l.cdnLists.npm].filter(Boolean);for(let o of r)try{if((await fetch(l.getUrl(t,o),{method:"HEAD"})).ok)return o}catch{}return l.cdnLists.npm[0]}},d=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||l.cdnLists.npm[0]}catch{return l.cdnLists.npm[0]}},f=(t,e,r)=>{let o=e&&t.startsWith("unpkg:")?"?module":"";t.startsWith("gh:")?t=t.replace("gh",y[0]):t.includes(":")||(t=(r||(e?h[0]:m[0]))+":"+t);for(let c of g){let[i,n]=c;if(i.test(t))return t.replace(i,n)+o}return null},g=[[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(npm:)(.+)/i,"https://jspm.dev/$2"],[/^(node:)(.+)/i,"https://jspm.dev/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(jsdelivr.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm.run:)(.+)/i,"https://esm.run/$2"],[/^(esm.sh:)(.+)/i,"https://esm.sh/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];u();window.initCompiler=async t=>{let e=t.baseUrl,r=e+"compile.worker.15042ad2af4c9af8c8495fe733df6be0.js",o=new URL(e).origin,c=`self.appCDN='${d()}';importScripts("${r}");`,i=new Worker("data:text/javascript;base64,"+btoa(c));await new Promise(n=>{let s=document.createElement("script");s.src=e+"compile.page.609e2c4445ff4d227734df61c6735593.js",s.onload=()=>n(),document.head.appendChild(s)}),i.addEventListener("message",async function(n){if(n.data.type==="compileInCompiler"){i.postMessage(n.data);return}n.data.payload&&window.compilers&&window.compilers[n.data.payload.language]&&(n.data.payload.compiled=await window.compilers[n.data.payload.language](n.data.payload.compiled,{config:n.data.payload.config,language:n.data.payload.language,baseUrl:e,options:n.data.payload.options,worker:i})),n.data.trigger==="compileInCompiler"?i.postMessage({...n.data,from:"compiler"}):parent.postMessage({...n.data,from:"compiler"},o)}),window.addEventListener("message",async function(n){i.postMessage(n.data)}),i.postMessage(t)};})();
//# sourceMappingURL=compiler-utils.js.map
