{
  "version": 3,
  "sources": ["../../node_modules/lz-string/libs/lz-string.js", "../../src/livecodes/utils/utils.ts", "../../src/livecodes/services/modules.ts", "../../src/livecodes/vendors.ts", "../../src/livecodes/services/allowed-origin.ts", "../../src/livecodes/utils/compression.ts", "../../src/livecodes/services/share.ts", "../../src/livecodes/compiler/import-map.ts", "../../src/livecodes/UI/selectors.ts", "../../src/livecodes/services/pkgInfo.ts", "../../src/livecodes/editor/monaco/monaco.ts"],
  "sourcesContent": ["// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n", "import type { Config, Language, Processor, WorkerMessageEvent } from '../models';\r\n\r\nexport const debounce = (fn: (...x: any[]) => any, delay: number | (() => number)) => {\r\n  let timeout: any;\r\n\r\n  return (...args: unknown[]) => {\r\n    if (timeout) clearTimeout(timeout);\r\n    timeout = setTimeout(() => fn.apply(null, args), typeof delay === 'function' ? delay() : delay);\r\n  };\r\n};\r\n\r\nexport const decodeHTML = (html: string) => {\r\n  const txt = document.createElement('textarea');\r\n  txt.innerHTML = html;\r\n  return txt.value;\r\n};\r\n\r\nexport const encodeHTML = (html: string) =>\r\n  html\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/'/g, '&#39;')\r\n    .replace(/\"/g, '&#34;');\r\n\r\nexport const escapeScript = (code: string) => code.replace(/<\\/script>/g, '<\\\\/script>');\r\n\r\nexport const escapeCode = (code: string, slash = true) =>\r\n  code\r\n    .replace(/\\\\/g, slash ? '\\\\\\\\' : '\\\\')\r\n    .replace(/`/g, '\\\\`')\r\n    .replace(/<\\/script>/g, '<\\\\/script>');\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport const pipe = (...fns: Function[]) =>\r\n  fns.reduce(\r\n    (f, g) =>\r\n      (...args: any) =>\r\n        g(f(...args)),\r\n  );\r\n\r\n// replace non-alphanumeric with underscore\r\nexport const safeName = (name: string, symbol = '_') => name.replace(/[\\W]+/g, symbol);\r\n\r\n// from https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\r\n// added safari (on mac & ios): monaco editor is broken on safari\r\nexport const isMobile = () => {\r\n  let mobile = false;\r\n  const userAgent = navigator.userAgent.toLowerCase();\r\n  (function (a) {\r\n    if (\r\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\r\n        a,\r\n      ) ||\r\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\r\n        a.substr(0, 4),\r\n      )\r\n    ) {\r\n      mobile = true;\r\n    }\r\n  })(userAgent || navigator.vendor || (window as any).opera);\r\n\r\n  const safari = userAgent.indexOf('safari') > -1 && userAgent.indexOf('chrome') === -1; // chrome says it is safari!\r\n\r\n  return mobile || safari;\r\n};\r\n\r\nexport const isRelativeUrl = (url?: string) =>\r\n  !url?.startsWith('http') && !url?.startsWith('data:');\r\n\r\nexport const getAbsoluteUrl = (url: string, baseUrl = document.baseURI) =>\r\n  isRelativeUrl(url) ? new URL(url, baseUrl).href : url;\r\n\r\nexport const cloneObject = <T>(x: Record<string, any>): T => JSON.parse(JSON.stringify(x));\r\n\r\nexport const objectMap = (\r\n  obj: Record<string, any>,\r\n  fn: (value: any, key: string, index: number) => any,\r\n) => Object.fromEntries(Object.entries(obj).map(([k, v], i) => [k, fn(v, k, i)]));\r\n\r\nexport const objectFilter = (\r\n  obj: Record<string, any>,\r\n  predicate: (value: any, key: string, index: number) => any,\r\n) => Object.fromEntries(Object.entries(obj).filter(([k, v], i) => predicate(v, k, i)));\r\n\r\nexport const copyToClipboard = (text: string) => {\r\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\r\n    const textarea = document.createElement('textarea');\r\n    textarea.textContent = text;\r\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n    try {\r\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\r\n    } catch (ex) {\r\n      // eslint-disable-next-line no-console\r\n      console.warn('Copy to clipboard failed.', ex);\r\n      return false;\r\n    } finally {\r\n      document.body.removeChild(textarea);\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const stringToValidJson = (str: string) =>\r\n  str\r\n    .replace(/'[^'\"]*'(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g, function replaceSingleQuotes(matchedStr) {\r\n      return '\"' + matchedStr.substring(1, matchedStr.length - 1) + '\"';\r\n    })\r\n    .replace(\r\n      /(\\w+(?=([^\"\\\\]*(\\\\.|\"([^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^\"]*$))(\\s*:)(?!(\\w*)(?:\"))/gm,\r\n      function quoteNonQuoted(matchedStr) {\r\n        return '\"' + matchedStr.substring(0, matchedStr.length - 1).trimEnd() + '\":';\r\n      },\r\n    )\r\n    .replace(/,\\s*([\\]}])/g, '$1'); // remove trailing comma\r\n\r\nexport const stringify = (obj: any, pretty = false) => {\r\n  try {\r\n    return JSON.stringify(obj, undefined, pretty ? 2 : undefined);\r\n  } catch {\r\n    return '';\r\n  }\r\n};\r\n\r\nexport const getRandomString = () => String(Math.random()) + '-' + Date.now().toFixed();\r\n\r\nexport const downloadFile = (filename: string, extension: string, content: string) => {\r\n  const a = document.createElement('a');\r\n  a.style.display = 'none';\r\n  a.href = content;\r\n  a.download = safeName(filename) + '.' + extension;\r\n  a.click();\r\n  a.remove();\r\n};\r\n\r\nexport const loadScript = (url: string, name?: string) =>\r\n  new Promise((resolve, reject) => {\r\n    if (name && (globalThis as any)[name]) {\r\n      return resolve((globalThis as any)[name]);\r\n    }\r\n\r\n    // if running in web worker\r\n    if (typeof (globalThis as any).importScripts === 'function') {\r\n      (globalThis as any).importScripts(url);\r\n      if (name && (globalThis as any)[name]) {\r\n        return resolve((globalThis as any)[name]);\r\n      }\r\n      return resolve(globalThis);\r\n    }\r\n\r\n    const script = document.createElement('script');\r\n    script.src = url;\r\n    script.async = true;\r\n    const removeEventListeners = () => {\r\n      script.removeEventListener('load', onLoad);\r\n      script.removeEventListener('error', onError);\r\n    };\r\n    const onLoad = () => {\r\n      removeEventListeners();\r\n      if (!name) {\r\n        return resolve('loaded: ' + url);\r\n      }\r\n      const i = setInterval(() => {\r\n        if ((window as any)[name]) {\r\n          clearInterval(i);\r\n          return resolve((window as any)[name]);\r\n        }\r\n      }, 5);\r\n    };\r\n    const onError = () => {\r\n      removeEventListeners();\r\n      reject('failed to load: ' + url);\r\n    };\r\n    script.addEventListener('load', onLoad);\r\n    script.addEventListener('error', onError);\r\n    document.head.appendChild(script);\r\n  });\r\n\r\nexport const loadStylesheet = (url: string, id?: string, insertBefore?: string) => {\r\n  if (id && document.getElementById(id)) return;\r\n  const stylesheet = document.createElement('link');\r\n  stylesheet.rel = 'stylesheet';\r\n  stylesheet.href = url;\r\n  stylesheet.id = id || 'styles-' + getRandomString();\r\n  document.head.insertBefore(\r\n    stylesheet,\r\n    insertBefore ? document.querySelector(insertBefore) : null,\r\n  );\r\n};\r\n\r\nexport const typedArrayToBuffer = (array: Uint8Array): ArrayBuffer =>\r\n  array.buffer.slice(array.byteOffset, array.byteLength + array.byteOffset);\r\n\r\nexport const getDate = () => {\r\n  let date = new Date();\r\n  const offset = date.getTimezoneOffset();\r\n  date = new Date(date.getTime() - offset * 60 * 1000);\r\n  return date.toISOString().split('T')[0];\r\n};\r\n\r\nexport const handleFetchError = (res: Response) => (res.ok ? res : Promise.reject());\r\nexport const fetchWithHandler = (input: RequestInfo, init?: RequestInit) =>\r\n  fetch(input, init).then(handleFetchError);\r\n\r\nexport const blobToBase64 = (file: Blob): Promise<string> =>\r\n  new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => (typeof reader.result === 'string' ? resolve(reader.result) : reject());\r\n    reader.onerror = (error) => reject(error);\r\n  });\r\n\r\nexport const Uint8ArrayToBase64 = (u8: Uint8Array) => {\r\n  const CHUNK_SZ = 0x8000;\r\n  const c = [];\r\n  for (let i = 0; i < u8.length; i += CHUNK_SZ) {\r\n    c.push(String.fromCharCode.apply(null, (u8 as any).subarray(i, i + CHUNK_SZ)));\r\n  }\r\n  return btoa(c.join(''));\r\n};\r\n\r\nexport const base64ToUint8Array = (str: string) =>\r\n  new Uint8Array(\r\n    atob(str)\r\n      .split('')\r\n      .map((c) => c.charCodeAt(0)),\r\n  );\r\n\r\nexport const typedArraysAreEqual = (a: Uint8Array, b: Uint8Array) => {\r\n  if (a === b) {\r\n    return true;\r\n  }\r\n  if (a.byteLength !== b.byteLength) {\r\n    return false;\r\n  }\r\n  for (let i = 0; i < a.byteLength; i++) {\r\n    if (a[i] !== b[i]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const getWorkerDataURL = (url: string) => {\r\n  const content = `importScripts(\"${url}\");`;\r\n  return 'data:text/javascript;base64,' + btoa(content);\r\n};\r\n\r\nexport const removeComments = (src: string) =>\r\n  src.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, '$1');\r\n\r\nexport const removeStrings = (src: string) =>\r\n  src\r\n    .replace(/'[^\\n']*'/gm, \"''\")\r\n    .replace(/\"[^\\n\"]*\"/gm, '\"\"')\r\n    .replace(/`[^`]*`/gm, '``');\r\n\r\nexport const removeCommentsAndStrings = (src: string) => removeStrings(removeComments(src));\r\n\r\nexport const getLanguageCustomSettings = (language: Language | Processor, config: Config) => ({\r\n  ...(config.customSettings as any)[language],\r\n});\r\n\r\nexport const getValidUrl = (url?: string) => {\r\n  if (!url) return null;\r\n  let validUrl = null;\r\n  if (url.startsWith('http') || url.startsWith('data:')) {\r\n    try {\r\n      validUrl = new URL(url).href;\r\n    } catch {\r\n      try {\r\n        validUrl = new URL(decodeURIComponent(url)).href;\r\n      } catch {\r\n        //\r\n      }\r\n    }\r\n  }\r\n  return validUrl;\r\n};\r\n\r\nexport const runOrContinue =\r\n  <T>(fn: (x: T) => Promise<T>, catchFn?: (err: unknown) => void) =>\r\n  async (x: T): Promise<T> => {\r\n    try {\r\n      const result = await fn(x);\r\n      return result;\r\n    } catch (error) {\r\n      if (typeof catchFn === 'function') {\r\n        catchFn(error);\r\n      }\r\n      return x;\r\n    }\r\n  };\r\n\r\nexport const getFileExtension = (file: string) => file.split('.')[file.split('.').length - 1];\r\n\r\nexport const isInIframe = () => {\r\n  try {\r\n    return window.self !== window.top;\r\n  } catch {\r\n    return true;\r\n  }\r\n};\r\n\r\nexport const indentCode = (code: string, spaces: number, skipFirstLine = true) =>\r\n  (skipFirstLine ? '' : ' '.repeat(spaces)) + code.split('\\n').join('\\n' + ' '.repeat(spaces));\r\n\r\nexport const hideOnClickOutside = (element: HTMLElement) => {\r\n  const hideElement = () => {\r\n    element.style.display = 'none';\r\n    removeListeners();\r\n    (window as any).watchingEscape = false;\r\n  };\r\n\r\n  const outsideClickListener = (event: MouseEvent) => {\r\n    if (!element.contains(event.target as Node) && isVisible(element)) {\r\n      hideElement();\r\n    }\r\n  };\r\n\r\n  const escapeListener = (event: KeyboardEvent) => {\r\n    if (event.key === 'Escape') {\r\n      hideElement();\r\n      event.preventDefault();\r\n    }\r\n  };\r\n\r\n  const isVisible = (elem: HTMLElement) =>\r\n    !!elem && !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);\r\n\r\n  const removeListeners = () => {\r\n    document.removeEventListener('click', outsideClickListener);\r\n    document.removeEventListener('keydown', escapeListener);\r\n  };\r\n\r\n  document.addEventListener('click', outsideClickListener);\r\n  document.addEventListener('keydown', escapeListener);\r\n  (window as any).watchingEscape = true;\r\n\r\n  return {\r\n    clear: () => removeListeners(),\r\n  };\r\n};\r\n\r\nexport const callWorker = async <T = string, K = unknown>(\r\n  worker: Worker,\r\n  message: { method: T; args?: any },\r\n) =>\r\n  new Promise<K>((resolve) => {\r\n    const messageId = getRandomString();\r\n\r\n    const handler = (event: WorkerMessageEvent<T, K>) => {\r\n      const received = event.data;\r\n\r\n      if (received.method === message.method && received.messageId === messageId) {\r\n        worker.removeEventListener('message', handler);\r\n        resolve(received.data as K);\r\n      }\r\n    };\r\n    worker.addEventListener('message', handler);\r\n\r\n    worker.postMessage({\r\n      ...message,\r\n      messageId,\r\n    });\r\n  });\r\n\r\nexport const toCamelCase = (str: string) =>\r\n  str\r\n    .replace(/[-_.]+/g, ' ')\r\n    .trim()\r\n    .replace(/^([A-Z])|\\s+(\\w)/g, function (_match, p1, p2) {\r\n      if (p2) return p2.toUpperCase();\r\n      return p1.toLowerCase();\r\n    });\r\n\r\nexport const removeDuplicates = (arr: any[] | undefined) => Array.from(new Set(arr));\r\n", "import type { CDN } from '../models';\r\n\r\ndeclare const globalThis: { appCDN: CDN };\r\n\r\nconst moduleCDNs: CDN[] = ['jspm', 'skypack'];\r\nconst npmCDNs: CDN[] = ['jsdelivr', 'unpkg', 'fastly.jsdelivr'];\r\nconst ghCDNs: CDN[] = ['jsdelivr.gh', 'statically'];\r\n\r\nexport const modulesService = {\r\n  getModuleUrl: (\r\n    moduleName: string,\r\n    { isModule = true, defaultCDN = 'jspm' }: { isModule?: boolean; defaultCDN?: CDN } = {},\r\n  ) => {\r\n    moduleName = moduleName.replace(/#nobundle/g, '');\r\n\r\n    const moduleUrl = getCdnUrl(moduleName, isModule, defaultCDN);\r\n    if (moduleUrl) {\r\n      return moduleUrl;\r\n    }\r\n\r\n    return isModule\r\n      ? 'https://jspm.dev/' + moduleName\r\n      : 'https://cdn.jsdelivr.net/npm/' + moduleName;\r\n  },\r\n\r\n  getUrl: (path: string, cdn?: CDN) =>\r\n    path.startsWith('http') ? path : getCdnUrl(path, false, cdn || getAppCDN()) || path,\r\n\r\n  cdnLists: { npm: npmCDNs, module: moduleCDNs, gh: ghCDNs },\r\n\r\n  checkCDNs: async (testModule: string, preferredCDN?: CDN) => {\r\n    const cdns: CDN[] = [preferredCDN, ...modulesService.cdnLists.npm].filter(Boolean) as CDN[];\r\n    for (const cdn of cdns) {\r\n      try {\r\n        const res = await fetch(modulesService.getUrl(testModule, cdn), {\r\n          method: 'HEAD',\r\n        });\r\n        if (res.ok) return cdn;\r\n      } catch {\r\n        // continue;\r\n      }\r\n    }\r\n    // fall back to first\r\n    return modulesService.cdnLists.npm[0];\r\n  },\r\n};\r\n\r\nexport const getAppCDN = (): CDN => {\r\n  if (globalThis.appCDN) return globalThis.appCDN;\r\n  try {\r\n    const url = new URL(location.href);\r\n    return (url.searchParams.get('appCDN') as CDN) || modulesService.cdnLists.npm[0];\r\n  } catch {\r\n    return modulesService.cdnLists.npm[0] as CDN;\r\n  }\r\n};\r\n\r\nconst getCdnUrl = (modName: string, isModule: boolean, defaultCDN?: CDN) => {\r\n  const post = isModule && modName.startsWith('unpkg:') ? '?module' : '';\r\n  if (modName.startsWith('gh:')) {\r\n    modName = modName.replace('gh', ghCDNs[0]);\r\n  } else if (!modName.includes(':')) {\r\n    const prefix = defaultCDN || (isModule ? moduleCDNs[0] : npmCDNs[0]);\r\n    modName = prefix + ':' + modName;\r\n  }\r\n  for (const i of TEMPLATES) {\r\n    const [pattern, template] = i;\r\n    if (pattern.test(modName)) {\r\n      return modName.replace(pattern, template) + post;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n// based on https://github.com/neoascetic/rawgithack/blob/master/web/rawgithack.js\r\nconst TEMPLATES: Array<[RegExp, string]> = [\r\n  [/^(jspm:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(npm:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(node:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(skypack:)(.+)/i, 'https://cdn.skypack.dev/$2'],\r\n\r\n  [/^(jsdelivr:)(.+)/i, 'https://cdn.jsdelivr.net/npm/$2'],\r\n\r\n  [/^(fastly.jsdelivr:)(.+)/i, 'https://fastly.jsdelivr.net/npm/$2'],\r\n\r\n  [/^(jsdelivr.gh:)(.+)/i, 'https://cdn.jsdelivr.net/gh/$2'],\r\n\r\n  [/^(statically:)(.+)/i, 'https://cdn.statically.io/gh/$2'],\r\n\r\n  [/^(esm.run:)(.+)/i, 'https://esm.run/$2'],\r\n\r\n  [/^(esm.sh:)(.+)/i, 'https://esm.sh/$2'],\r\n\r\n  [/^(esbuild:)(.+)/i, 'https://esbuild.vercel.app/$2'],\r\n\r\n  [/^(bundle.run:)(.+)/i, 'https://bundle.run/$2'],\r\n\r\n  [/^(unpkg:)(.+)/i, 'https://unpkg.com/$2'],\r\n\r\n  [/^(bundlejs:)(.+)/i, 'https://deno.bundlejs.com/?file&q=$2'],\r\n\r\n  [/^(bundle:)(.+)/i, 'https://deno.bundlejs.com/?file&q=$2'],\r\n\r\n  [/^(deno:)(.+)/i, 'https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts'],\r\n\r\n  [/^(https:\\/\\/deno\\.land\\/.+)/i, 'https://deno.bundlejs.com/?file&q=$1'],\r\n\r\n  [\r\n    /^(github:|https:\\/\\/github\\.com\\/)(.[^\\/]+?)\\/(.[^\\/]+?)\\/(?!releases\\/)(?:(?:blob|raw)\\/)?(.+?\\/.+)/i,\r\n    'https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4',\r\n  ],\r\n\r\n  [/^(gist\\.github:)(.+?\\/[0-9a-f]+\\/raw\\/(?:[0-9a-f]+\\/)?.+)$/i, 'https://gist.githack.com/$2'],\r\n\r\n  [\r\n    /^(gitlab:|https:\\/\\/gitlab\\.com\\/)([^\\/]+.*\\/[^\\/]+)\\/(?:raw|blob)\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3',\r\n  ],\r\n  [\r\n    /^(bitbucket:|https:\\/\\/bitbucket\\.org\\/)([^\\/]+\\/[^\\/]+)\\/(?:raw|src)\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3',\r\n  ],\r\n\r\n  // snippet file URL from web interface, with revision\r\n  [\r\n    /^(bitbucket:)snippets\\/([^\\/]+\\/[^\\/]+)\\/revisions\\/([^\\/\\#\\?]+)(?:\\?[^#]*)?(?:\\#file-(.+?))$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4',\r\n  ],\r\n  // snippet file URL from web interface, no revision\r\n  [\r\n    /^(bitbucket:)snippets\\/([^\\/]+\\/[^\\/\\#\\?]+)(?:\\?[^#]*)?(?:\\#file-(.+?))$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3',\r\n  ],\r\n  // snippet file URLs from REST API\r\n  [\r\n    /^(bitbucket:)\\!api\\/2.0\\/snippets\\/([^\\/]+\\/[^\\/]+\\/[^\\/]+)\\/files\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/files/$3',\r\n  ],\r\n  [\r\n    /^(api\\.bitbucket:)2.0\\/snippets\\/([^\\/]+\\/[^\\/]+\\/[^\\/]+)\\/files\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/files/$3',\r\n  ],\r\n\r\n  [/^(rawgit:)(.+?\\/[0-9a-f]+\\/raw\\/(?:[0-9a-f]+\\/)?.+)$/i, 'https://gist.githack.com/$2'],\r\n  [\r\n    /^(rawgit:|https:\\/\\/raw\\.githubusercontent\\.com)(\\/[^\\/]+\\/[^\\/]+|[0-9A-Za-z-]+\\/[0-9a-f]+\\/raw)\\/(.+)/i,\r\n    'https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3',\r\n  ],\r\n];\r\n", "// eslint-disable-next-line import/no-internal-modules\r\nimport { modulesService } from './services/modules';\r\n\r\nconst { getUrl, getModuleUrl } = modulesService;\r\n\r\nexport const vendorsBaseUrl = // 'http://127.0.0.1:8081/';\r\n  /* @__PURE__ */ getUrl('@live-codes/browser-compilers@0.7.4/dist/');\r\n\r\nexport const acornUrl = /* @__PURE__ */ getUrl('acorn@8.8.2/dist/acorn.js');\r\n\r\nexport const artTemplateUrl = /* @__PURE__ */ getUrl('art-template@4.13.2/lib/template-web.js');\r\n\r\nexport const asciidocUrl = /* @__PURE__ */ getUrl(\r\n  '@asciidoctor/core@2.2.6/dist/browser/asciidoctor.js',\r\n);\r\n\r\nexport const assemblyscriptLoaderUrl = /* @__PURE__ */ getUrl(\r\n  '@assemblyscript/loader@0.27.5/umd/index.js',\r\n);\r\n\r\nexport const astringUrl = /* @__PURE__ */ getUrl('astring@1.8.1/dist/astring.min.js');\r\n\r\nexport const astroBaseUrl = /* @__PURE__ */ getUrl('@hatemhosny/astro-internal@0.0.4/');\r\n\r\nexport const astroWasmURL = /* @__PURE__ */ getUrl('@astrojs/compiler@0.9.2/astro.wasm');\r\n\r\nexport const autoCompleteUrl = /* @__PURE__ */ getUrl(\r\n  '@tarekraafat/autocomplete.js@10.2.6/dist/autoComplete.js',\r\n);\r\n\r\nexport const babelUrl = /* @__PURE__ */ getUrl('@babel/standalone@7.22.4/babel.js');\r\n\r\nexport const biwaschemeUrl = /* @__PURE__ */ getUrl('biwascheme@0.8.0/release/biwascheme.js');\r\n\r\nexport const blocklyCdnBaseUrl = /* @__PURE__ */ getUrl('blockly@9.3.3/');\r\n\r\nexport const brythonBaseUrl = /* @__PURE__ */ getUrl('brython@3.11.2/');\r\n\r\nexport const chaiUrl = /* @__PURE__ */ getModuleUrl('chai@4.3.6');\r\n\r\nexport const chaiTypesUrl = /* @__PURE__ */ getUrl('@types/chai@4.2.22/index.d.ts');\r\n\r\nexport const cherryCljsBaseUrl = /* @__PURE__ */ getUrl('cherry-cljs@0.0.4/');\r\n\r\nexport const cjs2esUrl = /* @__PURE__ */ getUrl('cjs2es@1.1.1/dist/cjs2es.browser.js');\r\n\r\nexport const clioBaseUrl = /* @__PURE__ */ getUrl(\r\n  '@live-codes/clio-browser-compiler@0.0.3/public/build/',\r\n);\r\n\r\nexport const coffeeScriptUrl = /* @__PURE__ */ getUrl(\r\n  'coffeescript@2.7.0/lib/coffeescript-browser-compiler-legacy/coffeescript.js',\r\n);\r\n\r\nexport const cppWasmBaseUrl = /* @__PURE__ */ getUrl('@chriskoch/cpp-wasm@1.0.2');\r\n\r\nexport const csstreeUrl = /* @__PURE__ */ getUrl('css-tree@1.1.3/dist/csstree.js');\r\n\r\nexport const cytoscapeSvgUrl = /* @__PURE__ */ getUrl('cytoscape-svg@0.4.0/cytoscape-svg.js');\r\n\r\nexport const cytoscapeUrl = /* @__PURE__ */ getUrl('cytoscape@3.25.0/dist/cytoscape.min.js');\r\n\r\nexport const dotUrl = /* @__PURE__ */ getUrl('dot@1.1.3/doT.js');\r\n\r\nexport const ejsUrl = /* @__PURE__ */ getUrl('ejs@3.1.9/ejs.js');\r\n\r\nexport const elkjsBaseUrl = /* @__PURE__ */ getUrl('elkjs@0.8.2/lib/');\r\n\r\nexport const emmetMonacoUrl = /* @__PURE__ */ getUrl('emmet-monaco-es@5.0.0/dist/emmet-monaco.js');\r\n\r\nexport const esModuleShimsPath = 'es-module-shims@1.4.4/dist/es-module-shims.js';\r\n\r\nexport const etaUrl = /* @__PURE__ */ getUrl('eta@2.2.0/dist/eta.umd.js');\r\n\r\nexport const flexSearchUrl = /* @__PURE__ */ getUrl('flexsearch@0.7.21/dist/flexsearch.bundle.js');\r\n\r\nexport const fontAnonymousProUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/anonymous-pro@4.5.9/index.css',\r\n);\r\n\r\nexport const fontCascadiaCodeUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/cascadia-code@4.2.1/index.css',\r\n);\r\n\r\nexport const fontCodeNewRomanUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/code-new-roman-2',\r\n);\r\n\r\nexport const fontComicMonoUrl = /* @__PURE__ */ getUrl('comic-mono@0.0.1/index.css');\r\n\r\nexport const fontCourierPrimeUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/courier-prime@4.5.9/index.css',\r\n);\r\n\r\nexport const fontDECTerminalModernUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/dec-terminal-modern',\r\n);\r\n\r\nexport const fontDejaVuMonoUrl = /* @__PURE__ */ getUrl('@fontsource/dejavu-mono@4.5.4/index.css');\r\n\r\nexport const fontFantasqueUrl = /* @__PURE__ */ getUrl(\r\n  '@typopro/web-fantasque-sans-mono@3.7.5/TypoPRO-FantasqueSansMono.css',\r\n);\r\n\r\nexport const fontFiraCodeUrl = /* @__PURE__ */ getUrl('firacode@6.2.0/distr/fira_code.css');\r\n\r\nexport const fontFixedsysUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/fixedsys-62');\r\n\r\nexport const fontHackUrl = /* @__PURE__ */ getUrl('hack-font@3.3.0/build/web/hack.css');\r\n\r\nexport const fontHermitUrl = /* @__PURE__ */ getUrl('typeface-hermit@0.0.44/index.css');\r\n\r\nexport const fontIBMPlexMonoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap',\r\n);\r\n\r\nexport const fontInconsolataUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Inconsolata&display=swap',\r\n);\r\n\r\nexport const fontIosevkaUrl = /* @__PURE__ */ getUrl('@fontsource/iosevka@4.5.4/index.css');\r\n\r\nexport const fontJetbrainsMonoUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/jetbrains-mono@4.5.11/index.css',\r\n);\r\n\r\nexport const fontMenloUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/menlo');\r\n\r\nexport const fontMonofurUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/monofur');\r\n\r\nexport const fontMonoidUrl = /* @__PURE__ */ getUrl('@typopro/web-monoid@3.7.5/TypoPRO-Monoid.css');\r\n\r\nexport const fontNotoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&display=swap',\r\n);\r\n\r\nexport const fontNovaMonoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Nova+Mono&display=swap',\r\n);\r\n\r\nexport const fontOpenDyslexicUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/opendyslexic@4.5.4/index.css',\r\n);\r\n\r\nexport const fontProFontWindowsUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/profontwindows',\r\n);\r\n\r\nexport const fontRobotoMonoUrl = /* @__PURE__ */ getUrl('@fontsource/roboto-mono@4.5.8/index.css');\r\n\r\nexport const fontSFMonoUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/sf-mono');\r\n\r\nexport const fontSourceCodeProUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/source-code-pro@4.5.12/index.css',\r\n);\r\n\r\nexport const fontSpaceMonoUrl = /* @__PURE__ */ getUrl('@fontsource/space-mono@4.5.10/index.css');\r\n\r\nexport const fontSudoVarUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/sudo-var');\r\n\r\nexport const fontUbuntuMonoUrl = /* @__PURE__ */ getUrl('@fontsource/ubuntu-mono@4.5.11/index.css');\r\n\r\nexport const fontVictorMonoUrl = /* @__PURE__ */ getUrl('victormono@1.5.4/dist/index.css');\r\n\r\nexport const fscreenUrl = /* @__PURE__ */ getUrl('fscreen@1.2.0/dist/fscreen.esm.js');\r\n\r\nexport const githubMarkdownCss = /* @__PURE__ */ getUrl(\r\n  'github-markdown-css@5.1.0/github-markdown.css',\r\n);\r\n\r\nexport const go2jsBaseUrl = /* @__PURE__ */ getUrl('@live-codes/go2js@0.4.0/build/');\r\n\r\nexport const graphreCdnUrl = /* @__PURE__ */ getUrl('graphre@0.1.3/dist/graphre.js');\r\n\r\nexport const handlebarsBaseUrl = /* @__PURE__ */ getUrl('handlebars@4.7.7/dist/');\r\n\r\nexport const highlightjsUrl = /* @__PURE__ */ getModuleUrl('highlight.js@11.5.1');\r\n\r\nexport const hintCssUrl = /* @__PURE__ */ getUrl('hint.css@2.7.0/hint.css');\r\n\r\nexport const hpccJsCdnUrl = /* @__PURE__ */ getUrl('@hpcc-js/wasm@2.13.0/dist/index.js');\r\n\r\nexport const imbaBaseUrl = /* @__PURE__ */ getUrl('imba@2.0.0-alpha.229/dist/');\r\n\r\nexport const jestLiteUrl = /* @__PURE__ */ getUrl('jest-lite@1.0.0-alpha.4/dist/core.js');\r\n\r\nexport const jestTypesUrl = /* @__PURE__ */ getUrl('@types/jest@27.4.1/index.d.ts');\r\n\r\nexport const jsclUrl = /* @__PURE__ */ getUrl(\r\n  'gh:jscl-project/jscl-project.github.io@efd3aecdba496d132ed650b7b5be976fd0ca278f/jscl.js',\r\n);\r\n\r\nexport const jsZipUrl = /* @__PURE__ */ getUrl('jszip@3.10.1/dist/jszip.js');\r\n\r\nexport const juliaWasmBaseUrl = /* @__PURE__ */ getUrl('@chriskoch/julia-wasm@1.0.4');\r\n\r\nexport const liquidJsUrl = /* @__PURE__ */ getUrl('liquidjs@10.8.2/dist/liquid.browser.min.js');\r\n\r\nexport const localforageUrl = /* @__PURE__ */ getUrl('localforage@1.10.0/dist/localforage.js');\r\n\r\nexport const luaUrl = /* @__PURE__ */ getUrl('fengari-web@0.1.4/dist/fengari-web.js');\r\n\r\nexport const lunaObjViewerStylesUrl = /* @__PURE__ */ getUrl(\r\n  'luna-object-viewer@0.2.0/luna-object-viewer.css',\r\n);\r\n\r\nexport const lunaConsoleStylesUrl = /* @__PURE__ */ getUrl('luna-console@0.2.1/luna-console.css');\r\n\r\nexport const malinaVersion = '0.6.64';\r\nexport const malinaUrl = /* @__PURE__ */ getUrl(`malinajs@${malinaVersion}/malina.js`);\r\n\r\nexport const markedUrl = /* @__PURE__ */ getUrl('marked@5.0.4/marked.min.js');\r\n\r\nexport const mermaidCdnUrl = /* @__PURE__ */ getUrl('mermaid@10.2.2/dist/mermaid.esm.mjs');\r\n\r\nexport const mjmlUrl = /* @__PURE__ */ getUrl('mjml-browser@4.14.1/lib/index.js');\r\n\r\nexport const monacoEmacsUrl = /* @__PURE__ */ getUrl('monaco-emacs@0.3.0/dist/monaco-emacs.js');\r\n\r\nexport const monacoVimUrl = /* @__PURE__ */ getUrl('monaco-vim@0.4.0/dist/monaco-vim.js');\r\n\r\nexport const mustacheUrl = /* @__PURE__ */ getUrl('mustache@4.2.0/mustache.js');\r\n\r\nexport const nomnomlCdnUrl = /* @__PURE__ */ getUrl('nomnoml@1.6.1/dist/nomnoml.js');\r\n\r\nexport const normalizeCssUrl = /* @__PURE__ */ getUrl('normalize.css@8.0.1/normalize.css');\r\n\r\nexport const nunjucksBaseUrl = /* @__PURE__ */ getUrl('nunjucks@3.2.4/browser/');\r\n\r\nexport const opalBaseUrl = /* @__PURE__ */ getUrl('https://cdn.opalrb.com/opal/1.7.3/');\r\n\r\nexport const parinferUrl = /* @__PURE__ */ getUrl('parinfer@3.13.1/parinfer.js');\r\n\r\nexport const pintoraUrl = /* @__PURE__ */ getUrl(\r\n  '@pintora/standalone@0.6.2/lib/pintora-standalone.umd.js',\r\n);\r\n\r\nexport const plotlyCdnUrl = /* @__PURE__ */ getUrl('plotly.js@2.23.2/dist/plotly.js');\r\n\r\nexport const postcssImportUrlUrl = /* @__PURE__ */ getUrl(\r\n  '@live-codes/postcss-import-url@0.1.2/dist/postcss-import-url.js',\r\n);\r\n\r\nexport const prettierBaseUrl = /* @__PURE__ */ getUrl('prettier@2.5.1/');\r\n\r\nexport const prettierPhpUrl = /* @__PURE__ */ getUrl('@prettier/plugin-php@0.18.0/standalone.js');\r\n\r\nexport const prismBaseUrl = /* @__PURE__ */ getUrl('prismjs@1.26.0/components/');\r\n\r\nexport const pyodideBaseUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.jsdelivr.net/pyodide/v0.23.2/full/',\r\n);\r\n\r\nexport const qrcodeUrl = /* @__PURE__ */ getUrl('qrcode-generator@1.4.4/qrcode.js');\r\n\r\nexport const quillEditorCdnBaseUrl = /* @__PURE__ */ getUrl('quill@2.0.0-dev.4/dist/');\r\n\r\nexport const quillHtmlEditUrl = /* @__PURE__ */ getUrl(\r\n  'quill-html-edit-button@2.2.7/dist/quill.htmlEditButton.min.js',\r\n);\r\n\r\nexport const quillBlotFormaterUrl = /* @__PURE__ */ getUrl(\r\n  'quill-blot-formatter@1.0.5/dist/quill-blot-formatter.min.js',\r\n);\r\n\r\nexport const quillBetterTableBaseUrl = /* @__PURE__ */ getUrl('quill-better-table@1.2.10/dist/');\r\n\r\nexport const requireUrl = /* @__PURE__ */ getUrl('requirejs@2.3.6/require.js');\r\n\r\nexport const reasonCompilerUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v9.1.2/compiler.js',\r\n);\r\n\r\nexport const reasonReactUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v9.1.2/%40rescript/react/cmij.js',\r\n);\r\n\r\nexport const reasonStdLibBaseUrl = /* @__PURE__ */ getUrl('@rescript/std@9.1.3/lib/es6/');\r\n\r\nexport const rescriptCompilerUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v10.1.2/compiler.js',\r\n);\r\n\r\nexport const rescriptReactUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v10.1.2/%40rescript/react/cmij.js',\r\n);\r\n\r\nexport const rescriptStdLibBaseUrl = /* @__PURE__ */ getUrl('@rescript/std@10.1.2/lib/es6/');\r\n\r\nexport const resetCssUrl = /* @__PURE__ */ getUrl('reset-css@5.0.1/reset.css');\r\n\r\nexport const riotBaseUrl = /* @__PURE__ */ getUrl('riot@7.1.0/');\r\n\r\nexport const snackbarUrl = /* @__PURE__ */ getUrl('@snackbar/core@1.7.0/dist/snackbar.css');\r\n\r\nexport const spacingJsUrl = /* @__PURE__ */ getUrl('spacingjs@1.0.7/dist/bundle.js');\r\n\r\nexport const sqlFormatterUrl = /* @__PURE__ */ getUrl(\r\n  'sql-formatter@12.2.1/dist/sql-formatter.min.js',\r\n);\r\n\r\nexport const sqljsBaseUrl = /* @__PURE__ */ getUrl('sql.js@1.8.0/dist/');\r\n\r\nexport const stencilUrl = /* @__PURE__ */ getUrl('@stencil/core@3.2.2/compiler/stencil.js');\r\n\r\nexport const stylisUrl = /* @__PURE__ */ getUrl('stylis@4.2.0/dist/umd/stylis.js');\r\n\r\nexport const svgbobWasmCdnUrl = /* @__PURE__ */ getUrl('svgbob-wasm@0.4.1-a0/svgbob_wasm_bg.wasm');\r\n\r\nexport const tagifyBaseUrl = /* @__PURE__ */ getUrl('@yaireo/tagify@4.9.6/dist/');\r\n\r\nexport const tailwindcssUrl = /* @__PURE__ */ getUrl(\r\n  '@mhsdesign/jit-browser-tailwindcss@0.3.0/dist/cdn.min.js',\r\n);\r\n\r\nexport const tauPrologBaseUrl = /* @__PURE__ */ getUrl('tau-prolog@0.3.4/modules/');\r\n\r\nexport const tealUrl = /* @__PURE__ */ getUrl(\r\n  'gh:teal-language/tl@d2fc36b5ff9a52d7265e63eb74cce70fd1cdbcb2/tl.lua',\r\n);\r\n\r\nexport const twigUrl = /* @__PURE__ */ getUrl('twig@1.16.0/twig.min.js');\r\n\r\nexport const typescriptUrl = /* @__PURE__ */ getUrl('typescript@5.1.3/lib/typescript.js');\r\n\r\nexport const uniterUrl = /* @__PURE__ */ getUrl('uniter@2.18.0/dist/uniter.js');\r\n\r\nexport const vegaCdnUrl = /* @__PURE__ */ getUrl('vega@5.25.0/build/vega.js');\r\n\r\nexport const vegaLiteCdnUrl = /* @__PURE__ */ getUrl('vega-lite@5.9.3/build/vega-lite.js');\r\n\r\nexport const vue3CdnUrl = /* @__PURE__ */ getUrl('vue@3');\r\n\r\nexport const vue2CdnUrl = /* @__PURE__ */ getUrl('vue@2');\r\n\r\nexport const vueSfcLoaderCdnBaseUrl = /* @__PURE__ */ getUrl('vue3-sfc-loader@0.8.4/dist/');\r\n\r\nexport const wabtjsUrl = /* @__PURE__ */ getUrl('wabt@1.0.32/index.js');\r\n\r\nexport const waveDromBaseUrl = /* @__PURE__ */ getUrl('wavedrom@3.2.0/');\r\n\r\nexport const webRBaseUrl = /* @__PURE__ */ getUrl('@r-wasm/webr@0.1.1/dist/');\r\n", "export const allowedOrigin = (origin = location.origin) =>\n  Boolean(\n    origin &&\n      (origin.endsWith('livecodes.io') ||\n        origin.endsWith('livecodes.pages.dev') ||\n        origin.endsWith('localpen.io') ||\n        origin.endsWith('localpen.pages.dev') ||\n        origin.startsWith('http://127.0.0.1') ||\n        origin.startsWith('http://localhost')),\n  );\n\nexport const whitelistTarget = (url: string) =>\n  new RegExp(/^(?:(?:http|https):\\/\\/(?:\\w+.)?)(githubusercontent.com|jsbin.com|)\\/(?:.*)/g).test(\n    url,\n  );\n", "import {\n  compressToEncodedURIComponent,\n  decompressFromEncodedURIComponent,\n  decompressFromBase64,\n} from 'lz-string';\n\nexport const compress = compressToEncodedURIComponent;\nexport const decompress = (compressed: string, isJSON = true) => {\n  const decoded = decompressFromEncodedURIComponent(compressed);\n  if (decoded) {\n    if (!isJSON) return decoded;\n    try {\n      if (JSON.parse(decoded)) {\n        return decoded;\n      }\n    } catch {\n      //\n    }\n  }\n  // for backward compatibility\n  return decompressFromBase64(compressed);\n};\n", "import type { Config } from '../models';\r\nimport { allowedOrigin } from './allowed-origin';\r\n\r\nconst dpasteGetUrl = 'https://dpaste.com/';\r\nconst dpastePostUrl = 'https://dpaste.com/api/v2/';\r\nconst apiUrl = 'https://api2.livecodes.io/share';\r\n\r\ntype ConfigWithResult = Partial<Config & { result: string }>;\r\ninterface ShareService {\r\n  getProject: (id: string) => Promise<ConfigWithResult>;\r\n  shareProject: (config: ConfigWithResult) => Promise<string>;\r\n}\r\n\r\nconst dpasteService = {\r\n  getProject: async (id: string): Promise<ConfigWithResult> => {\r\n    try {\r\n      const res = await fetch(dpasteGetUrl + id + '.txt');\r\n      if (!res.ok) return {};\r\n      return JSON.parse(await res.text());\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  },\r\n  shareProject: async (config: ConfigWithResult): Promise<string> => {\r\n    try {\r\n      const res = await fetch(dpastePostUrl, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'User-Agent': 'LiveCodes / https://livecodes.io/',\r\n        },\r\n        body: `content=${encodeURIComponent(JSON.stringify(config))}&title=${encodeURIComponent(\r\n          config.title || '',\r\n        )}&syntax=json&expiry_days=365`,\r\n      });\r\n      if (!res.ok) return '';\r\n      const url = await res.text();\r\n      return url.replace(dpasteGetUrl, '');\r\n    } catch (error) {\r\n      return '';\r\n    }\r\n  },\r\n};\r\n\r\nconst apiService = {\r\n  getProject: async (id: string): Promise<ConfigWithResult> => {\r\n    // for backward compatibility\r\n    if (id.length < 11) return dpasteService.getProject(id);\r\n\r\n    if (!allowedOrigin()) return {};\r\n    try {\r\n      const res = await fetch(apiUrl + '?id=' + id);\r\n      if (!res.ok) return {};\r\n      return JSON.parse(await res.text());\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  },\r\n  shareProject: async (config: ConfigWithResult): Promise<string> => {\r\n    if (!allowedOrigin()) return '';\r\n    try {\r\n      const res = await fetch(apiUrl, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        body: JSON.stringify(config),\r\n      });\r\n      if (!res.ok) return '';\r\n      return res.text();\r\n    } catch (error) {\r\n      return '';\r\n    }\r\n  },\r\n};\r\n\r\nexport const shareService: ShareService = allowedOrigin() ? apiService : dpasteService;\r\n", "import type { CompileInfo, Config, Language } from '../models';\r\nimport { modulesService } from '../services';\r\nimport { escapeCode, removeComments, removeCommentsAndStrings, toCamelCase } from '../utils';\r\n\r\nexport const importsPattern =\r\n  /(import\\s+?(?:(?:(?:[\\w*\\s{},\\$]*)\\s+from\\s+?)|))((?:\".*?\")|(?:'.*?'))([\\s]*?(?:;|$|))/g;\r\n\r\nexport const dynamicImportsPattern = /(import\\s*?\\(\\s*?((?:\".*?\")|(?:'.*?'))\\s*?\\))/g;\r\n\r\nexport const getImports = (code: string) =>\r\n  [\r\n    ...[...removeComments(code).matchAll(new RegExp(importsPattern))],\r\n    ...[...removeComments(code).matchAll(new RegExp(dynamicImportsPattern))],\r\n  ].map((arr) => arr[2].replace(/\"/g, '').replace(/'/g, ''));\r\n\r\nconst needsBundler = (mod: string) =>\r\n  !mod.startsWith('https://deno.bundlejs.com/') &&\r\n  !mod.startsWith('https://edge.bundlejs.com/') &&\r\n  !mod.endsWith('#nobundle') &&\r\n  (mod.startsWith('https://deno.land/') ||\r\n    mod.startsWith('https://github.com/') ||\r\n    mod.startsWith('https://raw.githubusercontent.com/') ||\r\n    mod.startsWith('https://gitlab.com/') ||\r\n    mod.startsWith('https://bitbucket.org') ||\r\n    mod.endsWith('.ts') ||\r\n    mod.endsWith('.jsx') ||\r\n    mod.endsWith('.tsx'));\r\n\r\nconst isBare = (mod: string) =>\r\n  !mod.startsWith('https://') &&\r\n  !mod.startsWith('http://') &&\r\n  !mod.startsWith('.') &&\r\n  !mod.startsWith('/') &&\r\n  !mod.startsWith('data:') &&\r\n  !mod.startsWith('blob:');\r\n\r\nexport const createImportMap = (code: string, config: Config) =>\r\n  getImports(code)\r\n    .map((libName) => {\r\n      if (!needsBundler(libName) && !isBare(libName)) {\r\n        return {};\r\n      } else {\r\n        const key = Object.keys(config.imports).find(\r\n          (mod) => mod === libName || libName.startsWith(mod + '/'),\r\n        );\r\n        if (key) {\r\n          return { [key]: config.imports[key] };\r\n        }\r\n        return {\r\n          [libName]: modulesService.getModuleUrl(libName, {\r\n            defaultCDN: config?.customSettings?.defaultCDN,\r\n          }),\r\n        };\r\n      }\r\n    })\r\n    .reduce((acc, curr) => ({ ...acc, ...curr }), {} as Record<string, string>);\r\n\r\nexport const hasImports = (code: string) => getImports(code).length > 0;\r\n\r\nexport const hasExports = (code: string) =>\r\n  new RegExp(/(^export\\s)|([\\s|;]export\\s)/).test(removeCommentsAndStrings(code));\r\n\r\nexport const hasAwait = (code: string) =>\r\n  new RegExp(/(^await\\s)|([\\s|;]await\\s)/).test(removeCommentsAndStrings(code));\r\n\r\nexport const isModuleScript = (code: string) =>\r\n  hasImports(code) || hasExports(code) || hasAwait(code);\r\n\r\nexport const replaceImports = (code: string, config: Config) => {\r\n  const importMap = createImportMap(code, config);\r\n  return code.replace(new RegExp(importsPattern), (statement) => {\r\n    const libName = statement\r\n      .replace(new RegExp(importsPattern), '$2')\r\n      .replace(/\"/g, '')\r\n      .replace(/'/g, '');\r\n\r\n    const key = Object.keys(importMap).find(\r\n      (mod) => mod === libName || libName.startsWith(mod + '/'),\r\n    );\r\n    if (!key) {\r\n      return statement;\r\n    }\r\n    return statement.replace(key, importMap[key]);\r\n  });\r\n};\r\n\r\nexport const styleimportsPattern =\r\n  /(?:@import\\s+?)((?:\".*?\")|(?:'.*?')|(?:url\\('.*?'\\))|(?:url\\(\".*?\"\\)))(.*)?;/g;\r\n\r\nexport const hasStyleImports = (code: string) => new RegExp(styleimportsPattern).test(code);\r\n\r\nexport const replaceStyleImports = (code: string) =>\r\n  code.replace(new RegExp(styleimportsPattern), (statement, match, media) => {\r\n    const url: string = match\r\n      .replace(/\"/g, '')\r\n      .replace(/'/g, '')\r\n      .replace(/url\\(/g, '')\r\n      .replace(/\\)/g, '');\r\n    const modified =\r\n      '@import \"' +\r\n      modulesService.getModuleUrl(url, { isModule: false, defaultCDN: 'jsdelivr' }) +\r\n      '\";';\r\n    const mediaQuery = media?.trim();\r\n    return !isBare(url)\r\n      ? statement\r\n      : mediaQuery\r\n      ? `@media ${mediaQuery} {\\n${modified}\\n}`\r\n      : modified;\r\n  });\r\n\r\n// based on https://github.com/sveltejs/svelte-repl/blob/master/src/workers/bundler/plugins/commonjs.js\r\nexport const cjs2esm = (code: string) => {\r\n  const strippedCode = removeComments(code);\r\n  if (!/\\b(require|module|exports)\\b/.test(strippedCode)) return code;\r\n  const requirePattern = /(?:^|\\s)require(?:\\s*)\\((?:\\s*)('(.*?)'|\"(.*?)\")(?:\\s*)\\)/g;\r\n\r\n  const getRequires = (str: string) =>\r\n    [...str.matchAll(new RegExp(requirePattern))].map((arr) =>\r\n      arr[1].replace(/\"/g, '').replace(/'/g, ''),\r\n    );\r\n\r\n  const requires = getRequires(strippedCode);\r\n\r\n  if (requires.length === 0) return code;\r\n\r\n  const imports = requires\r\n    .map((id, i) =>\r\n      [\r\n        `import * as __requires_${i} from '${id}';`,\r\n        `const __requires_${i}_default = __requires_${i}.default;`,\r\n      ].join('\\n'),\r\n    )\r\n    .join('\\n');\r\n  const lookup = `const __requires_lookup = { ${requires\r\n    .map((id, i) => `'${id}': __requires_${i}_default || __requires_${i}`)\r\n    .join(', ')} };`;\r\n\r\n  const require = `window.require = window.require || ((id) => {\r\n\tif (id in __requires_lookup) return __requires_lookup[id];\r\n\tthrow new Error(\\`Cannot require modules dynamically (\\${id})\\`);\r\n});`;\r\n\r\n  return [\r\n    imports,\r\n    lookup,\r\n    require,\r\n    `const exports = {}; const module = { exports };`,\r\n    code,\r\n    `export default module.exports;`,\r\n  ].join('\\n\\n');\r\n};\r\n\r\nexport const createCSSModulesImportMap = (\r\n  compiledScript: string,\r\n  compiledStyle: string,\r\n  cssTokens: CompileInfo['cssModules'] = {},\r\n  extension: Language = 'css',\r\n) => {\r\n  const scriptImports = getImports(compiledScript);\r\n  const extensions = extension === 'css' ? [extension] : ['css', extension];\r\n  const filenames = [\r\n    ...extensions.map((ext) => './style.' + ext),\r\n    ...extensions.map((ext) => './styles.' + ext),\r\n    ...extensions.map((ext) => './style.module.' + ext),\r\n    ...extensions.map((ext) => './styles.module.' + ext),\r\n  ];\r\n\r\n  return filenames\r\n    .map((filename) => {\r\n      if (!scriptImports.includes(filename)) {\r\n        return {};\r\n      }\r\n\r\n      if (!filename.includes('.module.')) {\r\n        return {\r\n          [filename]:\r\n            'data:text/javascript;base64,' +\r\n            btoa(`export default \\`${escapeCode(compiledStyle)}\\`;`),\r\n        };\r\n      }\r\n\r\n      const cssModule =\r\n        `export default ${escapeCode(JSON.stringify(cssTokens))};\\n` +\r\n        Object.keys(cssTokens)\r\n          .filter((key) => key === toCamelCase(key))\r\n          .map((key) => `export const ${escapeCode(key)} = \"${escapeCode(cssTokens[key])}\";`)\r\n          .join('\\n');\r\n\r\n      return { [filename]: 'data:text/javascript;base64,' + btoa(cssModule) };\r\n    })\r\n    .reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n};\r\n", "export const getToolbarElement = () => document.querySelector('#toolbar') as HTMLElement;\r\nexport const getProjectTitleElement = () => document.querySelector('#project-title') as HTMLElement;\r\nexport const getEditorContainerElement = () =>\r\n  document.querySelector('#editor-container') as HTMLElement;\r\nexport const getEditorsElement = () => document.querySelector('#editors') as HTMLElement;\r\nexport const getMarkupElement = () => document.querySelector('#markup') as HTMLElement;\r\nexport const getStyleElement = () => document.querySelector('#style') as HTMLElement;\r\nexport const getScriptElement = () => document.querySelector('#script') as HTMLElement;\r\nexport const getOutputElement = () => document.querySelector('#output') as HTMLElement;\r\nexport const getResultElement = () => document.querySelector('#result') as HTMLElement;\r\nexport const getResultIFrameElement = () =>\r\n  document.querySelector('#result > iframe') as HTMLIFrameElement;\r\nexport const getGutterElement = () =>\r\n  document.querySelector('#editor-container .gutter') as HTMLElement;\r\nexport const getLogoLink = () => document.querySelector('#logo a') as HTMLAnchorElement;\r\nexport const getRunButton = () => document.querySelector('#run-button') as HTMLElement;\r\nexport const getCodeRunButton = () => document.querySelector('#code-run-button') as HTMLElement;\r\nexport const getEditorToolbar = () => document.querySelector('#editor-tools') as HTMLElement;\r\nexport const getCopyButton = () => document.querySelector('#editor-tools #copy-btn') as HTMLElement;\r\nexport const getUndoButton = () => document.querySelector('#editor-tools #undo-btn') as HTMLElement;\r\nexport const getRedoButton = () => document.querySelector('#editor-tools #redo-btn') as HTMLElement;\r\nexport const getFormatButton = () =>\r\n  document.querySelector('#editor-tools #format-btn') as HTMLElement;\r\nexport const getEditorModeNode = () => document.querySelector<HTMLElement>('#editor-mode');\r\nexport const getEditorStatus = () =>\r\n  document.querySelector('#editor-tools #editor-status') as HTMLElement;\r\nexport const getExternalResourcesBtn = () =>\r\n  document.querySelector('#editor-tools #external-resources-btn') as HTMLElement;\r\nexport const getExternalResourcesMark = () =>\r\n  document.querySelector('#editor-tools #external-resources-mark') as HTMLElement;\r\nexport const getResultButton = () => document.querySelector('#result-button') as HTMLElement;\r\nexport const getFullscreenButton = () =>\r\n  document.querySelector('#fullscreen-button') as HTMLElement;\r\nexport const getEditorTitles = () =>\r\n  document.querySelectorAll<HTMLElement>('.editor-title:not(.hidden)');\r\nexport const getEditorDivs = () => document.querySelectorAll<HTMLElement>('#editors > .editor');\r\nexport const getToolspaneElement = () =>\r\n  document.querySelector('#output #tools-pane') as HTMLElement;\r\nexport const getToolspaneBar = () =>\r\n  document.querySelector('#output #tools-pane-bar') as HTMLElement;\r\nexport const getToolspaneButtons = () =>\r\n  document.querySelector('#tools-pane-buttons') as HTMLElement;\r\nexport const getToolspaneTitles = () => document.querySelector<HTMLElement>('#tools-pane-titles');\r\nexport const getToolspaneLoader = () => document.querySelector<HTMLElement>('#tools-pane-loading');\r\nexport const getZoomButtonValue = () =>\r\n  document.querySelector<HTMLElement>('#zoom-button #zoom-value');\r\nexport const getModalSaveButton = () =>\r\n  document.querySelector('#modal #prompt-save-btn') as HTMLElement;\r\nexport const getModalDoNotSaveButton = () =>\r\n  document.querySelector('#modal #prompt-donot-save-btn') as HTMLElement;\r\nexport const getModalCancelButton = () =>\r\n  document.querySelector('#modal #prompt-cancel-btn') as HTMLElement;\r\n\r\nexport const getModalRecoverButton = () =>\r\n  document.querySelector('#modal #prompt-recover-btn') as HTMLElement;\r\nexport const getModalSavePreviousButton = () =>\r\n  document.querySelector('#modal #prompt-save-previous-btn') as HTMLElement;\r\nexport const getModalCancelRecoverButton = () =>\r\n  document.querySelector('#modal #prompt-cancel-recover-btn') as HTMLElement;\r\nexport const getModalUnsavedName = () =>\r\n  document.querySelector('#modal #unsaved-project-name') as HTMLElement;\r\nexport const getModalUnsavedLastModified = () =>\r\n  document.querySelector('#modal #unsaved-project-last-modified') as HTMLElement;\r\nexport const getModalDisableRecoverCheckbox = () =>\r\n  document.querySelector('#modal #disable-recover-checkbox') as HTMLInputElement;\r\n\r\nexport const getLanguageMenuLinks = () =>\r\n  document.querySelectorAll<HTMLElement>('#select-editor .language-item a');\r\n\r\nexport const getLanguageMenuButtons = () =>\r\n  document.querySelectorAll<HTMLElement>('#select-editor .language-menu-button');\r\n\r\nexport const getstyleMenu = () =>\r\n  document.querySelector<HTMLElement>('#style-selector .dropdown-menu');\r\n\r\nexport const getSettingToggles = () =>\r\n  document.querySelectorAll<HTMLInputElement>('#settings-menu input');\r\n\r\nexport const getCssPresetLinks = () =>\r\n  document.querySelectorAll<HTMLAnchorElement>('#css-preset-menu a');\r\n\r\nexport const getSettingsMenuScroller = () =>\r\n  document.querySelector<HTMLElement>('#settings-menu-container');\r\nexport const getSettingsButton = () => document.querySelector<HTMLElement>('#settings-button');\r\n\r\nexport const getExportJSONLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-json');\r\n\r\nexport const getExportResultLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-result');\r\n\r\nexport const getExportSourceLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-src');\r\n\r\nexport const getExportGithubGistLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-githubGist');\r\n\r\nexport const getExportCodepenLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-codepen');\r\n\r\nexport const getExportJsfiddleLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-jsfiddle');\r\n\r\nexport const getLoginLink = () => document.querySelector<HTMLAnchorElement>('#login-link');\r\n\r\nexport const getLogoutLink = () => document.querySelector<HTMLAnchorElement>('#logout-link');\r\n\r\nexport const getNewLink = () => document.querySelector<HTMLAnchorElement>('#new-link');\r\n\r\nexport const getOpenLink = () => document.querySelector<HTMLAnchorElement>('#open-link');\r\n\r\nexport const getSaveLink = () => document.querySelector<HTMLAnchorElement>('#save-link');\r\n\r\nexport const getForkLink = () => document.querySelector<HTMLAnchorElement>('#fork-link');\r\n\r\nexport const getSaveAsTemplateLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#template-link');\r\n\r\nexport const getExternalResourcesLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#external-resources-link');\r\n\r\nexport const getCustomSettingsLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#custom-settings-link');\r\n\r\nexport const getShareLink = () => document.querySelector<HTMLAnchorElement>('#share-link');\r\n\r\nexport const getEmbedLink = () => document.querySelector<HTMLAnchorElement>('#embed-link');\r\n\r\nexport const getEditorSettingsLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#editor-settings-link');\r\n\r\nexport const getDeployLink = () => document.querySelector<HTMLAnchorElement>('#deploy-link');\r\n\r\nexport const getSyncLink = () => document.querySelector<HTMLAnchorElement>('#sync-link');\r\n\r\nexport const getSyncIndicator = () => document.querySelector<HTMLAnchorElement>('#sync-indicator');\r\n\r\nexport const getImportLink = () => document.querySelector<HTMLAnchorElement>('#import-link');\r\n\r\nexport const getBackupLink = () => document.querySelector<HTMLAnchorElement>('#backup-link');\r\n\r\nexport const getBroadcastLink = () => document.querySelector<HTMLAnchorElement>('#broadcast-link');\r\n\r\nexport const getWelcomeLink = () => document.querySelector<HTMLAnchorElement>('#welcome-link');\r\n\r\nexport const getAboutLink = () => document.querySelector<HTMLAnchorElement>('#about-link');\r\n\r\nexport const getAutoupdateToggle = () =>\r\n  document.querySelector('#settings-menu input#autoupdate') as HTMLInputElement;\r\n\r\nexport const getDelayValue = () =>\r\n  document.querySelector('#settings-menu #delay-value') as HTMLElement;\r\n\r\nexport const getDelayRange = () =>\r\n  document.querySelector('#settings-menu input#delay-range') as HTMLInputElement;\r\n\r\nexport const getAutosaveToggle = () =>\r\n  document.querySelector('#settings-menu input#autosave') as HTMLInputElement;\r\n\r\nexport const getAutosyncToggle = () =>\r\n  document.querySelector('#settings-menu input#autosync') as HTMLInputElement;\r\n\r\nexport const getFormatOnsaveToggle = () =>\r\n  document.querySelector('#settings-menu input#formatOnsave') as HTMLInputElement;\r\n\r\nexport const getProcessorToggles = () =>\r\n  document.querySelectorAll<HTMLInputElement>('#style-selector input');\r\n\r\nexport const getEmmetToggle = () =>\r\n  document.querySelector('#settings-menu input#emmet') as HTMLInputElement;\r\n\r\nexport const getThemeToggle = () =>\r\n  document.querySelector('#settings-menu input#theme') as HTMLInputElement;\r\n\r\nexport const getShowWelcomeToggle = () =>\r\n  document.querySelector('#settings-menu input#welcome') as HTMLInputElement;\r\n\r\nexport const getRecoverToggle = () =>\r\n  document.querySelector('#settings-menu input#recover-unsaved') as HTMLInputElement;\r\n\r\nexport const getSpacingToggle = () =>\r\n  document.querySelector('#settings-menu input#show-spacing') as HTMLInputElement;\r\n\r\nexport const getCSSPresetLinks = () =>\r\n  document.querySelectorAll<HTMLAnchorElement>('#css-preset-menu a');\r\n\r\nexport const getProjectInfoLink = () =>\r\n  document.querySelector('#settings-menu #info-link') as HTMLInputElement;\r\n\r\nexport const getAssetsLink = () =>\r\n  document.querySelector('#settings-menu #assets-link') as HTMLInputElement;\r\n\r\nexport const getSnippetsLink = () =>\r\n  document.querySelector('#settings-menu #snippets-link') as HTMLInputElement;\r\n\r\nexport const getInfoTitleInput = () =>\r\n  document.querySelector('#info-container input#title-input') as HTMLInputElement;\r\n\r\nexport const getInfoDescription = () =>\r\n  document.querySelector('#info-container #description-textarea') as HTMLTextAreaElement;\r\n\r\nexport const getInfoTagsInput = () =>\r\n  document.querySelector('#info-container input#tags-input') as HTMLInputElement;\r\n\r\nexport const getSaveInfoButton = () =>\r\n  document.querySelector<HTMLElement>('#info-container #info-save-btn');\r\n\r\nexport const getExternalResourcesTextareas = () =>\r\n  document.querySelectorAll<HTMLTextAreaElement>('#resources-container textarea');\r\n\r\nexport const getExternalResourcesCssPresetInputs = () =>\r\n  document.querySelectorAll<HTMLInputElement>('#resources-container input[type=\"radio\"]');\r\n\r\nexport const getLoadResourcesButton = () =>\r\n  document.querySelector<HTMLElement>('#resources-container #resources-load-btn');\r\n\r\nexport const getCustomSettingsEditor = () =>\r\n  document.querySelector<HTMLElement>('#custom-settings-container #custom-settings-editor');\r\n\r\nexport const getLoadCustomSettingsButton = () =>\r\n  document.querySelector<HTMLElement>('#custom-settings-container #custom-settings-load-btn');\r\n\r\nexport const getTestEditor = () =>\r\n  document.querySelector<HTMLElement>('#test-editor-container #test-editor');\r\n\r\nexport const getLoadTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-editor-container #test-load-btn');\r\n\r\nexport const getEditTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-container #edit-tests-btn');\r\n\r\nexport const getRunTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-container #run-tests-btn');\r\n\r\nexport const getWatchTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-container #watch-tests-btn');\r\n\r\nexport const getUrlImportForm = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector<HTMLFormElement>('#url-import-form');\r\nexport const getUrlImportButton = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#url-import-btn') as HTMLButtonElement;\r\nexport const getUrlImportInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#code-url') as HTMLInputElement;\r\nexport const getCodeImportInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#local-code-input') as HTMLInputElement;\r\n\r\nexport const getImportJsonUrlForm = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#json-url-import-form') as HTMLInputElement;\r\nexport const getImportJsonUrlButton = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#json-url-import-btn') as HTMLInputElement;\r\nexport const getImportJsonUrlInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#json-url') as HTMLInputElement;\r\n\r\nexport const getBulkImportJsonUrlForm = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-json-url-import-form') as HTMLInputElement;\r\nexport const getBulkImportJsonUrlButton = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-json-url-import-btn') as HTMLInputElement;\r\nexport const getBulkImportJsonUrlInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-json-url') as HTMLInputElement;\r\nexport const getLinkToSavedProjects = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#link-to-saved-projects') as HTMLAnchorElement;\r\n\r\nexport const getImportFileInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#file-input') as HTMLInputElement;\r\n\r\nexport const getImportFileInputLabel = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('.file-input-label') as HTMLInputElement;\r\n\r\nexport const getBulkImportFileInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-file-input') as HTMLInputElement;\r\n\r\nexport const getNewRepoForm = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector<HTMLFormElement>('#new-repo-form');\r\nexport const getNewRepoButton = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-btn') as HTMLButtonElement;\r\nexport const getNewRepoNameInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-name') as HTMLInputElement;\r\nexport const getNewRepoNameError = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-name-error') as HTMLElement;\r\nexport const getNewRepoMessageInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-message') as HTMLInputElement;\r\nexport const getNewRepoCommitSource = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-source') as HTMLInputElement;\r\nexport const getNewRepoAutoSync = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-autosync') as HTMLInputElement;\r\n\r\nexport const getExistingRepoForm = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector<HTMLFormElement>('#existing-repo-form');\r\nexport const getExistingRepoButton = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-btn') as HTMLButtonElement;\r\nexport const getExistingRepoNameInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-name') as HTMLInputElement;\r\nexport const getExistingRepoMessageInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-message') as HTMLInputElement;\r\nexport const getExistingRepoCommitSource = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-source') as HTMLInputElement;\r\nexport const getExistingRepoAutoSync = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-autosync') as HTMLInputElement;\r\n\r\nexport const getStarterTemplatesTab = (templatesContainer: HTMLElement) =>\r\n  templatesContainer.querySelector<HTMLElement>(\r\n    '#templates-tabs [data-target=\"templates-starter\"]',\r\n  );\r\nexport const getStarterTemplatesList = (templatesContainer: HTMLElement) =>\r\n  templatesContainer.querySelector<HTMLElement>('#starter-templates-list');\r\nexport const getUserTemplatesScreen = (templatesContainer: HTMLElement) =>\r\n  templatesContainer.querySelector('#templates-user .modal-screen') as HTMLElement;\r\n\r\nexport const getBulkImportButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#bulk-import-button') as HTMLElement;\r\n\r\nexport const getExportAllButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#export-all-button') as HTMLElement;\r\n\r\nexport const getDeleteAllButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#delete-all-button') as HTMLElement;\r\n\r\nexport const getAddAssetButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#assets-add-asset-button') as HTMLElement;\r\n\r\nexport const getAssetsDeleteAllButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#assets-delete-all-button') as HTMLElement;\r\n\r\nexport const getAssetsButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#assets-button') as HTMLElement;\r\n\r\nexport const getAssetDataUrlFileInput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-data-url-file-input') as HTMLInputElement;\r\n\r\nexport const getAssetDataUrlOutput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#data-url-output') as HTMLElement;\r\n\r\nexport const getAssetGHPagesFileInput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-gh-pages-file-input') as HTMLInputElement;\r\n\r\nexport const getAssetGHPagesFileInputLabel = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-gh-pages-file-input-label') as HTMLElement;\r\n\r\nexport const getAssetGHPagesFileInputButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-gh-pages-file-input-button') as HTMLElement;\r\n\r\nexport const getAssetGHPagesOutput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#gh-pages-output') as HTMLElement;\r\n\r\nexport const getSyncStatus = (syncContainer: HTMLElement | undefined) =>\r\n  (syncContainer || document).querySelector<HTMLElement>('#sync-status');\r\n\r\nexport const getStartSyncBtns = (syncContainer: HTMLElement | undefined) =>\r\n  (syncContainer || document).querySelectorAll<HTMLButtonElement>('.start-sync-btn');\r\n\r\nexport const getBackupForm = (backupContainer: HTMLElement) =>\r\n  backupContainer.querySelector('#backup-form') as HTMLFormElement;\r\n\r\nexport const getBackupBtn = (backupContainer: HTMLElement) =>\r\n  backupContainer.querySelector('#backup-btn') as HTMLButtonElement;\r\n\r\nexport const getBackupCheckedInputs = (backupContainer: HTMLElement) =>\r\n  backupContainer.querySelectorAll<HTMLInputElement>('#backup input[type=\"checkbox\"]:checked');\r\n\r\nexport const getAddSnippetButton = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#snippets-add-snippet-button') as HTMLElement;\r\n\r\nexport const getSnippetsDeleteAllButton = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#snippets-delete-all-button') as HTMLElement;\r\n\r\nexport const getSnippetLanguageSelect = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#language-select') as HTMLSelectElement;\r\n\r\nexport const getAddSnippetEditor = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-editor') as HTMLElement;\r\n\r\nexport const getSnippetTitleInput = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-title-input') as HTMLInputElement;\r\n\r\nexport const getSnippetDescriptionArea = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-description-textarea') as HTMLTextAreaElement;\r\n\r\nexport const getSaveSnippetBtn = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-save-btn') as HTMLButtonElement;\r\n\r\nexport const getSnippetsBtn = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#snippets-button') as HTMLButtonElement;\r\n\r\nexport const getBroadcastStatusLabel = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-status') as HTMLElement;\r\n\r\nexport const getBroadcastForm = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-form') as HTMLFormElement;\r\n\r\nexport const getBroadcastServerUrlInput = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-server-url') as HTMLInputElement;\r\n\r\nexport const getBroadcastSourceCheckbox = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-source') as HTMLInputElement;\r\n\r\nexport const getBroadcastBtn = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-btn') as HTMLButtonElement;\r\n\r\nexport const getBroadcastChannelUrlSection = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-channel-url-section') as HTMLElement;\r\n\r\nexport const getBroadcastChannelUrl = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-channel-url') as HTMLAnchorElement;\r\n\r\nexport const getBroadcastStatusBtn = () =>\r\n  document.querySelector('#broadcast-status-btn') as HTMLElement | null;\r\n\r\nexport const getQrCodeContainer = () => document.querySelector('#qrcode-container') as HTMLElement;\r\n\r\nexport const getEditorSettingsFormatLink = (editorSettingsContainer: HTMLElement) =>\r\n  editorSettingsContainer.querySelector('#editor-settings-format-link') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkNew = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-new') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkOpen = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-open') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkImport = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-import') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkDefaultTemplateLi = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('.default-template-li') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkNoDefaultTemplate = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#no-default-template') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkLoadDefault = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-load-default') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkRecentOpen = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-recent-open') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkTemplates = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-templates') as HTMLAnchorElement;\r\n\r\nexport const getModalShowWelcomeCheckbox = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #show-welcome-checkbox') as HTMLInputElement;\r\n\r\nexport const getModalWelcomeRecover = (welcomeContainer = document) =>\r\n  welcomeContainer.querySelector('#modal #welcome-recover') as HTMLElement;\r\n\r\nexport const getModalWelcomeScreen = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-screen-container .modal-screen') as HTMLElement;\r\n\r\nexport const getModalWelcomeRecent = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #welcome-recent') as HTMLElement;\r\n\r\nexport const getModalWelcomeRecentList = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #welcome-recent-list') as HTMLElement;\r\n\r\nexport const getModalWelcomeTemplateList = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #welcome-template-list') as HTMLElement;\r\n", "import type { APIError, CDNService, PkgInfo } from '../models';\r\n\r\n// see: https://github.com/jsdelivr/www.jsdelivr.com/blob/master/src/public/js/utils/search.js\r\n// info: https://github.com/jsdelivr/data.jsdelivr.com/issues/6\r\n\r\nconst getSearchApiUrl = (query: string) =>\r\n  `https://ofcncog2cu-dsn.algolia.net/1/indexes/npm-search/${encodeURIComponent(\r\n    query,\r\n  )}?x-algolia-agent=Browser`;\r\n\r\nconst algoliaHeaders = {\r\n  'X-Algolia-Application-Id': 'OFCNCOG2CU',\r\n  'X-Algolia-API-Key': 'f54e21fa3a2a0160595bb058179bfb1e',\r\n};\r\nconst attributesToRetrieve = ['name', 'description', 'homepage', 'repository.url', 'version'];\r\n\r\nconst apiEndpoint = 'https://data.jsdelivr.com/v1';\r\n\r\nconst jsDelivrHeaders = {\r\n  'User-Agent': 'https://livecodes.io',\r\n};\r\n\r\ninterface APIPkgFiles {\r\n  default: string;\r\n  files: Array<{ name: string }>;\r\n}\r\n\r\ninterface EntryPoints {\r\n  js?: {\r\n    file: string;\r\n    guessed: boolean;\r\n  };\r\n  css?: {\r\n    file: string;\r\n    guessed: boolean;\r\n  };\r\n}\r\n\r\nconst splitNameVersion = (nameVersion: string) => {\r\n  const scoped = nameVersion.startsWith('@');\r\n  const str = scoped ? nameVersion.slice(1) : nameVersion;\r\n  const [name, version] = str.split('@');\r\n  return [(scoped ? '@' : '') + name, version];\r\n};\r\n\r\nconst search = async (query: string, limit = 10): Promise<PkgInfo[] | APIError> => {\r\n  const options = {\r\n    page: 0,\r\n    hitsPerPage: limit,\r\n    attributesToHighlight: [],\r\n    attributesToRetrieve,\r\n    analyticsTags: ['jsdelivr'],\r\n  };\r\n\r\n  const [name, version] = splitNameVersion(query);\r\n  let exactVersion: string | undefined;\r\n  if (version) {\r\n    const versioned = await addPkgVersion(query);\r\n    if (typeof versioned === 'string') {\r\n      exactVersion = splitNameVersion(versioned)[1];\r\n    }\r\n  }\r\n\r\n  const data: { hits: PkgInfo[] } | APIError = await fetch(getSearchApiUrl('query'), {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json; charset=UTF-8',\r\n      ...algoliaHeaders,\r\n    },\r\n    body: JSON.stringify({\r\n      query: name,\r\n      ...options,\r\n    }),\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) throw new Error('failed to fetch');\r\n      return res;\r\n    })\r\n    .then((res) => res.json())\r\n    .catch((err) => ({\r\n      error: true,\r\n      message: err.mesage || String(err),\r\n    }));\r\n\r\n  if ('error' in data) {\r\n    return data;\r\n  }\r\n\r\n  const results: PkgInfo[] = data.hits.map((pkg) => {\r\n    if (pkg.name === name && exactVersion) {\r\n      pkg.version = exactVersion;\r\n    }\r\n    if (pkg.repository?.url) {\r\n      pkg.repo = pkg.repository?.url;\r\n    }\r\n    return pkg;\r\n  });\r\n  // An exact match should always come first.\r\n  results.sort((a, b) => (a.name === name ? -1 : b.name === name ? 1 : 0));\r\n\r\n  return results;\r\n};\r\n\r\nconst addPkgVersion = async (pkgName: string): Promise<string | APIError> => {\r\n  const url = `${apiEndpoint}/package/resolve/npm/${pkgName}`;\r\n  const data: PkgInfo | APIError = await fetch(url, { headers: jsDelivrHeaders })\r\n    .then((res) => {\r\n      if (!res.ok) throw new Error('failed to fetch');\r\n      return res;\r\n    })\r\n    .then((res) => res.json())\r\n    .catch((err) => ({\r\n      error: true,\r\n      message: err.mesage || String(err),\r\n    }));\r\n\r\n  if ('error' in data) {\r\n    return data;\r\n  }\r\n  const name = splitNameVersion(pkgName)[0];\r\n  const version = data.version;\r\n  return version ? `${name}@${version}` : name;\r\n};\r\n\r\nconst getPkgInfo = async (pkgName: string): Promise<PkgInfo | APIError> => {\r\n  const [name, version] = splitNameVersion(pkgName);\r\n\r\n  let exactVersion: string | undefined;\r\n  if (version) {\r\n    const versioned = await addPkgVersion(pkgName);\r\n    if (typeof versioned === 'string') {\r\n      exactVersion = splitNameVersion(versioned)[1];\r\n    }\r\n  }\r\n\r\n  const url = getSearchApiUrl(name) + '&attributesToRetrieve=' + attributesToRetrieve.join(',');\r\n  const data: PkgInfo | APIError = await fetch(url, {\r\n    method: 'GET',\r\n    headers: algoliaHeaders,\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) throw new Error('failed to fetch');\r\n      return res;\r\n    })\r\n    .then((res) => res.json())\r\n    .catch((err) => ({\r\n      error: true,\r\n      message: err.mesage || String(err),\r\n    }));\r\n\r\n  if ('error' in data) {\r\n    return data;\r\n  }\r\n\r\n  if (exactVersion) {\r\n    data.version = exactVersion;\r\n  }\r\n  if (data.repository?.url) {\r\n    data.repo = data.repository?.url;\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nconst getPkgFiles = async (\r\n  pkgName: string,\r\n): Promise<{ default?: string; files: string[] } | APIError> => {\r\n  const pkgNameVersion = await addPkgVersion(pkgName);\r\n  const url = `${apiEndpoint}/package/npm/${pkgNameVersion}/flat`;\r\n  const data: APIPkgFiles | APIError = await fetch(url, { headers: jsDelivrHeaders })\r\n    .then((res) => {\r\n      if (!res.ok) throw new Error('failed to fetch');\r\n      return res;\r\n    })\r\n    .then((res) => res.json())\r\n    .catch((err) => ({\r\n      error: true,\r\n      message: err.mesage || String(err),\r\n    }));\r\n\r\n  if ('error' in data) {\r\n    return data;\r\n  }\r\n  const basePath = `https://cdn.jsdelivr.net/npm/${pkgNameVersion}`;\r\n  return {\r\n    ...(data.default ? { default: basePath + data.default } : {}),\r\n    files: data.files.map((f: { name: string }) => basePath + f.name),\r\n  };\r\n};\r\n\r\nconst getPkgDefaultFiles = async (\r\n  pkgName: string,\r\n): Promise<{ js?: string; css?: string } | APIError> => {\r\n  const pkgNameVersion = await addPkgVersion(pkgName);\r\n  const url = `${apiEndpoint}/package/npm/${pkgNameVersion}/entrypoints`;\r\n  const data: EntryPoints | APIError = await fetch(url, { headers: jsDelivrHeaders })\r\n    .then((res) => {\r\n      if (!res.ok) throw new Error('failed to fetch');\r\n      return res;\r\n    })\r\n    .then((res) => res.json())\r\n    .catch((err) => ({\r\n      error: true,\r\n      message: err.mesage || String(err),\r\n    }));\r\n\r\n  if ('error' in data) {\r\n    return data;\r\n  }\r\n  const basePath = `https://cdn.jsdelivr.net/npm/${pkgNameVersion}`;\r\n  return {\r\n    ...(data.js?.file ? { js: basePath + data.js?.file } : {}),\r\n    ...(data.css?.file ? { css: basePath + data.css?.file } : {}),\r\n  };\r\n};\r\n\r\nexport const pkgInfoService: CDNService = {\r\n  search,\r\n  getPkgInfo,\r\n  getPkgFiles,\r\n  getPkgDefaultFiles,\r\n};\r\n", "/* eslint-disable import/no-internal-modules */\r\n// eslint-disable-next-line import/no-unresolved\r\nimport type * as Monaco from 'monaco-editor'; // only for typescript types\r\n\r\nimport type {\r\n  EditorLibrary,\r\n  FormatFn,\r\n  Language,\r\n  CodeEditor,\r\n  EditorOptions,\r\n  Theme,\r\n  EditorPosition,\r\n  EditorConfig,\r\n  PkgInfo,\r\n  APIError,\r\n} from '../../models';\r\nimport { getRandomString, loadScript } from '../../utils/utils';\r\nimport { emmetMonacoUrl, monacoEmacsUrl, monacoVimUrl } from '../../vendors';\r\nimport { getImports } from '../../compiler/import-map';\r\nimport { getEditorModeNode } from '../../UI/selectors';\r\nimport { pkgInfoService } from '../../services/pkgInfo';\r\n\r\ntype Options = Monaco.editor.IStandaloneEditorConstructionOptions;\r\n\r\nlet monacoGloballyLoaded = false;\r\nconst disposeEmmet: { html?: any; css?: any; jsx?: any; disabled?: boolean } = {};\r\nlet monaco: typeof Monaco;\r\n\r\nexport const createEditor = async (options: EditorOptions): Promise<CodeEditor> => {\r\n  const {\r\n    container,\r\n    baseUrl,\r\n    readonly,\r\n    theme,\r\n    isEmbed,\r\n    getLanguageExtension,\r\n    mapLanguage,\r\n    getFormatterConfig,\r\n    getFontFamily,\r\n  } = options;\r\n  if (!container) throw new Error('editor container not found');\r\n\r\n  let editorMode: any | undefined;\r\n\r\n  const convertOptions = (opt: EditorConfig): Options => ({\r\n    fontFamily: getFontFamily(opt.fontFamily),\r\n    fontSize: opt.fontSize || (isEmbed ? 12 : 14),\r\n    insertSpaces: !opt.useTabs,\r\n    detectIndentation: false,\r\n    tabSize: opt.tabSize,\r\n    lineNumbers: opt.lineNumbers ? 'on' : 'off',\r\n    wordWrap: opt.wordWrap ? 'on' : 'off',\r\n    autoClosingBrackets: opt.closeBrackets ? 'always' : 'never',\r\n    autoClosingQuotes: opt.closeBrackets ? 'always' : 'never',\r\n    autoClosingDelete: opt.closeBrackets ? 'always' : 'never',\r\n  });\r\n\r\n  const baseOptions = convertOptions(options);\r\n\r\n  const monacoMapLanguage = (language: Language): Language =>\r\n    language === 'livescript'\r\n      ? 'coffeescript'\r\n      : ['rescript', 'reason', 'ocaml'].includes(language)\r\n      ? 'csharp'\r\n      : mapLanguage(language);\r\n\r\n  const monacoPath = baseUrl + 'vendor/monaco-editor/' + process.env.monacoVersion;\r\n  try {\r\n    (window as any).monaco =\r\n      (window as any).monaco || (await import(`${monacoPath}/monaco-editor.js`)).monaco;\r\n    monaco = (window as any).monaco;\r\n  } catch {\r\n    throw new Error('Failed to load monaco editor');\r\n  }\r\n\r\n  monaco.editor.defineTheme('custom-vs-light', {\r\n    base: 'vs',\r\n    inherit: true,\r\n    rules: [{ token: 'comment', fontStyle: 'italic' }],\r\n    colors: {},\r\n  });\r\n  monaco.editor.defineTheme('custom-vs-dark', {\r\n    base: 'vs-dark',\r\n    inherit: true,\r\n    rules: [{ token: 'comment', fontStyle: 'italic' }],\r\n    colors: {},\r\n  });\r\n\r\n  const defaultOptions: Options = {\r\n    theme: 'custom-vs-' + theme,\r\n    fontLigatures: true,\r\n    formatOnType: false,\r\n    lineNumbersMinChars: 3,\r\n    minimap: { enabled: false },\r\n    scrollbar: { useShadows: false },\r\n    mouseWheelZoom: true,\r\n    automaticLayout: true,\r\n    readOnly: readonly,\r\n  };\r\n\r\n  const codeblockOptions: Options = {\r\n    ...defaultOptions,\r\n    scrollBeyondLastLine: false,\r\n    contextmenu: false,\r\n  };\r\n\r\n  const compiledCodeOptions: Options = {\r\n    ...defaultOptions,\r\n    scrollBeyondLastLine: false,\r\n  };\r\n\r\n  const consoleOptions: Options = {\r\n    ...defaultOptions,\r\n    glyphMargin: true,\r\n    folding: false,\r\n    lineDecorationsWidth: 0,\r\n    lineNumbersMinChars: 0,\r\n    scrollbar: {\r\n      vertical: 'auto',\r\n    },\r\n    scrollBeyondLastLine: false,\r\n    contextmenu: false,\r\n  };\r\n\r\n  const embedOptions: Options = {\r\n    ...consoleOptions,\r\n  };\r\n\r\n  const editorId = options.editorId;\r\n  const editorOptions =\r\n    editorId === 'console'\r\n      ? consoleOptions\r\n      : editorId === 'compiled'\r\n      ? compiledCodeOptions\r\n      : editorId === 'embed'\r\n      ? embedOptions\r\n      : options.mode === 'codeblock'\r\n      ? codeblockOptions\r\n      : defaultOptions;\r\n\r\n  if (!document.head.querySelector('#__livecodes__monaco-styles')) {\r\n    const stylesheet = document.createElement('link');\r\n    stylesheet.setAttribute('rel', 'stylesheet');\r\n    stylesheet.setAttribute('href', `${monacoPath}/monaco-editor.css`);\r\n    stylesheet.id = '__livecodes__monaco-styles';\r\n    document.head.appendChild(stylesheet);\r\n  }\r\n\r\n  (window as any).MonacoEnvironment = {\r\n    getWorkerUrl(_moduleId: string, label: string) {\r\n      if (label === 'json') return `${monacoPath}/json.worker.js`;\r\n      if (label === 'css') return `${monacoPath}/css.worker.js`;\r\n      if (label === 'scss') return `${monacoPath}/css.worker.js`;\r\n      if (label === 'sass') return `${monacoPath}/css.worker.js`;\r\n      if (label === 'less') return `${monacoPath}/css.worker.js`;\r\n      if (label === 'html') return `${monacoPath}/html.worker.js`;\r\n      if (label === 'typescript' || label === 'javascript') {\r\n        return `${monacoPath}/ts.worker.js`;\r\n      }\r\n      return `${monacoPath}/editor.worker.js`;\r\n    },\r\n  };\r\n\r\n  const configureEditor = () => {\r\n    const compilerOptions: Monaco.languages.typescript.CompilerOptions = {\r\n      jsx: monaco.languages.typescript.JsxEmit.Preserve,\r\n      allowNonTsExtensions: true,\r\n      allowJs: false,\r\n      target: monaco.languages.typescript.ScriptTarget.Latest,\r\n      experimentalDecorators: true,\r\n      allowSyntheticDefaultImports: true,\r\n      lib: ['esnext', 'dom'],\r\n      module: monaco.languages.typescript.ModuleKind.ESNext,\r\n    };\r\n    monaco.languages.typescript.typescriptDefaults.setCompilerOptions(compilerOptions);\r\n\r\n    if (\r\n      language === 'tsx' ||\r\n      language === 'jsx' ||\r\n      language === 'sucrase' ||\r\n      language === 'babel' ||\r\n      language === 'flow'\r\n    ) {\r\n      monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\r\n        ...compilerOptions,\r\n        jsx: monaco.languages.typescript.JsxEmit.React,\r\n        jsxFactory: 'React.createElement',\r\n        reactNamespace: 'React',\r\n      });\r\n    }\r\n    if (language === 'stencil') {\r\n      monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\r\n        ...compilerOptions,\r\n        jsx: monaco.languages.typescript.JsxEmit.Preserve,\r\n        jsxFactory: undefined,\r\n        reactNamespace: 'h',\r\n      });\r\n    }\r\n    if (language === 'flow') {\r\n      // just silence errors for now\r\n      // TODO: fix this\r\n      // https://github.com/facebook/flow/tree/main/website/src/try-flow\r\n      monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\r\n        noSemanticValidation: true,\r\n      });\r\n    } else if (['typescript'].includes(mapLanguage(language))) {\r\n      monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\r\n        noSemanticValidation: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  type Listener = () => void;\r\n  const listeners: Listener[] = [];\r\n  const upateListeners = () => {\r\n    listeners.forEach((fn) => editor.getModel()?.onDidChangeContent(fn));\r\n  };\r\n\r\n  let modelUri = '';\r\n  const setModel = (\r\n    editor: Monaco.editor.IStandaloneCodeEditor,\r\n    value: string,\r\n    language: Language,\r\n  ) => {\r\n    const random = getRandomString();\r\n    const ext = getLanguageExtension(language);\r\n    const extension =\r\n      monacoMapLanguage(language) === 'typescript' && !ext?.endsWith('ts') && !ext?.endsWith('tsx')\r\n        ? ext + '.tsx'\r\n        : ext;\r\n    modelUri = `file:///${editorId}.${random}.${extension}`;\r\n    const oldModel = editor.getModel();\r\n    const model = monaco.editor.createModel(\r\n      value || '',\r\n      monacoMapLanguage(language),\r\n      monaco.Uri.parse(modelUri),\r\n    );\r\n    editor.setModel(model);\r\n    setTimeout(() => oldModel?.dispose(), 1000); // avoid race https://github.com/microsoft/monaco-editor/issues/1715\r\n    upateListeners();\r\n    configureEditor();\r\n  };\r\n\r\n  let language = options.language;\r\n\r\n  const editor = monaco.editor.create(container, {\r\n    ...baseOptions,\r\n    ...editorOptions,\r\n    language: monacoMapLanguage(language),\r\n  });\r\n  setModel(editor, options.value, language);\r\n\r\n  if (editorOptions.theme === 'vs-light') container.style.backgroundColor = '#fff';\r\n  if (editorOptions.theme?.startsWith('http') || editorOptions.theme?.startsWith('./')) {\r\n    fetch(editorOptions.theme)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        monaco.editor.defineTheme('theme', data);\r\n        monaco.editor.setTheme('theme');\r\n        container.style.backgroundColor = data.colors['editor.background'];\r\n      });\r\n  }\r\n\r\n  const customLanguages: Partial<Record<Language, string>> = {\r\n    astro: baseUrl + '{{hash:monaco-lang-astro.js}}',\r\n    clio: baseUrl + '{{hash:monaco-lang-clio.js}}',\r\n    imba: baseUrl + '{{hash:monaco-lang-imba.js}}',\r\n    // sql: baseUrl + '{{hash:monaco-lang-sql.js}}', // TODO: add autocomplete\r\n    wat: baseUrl + '{{hash:monaco-lang-wat.js}}',\r\n  };\r\n\r\n  interface CustomLanguageDefinition {\r\n    config?: Monaco.languages.LanguageConfiguration;\r\n    tokens?: Monaco.languages.IMonarchLanguage;\r\n  }\r\n  const loadMonacoLanguage = async (lang: Language) => {\r\n    const langUrl = customLanguages[lang];\r\n    if (langUrl && !monaco.languages.getLanguages().find((l) => l.id === lang)) {\r\n      const mod: CustomLanguageDefinition = (await import(langUrl)).default;\r\n      monaco.languages.register({ id: lang });\r\n      if (mod.config) {\r\n        monaco.languages.setLanguageConfiguration(lang, mod.config);\r\n      }\r\n      if (mod.tokens) {\r\n        monaco.languages.setMonarchTokensProvider(lang, mod.tokens);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getEditorId = () => editorId;\r\n  const getValue = () => editor.getValue();\r\n  const setValue = (value = '') => {\r\n    editor.getModel()?.setValue(value);\r\n  };\r\n\r\n  const types: Array<{\r\n    filename: string;\r\n    libJs: { dispose: () => void };\r\n    libTs: { dispose: () => void };\r\n  }> = [];\r\n\r\n  const isEditorType = (type: { filename: string }) =>\r\n    !type.filename.startsWith('file:///node_modules/');\r\n\r\n  const clearTypes = (allTypes = true) => {\r\n    types\r\n      .filter((type) => (allTypes ? true : isEditorType(type)))\r\n      .forEach((type) => {\r\n        type.libJs.dispose();\r\n        type.libTs.dispose();\r\n      });\r\n    types.length = 0;\r\n  };\r\n\r\n  const getLanguage = () => language;\r\n  const setLanguage = (lang: Language, value?: string) => {\r\n    language = lang;\r\n    clearTypes(false);\r\n    setModel(editor, value ?? editor.getValue(), language);\r\n    loadMonacoLanguage(lang);\r\n  };\r\n\r\n  const addTypes = (type: EditorLibrary) => {\r\n    const loadedType = types.find((t) => t.filename === type.filename);\r\n    if (loadedType) {\r\n      if (isEditorType(type)) {\r\n        loadedType.libJs.dispose();\r\n        loadedType.libJs = monaco.languages.typescript.javascriptDefaults.addExtraLib(\r\n          type.content,\r\n          type.filename,\r\n        );\r\n      }\r\n      return;\r\n    }\r\n    types.push({\r\n      filename: type.filename,\r\n      libJs: monaco.languages.typescript.javascriptDefaults.addExtraLib(\r\n        type.content,\r\n        type.filename,\r\n      ),\r\n      libTs: isEditorType(type)\r\n        ? {\r\n            // avoid duplicate declarations for typescript\r\n            dispose: () => {\r\n              // do nothing\r\n            },\r\n          }\r\n        : monaco.languages.typescript.typescriptDefaults.addExtraLib(type.content, type.filename),\r\n    });\r\n  };\r\n\r\n  const focus = () => editor.focus();\r\n  const layout = () => editor.layout();\r\n\r\n  const onContentChanged = (fn: () => void) => {\r\n    listeners.push(fn);\r\n    editor.getModel()?.onDidChangeContent(fn);\r\n  };\r\n\r\n  const keyCodes = {\r\n    // eslint-disable-next-line\r\n    CtrlEnter: monaco.KeyMod.CtrlCmd | monaco.KeyCode.Enter,\r\n    // eslint-disable-next-line\r\n    ShiftEnter: monaco.KeyMod.Shift | monaco.KeyCode.Enter,\r\n    Enter: monaco.KeyCode.Enter,\r\n    UpArrow: monaco.KeyCode.UpArrow,\r\n    DownArrow: monaco.KeyCode.DownArrow,\r\n    // eslint-disable-next-line\r\n    ShiftAltF: monaco.KeyMod.Shift | monaco.KeyMod.Alt | monaco.KeyCode.KeyF,\r\n  };\r\n\r\n  const addKeyBinding = (label: string, keybinding: any, callback: () => void) => {\r\n    editor.addAction({\r\n      id: label,\r\n      label,\r\n      keybindings: [keybinding],\r\n      precondition: '!suggestWidgetVisible && !markersNavigationVisible && !findWidgetVisible',\r\n      run: callback,\r\n    });\r\n  };\r\n\r\n  const configureEditorMode = async (mode: EditorConfig['editorMode']) => {\r\n    const editorModeNode = getEditorModeNode();\r\n    const statusNode = document.querySelector<HTMLElement>(\r\n      `#editor-status [data-status=\"${options.editorId}\"]`,\r\n    );\r\n    const setEditorModeText = (str: string) => {\r\n      if (!editorModeNode) return;\r\n      editorModeNode.textContent = str;\r\n    };\r\n    const setStatusText = (str: string) => {\r\n      if (!statusNode) return;\r\n      statusNode.textContent = str;\r\n    };\r\n\r\n    if (!mode) {\r\n      editorMode?.dispose();\r\n      editorMode = undefined;\r\n      setStatusText('');\r\n      setEditorModeText('');\r\n      return;\r\n    }\r\n\r\n    if (mode === 'vim') {\r\n      if (editorMode?.mode === 'vim') return;\r\n      if (editorMode?.mode === 'emacs') {\r\n        editorMode.dispose();\r\n        setStatusText('');\r\n      }\r\n      const MonacoVim: any = await loadScript(monacoVimUrl, 'MonacoVim');\r\n      const stNode = statusNode?.innerHTML !== '' ? undefined : statusNode; // avoid duplication\r\n      editorMode = MonacoVim.initVimMode(editor, stNode);\r\n      editorMode.mode = 'vim';\r\n      setEditorModeText('Vim');\r\n    }\r\n\r\n    if (mode === 'emacs') {\r\n      if (editorMode?.mode === 'emacs') return;\r\n      if (editorMode?.mode === 'vim') {\r\n        editorMode.dispose();\r\n        setStatusText('');\r\n      }\r\n      const MonacoEmacs: any = await loadScript(monacoEmacsUrl, 'MonacoEmacs');\r\n      editorMode = new MonacoEmacs.EmacsExtension(editor);\r\n      setStatusText('');\r\n      editorMode.onDidMarkChange(function (ev: Event) {\r\n        setStatusText(ev ? 'Mark Set!' : 'Mark Unset');\r\n      });\r\n      editorMode.onDidChangeKey(function (str: string) {\r\n        setStatusText(str);\r\n      });\r\n      editorMode.start();\r\n      editorMode.mode = 'emacs';\r\n      setEditorModeText('Emacs');\r\n    }\r\n  };\r\n  configureEditorMode(options.editorMode);\r\n\r\n  const registerFormatter = (formatFn: FormatFn | undefined) => {\r\n    const editorModel = editor.getModel();\r\n    if (!formatFn || !editorModel) return;\r\n\r\n    monaco.languages.registerDocumentFormattingEditProvider(monacoMapLanguage(language), {\r\n      provideDocumentFormattingEdits: async () => {\r\n        const val = editor.getValue();\r\n        const prettyVal = await formatFn(val, 0, getFormatterConfig());\r\n        return [\r\n          {\r\n            range: editorModel.getFullModelRange(),\r\n            text: prettyVal.formatted,\r\n          },\r\n        ];\r\n      },\r\n    });\r\n  };\r\n\r\n  const format = () => editor.getAction('editor.action.formatDocument').run();\r\n\r\n  const configureEmmet = (enabled: boolean) => {\r\n    if (!enabled && !(window as any).emmetMonaco) return;\r\n\r\n    loadScript(emmetMonacoUrl, 'emmetMonaco').then((emmetMonaco: any) => {\r\n      if (enabled) {\r\n        if (!disposeEmmet.html || disposeEmmet.disabled) {\r\n          disposeEmmet.html = emmetMonaco.emmetHTML(monaco, [\r\n            'html',\r\n            'php',\r\n            'astro',\r\n            'markdown',\r\n            'mdx',\r\n          ]);\r\n          disposeEmmet.css = emmetMonaco.emmetCSS(monaco, ['css', 'scss', 'less']);\r\n          disposeEmmet.jsx = emmetMonaco.emmetJSX(monaco, [\r\n            'javascript',\r\n            'typescript',\r\n            'jsx',\r\n            'tsx',\r\n          ]);\r\n          disposeEmmet.disabled = false;\r\n        }\r\n      } else {\r\n        disposeEmmet.html?.();\r\n        disposeEmmet.css?.();\r\n        disposeEmmet.jsx?.();\r\n        disposeEmmet.disabled = true;\r\n      }\r\n    });\r\n  };\r\n\r\n  const setTheme = (theme: Theme) => {\r\n    monaco.editor.setTheme('custom-vs-' + theme);\r\n  };\r\n\r\n  const changeSettings = (settings: EditorConfig) => {\r\n    const newOptions = {\r\n      ...convertOptions(settings),\r\n      ...editorOptions,\r\n    };\r\n    configureEmmet(settings.emmet);\r\n    configureEditorMode(settings.editorMode);\r\n    editor.updateOptions(newOptions);\r\n  };\r\n\r\n  const undo = () => {\r\n    (editor.getModel() as any)?.undo?.();\r\n  };\r\n\r\n  const redo = () => {\r\n    (editor.getModel() as any)?.redo?.();\r\n  };\r\n\r\n  const getPosition = (): EditorPosition => {\r\n    const position = editor.getPosition();\r\n    return {\r\n      lineNumber: position?.lineNumber ?? 0,\r\n      column: position?.column ?? 0,\r\n    };\r\n  };\r\n\r\n  const setPosition = (position: EditorPosition) => {\r\n    const newPosition = {\r\n      lineNumber: position.lineNumber,\r\n      column: position.column ?? 0,\r\n    };\r\n    editor.setPosition(newPosition);\r\n    setTimeout(() => editor.revealPositionInCenter(newPosition, 0), 50);\r\n  };\r\n\r\n  const destroy = () => {\r\n    configureEmmet(false);\r\n    editorMode?.dispose();\r\n    listeners.length = 0;\r\n    clearTypes(true);\r\n    editor.getModel()?.dispose();\r\n    editor.dispose();\r\n    container.innerHTML = '';\r\n  };\r\n\r\n  // workaround for uncaught canceled promise rejection onMouseLeave\r\n  // https://github.com/microsoft/monaco-editor/issues/2382\r\n  window.addEventListener('unhandledrejection', function (event) {\r\n    if (event.reason && event.reason.name === 'Canceled') {\r\n      event.preventDefault();\r\n    }\r\n  });\r\n\r\n  const registerShowPackageInfo = () => {\r\n    // from https://github.com/snowpackjs/astro-repl/blob/main/src/editor/modules/monaco.ts\r\n\r\n    const pkgCache = new Map<string, PkgInfo>();\r\n\r\n    const npmPackageHoverProvider: Monaco.languages.HoverProvider = {\r\n      provideHover(model, position) {\r\n        const content = model.getLineContent(position.lineNumber);\r\n        let pkg = getImports(content)[0];\r\n        if (!pkg) return;\r\n\r\n        if (\r\n          pkg.startsWith('https://') ||\r\n          pkg.startsWith('http://') ||\r\n          pkg.startsWith('.') ||\r\n          pkg.startsWith('data:') ||\r\n          pkg.startsWith('blob:')\r\n        ) {\r\n          return;\r\n        } else if (/^(skypack|unpkg|jsdelivr|esm|esm\\.run|esm\\.sh|bundle\\.run)\\:/.test(pkg)) {\r\n          pkg = pkg.replace(/^(skypack|unpkg|jsdelivr|esm|esm\\.run|esm\\.sh|bundle\\.run)\\:/, '');\r\n        }\r\n        // remove version\r\n        // pkg = pkg.replace(/(^@?([^@])+)(.*)/g, `$1`);\r\n\r\n        // remove sub-directories\r\n        const parts = pkg.split('/');\r\n        const end = parts[0].startsWith('@') ? 2 : 1;\r\n        pkg = parts.slice(0, end).join('/');\r\n\r\n        return (async () => {\r\n          let pkgInfo: PkgInfo | APIError | undefined;\r\n\r\n          if (!pkgCache.has(pkg)) {\r\n            pkgInfo = await pkgInfoService.getPkgInfo(pkg);\r\n            if ('error' in pkgInfo) return;\r\n            pkgCache.set(pkg, pkgInfo);\r\n          } else {\r\n            pkgInfo = pkgCache.get(pkg);\r\n          }\r\n          if (!pkgInfo || 'error' in pkgInfo) return;\r\n\r\n          const { name, version = '', description = '', repo = '' } = pkgInfo;\r\n\r\n          return {\r\n            contents: [\r\n              {\r\n                value: `## [${name}](https://www.npmjs.com/package/${name}/v/${version}) (v${version})\\n${description}\\n\\n\\n${\r\n                  repo ? `[GitHub](${repo})  |` : ''\r\n                }  [Skypack](https://skypack.dev/view/${name})  |  [jsDelivr](https://www.jsdelivr.com/package/npm/${name}?version=${version})  |  [Unpkg](https://unpkg.com/browse/${name}@${version}/)  | [Openbase](https://openbase.com/js/${name})\\n\\nDocs: [Importing modules](${\r\n                  new URL(process.env.DOCS_BASE_URL as string, location.href).href\r\n                }features/module-resolution)`,\r\n              },\r\n            ],\r\n          };\r\n        })();\r\n      },\r\n    };\r\n    monaco.languages.registerHoverProvider('javascript', npmPackageHoverProvider);\r\n    monaco.languages.registerHoverProvider('typescript', npmPackageHoverProvider);\r\n    monaco.languages.registerHoverProvider('html', npmPackageHoverProvider);\r\n  };\r\n\r\n  if (!monacoGloballyLoaded) {\r\n    registerShowPackageInfo();\r\n  }\r\n\r\n  monacoGloballyLoaded = true;\r\n  return {\r\n    getValue,\r\n    setValue,\r\n    getLanguage,\r\n    setLanguage,\r\n    getEditorId,\r\n    focus,\r\n    getPosition,\r\n    setPosition,\r\n    layout,\r\n    addTypes,\r\n    changeSettings,\r\n    onContentChanged,\r\n    keyCodes,\r\n    addKeyBinding,\r\n    registerFormatter,\r\n    format,\r\n    isReadonly: readonly,\r\n    setTheme,\r\n    undo,\r\n    redo,\r\n    destroy,\r\n    monaco: editor,\r\n  };\r\n};\r\n"],
  "mappings": "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",
  "names": ["require_lz_string", "__commonJSMin", "exports", "module", "LZString", "f", "keyStrBase64", "keyStrUriSafe", "baseReverseDic", "getBaseValue", "alphabet", "character", "input", "res", "a", "index", "compressed", "uncompressed", "buf", "i", "TotalLen", "current_value", "result", "c", "bitsPerChar", "getCharFromInt", "value", "context_dictionary", "context_dictionaryToCreate", "context_c", "context_wc", "context_w", "context_enlargeIn", "context_dictSize", "context_numBits", "context_data", "context_data_val", "context_data_position", "ii", "length", "resetValue", "getNextValue", "dictionary", "next", "enlargeIn", "dictSize", "numBits", "entry", "w", "bits", "resb", "maxpower", "power", "data", "getRandomString", "loadScript", "url", "name", "resolve", "reject", "script", "removeEventListeners", "onLoad", "onError", "removeComments", "src", "moduleCDNs", "npmCDNs", "ghCDNs", "modulesService", "moduleName", "isModule", "defaultCDN", "moduleUrl", "getCdnUrl", "path", "cdn", "getAppCDN", "testModule", "preferredCDN", "cdns", "modName", "post", "i", "TEMPLATES", "pattern", "template", "getUrl", "getModuleUrl", "modulesService", "emmetMonacoUrl", "getUrl", "malinaVersion", "malinaUrl", "getUrl", "monacoEmacsUrl", "getUrl", "monacoVimUrl", "allowedOrigin", "origin", "import_lz_string", "dpasteGetUrl", "dpastePostUrl", "apiUrl", "dpasteService", "id", "res", "config", "apiService", "allowedOrigin", "shareService", "importsPattern", "dynamicImportsPattern", "getImports", "code", "removeComments", "arr", "getEditorModeNode", "getSearchApiUrl", "query", "algoliaHeaders", "attributesToRetrieve", "apiEndpoint", "jsDelivrHeaders", "splitNameVersion", "nameVersion", "scoped", "str", "name", "version", "search", "limit", "options", "exactVersion", "versioned", "addPkgVersion", "data", "res", "err", "results", "pkg", "a", "b", "pkgName", "url", "getPkgInfo", "getPkgFiles", "pkgNameVersion", "basePath", "f", "getPkgDefaultFiles", "pkgInfoService", "monacoGloballyLoaded", "disposeEmmet", "monaco", "createEditor", "options", "container", "baseUrl", "readonly", "theme", "isEmbed", "getLanguageExtension", "mapLanguage", "getFormatterConfig", "getFontFamily", "editorMode", "convertOptions", "opt", "baseOptions", "monacoMapLanguage", "language", "monacoPath", "defaultOptions", "codeblockOptions", "compiledCodeOptions", "consoleOptions", "embedOptions", "editorId", "editorOptions", "stylesheet", "_moduleId", "label", "configureEditor", "compilerOptions", "listeners", "upateListeners", "fn", "editor", "modelUri", "setModel", "value", "random", "getRandomString", "ext", "extension", "oldModel", "model", "res", "data", "customLanguages", "loadMonacoLanguage", "lang", "langUrl", "l", "mod", "getEditorId", "getValue", "setValue", "types", "isEditorType", "type", "clearTypes", "allTypes", "getLanguage", "setLanguage", "addTypes", "loadedType", "t", "focus", "layout", "onContentChanged", "keyCodes", "addKeyBinding", "keybinding", "callback", "configureEditorMode", "mode", "editorModeNode", "getEditorModeNode", "statusNode", "setEditorModeText", "str", "setStatusText", "MonacoVim", "loadScript", "monacoVimUrl", "stNode", "MonacoEmacs", "monacoEmacsUrl", "ev", "registerFormatter", "formatFn", "editorModel", "val", "prettyVal", "format", "configureEmmet", "enabled", "emmetMonacoUrl", "emmetMonaco", "setTheme", "changeSettings", "settings", "newOptions", "undo", "redo", "getPosition", "position", "setPosition", "newPosition", "destroy", "event", "pkgCache", "npmPackageHoverProvider", "content", "pkg", "getImports", "parts", "end", "pkgInfo", "pkgInfoService", "name", "version", "description", "repo"]
}
