var Ze=Object.create;var re=Object.defineProperty;var Qe=Object.getOwnPropertyDescriptor;var Xe=Object.getOwnPropertyNames;var Ye=Object.getPrototypeOf,et=Object.prototype.hasOwnProperty;var tt=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var ot=(e,n,f,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let y of Xe(n))!et.call(e,y)&&y!==f&&re(e,y,{get:()=>n[y],enumerable:!(u=Qe(n,y))||u.enumerable});return e};var nt=(e,n,f)=>(f=e!=null?Ze(Ye(e)):{},ot(n||!e||!e.__esModule?re(f,"default",{value:e,enumerable:!0}):f,e));var fe=tt((so,F)=>{var ge=function(){var e=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={};function y(o,c){if(!u[o]){u[o]={};for(var i=0;i<o.length;i++)u[o][o.charAt(i)]=i}return u[o][c]}var a={compressToBase64:function(o){if(o==null)return"";var c=a._compress(o,6,function(i){return n.charAt(i)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:a._decompress(o.length,32,function(c){return y(n,o.charAt(c))})},compressToUTF16:function(o){return o==null?"":a._compress(o,15,function(c){return e(c+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:a._decompress(o.length,16384,function(c){return o.charCodeAt(c)-32})},compressToUint8Array:function(o){for(var c=a.compress(o),i=new Uint8Array(c.length*2),p=0,l=c.length;p<l;p++){var T=c.charCodeAt(p);i[p*2]=T>>>8,i[p*2+1]=T%256}return i},decompressFromUint8Array:function(o){if(o==null)return a.decompress(o);for(var c=new Array(o.length/2),i=0,p=c.length;i<p;i++)c[i]=o[i*2]*256+o[i*2+1];var l=[];return c.forEach(function(T){l.push(e(T))}),a.decompress(l.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":a._compress(o,6,function(c){return f.charAt(c)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),a._decompress(o.length,32,function(c){return y(f,o.charAt(c))}))},compress:function(o){return a._compress(o,16,function(c){return e(c)})},_compress:function(o,c,i){if(o==null)return"";var p,l,T={},H={},k="",w="",b="",M=2,q=3,h=2,x=[],s=0,r=0,v;for(v=0;v<o.length;v+=1)if(k=o.charAt(v),Object.prototype.hasOwnProperty.call(T,k)||(T[k]=q++,H[k]=!0),w=b+k,Object.prototype.hasOwnProperty.call(T,w))b=w;else{if(Object.prototype.hasOwnProperty.call(H,b)){if(b.charCodeAt(0)<256){for(p=0;p<h;p++)s=s<<1,r==c-1?(r=0,x.push(i(s)),s=0):r++;for(l=b.charCodeAt(0),p=0;p<8;p++)s=s<<1|l&1,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=l>>1}else{for(l=1,p=0;p<h;p++)s=s<<1|l,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=0;for(l=b.charCodeAt(0),p=0;p<16;p++)s=s<<1|l&1,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=l>>1}M--,M==0&&(M=Math.pow(2,h),h++),delete H[b]}else for(l=T[b],p=0;p<h;p++)s=s<<1|l&1,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=l>>1;M--,M==0&&(M=Math.pow(2,h),h++),T[w]=q++,b=String(k)}if(b!==""){if(Object.prototype.hasOwnProperty.call(H,b)){if(b.charCodeAt(0)<256){for(p=0;p<h;p++)s=s<<1,r==c-1?(r=0,x.push(i(s)),s=0):r++;for(l=b.charCodeAt(0),p=0;p<8;p++)s=s<<1|l&1,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=l>>1}else{for(l=1,p=0;p<h;p++)s=s<<1|l,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=0;for(l=b.charCodeAt(0),p=0;p<16;p++)s=s<<1|l&1,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=l>>1}M--,M==0&&(M=Math.pow(2,h),h++),delete H[b]}else for(l=T[b],p=0;p<h;p++)s=s<<1|l&1,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=l>>1;M--,M==0&&(M=Math.pow(2,h),h++)}for(l=2,p=0;p<h;p++)s=s<<1|l&1,r==c-1?(r=0,x.push(i(s)),s=0):r++,l=l>>1;for(;;)if(s=s<<1,r==c-1){x.push(i(s));break}else r++;return x.join("")},decompress:function(o){return o==null?"":o==""?null:a._decompress(o.length,32768,function(c){return o.charCodeAt(c)})},_decompress:function(o,c,i){var p=[],l,T=4,H=4,k=3,w="",b=[],M,q,h,x,s,r,v,m={val:i(0),position:c,index:1};for(M=0;M<3;M+=1)p[M]=M;for(h=0,s=Math.pow(2,2),r=1;r!=s;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=c,m.val=i(m.index++)),h|=(x>0?1:0)*r,r<<=1;switch(l=h){case 0:for(h=0,s=Math.pow(2,8),r=1;r!=s;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=c,m.val=i(m.index++)),h|=(x>0?1:0)*r,r<<=1;v=e(h);break;case 1:for(h=0,s=Math.pow(2,16),r=1;r!=s;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=c,m.val=i(m.index++)),h|=(x>0?1:0)*r,r<<=1;v=e(h);break;case 2:return""}for(p[3]=v,q=v,b.push(v);;){if(m.index>o)return"";for(h=0,s=Math.pow(2,k),r=1;r!=s;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=c,m.val=i(m.index++)),h|=(x>0?1:0)*r,r<<=1;switch(v=h){case 0:for(h=0,s=Math.pow(2,8),r=1;r!=s;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=c,m.val=i(m.index++)),h|=(x>0?1:0)*r,r<<=1;p[H++]=e(h),v=H-1,T--;break;case 1:for(h=0,s=Math.pow(2,16),r=1;r!=s;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=c,m.val=i(m.index++)),h|=(x>0?1:0)*r,r<<=1;p[H++]=e(h),v=H-1,T--;break;case 2:return b.join("")}if(T==0&&(T=Math.pow(2,k),k++),p[v])w=p[v];else if(v===H)w=q+q.charAt(0);else return null;b.push(w),p[H++]=q+w.charAt(0),T--,q=w,T==0&&(T=Math.pow(2,k),k++)}}};return a}();typeof define=="function"&&define.amd?define(function(){return ge}):typeof F<"u"&&F!=null&&(F.exports=ge)});var se=()=>String(Math.random())+"-"+Date.now().toFixed();var O=(e,n)=>new Promise((f,u)=>{if(n&&globalThis[n])return f(globalThis[n]);if(typeof globalThis.importScripts=="function")return globalThis.importScripts(e),n&&globalThis[n]?f(globalThis[n]):f(globalThis);let y=document.createElement("script");y.src=e,y.async=!0;let a=()=>{y.removeEventListener("load",o),y.removeEventListener("error",c)},o=()=>{if(a(),!n)return f("loaded: "+e);let i=setInterval(()=>{if(window[n])return clearInterval(i),f(window[n])},5)},c=()=>{a(),u("failed to load: "+e)};y.addEventListener("load",o),y.addEventListener("error",c),document.head.appendChild(y)});var V=e=>e.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1");var ce=["jspm","skypack"],ae=["unpkg","jsdelivr"],le=["jsdelivr.gh","statically"],P={getModuleUrl:(e,{isModule:n=!0,defaultCDN:f="jspm"}={})=>{e=e.replace(/#nobundle/g,"");let u=ie(e,n,f);return u||(n?"https://jspm.dev/"+e:"https://cdn.jsdelivr.net/npm/"+e)},getUrl:(e,n)=>e.startsWith("http")?e:ie(e,!1,n||rt())||e,cdnLists:{npm:ae,module:ce,gh:le},checkCDNs:async(e,n)=>{let f=[n,...P.cdnLists.npm].filter(Boolean);for(let u of f)try{if((await fetch(P.getUrl(e,u),{method:"HEAD"})).ok)return u}catch{}return P.cdnLists.npm[0]}},rt=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||P.cdnLists.npm[0]}catch{return P.cdnLists.npm[0]}},ie=(e,n,f)=>{let u=n&&e.startsWith("unpkg:")?"?module":"";e.startsWith("gh:")?e=e.replace("gh",le[0]):e.includes(":")||(e=(f||(n?ce[0]:ae[0]))+":"+e);for(let y of st){let[a,o]=y;if(a.test(e))return e.replace(a,o)+u}return null},st=[[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(npm:)(.+)/i,"https://jspm.dev/$2"],[/^(node:)(.+)/i,"https://jspm.dev/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(jsdelivr.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm.run:)(.+)/i,"https://esm.run/$2"],[/^(esm.sh:)(.+)/i,"https://esm.sh/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:N,getModuleUrl:Et}=P;var pe=N("emmet-monaco-es@5.0.0/dist/emmet-monaco.js");var it="0.6.64",Lt=N(`malinajs@${it}/malina.js`);var ue=N("monaco-emacs@0.3.0/dist/monaco-emacs.js"),me=N("monaco-vim@0.4.0/dist/monaco-vim.js");var R=(e=location.origin)=>!!(e&&(e.endsWith("livecodes.io")||e.endsWith("livecodes.pages.dev")||e.endsWith("localpen.io")||e.endsWith("localpen.pages.dev")||e.startsWith("http://127.0.0.1")||e.startsWith("http://localhost")));var G=nt(fe());var ye="https://dpaste.com/",at="https://dpaste.com/api/v2/",he="https://api2.livecodes.io/share",xe={getProject:async e=>{try{let n=await fetch(ye+e+".txt");return n.ok?JSON.parse(await n.text()):{}}catch{return{}}},shareProject:async e=>{try{let n=await fetch(at,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":"LiveCodes / https://livecodes.io/"},body:`content=${encodeURIComponent(JSON.stringify(e))}&title=${encodeURIComponent(e.title||"")}&syntax=json&expiry_days=365`});return n.ok?(await n.text()).replace(ye,""):""}catch{return""}}},lt={getProject:async e=>{if(e.length<11)return xe.getProject(e);if(!R())return{};try{let n=await fetch(he+"?id="+e);return n.ok?JSON.parse(await n.text()):{}}catch{return{}}},shareProject:async e=>{if(!R())return"";try{let n=await fetch(he,{method:"POST",mode:"cors",body:JSON.stringify(e)});return n.ok?n.text():""}catch{return""}}},Po=R()?lt:xe;var pt=/(import\s+?(?:(?:(?:[\w*\s{},\$]*)\s+from\s+?)|))((?:".*?")|(?:'.*?'))([\s]*?(?:;|$|))/g,ut=/(import\s*?\(\s*?((?:".*?")|(?:'.*?'))\s*?\))/g,be=e=>[...V(e).matchAll(new RegExp(pt)),...V(e).matchAll(new RegExp(ut))].map(n=>n[2].replace(/"/g,"").replace(/'/g,""));var Se=()=>document.querySelector("#editor-mode");var Ee=e=>`https://ofcncog2cu-dsn.algolia.net/1/indexes/npm-search/${encodeURIComponent(e)}?x-algolia-agent=Browser`,Le={"X-Algolia-Application-Id":"OFCNCOG2CU","X-Algolia-API-Key":"f54e21fa3a2a0160595bb058179bfb1e"},Te=["name","description","homepage","repository.url","version"],Z="https://data.jsdelivr.com/v1",Q={"User-Agent":"https://livecodes.io"},$=e=>{let n=e.startsWith("@"),f=n?e.slice(1):e,[u,y]=f.split("@");return[(n?"@":"")+u,y]},mt=async(e,n=10)=>{let f={page:0,hitsPerPage:n,attributesToHighlight:[],attributesToRetrieve:Te,analyticsTags:["jsdelivr"]},[u,y]=$(e),a;if(y){let i=await K(e);typeof i=="string"&&(a=$(i)[1])}let o=await fetch(Ee("query"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",...Le},body:JSON.stringify({query:u,...f})}).then(i=>{if(!i.ok)throw new Error("failed to fetch");return i}).then(i=>i.json()).catch(i=>({error:!0,message:i.mesage||String(i)}));if("error"in o)return o;let c=o.hits.map(i=>(i.name===u&&a&&(i.version=a),i.repository?.url&&(i.repo=i.repository?.url),i));return c.sort((i,p)=>i.name===u?-1:p.name===u?1:0),c},K=async e=>{let n=`${Z}/package/resolve/npm/${e}`,f=await fetch(n,{headers:Q}).then(a=>{if(!a.ok)throw new Error("failed to fetch");return a}).then(a=>a.json()).catch(a=>({error:!0,message:a.mesage||String(a)}));if("error"in f)return f;let u=$(e)[0],y=f.version;return y?`${u}@${y}`:u},dt=async e=>{let[n,f]=$(e),u;if(f){let o=await K(e);typeof o=="string"&&(u=$(o)[1])}let y=Ee(n)+"&attributesToRetrieve="+Te.join(","),a=await fetch(y,{method:"GET",headers:Le}).then(o=>{if(!o.ok)throw new Error("failed to fetch");return o}).then(o=>o.json()).catch(o=>({error:!0,message:o.mesage||String(o)}));return"error"in a||(u&&(a.version=u),a.repository?.url&&(a.repo=a.repository?.url)),a},gt=async e=>{let n=await K(e),f=`${Z}/package/npm/${n}/flat`,u=await fetch(f,{headers:Q}).then(a=>{if(!a.ok)throw new Error("failed to fetch");return a}).then(a=>a.json()).catch(a=>({error:!0,message:a.mesage||String(a)}));if("error"in u)return u;let y=`https://cdn.jsdelivr.net/npm/${n}`;return{...u.default?{default:y+u.default}:{},files:u.files.map(a=>y+a.name)}},ft=async e=>{let n=await K(e),f=`${Z}/package/npm/${n}/entrypoints`,u=await fetch(f,{headers:Q}).then(a=>{if(!a.ok)throw new Error("failed to fetch");return a}).then(a=>a.json()).catch(a=>({error:!0,message:a.mesage||String(a)}));if("error"in u)return u;let y=`https://cdn.jsdelivr.net/npm/${n}`;return{...u.js?.file?{js:y+u.js?.file}:{},...u.css?.file?{css:y+u.css?.file}:{}}},we={search:mt,getPkgInfo:dt,getPkgFiles:gt,getPkgDefaultFiles:ft};var Me=!1,A={},g,an=async e=>{let{container:n,baseUrl:f,readonly:u,theme:y,isEmbed:a,getLanguageExtension:o,mapLanguage:c,getFormatterConfig:i,getFontFamily:p}=e;if(!n)throw new Error("editor container not found");let l,T=t=>({fontFamily:p(t.fontFamily),fontSize:t.fontSize||(a?12:14),insertSpaces:!t.useTabs,detectIndentation:!1,tabSize:t.tabSize,lineNumbers:t.lineNumbers?"on":"off",wordWrap:t.wordWrap?"on":"off",autoClosingBrackets:t.closeBrackets?"always":"never",autoClosingQuotes:t.closeBrackets?"always":"never",autoClosingDelete:t.closeBrackets?"always":"never"}),H=T(e),k=t=>t==="livescript"?"coffeescript":["rescript","reason","ocaml"].includes(t)?"csharp":c(t),w=f+"vendor/monaco-editor/v0.32.1";try{window.monaco=window.monaco||(await import(`${w}/monaco-editor.js`)).monaco,g=window.monaco}catch{throw new Error("Failed to load monaco editor")}g.editor.defineTheme("custom-vs-light",{base:"vs",inherit:!0,rules:[{token:"comment",fontStyle:"italic"}],colors:{}}),g.editor.defineTheme("custom-vs-dark",{base:"vs-dark",inherit:!0,rules:[{token:"comment",fontStyle:"italic"}],colors:{}});let b={theme:"custom-vs-"+y,fontLigatures:!0,formatOnType:!1,lineNumbersMinChars:3,minimap:{enabled:!1},scrollbar:{useShadows:!1},mouseWheelZoom:!0,automaticLayout:!0,readOnly:u},M={...b,scrollBeyondLastLine:!1,contextmenu:!1},q={...b,scrollBeyondLastLine:!1},h={...b,glyphMargin:!0,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"auto"},scrollBeyondLastLine:!1,contextmenu:!1},x={...h},s=e.editorId,r=s==="console"?h:s==="compiled"?q:s==="embed"?x:e.mode==="codeblock"?M:b;if(!document.head.querySelector("#__livecodes__monaco-styles")){let t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",`${w}/monaco-editor.css`),t.id="__livecodes__monaco-styles",document.head.appendChild(t)}window.MonacoEnvironment={getWorkerUrl(t,d){return d==="json"?`${w}/json.worker.js`:d==="css"?`${w}/css.worker.js`:d==="scss"?`${w}/css.worker.js`:d==="sass"?`${w}/css.worker.js`:d==="less"?`${w}/css.worker.js`:d==="html"?`${w}/html.worker.js`:d==="typescript"||d==="javascript"?`${w}/ts.worker.js`:`${w}/editor.worker.js`}};let v=()=>{let t={jsx:g.languages.typescript.JsxEmit.Preserve,allowNonTsExtensions:!0,allowJs:!1,target:g.languages.typescript.ScriptTarget.Latest,experimentalDecorators:!0,allowSyntheticDefaultImports:!0,lib:["esnext","dom"],module:g.languages.typescript.ModuleKind.ESNext};g.languages.typescript.typescriptDefaults.setCompilerOptions(t),(j==="tsx"||j==="jsx"||j==="sucrase"||j==="babel"||j==="flow")&&g.languages.typescript.typescriptDefaults.setCompilerOptions({...t,jsx:g.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",reactNamespace:"React"}),j==="stencil"&&g.languages.typescript.typescriptDefaults.setCompilerOptions({...t,jsx:g.languages.typescript.JsxEmit.Preserve,jsxFactory:void 0,reactNamespace:"h"}),j==="flow"?g.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0}):["typescript"].includes(c(j))&&g.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1})},m=[],ve=()=>{m.forEach(t=>E.getModel()?.onDidChangeContent(t))},X="",Y=(t,d,L)=>{let C=se(),U=o(L),S=k(L)==="typescript"&&!U?.endsWith("ts")&&!U?.endsWith("tsx")?U+".tsx":U;X=`file:///${s}.${C}.${S}`;let I=t.getModel(),z=g.editor.createModel(d||"",k(L),g.Uri.parse(X));t.setModel(z),setTimeout(()=>I?.dispose(),1e3),ve(),v()},j=e.language,E=g.editor.create(n,{...H,...r,language:k(j)});Y(E,e.value,j),r.theme==="vs-light"&&(n.style.backgroundColor="#fff"),(r.theme?.startsWith("http")||r.theme?.startsWith("./"))&&fetch(r.theme).then(t=>t.json()).then(t=>{g.editor.defineTheme("theme",t),g.editor.setTheme("theme"),n.style.backgroundColor=t.colors["editor.background"]});let ke={astro:f+"monaco-lang-astro.31ace80fb590384d92861650cd635109.js",clio:f+"monaco-lang-clio.bdef68dfea0312fab9a27b5d87146182.js",imba:f+"monaco-lang-imba.b0acc149ca1c00547c24cad4172e8f22.js",wat:f+"monaco-lang-wat.90de1d50eb45ed8f299322a2d8c6f760.js"},He=async t=>{let d=ke[t];if(d&&!g.languages.getLanguages().find(L=>L.id===t)){let L=(await import(d)).default;g.languages.register({id:t}),L.config&&g.languages.setLanguageConfiguration(t,L.config),L.tokens&&g.languages.setMonarchTokensProvider(t,L.tokens)}},je=()=>s,Ue=()=>E.getValue(),qe=(t="")=>{E.getModel()?.setValue(t)},D=[],J=t=>!t.filename.startsWith("file:///node_modules/"),ee=(t=!0)=>{D.filter(d=>t?!0:J(d)).forEach(d=>{d.libJs.dispose(),d.libTs.dispose()}),D.length=0},Ie=()=>j,Ae=(t,d)=>{j=t,ee(!1),Y(E,d??E.getValue(),j),He(t)},Ce=t=>{let d=D.find(L=>L.filename===t.filename);if(d){J(t)&&(d.libJs.dispose(),d.libJs=g.languages.typescript.javascriptDefaults.addExtraLib(t.content,t.filename));return}D.push({filename:t.filename,libJs:g.languages.typescript.javascriptDefaults.addExtraLib(t.content,t.filename),libTs:J(t)?{dispose:()=>{}}:g.languages.typescript.typescriptDefaults.addExtraLib(t.content,t.filename)})},Pe=()=>E.focus(),_e=()=>E.layout(),Be=t=>{m.push(t),E.getModel()?.onDidChangeContent(t)},Re={CtrlEnter:g.KeyMod.CtrlCmd|g.KeyCode.Enter,ShiftEnter:g.KeyMod.Shift|g.KeyCode.Enter,Enter:g.KeyCode.Enter,UpArrow:g.KeyCode.UpArrow,DownArrow:g.KeyCode.DownArrow,ShiftAltF:g.KeyMod.Shift|g.KeyMod.Alt|g.KeyCode.KeyF},Oe=(t,d,L)=>{E.addAction({id:t,label:t,keybindings:[d],precondition:"!suggestWidgetVisible && !markersNavigationVisible && !findWidgetVisible",run:L})},te=async t=>{let d=Se(),L=document.querySelector(`#editor-status [data-status="${e.editorId}"]`),C=S=>{d&&(d.textContent=S)},U=S=>{L&&(L.textContent=S)};if(!t){l?.dispose(),l=void 0,U(""),C("");return}if(t==="vim"){if(l?.mode==="vim")return;l?.mode==="emacs"&&(l.dispose(),U(""));let S=await O(me,"MonacoVim"),I=L?.innerHTML!==""?void 0:L;l=S.initVimMode(E,I),l.mode="vim",C("Vim")}if(t==="emacs"){if(l?.mode==="emacs")return;l?.mode==="vim"&&(l.dispose(),U(""));let S=await O(ue,"MonacoEmacs");l=new S.EmacsExtension(E),U(""),l.onDidMarkChange(function(I){U(I?"Mark Set!":"Mark Unset")}),l.onDidChangeKey(function(I){U(I)}),l.start(),l.mode="emacs",C("Emacs")}};te(e.editorMode);let $e=t=>{let d=E.getModel();!t||!d||g.languages.registerDocumentFormattingEditProvider(k(j),{provideDocumentFormattingEdits:async()=>{let L=E.getValue(),C=await t(L,0,i());return[{range:d.getFullModelRange(),text:C.formatted}]}})},De=()=>E.getAction("editor.action.formatDocument").run(),oe=t=>{!t&&!window.emmetMonaco||O(pe,"emmetMonaco").then(d=>{t?(!A.html||A.disabled)&&(A.html=d.emmetHTML(g,["html","php","astro","markdown","mdx"]),A.css=d.emmetCSS(g,["css","scss","less"]),A.jsx=d.emmetJSX(g,["javascript","typescript","jsx","tsx"]),A.disabled=!1):(A.html?.(),A.css?.(),A.jsx?.(),A.disabled=!0)})},We=t=>{g.editor.setTheme("custom-vs-"+t)},Ne=t=>{let d={...T(t),...r};oe(t.emmet),te(t.editorMode),E.updateOptions(d)},Fe=()=>{E.getModel()?.undo?.()},Ke=()=>{E.getModel()?.redo?.()},Je=()=>{let t=E.getPosition();return{lineNumber:t?.lineNumber??0,column:t?.column??0}},ze=t=>{let d={lineNumber:t.lineNumber,column:t.column??0};E.setPosition(d),setTimeout(()=>E.revealPositionInCenter(d,0),50)},Ve=()=>{oe(!1),l?.dispose(),m.length=0,ee(!0),E.getModel()?.dispose(),E.dispose(),n.innerHTML=""};return window.addEventListener("unhandledrejection",function(t){t.reason&&t.reason.name==="Canceled"&&t.preventDefault()}),Me||(()=>{let t=new Map,d={provideHover(L,C){let U=L.getLineContent(C.lineNumber),S=be(U)[0];if(!S||S.startsWith("https://")||S.startsWith("http://")||S.startsWith(".")||S.startsWith("data:")||S.startsWith("blob:"))return;/^(skypack|unpkg|jsdelivr|esm|esm\.run|esm\.sh|bundle\.run)\:/.test(S)&&(S=S.replace(/^(skypack|unpkg|jsdelivr|esm|esm\.run|esm\.sh|bundle\.run)\:/,""));let I=S.split("/"),z=I[0].startsWith("@")?2:1;return S=I.slice(0,z).join("/"),(async()=>{let _;if(t.has(S))_=t.get(S);else{if(_=await we.getPkgInfo(S),"error"in _)return;t.set(S,_)}if(!_||"error"in _)return;let{name:B,version:W="",description:Ge="",repo:ne=""}=_;return{contents:[{value:`## [${B}](https://www.npmjs.com/package/${B}/v/${W}) (v${W})
${Ge}


${ne?`[GitHub](${ne})  |`:""}  [Skypack](https://skypack.dev/view/${B})  |  [jsDelivr](https://www.jsdelivr.com/package/npm/${B}?version=${W})  |  [Unpkg](https://unpkg.com/browse/${B}@${W}/)  | [Openbase](https://openbase.com/js/${B})

Docs: [Importing modules](${new URL("/livecodes/docs/",location.href).href}features/module-resolution)`}]}})()}};g.languages.registerHoverProvider("javascript",d),g.languages.registerHoverProvider("typescript",d),g.languages.registerHoverProvider("html",d)})(),Me=!0,{getValue:Ue,setValue:qe,getLanguage:Ie,setLanguage:Ae,getEditorId:je,focus:Pe,getPosition:Je,setPosition:ze,layout:_e,addTypes:Ce,changeSettings:Ne,onContentChanged:Be,keyCodes:Re,addKeyBinding:Oe,registerFormatter:$e,format:De,isReadonly:u,setTheme:We,undo:Fe,redo:Ke,destroy:Ve,monaco:E}};export{an as createEditor};
//# sourceMappingURL=monaco.js.map
