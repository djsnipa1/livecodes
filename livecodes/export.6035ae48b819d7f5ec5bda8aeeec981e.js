var nt=Object.create;var R=Object.defineProperty;var it=Object.getOwnPropertyDescriptor;var at=Object.getOwnPropertyNames;var ct=Object.getPrototypeOf,pt=Object.prototype.hasOwnProperty;var lt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var dt=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of at(e))!pt.call(t,a)&&a!==r&&R(t,a,{get:()=>e[a],enumerable:!(i=it(e,a))||i.enumerable});return t};var ut=(t,e,r)=>(r=t!=null?nt(ct(t)):{},dt(e||!t||!t.__esModule?R(r,"default",{value:t,enumerable:!0}):r,t));var K=lt((me,_)=>{var H=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function a(s,o){if(!i[s]){i[s]={};for(var l=0;l<s.length;l++)i[s][s.charAt(l)]=l}return i[s][o]}var d={compressToBase64:function(s){if(s==null)return"";var o=d._compress(s,6,function(l){return e.charAt(l)});switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(s){return s==null?"":s==""?null:d._decompress(s.length,32,function(o){return a(e,s.charAt(o))})},compressToUTF16:function(s){return s==null?"":d._compress(s,15,function(o){return t(o+32)})+" "},decompressFromUTF16:function(s){return s==null?"":s==""?null:d._decompress(s.length,16384,function(o){return s.charCodeAt(o)-32})},compressToUint8Array:function(s){for(var o=d.compress(s),l=new Uint8Array(o.length*2),n=0,u=o.length;n<u;n++){var h=o.charCodeAt(n);l[n*2]=h>>>8,l[n*2+1]=h%256}return l},decompressFromUint8Array:function(s){if(s==null)return d.decompress(s);for(var o=new Array(s.length/2),l=0,n=o.length;l<n;l++)o[l]=s[l*2]*256+s[l*2+1];var u=[];return o.forEach(function(h){u.push(t(h))}),d.decompress(u.join(""))},compressToEncodedURIComponent:function(s){return s==null?"":d._compress(s,6,function(o){return r.charAt(o)})},decompressFromEncodedURIComponent:function(s){return s==null?"":s==""?null:(s=s.replace(/ /g,"+"),d._decompress(s.length,32,function(o){return a(r,s.charAt(o))}))},compress:function(s){return d._compress(s,16,function(o){return t(o)})},_compress:function(s,o,l){if(s==null)return"";var n,u,h={},w={},v="",j="",y="",x=2,S=3,g=2,f=[],c=0,p=0,b;for(b=0;b<s.length;b+=1)if(v=s.charAt(b),Object.prototype.hasOwnProperty.call(h,v)||(h[v]=S++,w[v]=!0),j=y+v,Object.prototype.hasOwnProperty.call(h,j))y=j;else{if(Object.prototype.hasOwnProperty.call(w,y)){if(y.charCodeAt(0)<256){for(n=0;n<g;n++)c=c<<1,p==o-1?(p=0,f.push(l(c)),c=0):p++;for(u=y.charCodeAt(0),n=0;n<8;n++)c=c<<1|u&1,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=u>>1}else{for(u=1,n=0;n<g;n++)c=c<<1|u,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=0;for(u=y.charCodeAt(0),n=0;n<16;n++)c=c<<1|u&1,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=u>>1}x--,x==0&&(x=Math.pow(2,g),g++),delete w[y]}else for(u=h[y],n=0;n<g;n++)c=c<<1|u&1,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=u>>1;x--,x==0&&(x=Math.pow(2,g),g++),h[j]=S++,y=String(v)}if(y!==""){if(Object.prototype.hasOwnProperty.call(w,y)){if(y.charCodeAt(0)<256){for(n=0;n<g;n++)c=c<<1,p==o-1?(p=0,f.push(l(c)),c=0):p++;for(u=y.charCodeAt(0),n=0;n<8;n++)c=c<<1|u&1,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=u>>1}else{for(u=1,n=0;n<g;n++)c=c<<1|u,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=0;for(u=y.charCodeAt(0),n=0;n<16;n++)c=c<<1|u&1,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=u>>1}x--,x==0&&(x=Math.pow(2,g),g++),delete w[y]}else for(u=h[y],n=0;n<g;n++)c=c<<1|u&1,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=u>>1;x--,x==0&&(x=Math.pow(2,g),g++)}for(u=2,n=0;n<g;n++)c=c<<1|u&1,p==o-1?(p=0,f.push(l(c)),c=0):p++,u=u>>1;for(;;)if(c=c<<1,p==o-1){f.push(l(c));break}else p++;return f.join("")},decompress:function(s){return s==null?"":s==""?null:d._decompress(s.length,32768,function(o){return s.charCodeAt(o)})},_decompress:function(s,o,l){var n=[],u,h=4,w=4,v=3,j="",y=[],x,S,g,f,c,p,b,m={val:l(0),position:o,index:1};for(x=0;x<3;x+=1)n[x]=x;for(g=0,c=Math.pow(2,2),p=1;p!=c;)f=m.val&m.position,m.position>>=1,m.position==0&&(m.position=o,m.val=l(m.index++)),g|=(f>0?1:0)*p,p<<=1;switch(u=g){case 0:for(g=0,c=Math.pow(2,8),p=1;p!=c;)f=m.val&m.position,m.position>>=1,m.position==0&&(m.position=o,m.val=l(m.index++)),g|=(f>0?1:0)*p,p<<=1;b=t(g);break;case 1:for(g=0,c=Math.pow(2,16),p=1;p!=c;)f=m.val&m.position,m.position>>=1,m.position==0&&(m.position=o,m.val=l(m.index++)),g|=(f>0?1:0)*p,p<<=1;b=t(g);break;case 2:return""}for(n[3]=b,S=b,y.push(b);;){if(m.index>s)return"";for(g=0,c=Math.pow(2,v),p=1;p!=c;)f=m.val&m.position,m.position>>=1,m.position==0&&(m.position=o,m.val=l(m.index++)),g|=(f>0?1:0)*p,p<<=1;switch(b=g){case 0:for(g=0,c=Math.pow(2,8),p=1;p!=c;)f=m.val&m.position,m.position>>=1,m.position==0&&(m.position=o,m.val=l(m.index++)),g|=(f>0?1:0)*p,p<<=1;n[w++]=t(g),b=w-1,h--;break;case 1:for(g=0,c=Math.pow(2,16),p=1;p!=c;)f=m.val&m.position,m.position>>=1,m.position==0&&(m.position=o,m.val=l(m.index++)),g|=(f>0?1:0)*p,p<<=1;n[w++]=t(g),b=w-1,h--;break;case 2:return y.join("")}if(h==0&&(h=Math.pow(2,v),v++),n[b])j=n[b];else if(b===w)j=S+S.charAt(0);else return null;y.push(j),n[w++]=S+j.charAt(0),h--,S=j,h==0&&(h=Math.pow(2,v),v++)}}};return d}();typeof define=="function"&&define.amd?define(function(){return H}):typeof _<"u"&&_!=null&&(_.exports=H)});var C=(t=location.origin)=>!!(t&&(t.endsWith("livecodes.io")||t.endsWith("livecodes.pages.dev")||t.endsWith("localpen.io")||t.endsWith("localpen.pages.dev")||t.startsWith("http://127.0.0.1")||t.startsWith("http://localhost")));var F=t=>t.replace(/<\/script>/g,"<\\/script>");var I=(t,e="_")=>t.replace(/[\W]+/g,e);var k=(t,e,r)=>{let i=document.createElement("a");i.style.display="none",i.href=r,i.download=I(t)+"."+e,i.click(),i.remove()},T=(t,e)=>new Promise((r,i)=>{if(e&&globalThis[e])return r(globalThis[e]);if(typeof globalThis.importScripts=="function")return globalThis.importScripts(t),e&&globalThis[e]?r(globalThis[e]):r(globalThis);let a=document.createElement("script");a.src=t,a.async=!0;let d=()=>{a.removeEventListener("load",s),a.removeEventListener("error",o)},s=()=>{if(d(),!e)return r("loaded: "+t);let l=setInterval(()=>{if(window[e])return clearInterval(l),r(window[e])},5)},o=()=>{d(),i("failed to load: "+t)};a.addEventListener("load",s),a.addEventListener("error",o),document.head.appendChild(a)});var P=t=>t.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1");var D=["jspm","skypack"],W=["unpkg","jsdelivr"],B=["jsdelivr.gh","statically"],U={getModuleUrl:(t,{isModule:e=!0,defaultCDN:r="jspm"}={})=>{t=t.replace(/#nobundle/g,"");let i=q(t,e,r);return i||(e?"https://jspm.dev/"+t:"https://cdn.jsdelivr.net/npm/"+t)},getUrl:(t,e)=>t.startsWith("http")?t:q(t,!1,e||mt())||t,cdnLists:{npm:W,module:D,gh:B},checkCDNs:async(t,e)=>{let r=[e,...U.cdnLists.npm].filter(Boolean);for(let i of r)try{if((await fetch(U.getUrl(t,i),{method:"HEAD"})).ok)return i}catch{}return U.cdnLists.npm[0]}},mt=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||U.cdnLists.npm[0]}catch{return U.cdnLists.npm[0]}},q=(t,e,r)=>{let i=e&&t.startsWith("unpkg:")?"?module":"";t.startsWith("gh:")?t=t.replace("gh",B[0]):t.includes(":")||(t=(r||(e?D[0]:W[0]))+":"+t);for(let a of gt){let[d,s]=a;if(d.test(t))return t.replace(d,s)+i}return null},gt=[[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(npm:)(.+)/i,"https://jspm.dev/$2"],[/^(node:)(.+)/i,"https://jspm.dev/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(jsdelivr.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm.run:)(.+)/i,"https://esm.run/$2"],[/^(esm.sh:)(.+)/i,"https://esm.sh/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:N,getModuleUrl:Mt}=U;var z=N("jszip@3.10.1/dist/jszip.js");var ft="0.6.64",Ot=N(`malinajs@${ft}/malina.js`);var M=ut(K());var G="https://dpaste.com/",yt="https://dpaste.com/api/v2/",Z="https://api2.livecodes.io/share",Q={getProject:async t=>{try{let e=await fetch(G+t+".txt");return e.ok?JSON.parse(await e.text()):{}}catch{return{}}},shareProject:async t=>{try{let e=await fetch(yt,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":"LiveCodes / https://livecodes.io/"},body:`content=${encodeURIComponent(JSON.stringify(t))}&title=${encodeURIComponent(t.title||"")}&syntax=json&expiry_days=365`});return e.ok?(await e.text()).replace(G,""):""}catch{return""}}},xt={getProject:async t=>{if(t.length<11)return Q.getProject(t);if(!C())return{};try{let e=await fetch(Z+"?id="+t);return e.ok?JSON.parse(await e.text()):{}}catch{return{}}},shareProject:async t=>{if(!C())return"";try{let e=await fetch(Z,{method:"POST",mode:"cors",body:JSON.stringify(t)});return e.ok?e.text():""}catch{return""}}},Be=C()?xt:Q;var O=/(import\s+?(?:(?:(?:[\w*\s{},\$]*)\s+from\s+?)|))((?:".*?")|(?:'.*?'))([\s]*?(?:;|$|))/g,bt=/(import\s*?\(\s*?((?:".*?")|(?:'.*?'))\s*?\))/g,wt=t=>[...P(t).matchAll(new RegExp(O)),...P(t).matchAll(new RegExp(bt))].map(e=>e[2].replace(/"/g,"").replace(/'/g,"")),vt=t=>!t.startsWith("https://deno.bundlejs.com/")&&!t.startsWith("https://edge.bundlejs.com/")&&!t.endsWith("#nobundle")&&(t.startsWith("https://deno.land/")||t.startsWith("https://github.com/")||t.startsWith("https://raw.githubusercontent.com/")||t.startsWith("https://gitlab.com/")||t.startsWith("https://bitbucket.org")||t.endsWith(".ts")||t.endsWith(".jsx")||t.endsWith(".tsx")),jt=t=>!t.startsWith("https://")&&!t.startsWith("http://")&&!t.startsWith(".")&&!t.startsWith("/")&&!t.startsWith("data:")&&!t.startsWith("blob:"),Ut=(t,e)=>wt(t).map(r=>{if(!vt(r)&&!jt(r))return{};{let i=Object.keys(e.imports).find(a=>a===r||r.startsWith(a+"/"));return i?{[i]:e.imports[i]}:{[r]:U.getModuleUrl(r,{defaultCDN:e?.customSettings?.defaultCDN})}}}).reduce((r,i)=>({...r,...i}),{});var V=(t,e)=>{let r=Ut(t,e);return t.replace(new RegExp(O),i=>{let a=i.replace(new RegExp(O),"$2").replace(/"/g,"").replace(/'/g,""),d=Object.keys(r).find(s=>s===a||a.startsWith(s+"/"));return d?i.replace(d,r[d]):i})};var E=(t,{getLanguageExtension:e})=>{let r={markup:"index",style:"style",script:"script"},i=Object.keys(r).reduce((o,l)=>{let n=r[l],u=t[l].language,h=e?.(u)||"md",w=t[l].content||"";return{...o,...w?{[n+"."+h]:{content:w}}:{}}},{}),a=t.stylesheets.length>0?{styles:{content:t.stylesheets.map(o=>`<link rel="stylesheet" href="${o}" />`).join(`
`)}}:void 0,d=t.scripts.length>0?{scripts:{content:t.scripts.map(o=>`<script src="${o}"><\/script>`).join(`
`)}}:void 0,s=t.tests?.content?{["script.spec."+e?.(t.tests?.language)||"ts"]:{content:t.tests?.content}}:void 0;return{...i,...a,...d,...s}},$=(t,e,r,i=!0)=>{let a=i?"https://gist.github.com/":"https://github.com/",d=e?e.username?"by ["+e.displayName+"]("+a+e.username+")":"by "+e.displayName:"",s=r?`[project](https://livecodes.io/?x=${r})`:"project";return{[I(t.title)+".md"]:{content:`# ${t.title}
A ${s} created ${d} on [LiveCodes](https://livecodes.io).`}}},L=({baseUrl:t,editorId:e,config:r,compiled:i,supportedLanguages:a,getLanguageCompiler:d})=>{if(a[e].includes(r[e].language))return[];let s=d?.(r[e].language)?.scripts,o=r[e].language==="python"?r[e].content||"":i[e];return(typeof s=="function"?s({compiled:o,baseUrl:t,config:r}):s)?.filter(n=>n.startsWith("https://"))||[]},A=({editorId:t,config:e,compiled:r,supportedLanguages:i,getLanguageCompiler:a})=>{let d=["javascript","jsx","tsx",...i.script].includes(e.script.language),s={markup:["html",...i.markup].includes(e.markup.language)?e.markup.content:r.markup,style:["css",...i.style].includes(e.style.language)?e.style.content:r.style,script:e.script.language==="php"?e.script.content?.replace(/<\?php/g,"")||"":e.script.language==="python"?e.script.content:V((d?e.script.content:r.script)||"",e)},o=a?.(e.script.language)?.scriptType;if(!d&&o&&o!=="module"){if(t==="markup")return s.markup+`
<script type="${o}">
${F(s.script||"")}
<\/script>
`;if(t==="script")return e.script.language==="python"?'window.addEventListener("load", () => {brython()});':""}return s[t]||""};var X=(t,{baseUrl:e,compiled:r,deps:i})=>{let a=document.createElement("form");a.action="https://codepen.io/pen/define",a.method="POST",a.target="_blank",a.style.display="none";let d=document.createElement("input");d.name="data";let s={markup:["markdown","haml"],style:["less","scss","sass","stylus"],script:["babel","typescript","coffeescript","livescript"]},o=n=>A({editorId:n,config:t,compiled:r,supportedLanguages:s,...i}),l=n=>L({baseUrl:e,editorId:n,config:t,compiled:r,supportedLanguages:s,...i});d.value=JSON.stringify({title:t.title,desciption:t.description,tags:t.tags,html:o("markup"),html_pre_processor:s.markup.includes(t.markup.language)?t.markup.language:"none",css:o("style"),css_pre_processor:s.style.includes(t.style.language)?t.style.language:"none",css_starter:t.cssPreset==="normalize.css"?"normalize":t.cssPreset==="reset-css"?"reset":"neither",css_prefix:t.processors.includes("autoprefixer")?"autoprefixer":"neither",js:o("script"),js_pre_processor:s.script.includes(t.script.language)?t.script.language:t.script.language==="jsx"?"babel":t.script.language==="tsx"?"typescript":"none",html_classes:t.customSettings.htmlClasses||"",head:t.customSettings.head||"",css_external:t.stylesheets.join(";"),js_external:[...t.scripts,...l("markup"),...l("style"),...l("script")].join(";")}),a.appendChild(d),document.body.appendChild(a),a.submit(),a.remove()};var tt=async(t,{user:e,deps:r})=>{if(!e)return;let i=St(t,e,r),d=await(await Y(t,e,i)).json();if(d.id){let s=$(t,e,d.html_url);await Y(t,e,s,d.id),window.open("https://gist.github.com/"+d.id)}},St=(t,e,r)=>{let i=$(t,e),a=E(t,r);return{...i,...a}},Y=(t,e,r,i)=>{let a={accept:"application/vnd.github.v3+json",description:t.title,files:r,public:!0},d="https://api.github.com/gists";return i&&(d+="/"+i),fetch(d,{method:i?"PATCH":"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token "+e.token},body:JSON.stringify(a)})};var et=(t,e)=>{let r=t.title,i="html",a="data:text/html;charset=utf-8,"+encodeURIComponent(e);k(r,i,a)};var st=(t,{baseUrl:e,compiled:r,deps:i})=>{let a=document.createElement("form");a.action="https://jsfiddle.net/api/post/library/pure/",a.method="POST",a.target="_blank",a.style.display="none";let d={markup:["haml"],style:["scss","sass"],script:["babel","typescript","coffeescript"]},s=n=>A({editorId:n,config:t,compiled:r,supportedLanguages:d,...i}),o=n=>L({baseUrl:e,editorId:n,config:t,compiled:r,supportedLanguages:d,...i}),l={title:t.title,description:t.description||"",html:s("markup"),css:s("style"),css_panel:t.style.language==="scss"?"1":"0",js:s("script"),js_panel:t.script.language==="typescript"?"4":t.script.language==="jsx"?"3":t.script.language==="coffeescript"?"5":"0",resources:[...t.stylesheets,...t.scripts,...o("markup"),...o("style"),...o("script")].join(",")};Object.keys(l).forEach(n=>{let u=document.createElement("input");u.name=n,u.value=l[n],a.appendChild(u)}),document.body.appendChild(a),a.submit(),a.remove()};var ot=t=>{let e=t.title,r="json",i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2));k(e,r,i)};var rt=async(t,{html:e,deps:r},i)=>{let a=await T(z,"JSZip"),d=new a,s=E(t,r);Object.keys(s).forEach(h=>{d.file(h,s[h]?.content)}),d.file("result.html",e),d.file("livecodes.json",JSON.stringify(t,null,2));let o=await d.generateAsync({type:"base64"}),l=t.title,n="zip",u="data:application/zip;base64,"+encodeURIComponent(o);k(l,n,u)};var As=(t,e,r,i)=>{({json:ot,src:rt,html:et,codepen:X,jsfiddle:st,githubGist:tt})[r](t,i,e)};export{As as exportConfig};
//# sourceMappingURL=export.js.map
