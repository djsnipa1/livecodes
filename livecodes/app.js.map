{
  "version": 3,
  "sources": ["../../node_modules/lz-string/libs/lz-string.js", "../../node_modules/licia/has.js", "../../node_modules/licia/keys.js", "../../node_modules/licia/escape.js", "../../node_modules/licia/toStr.js", "../../node_modules/licia/idxOf.js", "../../node_modules/licia/objToStr.js", "../../node_modules/licia/isStr.js", "../../node_modules/licia/isNum.js", "../../node_modules/licia/isFn.js", "../../node_modules/licia/isArrLike.js", "../../node_modules/licia/isUndef.js", "../../node_modules/licia/optimizeCb.js", "../../node_modules/licia/each.js", "../../node_modules/licia/values.js", "../../node_modules/licia/contain.js", "../../node_modules/licia/startWith.js", "../../node_modules/licia/escapeJsStr.js", "../../node_modules/licia/endWith.js", "../../node_modules/licia/isArr.js", "../../node_modules/licia/isArgs.js", "../../node_modules/licia/isEmpty.js", "../../node_modules/licia/upperFirst.js", "../../node_modules/luna-console/cjs/console/util.js", "../../node_modules/licia/isObj.js", "../../node_modules/licia/createAssigner.js", "../../node_modules/licia/extendOwn.js", "../../node_modules/licia/isMatch.js", "../../node_modules/licia/matcher.js", "../../node_modules/licia/identity.js", "../../node_modules/licia/castPath.js", "../../node_modules/licia/safeGet.js", "../../node_modules/licia/property.js", "../../node_modules/licia/safeCb.js", "../../node_modules/licia/map.js", "../../node_modules/licia/ltrim.js", "../../node_modules/licia/rtrim.js", "../../node_modules/licia/trim.js", "../../node_modules/licia/isBrowser.js", "../../node_modules/licia/root.js", "../../node_modules/licia/last.js", "../../node_modules/licia/arrToMap.js", "../../node_modules/licia/lowerCase.js", "../../node_modules/licia/parseHtml.js", "../../node_modules/licia/getProto.js", "../../node_modules/licia/filter.js", "../../node_modules/licia/unique.js", "../../node_modules/licia/allKeys.js", "../../node_modules/licia/extend.js", "../../node_modules/licia/toArr.js", "../../node_modules/licia/create.js", "../../node_modules/licia/inherits.js", "../../node_modules/licia/isMiniProgram.js", "../../node_modules/licia/Class.js", "../../node_modules/licia/reverse.js", "../../node_modules/licia/Stack.js", "../../node_modules/licia/mapObj.js", "../../node_modules/licia/html.js", "../../node_modules/licia/toNum.js", "../../node_modules/luna-console/cjs/share/util.js", "../../node_modules/luna-console/cjs/console/getAbstract.js", "../../node_modules/licia/slice.js", "../../node_modules/licia/restArgs.js", "../../node_modules/licia/partial.js", "../../node_modules/licia/before.js", "../../node_modules/licia/once.js", "../../node_modules/licia/clone.js", "../../node_modules/licia/Emitter.js", "../../node_modules/licia/isBool.js", "../../node_modules/licia/isNil.js", "../../node_modules/licia/toSrc.js", "../../node_modules/licia/isPromise.js", "../../node_modules/licia/isNaN.js", "../../node_modules/licia/isBuffer.js", "../../node_modules/licia/type.js", "../../node_modules/licia/mergeArr.js", "../../node_modules/licia/Select.js", "../../node_modules/licia/$safeEls.js", "../../node_modules/licia/$offset.js", "../../node_modules/licia/$show.js", "../../node_modules/licia/splitCase.js", "../../node_modules/licia/kebabCase.js", "../../node_modules/licia/memoize.js", "../../node_modules/licia/camelCase.js", "../../node_modules/licia/prefix.js", "../../node_modules/licia/$css.js", "../../node_modules/licia/$attr.js", "../../node_modules/licia/$property.js", "../../node_modules/licia/$remove.js", "../../node_modules/licia/$data.js", "../../node_modules/licia/delegate.js", "../../node_modules/licia/$event.js", "../../node_modules/licia/some.js", "../../node_modules/licia/$class.js", "../../node_modules/licia/$insert.js", "../../node_modules/licia/$.js", "../../node_modules/licia/flatten.js", "../../node_modules/licia/difference.js", "../../node_modules/licia/chunk.js", "../../node_modules/licia/noop.js", "../../node_modules/luna-object-viewer/cjs/object-viewer/Visitor.js", "../../node_modules/luna-object-viewer/cjs/object-viewer/util.js", "../../node_modules/licia/uniqId.js", "../../node_modules/luna-object-viewer/cjs/share/util.js", "../../node_modules/luna-object-viewer/cjs/object-viewer/Static.js", "../../node_modules/luna-object-viewer/cjs/object-viewer/index.js", "../../node_modules/licia/isErr.js", "../../node_modules/licia/isPrimitive.js", "../../node_modules/licia/defaults.js", "../../node_modules/licia/isEl.js", "../../node_modules/licia/toInt.js", "../../node_modules/licia/isNull.js", "../../node_modules/licia/h.js", "../../node_modules/licia/now.js", "../../node_modules/licia/isSymbol.js", "../../node_modules/licia/safeSet.js", "../../node_modules/licia/defineProp.js", "../../node_modules/licia/pick.js", "../../node_modules/licia/stringifyAll.js", "../../node_modules/licia/nextTick.js", "../../node_modules/licia/extractUrls.js", "../../node_modules/licia/escapeRegExp.js", "../../node_modules/licia/linkify.js", "../../node_modules/licia/highlight.js", "../../node_modules/licia/min.js", "../../node_modules/licia/stripIndent.js", "../../node_modules/js-beautify/js/src/core/output.js", "../../node_modules/js-beautify/js/src/core/token.js", "../../node_modules/js-beautify/js/src/javascript/acorn.js", "../../node_modules/js-beautify/js/src/core/options.js", "../../node_modules/js-beautify/js/src/javascript/options.js", "../../node_modules/js-beautify/js/src/core/inputscanner.js", "../../node_modules/js-beautify/js/src/core/tokenstream.js", "../../node_modules/js-beautify/js/src/core/pattern.js", "../../node_modules/js-beautify/js/src/core/whitespacepattern.js", "../../node_modules/js-beautify/js/src/core/tokenizer.js", "../../node_modules/js-beautify/js/src/core/directives.js", "../../node_modules/js-beautify/js/src/core/templatablepattern.js", "../../node_modules/js-beautify/js/src/javascript/tokenizer.js", "../../node_modules/js-beautify/js/src/javascript/beautifier.js", "../../node_modules/js-beautify/js/src/javascript/index.js", "../../node_modules/js-beautify/js/src/css/options.js", "../../node_modules/js-beautify/js/src/css/beautifier.js", "../../node_modules/js-beautify/js/src/css/index.js", "../../node_modules/js-beautify/js/src/html/options.js", "../../node_modules/js-beautify/js/src/html/tokenizer.js", "../../node_modules/js-beautify/js/src/html/beautifier.js", "../../node_modules/js-beautify/js/src/html/index.js", "../../node_modules/js-beautify/js/src/index.js", "../../node_modules/js-beautify/js/index.js", "../../node_modules/luna-console/cjs/console/Log.js", "../../node_modules/licia/perfNow.js", "../../node_modules/licia/isRegExp.js", "../../node_modules/licia/copy.js", "../../node_modules/licia/debounce.js", "../../node_modules/licia/throttle.js", "../../node_modules/licia/xpath.js", "../../node_modules/licia/isDate.js", "../../node_modules/licia/repeat.js", "../../node_modules/licia/lpad.js", "../../node_modules/licia/dateFormat.js", "../../node_modules/licia/isHidden.js", "../../node_modules/luna-console/cjs/share/Component.js", "../../node_modules/licia/raf.js", "../../node_modules/luna-console/cjs/console/index.js", "../../src/livecodes/utils/utils.ts", "../../src/livecodes/utils/get-import-instance.ts", "../../src/livecodes/services/modules.ts", "../../src/livecodes/vendors.ts", "../../src/livecodes/languages/lightningcss/processor-lightningcss.ts", "../../src/livecodes/languages/postcss/processor-postcss.ts", "../../src/livecodes/languages/postcss/postcss-plugins.ts", "../../src/livecodes/languages/tailwindcss/processor-tailwindcss.ts", "../../src/livecodes/languages/unocss/processor-unocss.ts", "../../src/livecodes/languages/windicss/processor-windicss.ts", "../../src/livecodes/languages/processors.ts", "../../src/livecodes/languages/utils.ts", "../../src/livecodes/languages/asciidoc/lang-asciidoc.ts", "../../src/livecodes/languages/prettier.ts", "../../src/livecodes/languages/babel/lang-babel.ts", "../../src/livecodes/languages/css/lang-css.ts", "../../src/livecodes/languages/haml/lang-haml.ts", "../../src/livecodes/languages/html/lang-html.ts", "../../src/livecodes/languages/javascript/lang-javascript.ts", "../../src/livecodes/languages/jsx/lang-jsx.ts", "../../src/livecodes/languages/jsx/lang-tsx.ts", "../../src/livecodes/languages/less/lang-less.ts", "../../src/livecodes/languages/markdown/lang-markdown.ts", "../../src/livecodes/compiler/compile-in-compiler.ts", "../../src/livecodes/languages/mdx/lang-mdx.ts", "../../src/livecodes/languages/pug/lang-pug.ts", "../../src/livecodes/languages/scss/lang-scss.ts", "../../src/livecodes/languages/scss/lang-sass.ts", "../../src/livecodes/languages/svelte/lang-svelte.ts", "../../src/livecodes/languages/stylus/lang-stylus.ts", "../../src/livecodes/languages/typescript/lang-typescript.ts", "../../src/livecodes/languages/vue/lang-vue.ts", "../../src/livecodes/languages/vue/lang-vue2.ts", "../../src/livecodes/languages/stencil/lang-stencil.ts", "../../src/livecodes/languages/coffeescript/lang-coffeescript.ts", "../../src/livecodes/languages/livescript/lang-livescript.ts", "../../src/livecodes/languages/assemblyscript/lang-assemblyscript.ts", "../../src/livecodes/languages/python/lang-python.ts", "../../src/livecodes/languages/ruby/lang-ruby.ts", "../../src/livecodes/languages/php/lang-php.ts", "../../src/livecodes/languages/perl/lang-perl.ts", "../../src/livecodes/languages/lua/lang-lua.ts", "../../src/livecodes/languages/commonlisp/lang-commonlisp.ts", "../../src/livecodes/languages/scheme/lang-scheme.ts", "../../src/livecodes/languages/solid/lang-solid.ts", "../../src/livecodes/languages/solid/lang-solid-tsx.ts", "../../src/livecodes/languages/python-pyodide/lang-python-pyodide.ts", "../../src/livecodes/languages/liquid/lang-liquid.ts", "../../src/livecodes/languages/ejs/lang-ejs.ts", "../../src/livecodes/languages/handlebars/lang-handlebars.ts", "../../src/livecodes/languages/dot/lang-dot.ts", "../../src/livecodes/languages/nunjucks/lang-nunjucks.ts", "../../src/livecodes/languages/go/lang-go.ts", "../../src/livecodes/languages/rescript/lang-rescript.ts", "../../src/livecodes/languages/reason/lang-reason.ts", "../../src/livecodes/languages/ocaml/lang-ocaml.ts", "../../src/livecodes/languages/wat/lang-wat.ts", "../../src/livecodes/languages/riot/lang-riot.ts", "../../src/livecodes/languages/sql/lang-sql.ts", "../../src/livecodes/languages/react-native/lang-react-native.ts", "../../src/livecodes/languages/react-native/lang-react-native-tsx.ts", "../../src/livecodes/languages/blockly/lang-blockly.ts", "../../src/livecodes/languages/twig/lang-twig.ts", "../../src/livecodes/languages/astro/lang-astro.ts", "../../src/livecodes/languages/malina/lang-malina.ts", "../../src/livecodes/languages/cpp/lang-cpp.ts", "../../src/livecodes/languages/julia/lang-julia.ts", "../../src/livecodes/languages/cpp-clang/lang-cpp-clang.ts", "../../src/livecodes/languages/tcl/lang-tcl.ts", "../../src/livecodes/languages/prolog/lang-prolog.ts", "../../src/livecodes/languages/clio/lang-clio.ts", "../../src/livecodes/languages/richtext/lang-richtext.ts", "../../src/livecodes/languages/diagrams/lang-diagrams.ts", "../../src/livecodes/languages/imba/lang-imba.ts", "../../src/livecodes/languages/mustache/lang-mustache.ts", "../../src/livecodes/languages/art-template/lang-art-template.ts", "../../src/livecodes/languages/r/lang-r.ts", "../../src/livecodes/languages/civet/lang-civet.ts", "../../src/livecodes/languages/fennel/lang-fennel.ts", "../../src/livecodes/languages/teal/lang-teal.ts", "../../src/livecodes/languages/stylis/lang-stylis.ts", "../../src/livecodes/languages/flow/lang-flow.ts", "../../src/livecodes/languages/mjml/lang-mjml.ts", "../../src/livecodes/languages/sucrase/lang-sucrase.ts", "../../src/livecodes/languages/eta/lang-eta.ts", "../../src/livecodes/compiler/get-all-compilers.ts", "../../src/livecodes/services/allowed-origin.ts", "../../src/livecodes/events/events.ts", "../../src/livecodes/events/custom-events.ts", "../../src/livecodes/events/pub.ts", "../../src/livecodes/storage/fake-storage.ts", "../../src/livecodes/storage/storage.ts", "../../src/livecodes/storage/project-storage.ts", "../../src/livecodes/storage/simple-storage.ts", "../../src/livecodes/storage/stores.ts", "../../src/livecodes/utils/compression.ts", "../../src/livecodes/storage/encrypt.ts", "../../src/livecodes/services/auth.ts", "../../src/livecodes/services/sandbox.ts", "../../src/livecodes/services/share.ts", "../../src/livecodes/services/types.ts", "../../src/livecodes/compiler/compiler-sandbox.ts", "../../src/livecodes/compiler/import-map.ts", "../../src/livecodes/compiler/utils.ts", "../../src/livecodes/compiler/create-compiler.ts", "../../src/livecodes/compiler/get-compiler.ts", "../../src/livecodes/languages/clojurescript/lang-clojurescript.ts", "../../src/livecodes/languages/languages.ts", "../../src/livecodes/languages/create-language-menus.ts", "../../src/livecodes/languages/css-presets.ts", "../../src/livecodes/editor/fake-editor.ts", "../../src/livecodes/editor/fonts.ts", "../../src/livecodes/editor/create-editor.ts", "../../src/livecodes/editor/custom-editor-commands.ts", "../../src/livecodes/editor/blockly/blockly-editor.ts", "../../src/livecodes/editor/quill/quill-editor.ts", "../../src/livecodes/editor/custom-editors.ts", "../../src/livecodes/formatter/formatter.ts", "../../src/livecodes/formatter/get-formatter.ts", "../../node_modules/@snackbar/core/dist/snackbar.es.js", "../../src/livecodes/notifications/snackbar.ts", "../../src/livecodes/notifications/create-notifications.ts", "../../src/livecodes/modal.ts", "../../src/livecodes/html/index.ts", "../../src/livecodes/export/export-json.ts", "../../src/livecodes/templates/get-starter-templates.ts", "../../src/livecodes/config/default-config.ts", "../../src/livecodes/config/build-config.ts", "../../src/livecodes/config/upgrade-config.ts", "../../src/livecodes/config/validate-config.ts", "../../src/livecodes/config/config.ts", "../../src/livecodes/import/utils.ts", "../../src/livecodes/import/github-dir.ts", "../../src/livecodes/import/github.ts", "../../src/livecodes/types/type-loader.ts", "../../src/livecodes/toolspane/test-imports.ts", "../../src/livecodes/result/result-page.ts", "../../src/livecodes/UI/selectors.ts", "../../src/livecodes/cache/cache.ts", "../../src/livecodes/cache/utils.ts", "../../src/livecodes/UI/info.ts", "../../src/livecodes/UI/loading.ts", "../../src/livecodes/UI/login.ts", "../../src/livecodes/UI/open.ts", "../../node_modules/split.js/dist/split.es.js", "../../src/livecodes/UI/split-panes.ts", "../../src/livecodes/UI/templates.ts", "../../src/livecodes/toolspane/compiled-code-viewer.ts", "../../src/livecodes/toolspane/console.ts", "../../src/livecodes/UI/icons.ts", "../../src/livecodes/toolspane/test-viewer.ts", "../../src/livecodes/toolspane/tools.ts", "../../src/livecodes/services/permanent-url.ts", "../../src/livecodes/core.ts", "../../src/livecodes/app.ts"],
  "sourcesContent": ["// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n", "var hasOwnProp = Object.prototype.hasOwnProperty;\n\nexports = function(obj, key) {\n    return hasOwnProp.call(obj, key);\n};\n\nmodule.exports = exports;\n", "var has = require('./has');\n\nif (Object.keys && !false) {\n    exports = Object.keys;\n} else {\n    exports = function(obj) {\n        var ret = [];\n\n        for (var key in obj) {\n            if (has(obj, key)) ret.push(key);\n        }\n\n        return ret;\n    };\n}\n\nmodule.exports = exports;\n", "var keys = require('./keys');\n\nexports = function(str) {\n    return regTest.test(str) ? str.replace(regReplace, replaceFn) : str;\n};\n\nvar map = (exports.map = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n});\nvar regSrc = '(?:' + keys(map).join('|') + ')';\nvar regTest = new RegExp(regSrc);\nvar regReplace = new RegExp(regSrc, 'g');\n\nvar replaceFn = function(match) {\n    return map[match];\n};\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return val == null ? '' : val.toString();\n};\n\nmodule.exports = exports;\n", "exports = function(arr, val, fromIdx) {\n    return Array.prototype.indexOf.call(arr, val, fromIdx);\n};\n\nmodule.exports = exports;\n", "var ObjToStr = Object.prototype.toString;\n\nexports = function(val) {\n    return ObjToStr.call(val);\n};\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\n\nexports = function(val) {\n    return objToStr(val) === '[object String]';\n};\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\n\nexports = function(val) {\n    return objToStr(val) === '[object Number]';\n};\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\n\nexports = function(val) {\n    var objStr = objToStr(val);\n    return (\n        objStr === '[object Function]' ||\n        objStr === '[object GeneratorFunction]' ||\n        objStr === '[object AsyncFunction]'\n    );\n};\n\nmodule.exports = exports;\n", "var isNum = require('./isNum');\nvar isFn = require('./isFn');\n\nvar MAX_ARR_IDX = Math.pow(2, 53) - 1;\n\nexports = function(val) {\n    if (!val) return false;\n    var len = val.length;\n    return isNum(len) && len >= 0 && len <= MAX_ARR_IDX && !isFn(val);\n};\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return val === void 0;\n};\n\nmodule.exports = exports;\n", "var isUndef = require('./isUndef');\n\nexports = function(fn, ctx, argCount) {\n    if (isUndef(ctx)) return fn;\n\n    switch (argCount == null ? 3 : argCount) {\n        case 1:\n            return function(val) {\n                return fn.call(ctx, val);\n            };\n\n        case 3:\n            return function(val, idx, collection) {\n                return fn.call(ctx, val, idx, collection);\n            };\n\n        case 4:\n            return function(accumulator, val, idx, collection) {\n                return fn.call(ctx, accumulator, val, idx, collection);\n            };\n    }\n\n    return function() {\n        return fn.apply(ctx, arguments);\n    };\n};\n\nmodule.exports = exports;\n", "var isArrLike = require('./isArrLike');\nvar keys = require('./keys');\nvar optimizeCb = require('./optimizeCb');\n\nexports = function(obj, iterator, ctx) {\n    iterator = optimizeCb(iterator, ctx);\n    var i, len;\n\n    if (isArrLike(obj)) {\n        for (i = 0, len = obj.length; i < len; i++) {\n            iterator(obj[i], i, obj);\n        }\n    } else {\n        var _keys = keys(obj);\n\n        for (i = 0, len = _keys.length; i < len; i++) {\n            iterator(obj[_keys[i]], _keys[i], obj);\n        }\n    }\n\n    return obj;\n};\n\nmodule.exports = exports;\n", "var each = require('./each');\n\nexports = function(obj) {\n    var ret = [];\n    each(obj, function(val) {\n        ret.push(val);\n    });\n    return ret;\n};\n\nmodule.exports = exports;\n", "var idxOf = require('./idxOf');\nvar isStr = require('./isStr');\nvar isArrLike = require('./isArrLike');\nvar values = require('./values');\n\nexports = function(arr, val) {\n    if (isStr(arr)) return arr.indexOf(val) > -1;\n    if (!isArrLike(arr)) arr = values(arr);\n    return idxOf(arr, val) >= 0;\n};\n\nmodule.exports = exports;\n", "exports = function(str, prefix) {\n    return str.indexOf(prefix) === 0;\n};\n\nmodule.exports = exports;\n", "var toStr = require('./toStr');\n\nexports = function(str) {\n    return toStr(str).replace(regEscapeChars, function(char) {\n        switch (char) {\n            case '\"':\n            case \"'\":\n            case '\\\\':\n                return '\\\\' + char;\n\n            case '\\n':\n                return '\\\\n';\n\n            case '\\r':\n                return '\\\\r';\n            // Line separator\n\n            case '\\u2028':\n                return '\\\\u2028';\n            // Paragraph separator\n\n            case '\\u2029':\n                return '\\\\u2029';\n        }\n    });\n};\n\nvar regEscapeChars = /[\"'\\\\\\n\\r\\u2028\\u2029]/g;\n\nmodule.exports = exports;\n", "exports = function(str, suffix) {\n    var idx = str.length - suffix.length;\n    return idx >= 0 && str.indexOf(suffix, idx) === idx;\n};\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\n\nif (Array.isArray && !false) {\n    exports = Array.isArray;\n} else {\n    exports = function(val) {\n        return objToStr(val) === '[object Array]';\n    };\n}\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\n\nexports = function(val) {\n    return objToStr(val) === '[object Arguments]';\n};\n\nmodule.exports = exports;\n", "var isArrLike = require('./isArrLike');\nvar isArr = require('./isArr');\nvar isStr = require('./isStr');\nvar isArgs = require('./isArgs');\nvar keys = require('./keys');\n\nexports = function(val) {\n    if (val == null) return true;\n\n    if (isArrLike(val) && (isArr(val) || isStr(val) || isArgs(val))) {\n        return val.length === 0;\n    }\n\n    return keys(val).length === 0;\n};\n\nmodule.exports = exports;\n", "exports = function(str) {\n    if (str.length < 1) return str;\n    return str[0].toUpperCase() + str.slice(1);\n};\n\nmodule.exports = exports;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getObjType = void 0;\nconst upperFirst_1 = __importDefault(require(\"licia/upperFirst\"));\nfunction getObjType(obj) {\n    if (obj.constructor && obj.constructor.name)\n        return obj.constructor.name;\n    return upperFirst_1.default({}.toString.call(obj).replace(/(\\[object )|]/g, ''));\n}\nexports.getObjType = getObjType;\n", "exports = function(val) {\n    var type = typeof val;\n    return !!val && (type === 'function' || type === 'object');\n};\n\nmodule.exports = exports;\n", "var isUndef = require('./isUndef');\nvar each = require('./each');\n\nexports = function(keysFn, defaults) {\n    return function(obj) {\n        each(arguments, function(src, idx) {\n            if (idx === 0) return;\n            var keys = keysFn(src);\n            each(keys, function(key) {\n                if (!defaults || isUndef(obj[key])) obj[key] = src[key];\n            });\n        });\n        return obj;\n    };\n};\n\nmodule.exports = exports;\n", "var keys = require('./keys');\nvar createAssigner = require('./createAssigner');\n\nexports = createAssigner(keys);\n\nmodule.exports = exports;\n", "var keys = require('./keys');\n\nexports = function(obj, src) {\n    var _keys = keys(src);\n\n    var len = _keys.length;\n    if (obj == null) return !len;\n    obj = Object(obj);\n\n    for (var i = 0; i < len; i++) {\n        var key = _keys[i];\n        if (src[key] !== obj[key] || !(key in obj)) return false;\n    }\n\n    return true;\n};\n\nmodule.exports = exports;\n", "var extendOwn = require('./extendOwn');\nvar isMatch = require('./isMatch');\n\nexports = function(attrs) {\n    attrs = extendOwn({}, attrs);\n    return function(obj) {\n        return isMatch(obj, attrs);\n    };\n};\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return val;\n};\n\nmodule.exports = exports;\n", "var has = require('./has');\nvar isArr = require('./isArr');\n\nexports = function(str, obj) {\n    if (isArr(str)) return str;\n    if (obj && has(obj, str)) return [str];\n    var ret = [];\n    str.replace(regPropName, function(match, number, quote, str) {\n        ret.push(quote ? str.replace(regEscapeChar, '$1') : number || match);\n    });\n    return ret;\n};\n\nvar regPropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\nvar regEscapeChar = /\\\\(\\\\)?/g;\n\nmodule.exports = exports;\n", "var isUndef = require('./isUndef');\nvar castPath = require('./castPath');\n\nexports = function(obj, path) {\n    path = castPath(path, obj);\n    var prop;\n    prop = path.shift();\n\n    while (!isUndef(prop)) {\n        obj = obj[prop];\n        if (obj == null) return;\n        prop = path.shift();\n    }\n\n    return obj;\n};\n\nmodule.exports = exports;\n", "var isArr = require('./isArr');\nvar safeGet = require('./safeGet');\n\nexports = function(path) {\n    if (!isArr(path)) return shallowProperty(path);\n    return function(obj) {\n        return safeGet(obj, path);\n    };\n};\n\nfunction shallowProperty(key) {\n    return function(obj) {\n        return obj == null ? void 0 : obj[key];\n    };\n}\n\nmodule.exports = exports;\n", "var isFn = require('./isFn');\nvar isObj = require('./isObj');\nvar isArr = require('./isArr');\nvar optimizeCb = require('./optimizeCb');\nvar matcher = require('./matcher');\nvar identity = require('./identity');\nvar property = require('./property');\n\nexports = function(val, ctx, argCount) {\n    if (val == null) return identity;\n    if (isFn(val)) return optimizeCb(val, ctx, argCount);\n    if (isObj(val) && !isArr(val)) return matcher(val);\n    return property(val);\n};\n\nmodule.exports = exports;\n", "var safeCb = require('./safeCb');\nvar keys = require('./keys');\nvar isArrLike = require('./isArrLike');\n\nexports = function(obj, iterator, ctx) {\n    iterator = safeCb(iterator, ctx);\n\n    var _keys = !isArrLike(obj) && keys(obj);\n\n    var len = (_keys || obj).length;\n    var results = Array(len);\n\n    for (var i = 0; i < len; i++) {\n        var curKey = _keys ? _keys[i] : i;\n        results[i] = iterator(obj[curKey], curKey, obj);\n    }\n\n    return results;\n};\n\nmodule.exports = exports;\n", "var regSpace = /^\\s+/;\n\nexports = function(str, chars) {\n    if (chars == null) {\n        if (str.trimLeft) {\n            return str.trimLeft();\n        }\n\n        return str.replace(regSpace, '');\n    }\n\n    var start = 0;\n    var len = str.length;\n    var charLen = chars.length;\n    var found = true;\n    var i;\n    var c;\n\n    while (found && start < len) {\n        found = false;\n        i = -1;\n        c = str.charAt(start);\n\n        while (++i < charLen) {\n            if (c === chars[i]) {\n                found = true;\n                start++;\n                break;\n            }\n        }\n    }\n\n    return start >= len ? '' : str.substr(start, len);\n};\n\nmodule.exports = exports;\n", "exports = function(str, chars) {\n    if (chars == null) {\n        if (str.trimRight) {\n            return str.trimRight();\n        }\n\n        chars = ' \\r\\n\\t\\f\\v';\n    }\n\n    var end = str.length - 1;\n    var charLen = chars.length;\n    var found = true;\n    var i;\n    var c;\n\n    while (found && end >= 0) {\n        found = false;\n        i = -1;\n        c = str.charAt(end);\n\n        while (++i < charLen) {\n            if (c === chars[i]) {\n                found = true;\n                end--;\n                break;\n            }\n        }\n    }\n\n    return end >= 0 ? str.substring(0, end + 1) : '';\n};\n\nmodule.exports = exports;\n", "var ltrim = require('./ltrim');\nvar rtrim = require('./rtrim');\n\nexports = function(str, chars) {\n    if (chars == null && str.trim) {\n        return str.trim();\n    }\n\n    return ltrim(rtrim(str, chars), chars);\n};\n\nmodule.exports = exports;\n", "exports =\n    typeof window === 'object' &&\n    typeof document === 'object' &&\n    document.nodeType === 9;\n\nmodule.exports = exports;\n", "var isBrowser = require('./isBrowser');\n\nexports = isBrowser ? window : global;\n\nmodule.exports = exports;\n", "exports = function(arr) {\n    var len = arr ? arr.length : 0;\n    if (len) return arr[len - 1];\n};\n\nmodule.exports = exports;\n", "var each = require('./each');\nvar isUndef = require('./isUndef');\nvar isFn = require('./isFn');\n\nexports = function(arr, val) {\n    if (isUndef(val)) val = true;\n\n    var _isFn = isFn(val);\n\n    var ret = {};\n    each(arr, function(key) {\n        ret[key] = _isFn ? val(key) : val;\n    });\n    return ret;\n};\n\nmodule.exports = exports;\n", "var toStr = require('./toStr');\n\nexports = function(str) {\n    return toStr(str).toLocaleLowerCase();\n};\n\nmodule.exports = exports;\n", "var last = require('./last');\nvar arrToMap = require('./arrToMap');\nvar startWith = require('./startWith');\nvar lowerCase = require('./lowerCase');\n\nexports = function(html, handler) {\n    var stack = [];\n    var text;\n    var lastHtml = html;\n\n    while (html) {\n        text = true;\n\n        if (!last(stack) || !SPECIAL[last(stack)]) {\n            if (startWith(html, '<!--')) {\n                var endIdx = html.indexOf('-->');\n\n                if (endIdx >= 0) {\n                    if (handler.comment) {\n                        handler.comment(html.substring(4, endIdx));\n                    }\n\n                    html = html.substring(endIdx + 3);\n                    text = false;\n                }\n            } else if (startWith(html, '<!')) {\n                var match = html.match(regDoctype);\n\n                if (match) {\n                    if (handler.text)\n                        handler.text(html.substring(0, match[0].length));\n                    html = html.substring(match[0].length);\n                    text = false;\n                }\n            } else if (startWith(html, '</')) {\n                var _match = html.match(regEndTag);\n\n                if (_match) {\n                    html = html.substring(_match[0].length);\n\n                    _match[0].replace(regEndTag, parseEndTag);\n\n                    text = false;\n                }\n            } else if (startWith(html, '<')) {\n                var _match2 = html.match(regStartTag);\n\n                if (_match2) {\n                    html = html.substring(_match2[0].length);\n\n                    _match2[0].replace(regStartTag, parseStartTag);\n\n                    text = false;\n                }\n            }\n\n            if (text) {\n                var _endIdx = html.indexOf('<');\n\n                var _text = _endIdx < 0 ? html : html.substring(0, _endIdx);\n\n                html = _endIdx < 0 ? '' : html.substring(_endIdx);\n                if (handler.text) handler.text(_text);\n            }\n        } else {\n            var execRes = new RegExp('</'.concat(last(stack), '[^>]*>')).exec(\n                html\n            );\n\n            if (execRes) {\n                var _text2 = html.substring(0, execRes.index);\n\n                html = html.substring(execRes.index + execRes[0].length);\n                if (_text2 && handler.text) handler.text(_text2);\n            }\n\n            parseEndTag('', last(stack));\n        }\n\n        if (lastHtml === html) {\n            throw Error('Parse Error: ' + html);\n        }\n\n        lastHtml = html;\n    }\n\n    parseEndTag();\n\n    function parseStartTag(tag, tagName, rest, unary) {\n        tagName = lowerCase(tagName);\n        unary = !!unary;\n        if (!unary) stack.push(tagName);\n\n        if (handler.start) {\n            var attrs = {};\n            rest.replace(regAttr, function(all, $1, $2, $3, $4) {\n                attrs[$1] = $2 || $3 || $4 || '';\n            });\n            handler.start(tagName, attrs, unary);\n        }\n    }\n\n    function parseEndTag(tag, tagName) {\n        tagName = lowerCase(tagName);\n        var pos;\n\n        if (!tagName) {\n            pos = 0;\n        } else {\n            for (pos = stack.length - 1; pos >= 0; pos--) {\n                if (stack[pos] === tagName) break;\n            }\n        }\n\n        if (pos >= 0) {\n            for (var i = stack.length - 1; i >= pos; i--) {\n                if (handler.end) handler.end(stack[i]);\n            }\n\n            stack.length = pos;\n        }\n    }\n};\n\nvar regDoctype = /^<!\\s*doctype((?:\\s+[\\w:]+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)>/i;\nvar regEndTag = /^<\\/([-A-Za-z0-9_]+)[^>]*>/;\nvar regStartTag = /^<([-A-Za-z0-9_]+)((?:\\s+[-A-Za-z0-9_:@.]+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)>/i;\nvar regAttr = /([-A-Za-z0-9_:@.]+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g;\n\nvar SPECIAL = arrToMap('script,style'.split(','));\n\nmodule.exports = exports;\n", "var isObj = require('./isObj');\nvar isFn = require('./isFn');\n\nvar getPrototypeOf = Object.getPrototypeOf;\nvar ObjectCtr = {}.constructor;\n\nexports = function(obj) {\n    if (!isObj(obj)) return;\n    if (getPrototypeOf && !false) return getPrototypeOf(obj);\n    var proto = obj.__proto__;\n    if (proto || proto === null) return proto;\n    if (isFn(obj.constructor)) return obj.constructor.prototype;\n    if (obj instanceof ObjectCtr) return ObjectCtr.prototype;\n};\n\nmodule.exports = exports;\n", "var safeCb = require('./safeCb');\nvar each = require('./each');\n\nexports = function(obj, predicate, ctx) {\n    var ret = [];\n    predicate = safeCb(predicate, ctx);\n    each(obj, function(val, idx, list) {\n        if (predicate(val, idx, list)) ret.push(val);\n    });\n    return ret;\n};\n\nmodule.exports = exports;\n", "var filter = require('./filter');\n\nexports = function(arr, cmp) {\n    cmp = cmp || isEqual;\n    return filter(arr, function(item, idx, arr) {\n        var len = arr.length;\n\n        while (++idx < len) {\n            if (cmp(item, arr[idx])) return false;\n        }\n\n        return true;\n    });\n};\n\nfunction isEqual(a, b) {\n    return a === b;\n}\n\nmodule.exports = exports;\n", "var keys = require('./keys');\nvar getProto = require('./getProto');\nvar unique = require('./unique');\n\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\nexports = function(obj) {\n    var _ref =\n            arguments.length > 1 && arguments[1] !== undefined\n                ? arguments[1]\n                : {},\n        _ref$prototype = _ref.prototype,\n        prototype = _ref$prototype === void 0 ? true : _ref$prototype,\n        _ref$unenumerable = _ref.unenumerable,\n        unenumerable = _ref$unenumerable === void 0 ? false : _ref$unenumerable,\n        _ref$symbol = _ref.symbol,\n        symbol = _ref$symbol === void 0 ? false : _ref$symbol;\n\n    var ret = [];\n\n    if ((unenumerable || symbol) && getOwnPropertyNames) {\n        var getKeys = keys;\n        if (unenumerable && getOwnPropertyNames) getKeys = getOwnPropertyNames;\n\n        do {\n            ret = ret.concat(getKeys(obj));\n\n            if (symbol && getOwnPropertySymbols) {\n                ret = ret.concat(getOwnPropertySymbols(obj));\n            }\n        } while (\n            prototype &&\n            (obj = getProto(obj)) &&\n            obj !== Object.prototype\n        );\n\n        ret = unique(ret);\n    } else {\n        if (prototype) {\n            for (var key in obj) {\n                ret.push(key);\n            }\n        } else {\n            ret = keys(obj);\n        }\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "var createAssigner = require('./createAssigner');\nvar allKeys = require('./allKeys');\n\nexports = createAssigner(allKeys);\n\nmodule.exports = exports;\n", "var isArrLike = require('./isArrLike');\nvar map = require('./map');\nvar isArr = require('./isArr');\nvar isStr = require('./isStr');\n\nexports = function(val) {\n    if (!val) return [];\n    if (isArr(val)) return val;\n    if (isArrLike(val) && !isStr(val)) return map(val);\n    return [val];\n};\n\nmodule.exports = exports;\n", "var isObj = require('./isObj');\n\nexports = function(proto) {\n    if (!isObj(proto)) return {};\n    if (objCreate && !false) return objCreate(proto);\n\n    function noop() {}\n\n    noop.prototype = proto;\n    return new noop();\n};\n\nvar objCreate = Object.create;\n\nmodule.exports = exports;\n", "var create = require('./create');\n\nexports = function(Class, SuperClass) {\n    Class.prototype = create(SuperClass.prototype);\n};\n\nmodule.exports = exports;\n", "var isFn = require('./isFn');\n\nexports = typeof wx !== 'undefined' && isFn(wx.openLocation);\n\nmodule.exports = exports;\n", "var extend = require('./extend');\nvar toArr = require('./toArr');\nvar inherits = require('./inherits');\nvar safeGet = require('./safeGet');\nvar isMiniProgram = require('./isMiniProgram');\n\nexports = function(methods, statics) {\n    return Base.extend(methods, statics);\n};\n\nfunction makeClass(parent, methods, statics) {\n    statics = statics || {};\n    var className =\n        methods.className || safeGet(methods, 'initialize.name') || '';\n    delete methods.className;\n\n    var ctor = function() {\n        var args = toArr(arguments);\n        return this.initialize\n            ? this.initialize.apply(this, args) || this\n            : this;\n    };\n\n    if (!isMiniProgram) {\n        try {\n            ctor = new Function(\n                'toArr',\n                'return function ' +\n                    className +\n                    '()' +\n                    '{' +\n                    'var args = toArr(arguments);' +\n                    'return this.initialize ? this.initialize.apply(this, args) || this : this;' +\n                    '};'\n            )(toArr);\n        } catch (e) {}\n    }\n\n    inherits(ctor, parent);\n    ctor.prototype.constructor = ctor;\n\n    ctor.extend = function(methods, statics) {\n        return makeClass(ctor, methods, statics);\n    };\n\n    ctor.inherits = function(Class) {\n        inherits(ctor, Class);\n    };\n\n    ctor.methods = function(methods) {\n        extend(ctor.prototype, methods);\n        return ctor;\n    };\n\n    ctor.statics = function(statics) {\n        extend(ctor, statics);\n        return ctor;\n    };\n\n    ctor.methods(methods).statics(statics);\n    return ctor;\n}\n\nvar Base = (exports.Base = makeClass(Object, {\n    className: 'Base',\n    callSuper: function(parent, name, args) {\n        var superMethod = parent.prototype[name];\n        return superMethod.apply(this, args);\n    },\n    toString: function() {\n        return this.constructor.name;\n    }\n}));\n\nmodule.exports = exports;\n", "exports = function(arr) {\n    var len = arr.length;\n    var ret = Array(len);\n    len--;\n\n    for (var i = 0; i <= len; i++) {\n        ret[len - i] = arr[i];\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "var Class = require('./Class');\nvar reverse = require('./reverse');\n\nexports = Class({\n    initialize: function Stack() {\n        this.clear();\n    },\n    clear: function() {\n        this._items = [];\n        this.size = 0;\n    },\n    push: function(item) {\n        this._items.push(item);\n\n        return ++this.size;\n    },\n    pop: function() {\n        if (!this.size) return;\n        this.size--;\n        return this._items.pop();\n    },\n    peek: function() {\n        return this._items[this.size - 1];\n    },\n    forEach: function(iterator, ctx) {\n        ctx = arguments.length > 1 ? ctx : this;\n        var items = this._items;\n\n        for (var i = this.size - 1, j = 0; i >= 0; i--, j++) {\n            iterator.call(ctx, items[i], j, this);\n        }\n    },\n    toArr: function() {\n        return reverse(this._items);\n    }\n});\n\nmodule.exports = exports;\n", "var safeCb = require('./safeCb');\nvar keys = require('./keys');\n\nexports = function(obj, iterator, ctx) {\n    iterator = safeCb(iterator, ctx);\n\n    var _keys = keys(obj);\n\n    var len = _keys.length;\n    var ret = {};\n\n    for (var i = 0; i < len; i++) {\n        var curKey = _keys[i];\n        ret[curKey] = iterator(obj[curKey], curKey, obj);\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "var parseHtml = require('./parseHtml');\nvar Stack = require('./Stack');\nvar isArr = require('./isArr');\nvar each = require('./each');\nvar isStr = require('./isStr');\nvar mapObj = require('./mapObj');\n\nfunction parse(html) {\n    var ret = [];\n    var stack = new Stack();\n    parseHtml(html, {\n        start: function(tag, attrs) {\n            attrs = mapObj(attrs, function(val) {\n                return unescapeQuote(val);\n            });\n            stack.push({\n                tag: tag,\n                attrs: attrs\n            });\n        },\n        end: function() {\n            var node = stack.pop();\n\n            if (!stack.size) {\n                ret.push(node);\n                return;\n            }\n\n            var lastNode = stack.peek();\n\n            if (!isArr(lastNode.content)) {\n                lastNode.content = [];\n            }\n\n            lastNode.content.push(node);\n        },\n        comment: function(text) {\n            var comment = '<!--'.concat(text, '-->');\n            var lastNode = stack.peek();\n\n            if (!lastNode) {\n                ret.push(comment);\n                return;\n            }\n\n            if (!lastNode.content) lastNode.content = [];\n            lastNode.content.push(comment);\n        },\n        text: function(text) {\n            var lastNode = stack.peek();\n\n            if (!lastNode) {\n                ret.push(text);\n                return;\n            }\n\n            if (!lastNode.content) lastNode.content = [];\n            lastNode.content.push(text);\n        }\n    });\n    return ret;\n}\n\nfunction stringify(tree) {\n    var ret = '';\n\n    if (isArr(tree)) {\n        each(tree, function(node) {\n            return (ret += stringify(node));\n        });\n    } else if (isStr(tree)) {\n        ret = tree;\n    } else {\n        ret += '<'.concat(tree.tag);\n        each(tree.attrs, function(val, key) {\n            return (ret += ' '.concat(key, '=\"').concat(escapeQuote(val), '\"'));\n        });\n        ret += '>';\n        if (tree.content) ret += stringify(tree.content);\n        ret += '</'.concat(tree.tag, '>');\n    }\n\n    return ret;\n}\n\nvar unescapeQuote = function(str) {\n    return str.replace(/&quot;/g, '\"');\n};\n\nvar escapeQuote = function(str) {\n    return str.replace(/\"/g, '&quot;');\n};\n\nexports = {\n    parse: parse,\n    stringify: stringify\n};\n\nmodule.exports = exports;\n", "var isNum = require('./isNum');\nvar isObj = require('./isObj');\nvar isFn = require('./isFn');\nvar isStr = require('./isStr');\n\nexports = function(val) {\n    if (isNum(val)) return val;\n\n    if (isObj(val)) {\n        var temp = isFn(val.valueOf) ? val.valueOf() : val;\n        val = isObj(temp) ? temp + '' : temp;\n    }\n\n    if (!isStr(val)) return val === 0 ? val : +val;\n    return +val;\n};\n\nmodule.exports = exports;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pxToNum = exports.executeAfterTransition = exports.hasVerticalScrollbar = exports.measuredScrollbarWidth = exports.eventClient = exports.drag = exports.classPrefix = void 0;\nconst map_1 = __importDefault(require(\"licia/map\"));\nconst trim_1 = __importDefault(require(\"licia/trim\"));\nconst root_1 = __importDefault(require(\"licia/root\"));\nconst html_1 = __importDefault(require(\"licia/html\"));\nconst isNum_1 = __importDefault(require(\"licia/isNum\"));\nconst contain_1 = __importDefault(require(\"licia/contain\"));\nconst toNum_1 = __importDefault(require(\"licia/toNum\"));\nfunction classPrefix(name) {\n    const prefix = `luna-${name}-`;\n    function processClass(str) {\n        return map_1.default(trim_1.default(str).split(/\\s+/), (singleClass) => {\n            if (contain_1.default(singleClass, prefix)) {\n                return singleClass;\n            }\n            return singleClass.replace(/[\\w-]+/, (match) => `${prefix}${match}`);\n        }).join(' ');\n    }\n    return function (str) {\n        if (/<[^>]*>/g.test(str)) {\n            try {\n                const tree = html_1.default.parse(str);\n                traverseTree(tree, (node) => {\n                    if (node.attrs && node.attrs.class) {\n                        node.attrs.class = processClass(node.attrs.class);\n                    }\n                });\n                return html_1.default.stringify(tree);\n            }\n            catch (e) {\n                return processClass(str);\n            }\n        }\n        return processClass(str);\n    };\n}\nexports.classPrefix = classPrefix;\nfunction traverseTree(tree, handler) {\n    for (let i = 0, len = tree.length; i < len; i++) {\n        const node = tree[i];\n        handler(node);\n        if (node.content) {\n            traverseTree(node.content, handler);\n        }\n    }\n}\nconst hasTouchSupport = 'ontouchstart' in root_1.default;\nconst touchEvents = {\n    start: 'touchstart',\n    move: 'touchmove',\n    end: 'touchend',\n};\nconst mouseEvents = {\n    start: 'mousedown',\n    move: 'mousemove',\n    end: 'mouseup',\n};\nfunction drag(name) {\n    return hasTouchSupport ? touchEvents[name] : mouseEvents[name];\n}\nexports.drag = drag;\nfunction eventClient(type, e) {\n    const name = type === 'x' ? 'clientX' : 'clientY';\n    if (e[name]) {\n        return e[name];\n    }\n    if (e.changedTouches) {\n        return e.changedTouches[0][name];\n    }\n    return 0;\n}\nexports.eventClient = eventClient;\nlet scrollbarWidth;\nfunction measuredScrollbarWidth() {\n    if (isNum_1.default(scrollbarWidth)) {\n        return scrollbarWidth;\n    }\n    if (!document) {\n        return 16;\n    }\n    const scrollDiv = document.createElement('div');\n    const innerDiv = document.createElement('div');\n    scrollDiv.setAttribute('style', 'display: block; width: 100px; height: 100px; overflow: scroll;');\n    innerDiv.setAttribute('style', 'height: 200px');\n    scrollDiv.appendChild(innerDiv);\n    document.body.appendChild(scrollDiv);\n    scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    document.body.removeChild(scrollDiv);\n    return scrollbarWidth;\n}\nexports.measuredScrollbarWidth = measuredScrollbarWidth;\nfunction hasVerticalScrollbar(el) {\n    return el.scrollHeight > el.offsetHeight;\n}\nexports.hasVerticalScrollbar = hasVerticalScrollbar;\nfunction executeAfterTransition(el, callback) {\n    const handler = (e) => {\n        const target = e.target;\n        if (target !== el) {\n            return;\n        }\n        el.removeEventListener('transitionend', handler);\n        callback();\n    };\n    el.addEventListener('transitionend', handler);\n}\nexports.executeAfterTransition = executeAfterTransition;\nfunction pxToNum(str) {\n    return toNum_1.default(str.replace('px', ''));\n}\nexports.pxToNum = pxToNum;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Simple version for stringify, used for displaying object abstract.\nconst escape_1 = __importDefault(require(\"licia/escape\"));\nconst toStr_1 = __importDefault(require(\"licia/toStr\"));\nconst contain_1 = __importDefault(require(\"licia/contain\"));\nconst startWith_1 = __importDefault(require(\"licia/startWith\"));\nconst escapeJsStr_1 = __importDefault(require(\"licia/escapeJsStr\"));\nconst each_1 = __importDefault(require(\"licia/each\"));\nconst endWith_1 = __importDefault(require(\"licia/endWith\"));\nconst isEmpty_1 = __importDefault(require(\"licia/isEmpty\"));\nconst util_1 = require(\"./util\");\nconst util_2 = require(\"../share/util\");\nconst c = util_2.classPrefix('console');\n// Modified from: https://jsconsole.com/\nfunction getAbstract(obj, { topObj, level = 0, getterVal = false, unenumerable = true, } = {}) {\n    let json = '';\n    let type = '';\n    const keyNum = 5;\n    const parts = [];\n    let names = [];\n    let objEllipsis = '';\n    const circular = false;\n    let i;\n    topObj = topObj || obj;\n    const passOpts = { getterVal, unenumerable, level: level + 1 };\n    const doStringify = level === 0;\n    const keyWrapper = `<span class=\"${c('key')}\">`;\n    const numWrapper = `<span class=\"${c('number')}\">`;\n    const nullWrapper = `<span class=\"${c('null')}\">`;\n    const strWrapper = `<span class=\"${c('string')}\">`;\n    const boolWrapper = `<span class=\"${c('boolean')}\">`;\n    const specialWrapper = `<span class=\"${c('special')}\">`;\n    const strEscape = (str) => escape_1.default(str)\n        .replace(/\\\\n/g, '\u21B5')\n        .replace(/\\\\f|\\\\r|\\\\t/g, '')\n        .replace(/\\\\/g, '');\n    const wrapperEnd = '</span>';\n    const wrapKey = (key) => keyWrapper + strEscape(key) + wrapperEnd;\n    const wrapNum = (num) => numWrapper + num + wrapperEnd;\n    const wrapRegExp = (str) => strWrapper + str + wrapperEnd;\n    const wrapBool = (bool) => boolWrapper + bool + wrapperEnd;\n    const wrapNull = (str) => nullWrapper + str + wrapperEnd;\n    function wrapStr(str) {\n        str = toStr_1.default(str);\n        if (contain_1.default(SPECIAL_VAL, str) || startWith_1.default(str, 'Array[')) {\n            return specialWrapper + strEscape(str) + wrapperEnd;\n        }\n        return strWrapper + strEscape(`\"${str}\"`) + wrapperEnd;\n    }\n    function objIteratee(name) {\n        if (i > keyNum) {\n            objEllipsis = ', \u2026';\n            return;\n        }\n        const key = wrapKey(escapeJsonStr(name));\n        if (!getterVal) {\n            const descriptor = Object.getOwnPropertyDescriptor(obj, name);\n            if (descriptor && descriptor.get) {\n                parts.push(`${key}: ${wrapStr('(...)')}`);\n                i++;\n                return;\n            }\n        }\n        parts.push(`${key}: ${getAbstract(topObj[name], passOpts)}`);\n        i++;\n    }\n    try {\n        type = {}.toString.call(obj);\n    }\n    catch (e) {\n        type = '[object Object]';\n    }\n    const isStr = type == '[object String]';\n    const isArr = type == '[object Array]';\n    const isObj = type == '[object Object]';\n    const isNum = type == '[object Number]';\n    const isRegExp = type == '[object RegExp]';\n    const isSymbol = type == '[object Symbol]';\n    const isFn = type == '[object Function]';\n    const isBool = type == '[object Boolean]';\n    if (circular) {\n        json = wrapStr('[circular]');\n    }\n    else if (isStr) {\n        json = wrapStr(escapeJsonStr(obj));\n    }\n    else if (isRegExp) {\n        json = wrapRegExp(escapeJsonStr(obj.toString()));\n    }\n    else if (isFn) {\n        json = wrapStr('\u0192');\n    }\n    else if (isArr) {\n        if (doStringify) {\n            json = '[';\n            let len = obj.length;\n            let arrEllipsis = '';\n            if (len > 100) {\n                len = 100;\n                arrEllipsis = ', \u2026';\n            }\n            for (let i = 0; i < len; i++) {\n                parts.push(`${getAbstract(obj[i], passOpts)}`);\n            }\n            json += parts.join(', ') + arrEllipsis + ']';\n        }\n        else {\n            json = `Array(${obj.length})`;\n        }\n    }\n    else if (isObj) {\n        if (canBeProto(obj)) {\n            obj = Object.getPrototypeOf(obj);\n        }\n        names = unenumerable ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n        if (doStringify) {\n            i = 1;\n            json = '{';\n            each_1.default(names, objIteratee);\n            json += parts.join(', ') + objEllipsis + '}';\n        }\n        else {\n            json = util_1.getObjType(obj);\n            if (json === 'Object')\n                json = '{\u2026}';\n        }\n    }\n    else if (isNum) {\n        json = obj + '';\n        if (endWith_1.default(json, 'Infinity') || json === 'NaN') {\n            json = `\"${json}\"`;\n        }\n        else {\n            json = wrapNum(json);\n        }\n    }\n    else if (isBool) {\n        json = wrapBool(obj ? 'true' : 'false');\n    }\n    else if (obj === null) {\n        json = wrapNull('null');\n    }\n    else if (isSymbol) {\n        json = wrapStr('Symbol');\n    }\n    else if (obj === undefined) {\n        json = wrapStr('undefined');\n    }\n    else {\n        try {\n            if (canBeProto(obj)) {\n                obj = Object.getPrototypeOf(obj);\n            }\n            if (doStringify) {\n                i = 1;\n                json = '{';\n                names = unenumerable\n                    ? Object.getOwnPropertyNames(obj)\n                    : Object.keys(obj);\n                each_1.default(names, objIteratee);\n                json += parts.join(', ') + objEllipsis + '}';\n            }\n            else {\n                json = util_1.getObjType(obj);\n                if (json === 'Object')\n                    json = '{\u2026}';\n            }\n        }\n        catch (e) {\n            json = wrapStr(obj);\n        }\n    }\n    return json;\n}\nexports.default = getAbstract;\nconst SPECIAL_VAL = ['(...)', 'undefined', 'Symbol', 'Object', '\u0192'];\nfunction canBeProto(obj) {\n    const emptyObj = isEmpty_1.default(Object.getOwnPropertyNames(obj));\n    const proto = Object.getPrototypeOf(obj);\n    return emptyObj && proto && proto !== Object.prototype;\n}\nfunction escapeJsonStr(str) {\n    return escapeJsStr_1.default(str).replace(/\\\\'/g, \"'\").replace(/\\t/g, '\\\\t');\n}\n", "exports = function(arr, start, end) {\n    var len = arr.length;\n\n    if (start == null) {\n        start = 0;\n    } else if (start < 0) {\n        start = Math.max(len + start, 0);\n    } else {\n        start = Math.min(start, len);\n    }\n\n    if (end == null) {\n        end = len;\n    } else if (end < 0) {\n        end = Math.max(len + end, 0);\n    } else {\n        end = Math.min(end, len);\n    }\n\n    var ret = [];\n\n    while (start < end) {\n        ret.push(arr[start++]);\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "exports = function(fn, startIdx) {\n    startIdx = startIdx == null ? fn.length - 1 : +startIdx;\n    return function() {\n        var len = Math.max(arguments.length - startIdx, 0);\n        var rest = new Array(len);\n        var i;\n\n        for (i = 0; i < len; i++) {\n            rest[i] = arguments[i + startIdx];\n        }\n\n        switch (startIdx) {\n            case 0:\n                return fn.call(this, rest);\n\n            case 1:\n                return fn.call(this, arguments[0], rest);\n\n            case 2:\n                return fn.call(this, arguments[0], arguments[1], rest);\n        }\n\n        var args = new Array(startIdx + 1);\n\n        for (i = 0; i < startIdx; i++) {\n            args[i] = arguments[i];\n        }\n\n        args[startIdx] = rest;\n        return fn.apply(this, args);\n    };\n};\n\nmodule.exports = exports;\n", "var restArgs = require('./restArgs');\nvar toArr = require('./toArr');\n\nexports = restArgs(function(fn, partials) {\n    return function() {\n        var args = [];\n        args = args.concat(partials);\n        args = args.concat(toArr(arguments));\n        return fn.apply(this, args);\n    };\n});\n\nmodule.exports = exports;\n", "exports = function(n, fn) {\n    var memo;\n    return function() {\n        if (--n > 0) memo = fn.apply(this, arguments);\n        if (n <= 1) fn = null;\n        return memo;\n    };\n};\n\nmodule.exports = exports;\n", "var partial = require('./partial');\nvar before = require('./before');\n\nexports = partial(before, 2);\n\nmodule.exports = exports;\n", "var isObj = require('./isObj');\nvar isArr = require('./isArr');\nvar extend = require('./extend');\n\nexports = function(obj) {\n    if (!isObj(obj)) return obj;\n    return isArr(obj) ? obj.slice() : extend({}, obj);\n};\n\nmodule.exports = exports;\n", "var Class = require('./Class');\nvar has = require('./has');\nvar each = require('./each');\nvar slice = require('./slice');\nvar once = require('./once');\nvar clone = require('./clone');\n\nexports = Class(\n    {\n        initialize: function Emitter() {\n            this._events = this._events || {};\n        },\n        on: function(event, listener) {\n            this._events[event] = this._events[event] || [];\n\n            this._events[event].push(listener);\n\n            return this;\n        },\n        off: function(event, listener) {\n            var events = this._events;\n            if (!has(events, event)) return;\n            var idx = events[event].indexOf(listener);\n\n            if (idx > -1) {\n                events[event].splice(idx, 1);\n            }\n\n            return this;\n        },\n        once: function(event, listener) {\n            this.on(event, once(listener));\n            return this;\n        },\n        emit: function(event) {\n            var _this = this;\n\n            if (!has(this._events, event)) return;\n            var args = slice(arguments, 1);\n            var events = clone(this._events[event]);\n            each(\n                events,\n                function(val) {\n                    return val.apply(_this, args);\n                },\n                this\n            );\n            return this;\n        },\n        removeAllListeners: function(event) {\n            if (!event) {\n                this._events = {};\n            } else {\n                delete this._events[event];\n            }\n\n            return this;\n        }\n    },\n    {\n        mixin: function(obj) {\n            each(['on', 'off', 'once', 'emit', 'removeAllListeners'], function(\n                val\n            ) {\n                obj[val] = exports.prototype[val];\n            });\n            obj._events = obj._events || {};\n        }\n    }\n);\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return val === true || val === false;\n};\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return val == null;\n};\n\nmodule.exports = exports;\n", "var isNil = require('./isNil');\n\nexports = function(fn) {\n    if (isNil(fn)) return '';\n\n    try {\n        return fnToStr.call(fn);\n    } catch (e) {}\n\n    try {\n        return fn + '';\n    } catch (e) {}\n\n    return '';\n};\n\nvar fnToStr = Function.prototype.toString;\n\nmodule.exports = exports;\n", "var isObj = require('./isObj');\nvar isFn = require('./isFn');\n\nexports = function(val) {\n    return isObj(val) && isFn(val.then) && isFn(val.catch);\n};\n\nmodule.exports = exports;\n", "var isNum = require('./isNum');\n\nexports = function(val) {\n    return isNum(val) && val !== +val;\n};\n\nmodule.exports = exports;\n", "var isFn = require('./isFn');\n\nexports = function(val) {\n    if (val == null) return false;\n    if (val._isBuffer) return true;\n    return (\n        val.constructor &&\n        isFn(val.constructor.isBuffer) &&\n        val.constructor.isBuffer(val)\n    );\n};\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\nvar isNaN = require('./isNaN');\nvar lowerCase = require('./lowerCase');\nvar isBuffer = require('./isBuffer');\n\nexports = function(val) {\n    var lower =\n        arguments.length > 1 && arguments[1] !== undefined\n            ? arguments[1]\n            : true;\n    var ret;\n    if (val === null) ret = 'Null';\n    if (val === undefined) ret = 'Undefined';\n    if (isNaN(val)) ret = 'NaN';\n    if (isBuffer(val)) ret = 'Buffer';\n\n    if (!ret) {\n        ret = objToStr(val).match(regObj);\n        if (ret) ret = ret[1];\n    }\n\n    if (!ret) return '';\n    return lower ? lowerCase(ret) : ret;\n};\n\nvar regObj = /^\\[object\\s+(.*?)]$/;\n\nmodule.exports = exports;\n", "var restArgs = require('./restArgs');\n\nexports = restArgs(function(first, arrays) {\n    var end = first.length;\n\n    for (var i = 0, len = arrays.length; i < len; i++) {\n        var arr = arrays[i];\n\n        for (var j = 0, _len = arr.length; j < _len; j++) {\n            first[end++] = arr[j];\n        }\n    }\n\n    first.length = end;\n    return first;\n});\n\nmodule.exports = exports;\n", "var Class = require('./Class');\nvar isStr = require('./isStr');\nvar each = require('./each');\nvar mergeArr = require('./mergeArr');\n\nexports = Class({\n    className: 'Select',\n    initialize: function(selector) {\n        this.length = 0;\n        if (!selector) return this;\n        if (isStr(selector)) return rootSelect.find(selector);\n\n        if (selector.nodeType) {\n            this[0] = selector;\n            this.length = 1;\n        }\n    },\n    find: function(selector) {\n        var ret = new exports();\n        this.each(function() {\n            mergeArr(ret, this.querySelectorAll(selector));\n        });\n        return ret;\n    },\n    each: function(fn) {\n        each(this, function(element, idx) {\n            fn.call(element, idx, element);\n        });\n        return this;\n    }\n});\nvar rootSelect = new exports(document);\n\nmodule.exports = exports;\n", "var isStr = require('./isStr');\nvar toArr = require('./toArr');\nvar Select = require('./Select');\n\nexports = function(val) {\n    return toArr(isStr(val) ? new Select(val) : val);\n};\n\nmodule.exports = exports;\n", "var $safeEls = require('./$safeEls');\n\nexports = function(els) {\n    els = $safeEls(els);\n    var el = els[0];\n    var clientRect = el.getBoundingClientRect();\n    return {\n        left: clientRect.left + window.pageXOffset,\n        top: clientRect.top + window.pageYOffset,\n        width: Math.round(clientRect.width),\n        height: Math.round(clientRect.height)\n    };\n};\n\nmodule.exports = exports;\n", "var each = require('./each');\nvar $safeEls = require('./$safeEls');\n\nexports = function(els) {\n    els = $safeEls(els);\n    each(els, function(el) {\n        if (isHidden(el)) {\n            el.style.display = getDefDisplay(el.nodeName);\n        }\n    });\n};\n\nfunction isHidden(el) {\n    return getComputedStyle(el, '').getPropertyValue('display') == 'none';\n}\n\nvar elDisplay = {};\n\nfunction getDefDisplay(elName) {\n    var el, display;\n\n    if (!elDisplay[elName]) {\n        el = document.createElement(elName);\n        document.documentElement.appendChild(el);\n        display = getComputedStyle(el, '').getPropertyValue('display');\n        el.parentNode.removeChild(el);\n        display == 'none' && (display = 'block');\n        elDisplay[elName] = display;\n    }\n\n    return elDisplay[elName];\n}\n\nmodule.exports = exports;\n", "var regUpperCase = /([A-Z])/g;\nvar regSeparator = /[_.\\- ]+/g;\nvar regTrim = /(^-)|(-$)/g;\n\nexports = function(str) {\n    str = str\n        .replace(regUpperCase, '-$1')\n        .toLowerCase()\n        .replace(regSeparator, '-')\n        .replace(regTrim, '');\n    return str.split('-');\n};\n\nmodule.exports = exports;\n", "var splitCase = require('./splitCase');\n\nexports = function(str) {\n    return splitCase(str).join('-');\n};\n\nmodule.exports = exports;\n", "var has = require('./has');\n\nexports = function(fn, hashFn) {\n    var memoize = function(key) {\n        var cache = memoize.cache;\n        var address = '' + (hashFn ? hashFn.apply(this, arguments) : key);\n        if (!has(cache, address)) cache[address] = fn.apply(this, arguments);\n        return cache[address];\n    };\n\n    memoize.cache = {};\n    return memoize;\n};\n\nmodule.exports = exports;\n", "var splitCase = require('./splitCase');\n\nexports = function(str) {\n    var arr = splitCase(str);\n    var ret = arr[0];\n    arr.shift();\n    arr.forEach(capitalize, arr);\n    ret += arr.join('');\n    return ret;\n};\n\nfunction capitalize(val, idx) {\n    this[idx] = val.replace(/\\w/, function(match) {\n        return match.toUpperCase();\n    });\n}\n\nmodule.exports = exports;\n", "var memoize = require('./memoize');\nvar camelCase = require('./camelCase');\nvar upperFirst = require('./upperFirst');\nvar has = require('./has');\nvar kebabCase = require('./kebabCase');\n\nexports = memoize(function(name) {\n    name = name.replace(regPrefixes, '');\n    name = camelCase(name);\n    if (has(style, name)) return name;\n    var i = prefixes.length;\n\n    while (i--) {\n        var prefixName = prefixes[i] + upperFirst(name);\n        if (has(style, prefixName)) return prefixName;\n    }\n\n    return name;\n});\nexports.dash = memoize(function(name) {\n    var camelCaseResult = exports(name);\n    return (\n        (regPrefixes.test(camelCaseResult) ? '-' : '') +\n        kebabCase(camelCaseResult)\n    );\n});\nvar prefixes = ['O', 'ms', 'Moz', 'Webkit'];\nvar regPrefixes = /^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g;\nvar style = document.createElement('p').style;\n\nmodule.exports = exports;\n", "var isStr = require('./isStr');\nvar isObj = require('./isObj');\nvar kebabCase = require('./kebabCase');\nvar isUndef = require('./isUndef');\nvar contain = require('./contain');\nvar isNum = require('./isNum');\nvar $safeEls = require('./$safeEls');\nvar prefix = require('./prefix');\nvar each = require('./each');\n\nexports = function(nodes, name, val) {\n    nodes = $safeEls(nodes);\n    var isGetter = isUndef(val) && isStr(name);\n    if (isGetter) return getCss(nodes[0], name);\n    var css = name;\n\n    if (!isObj(css)) {\n        css = {};\n        css[name] = val;\n    }\n\n    setCss(nodes, css);\n};\n\nfunction getCss(node, name) {\n    return (\n        node.style[prefix(name)] ||\n        getComputedStyle(node, '').getPropertyValue(name)\n    );\n}\n\nfunction setCss(nodes, css) {\n    each(nodes, function(node) {\n        var cssText = ';';\n        each(css, function(val, key) {\n            key = prefix.dash(key);\n            cssText += key + ':' + addPx(key, val) + ';';\n        });\n        node.style.cssText += cssText;\n    });\n}\n\nvar cssNumProps = [\n    'column-count',\n    'columns',\n    'font-weight',\n    'line-weight',\n    'opacity',\n    'z-index',\n    'zoom'\n];\n\nfunction addPx(key, val) {\n    var needPx = isNum(val) && !contain(cssNumProps, kebabCase(key));\n    return needPx ? val + 'px' : val;\n}\n\nmodule.exports = exports;\n", "var toArr = require('./toArr');\nvar isObj = require('./isObj');\nvar isStr = require('./isStr');\nvar each = require('./each');\nvar isUndef = require('./isUndef');\nvar $safeEls = require('./$safeEls');\n\nexports = function(els, name, val) {\n    els = $safeEls(els);\n    var isGetter = isUndef(val) && isStr(name);\n    if (isGetter) return getAttr(els[0], name);\n    var attrs = name;\n\n    if (!isObj(attrs)) {\n        attrs = {};\n        attrs[name] = val;\n    }\n\n    setAttr(els, attrs);\n};\n\nexports.remove = function(els, names) {\n    els = $safeEls(els);\n    names = toArr(names);\n    each(els, function(node) {\n        each(names, function(name) {\n            node.removeAttribute(name);\n        });\n    });\n};\n\nfunction getAttr(el, name) {\n    return el.getAttribute(name);\n}\n\nfunction setAttr(els, attrs) {\n    each(els, function(el) {\n        each(attrs, function(val, name) {\n            el.setAttribute(name, val);\n        });\n    });\n}\n\nmodule.exports = exports;\n", "var isUndef = require('./isUndef');\nvar each = require('./each');\nvar $safeEls = require('./$safeEls');\n\nexports = {\n    html: propFactory('innerHTML'),\n    text: propFactory('textContent'),\n    val: propFactory('value')\n};\n\nfunction propFactory(name) {\n    return function(nodes, val) {\n        nodes = $safeEls(nodes);\n        var node = nodes[0];\n\n        if (isUndef(val)) {\n            return node ? node[name] : '';\n        }\n\n        if (!node) return;\n        each(nodes, function(node) {\n            node[name] = val;\n        });\n    };\n}\n\nmodule.exports = exports;\n", "var each = require('./each');\nvar $safeEls = require('./$safeEls');\n\nexports = function(els) {\n    els = $safeEls(els);\n    each(els, function(el) {\n        var parent = el.parentNode;\n        if (parent) parent.removeChild(el);\n    });\n};\n\nmodule.exports = exports;\n", "var $attr = require('./$attr');\nvar isStr = require('./isStr');\nvar isObj = require('./isObj');\nvar each = require('./each');\nvar $safeEls = require('./$safeEls');\n\nexports = function(nodes, name, val) {\n    var dataName = name;\n    if (isStr(name)) dataName = 'data-' + name;\n\n    if (isObj(name)) {\n        dataName = {};\n        each(name, function(val, key) {\n            dataName['data-' + key] = val;\n        });\n    }\n\n    return $attr(nodes, dataName, val);\n};\n\nmodule.exports = exports;\n", "var Class = require('./Class');\nvar contain = require('./contain');\n\nfunction retTrue() {\n    return true;\n}\n\nfunction retFalse() {\n    return false;\n}\n\nfunction trigger(e) {\n    var handlers = this.events[e.type];\n    var handler;\n    var handlerQueue = formatHandlers.call(this, e, handlers);\n    e = new exports.Event(e);\n    var i = 0,\n        j,\n        matched,\n        ret;\n\n    while ((matched = handlerQueue[i++]) && !e.isPropagationStopped()) {\n        e.curTarget = matched.el;\n        j = 0;\n\n        while (\n            (handler = matched.handlers[j++]) &&\n            !e.isImmediatePropagationStopped()\n        ) {\n            ret = handler.handler.apply(matched.el, [e]);\n\n            if (ret === false) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }\n}\n\nfunction formatHandlers(e, handlers) {\n    var current = e.target;\n    var ret = [];\n    var delegateCount = handlers.delegateCount;\n    var selector;\n    var matches;\n    var handler;\n    var i;\n\n    if (current.nodeType) {\n        for (; current !== this; current = current.parentNode || this) {\n            matches = [];\n\n            for (i = 0; i < delegateCount; i++) {\n                handler = handlers[i];\n                selector = handler.selector + ' ';\n\n                if (matches[selector] === undefined) {\n                    matches[selector] = contain(\n                        this.querySelectorAll(selector),\n                        current\n                    );\n                }\n\n                if (matches[selector]) matches.push(handler);\n            }\n\n            if (matches.length)\n                ret.push({\n                    el: current,\n                    handlers: matches\n                });\n        }\n    }\n\n    if (delegateCount < handlers.length) {\n        ret.push({\n            el: this,\n            handlers: handlers.slice(delegateCount)\n        });\n    }\n\n    return ret;\n}\n\nexports = {\n    add: function(el, type, selector, fn) {\n        var handler = {\n            selector: selector,\n            handler: fn\n        };\n        var handlers;\n        if (!el.events) el.events = {};\n\n        if (!(handlers = el.events[type])) {\n            handlers = el.events[type] = [];\n            handlers.delegateCount = 0;\n            el.addEventListener(\n                type,\n                function() {\n                    trigger.apply(el, arguments);\n                },\n                false\n            );\n        }\n\n        selector\n            ? handlers.splice(handlers.delegateCount++, 0, handler)\n            : handlers.push(handler);\n    },\n    remove: function(el, type, selector, fn) {\n        var events = el.events;\n        if (!events || !events[type]) return;\n        var handlers = events[type];\n        var i = handlers.length;\n        var handler;\n\n        while (i--) {\n            handler = handlers[i];\n\n            if (\n                (!selector || handler.selector == selector) &&\n                handler.handler == fn\n            ) {\n                handlers.splice(i, 1);\n\n                if (handler.selector) {\n                    handlers.delegateCount--;\n                }\n            }\n        }\n    },\n    Event: Class({\n        className: 'Event',\n        initialize: function Event(e) {\n            this.origEvent = e;\n        },\n        isDefaultPrevented: retFalse,\n        isPropagationStopped: retFalse,\n        isImmediatePropagationStopped: retFalse,\n        preventDefault: function() {\n            var e = this.origEvent;\n            this.isDefaultPrevented = retTrue;\n            if (e && e.preventDefault) e.preventDefault();\n        },\n        stopPropagation: function() {\n            var e = this.origEvent;\n            this.isPropagationStopped = retTrue;\n            if (e && e.stopPropagation) e.stopPropagation();\n        },\n        stopImmediatePropagation: function() {\n            var e = this.origEvent;\n            this.isImmediatePropagationStopped = retTrue;\n            if (e && e.stopImmediatePropagation) e.stopImmediatePropagation();\n            this.stopPropagation();\n        }\n    })\n};\n\nmodule.exports = exports;\n", "var delegate = require('./delegate');\nvar isUndef = require('./isUndef');\nvar $safeEls = require('./$safeEls');\nvar each = require('./each');\n\nexports = {\n    on: eventFactory('add'),\n    off: eventFactory('remove')\n};\n\nfunction eventFactory(type) {\n    return function(nodes, event, selector, handler) {\n        nodes = $safeEls(nodes);\n\n        if (isUndef(handler)) {\n            handler = selector;\n            selector = undefined;\n        }\n\n        each(nodes, function(node) {\n            delegate[type](node, event, selector, handler);\n        });\n    };\n}\n\nmodule.exports = exports;\n", "var safeCb = require('./safeCb');\nvar isArrLike = require('./isArrLike');\nvar keys = require('./keys');\n\nexports = function(obj, predicate, ctx) {\n    predicate = safeCb(predicate, ctx);\n\n    var _keys = !isArrLike(obj) && keys(obj);\n\n    var len = (_keys || obj).length;\n\n    for (var i = 0; i < len; i++) {\n        var key = _keys ? _keys[i] : i;\n        if (predicate(obj[key], key, obj)) return true;\n    }\n\n    return false;\n};\n\nmodule.exports = exports;\n", "var toArr = require('./toArr');\nvar some = require('./some');\nvar $safeEls = require('./$safeEls');\nvar isStr = require('./isStr');\nvar each = require('./each');\n\nexports = {\n    add: function(els, name) {\n        els = $safeEls(els);\n        var names = safeName(name);\n        each(els, function(el) {\n            var classList = [];\n            each(names, function(name) {\n                if (!exports.has(el, name)) classList.push(name);\n            });\n\n            if (classList.length !== 0) {\n                el.className += (el.className ? ' ' : '') + classList.join(' ');\n            }\n        });\n    },\n    has: function(els, name) {\n        els = $safeEls(els);\n        var regName = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)');\n        return some(els, function(el) {\n            return regName.test(el.className);\n        });\n    },\n    toggle: function(els, name) {\n        els = $safeEls(els);\n        each(els, function(el) {\n            if (!exports.has(el, name)) return exports.add(el, name);\n            exports.remove(el, name);\n        });\n    },\n    remove: function(els, name) {\n        els = $safeEls(els);\n        var names = safeName(name);\n        each(els, function(el) {\n            each(names, function(name) {\n                el.classList.remove(name);\n            });\n        });\n    }\n};\n\nfunction safeName(name) {\n    return isStr(name) ? name.split(/\\s+/) : toArr(name);\n}\n\nmodule.exports = exports;\n", "var each = require('./each');\nvar $safeEls = require('./$safeEls');\nvar isStr = require('./isStr');\n\nexports = {\n    before: insertFactory('beforebegin'),\n    after: insertFactory('afterend'),\n    append: insertFactory('beforeend'),\n    prepend: insertFactory('afterbegin')\n};\n\nfunction insertFactory(type) {\n    return function(nodes, val) {\n        nodes = $safeEls(nodes);\n        each(nodes, function(node) {\n            if (isStr(val)) {\n                node.insertAdjacentHTML(type, val);\n            } else {\n                var parentNode = node.parentNode;\n\n                switch (type) {\n                    case 'beforebegin':\n                        if (parentNode) {\n                            parentNode.insertBefore(val, node);\n                        }\n\n                        break;\n\n                    case 'afterend':\n                        if (parentNode) {\n                            parentNode.insertBefore(val, node.nextSibling);\n                        }\n\n                        break;\n\n                    case 'beforeend':\n                        node.appendChild(val);\n                        break;\n\n                    case 'afterbegin':\n                        node.prepend(val);\n                        break;\n                }\n            }\n        });\n    };\n}\n\nmodule.exports = exports;\n", "var Select = require('./Select');\nvar $offset = require('./$offset');\nvar $show = require('./$show');\nvar $css = require('./$css');\nvar $attr = require('./$attr');\nvar $property = require('./$property');\nvar last = require('./last');\nvar $remove = require('./$remove');\nvar $data = require('./$data');\nvar $event = require('./$event');\nvar $class = require('./$class');\nvar $insert = require('./$insert');\nvar isUndef = require('./isUndef');\nvar isStr = require('./isStr');\n\nexports = function(selector) {\n    return new Select(selector);\n};\n\nSelect.methods({\n    offset: function() {\n        return $offset(this);\n    },\n    hide: function() {\n        return this.css('display', 'none');\n    },\n    show: function() {\n        $show(this);\n        return this;\n    },\n    first: function() {\n        return exports(this[0]);\n    },\n    last: function() {\n        return exports(last(this));\n    },\n    get: function(idx) {\n        return this[idx];\n    },\n    eq: function(idx) {\n        return exports(this[idx]);\n    },\n    on: function(event, selector, handler) {\n        $event.on(this, event, selector, handler);\n        return this;\n    },\n    off: function(event, selector, handler) {\n        $event.off(this, event, selector, handler);\n        return this;\n    },\n    html: function(val) {\n        var result = $property.html(this, val);\n        if (isUndef(val)) return result;\n        return this;\n    },\n    text: function(val) {\n        var result = $property.text(this, val);\n        if (isUndef(val)) return result;\n        return this;\n    },\n    val: function(val) {\n        var result = $property.val(this, val);\n        if (isUndef(val)) return result;\n        return this;\n    },\n    css: function(name, val) {\n        var result = $css(this, name, val);\n        if (isGetter(name, val)) return result;\n        return this;\n    },\n    attr: function(name, val) {\n        var result = $attr(this, name, val);\n        if (isGetter(name, val)) return result;\n        return this;\n    },\n    data: function(name, val) {\n        var result = $data(this, name, val);\n        if (isGetter(name, val)) return result;\n        return this;\n    },\n    rmAttr: function(name) {\n        $attr.remove(this, name);\n        return this;\n    },\n    remove: function() {\n        $remove(this);\n        return this;\n    },\n    addClass: function(name) {\n        $class.add(this, name);\n        return this;\n    },\n    rmClass: function(name) {\n        $class.remove(this, name);\n        return this;\n    },\n    toggleClass: function(name) {\n        $class.toggle(this, name);\n        return this;\n    },\n    hasClass: function(name) {\n        return $class.has(this, name);\n    },\n    parent: function() {\n        return exports(this[0].parentNode);\n    },\n    append: function(val) {\n        $insert.append(this, val);\n        return this;\n    },\n    prepend: function(val) {\n        $insert.prepend(this, val);\n        return this;\n    },\n    before: function(val) {\n        $insert.before(this, val);\n        return this;\n    },\n    after: function(val) {\n        $insert.after(this, val);\n        return this;\n    }\n});\n\nvar isGetter = function(name, val) {\n    return isUndef(val) && isStr(name);\n};\n\nmodule.exports = exports;\n", "var isArr = require('./isArr');\n\nexports = function(arr) {\n    return flat(arr, []);\n};\n\nfunction flat(arr, res) {\n    var len = arr.length,\n        i = -1,\n        cur;\n\n    while (len--) {\n        cur = arr[++i];\n        isArr(cur) ? flat(cur, res) : res.push(cur);\n    }\n\n    return res;\n}\n\nmodule.exports = exports;\n", "var restArgs = require('./restArgs');\nvar flatten = require('./flatten');\nvar filter = require('./filter');\nvar contain = require('./contain');\n\nexports = restArgs(function(arr, args) {\n    args = flatten(args);\n    return filter(arr, function(val) {\n        return !contain(args, val);\n    });\n});\n\nmodule.exports = exports;\n", "exports = function(arr, size) {\n    var ret = [];\n    size = size || 1;\n\n    for (var i = 0, len = Math.ceil(arr.length / size); i < len; i++) {\n        var start = i * size;\n        var end = start + size;\n        ret.push(arr.slice(start, end));\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "exports = function() {};\n\nmodule.exports = exports;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst extend_1 = __importDefault(require(\"licia/extend\"));\nclass Visitor {\n    constructor() {\n        this.id = 0;\n        this.visited = [];\n    }\n    set(val, extra) {\n        const { visited, id } = this;\n        const obj = {\n            id,\n            val,\n        };\n        extend_1.default(obj, extra);\n        visited.push(obj);\n        this.id++;\n        return id;\n    }\n    get(val) {\n        const { visited } = this;\n        for (let i = 0, len = visited.length; i < len; i++) {\n            const obj = visited[i];\n            if (val === obj.val)\n                return obj;\n        }\n        return false;\n    }\n}\nexports.default = Visitor;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sortObjName = exports.getFnAbstract = exports.encode = void 0;\nconst toStr_1 = __importDefault(require(\"licia/toStr\"));\nconst trim_1 = __importDefault(require(\"licia/trim\"));\nconst toNum_1 = __importDefault(require(\"licia/toNum\"));\nconst startWith_1 = __importDefault(require(\"licia/startWith\"));\nconst escape_1 = __importDefault(require(\"licia/escape\"));\nexports.encode = (str) => {\n    return escape_1.default(toStr_1.default(str))\n        .replace(/\\n/g, '\u21B5')\n        .replace(/\\f|\\r|\\t/g, '');\n};\nfunction getFnAbstract(str) {\n    if (str.length > 500)\n        str = str.slice(0, 500) + '...';\n    return '\u0192 ' + trim_1.default(extractFnHead(str).replace('function', ''));\n}\nexports.getFnAbstract = getFnAbstract;\nconst regFnHead = /function(.*?)\\((.*?)\\)/;\nfunction extractFnHead(str) {\n    const fnHead = str.match(regFnHead);\n    if (fnHead)\n        return fnHead[0];\n    return str;\n}\n// $, upperCase, lowerCase, _\nfunction sortObjName(a, b) {\n    a = toStr_1.default(a);\n    b = toStr_1.default(b);\n    const numA = toNum_1.default(a);\n    const numB = toNum_1.default(b);\n    if (!isNaN(numA) && !isNaN(numB)) {\n        if (numA > numB)\n            return 1;\n        if (numA < numB)\n            return -1;\n        return 0;\n    }\n    if (startWith_1.default(a, 'get ') || startWith_1.default(a, 'set '))\n        a = a.slice(4);\n    if (startWith_1.default(b, 'get ') || startWith_1.default(b, 'set '))\n        b = b.slice(4);\n    const lenA = a.length;\n    const lenB = b.length;\n    const len = lenA > lenB ? lenB : lenA;\n    for (let i = 0; i < len; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n        const cmpResult = cmpCode(codeA, codeB);\n        if (cmpResult !== 0)\n            return cmpResult;\n    }\n    if (lenA > lenB)\n        return 1;\n    if (lenA < lenB)\n        return -1;\n    return 0;\n}\nexports.sortObjName = sortObjName;\nfunction cmpCode(a, b) {\n    a = transCode(a);\n    b = transCode(b);\n    if (a > b)\n        return 1;\n    if (a < b)\n        return -1;\n    return 0;\n}\nfunction transCode(code) {\n    // _ should be placed after lowercase chars.\n    if (code === 95)\n        return 123;\n    return code;\n}\n", "var idCounter = 0;\n\nexports = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n};\n\nmodule.exports = exports;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.classPrefix = void 0;\nconst map_1 = __importDefault(require(\"licia/map\"));\nconst trim_1 = __importDefault(require(\"licia/trim\"));\nfunction classPrefix(name) {\n    const prefix = `luna-${name}-`;\n    return function (str) {\n        return map_1.default(trim_1.default(str).split(/\\s+/), (singleClass) => `${prefix}${singleClass}`).join(' ');\n    };\n}\nexports.classPrefix = classPrefix;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getObjAbstract = void 0;\nconst _1 = __importDefault(require(\"licia/$\"));\nconst startWith_1 = __importDefault(require(\"licia/startWith\"));\nconst isObj_1 = __importDefault(require(\"licia/isObj\"));\nconst uniqId_1 = __importDefault(require(\"licia/uniqId\"));\nconst upperFirst_1 = __importDefault(require(\"licia/upperFirst\"));\nconst toNum_1 = __importDefault(require(\"licia/toNum\"));\nconst chunk_1 = __importDefault(require(\"licia/chunk\"));\nconst each_1 = __importDefault(require(\"licia/each\"));\nconst isNaN_1 = __importDefault(require(\"licia/isNaN\"));\nconst isNum_1 = __importDefault(require(\"licia/isNum\"));\nconst isBool_1 = __importDefault(require(\"licia/isBool\"));\nconst isStr_1 = __importDefault(require(\"licia/isStr\"));\nconst keys_1 = __importDefault(require(\"licia/keys\"));\nconst lowerCase_1 = __importDefault(require(\"licia/lowerCase\"));\nconst Emitter_1 = __importDefault(require(\"licia/Emitter\"));\nconst util_1 = require(\"./util\");\nconst util_2 = require(\"../share/util\");\nconst c = util_2.classPrefix('object-viewer');\nclass JsonViewer extends Emitter_1.default {\n    constructor(container) {\n        super();\n        this.onItemClick = (e) => {\n            const { map } = this;\n            const $this = _1.default(e.curTarget);\n            const circularId = $this.data('object-id');\n            const $firstSpan = $this.find('span').eq(0);\n            if ($this.data('first-level'))\n                return;\n            if (circularId) {\n                $this.find('ul').html(this.objToHtml(map[circularId], false));\n                $this.rmAttr('data-object-id');\n            }\n            e.stopImmediatePropagation();\n            if (!$firstSpan.hasClass(c('expanded')))\n                return;\n            const $ul = $this.find('ul').eq(0);\n            if ($firstSpan.hasClass(c('collapsed'))) {\n                $firstSpan.rmClass(c('collapsed'));\n                $ul.show();\n            }\n            else {\n                $firstSpan.addClass(c('collapsed'));\n                $ul.hide();\n            }\n            this.emit('change');\n        };\n        this.$container = _1.default(container);\n        this.$container.addClass('luna-object-viewer');\n        this.bindEvent();\n    }\n    set(data) {\n        if (isStr_1.default(data))\n            data = JSON.parse(data);\n        this.data = {\n            id: uniqId_1.default('json'),\n            enumerable: {\n                0: data,\n            },\n        };\n        this.map = {};\n        createMap(this.map, this.data);\n        this.appendTpl();\n    }\n    destroy() {\n        this.$container.off('click', 'li', this.onItemClick);\n        this.$container.rmClass('luna-object-viewer');\n        this.$container.html('');\n    }\n    objToHtml(data, firstLevel) {\n        let ret = '';\n        each_1.default(['enumerable', 'unenumerable', 'symbol'], (type) => {\n            if (!data[type])\n                return;\n            const typeKeys = keys_1.default(data[type]);\n            typeKeys.sort(util_1.sortObjName);\n            for (let i = 0, len = typeKeys.length; i < len; i++) {\n                const key = typeKeys[i];\n                ret += this.createEl(key, data[type][key], type, firstLevel);\n            }\n        });\n        if (data.proto) {\n            if (ret === '') {\n                ret = this.objToHtml(data.proto);\n            }\n            else {\n                ret += this.createEl('__proto__', data.proto, 'proto');\n            }\n        }\n        return ret;\n    }\n    createEl(key, val, keyType, firstLevel = false) {\n        let type = typeof val;\n        if (val === null) {\n            return `<li>${wrapKey(key)}<span class=\"${c('null')}\">null</span></li>`;\n        }\n        else if (isNum_1.default(val) || isBool_1.default(val)) {\n            return `<li>${wrapKey(key)}<span class=\"${c(type)}\">${util_1.encode(val)}</span></li>`;\n        }\n        if (val.type === 'RegExp')\n            type = 'regexp';\n        if (val.type === 'Number')\n            type = 'number';\n        if (val.type === 'Number' || val.type === 'RegExp') {\n            return `<li>${wrapKey(key)}<span class=\"${c(type)}\">${util_1.encode(val.value)}</span></li>`;\n        }\n        else if (val.type === 'Undefined' || val.type === 'Symbol') {\n            return `<li>${wrapKey(key)}<span class=\"${c('special')}\">${lowerCase_1.default(val.type)}</span></li>`;\n        }\n        else if (val === '(...)') {\n            return `<li>${wrapKey(key)}<span class=\"${c('special')}\">${val}</span></li>`;\n        }\n        else if (isObj_1.default(val)) {\n            const id = val.id;\n            const referenceId = val.reference;\n            const objAbstract = getObjAbstract(val) || upperFirst_1.default(type);\n            const icon = firstLevel\n                ? ''\n                : `<span class=\"${c('expanded collapsed')}\"><span class=\"${c('icon icon-caret-right')}\"></span><span class=\"${c('icon icon-caret-down')}\"></span></span>`;\n            let obj = `<li ${firstLevel ? 'data-first-level=\"true\"' : ''} ${'data-object-id=\"' + (referenceId || id) + '\"'}>${icon}${wrapKey(key)}<span class=\"${c('open')}\">${firstLevel ? '' : objAbstract}</span><ul class=\"${c(type)}\" ${firstLevel ? '' : 'style=\"display:none\"'}>`;\n            if (firstLevel)\n                obj += this.objToHtml(this.map[id]);\n            return obj + `</ul><span class=\"${c('close')}\"></span></li>`;\n        }\n        function wrapKey(key) {\n            if (firstLevel)\n                return '';\n            if (isObj_1.default(val) && val.jsonSplitArr)\n                return '';\n            let keyClass = c('key');\n            if (keyType === 'unenumerable' ||\n                keyType === 'proto' ||\n                keyType === 'symbol') {\n                keyClass = c('key-lighter');\n            }\n            return `<span class=\"${keyClass}\">${util_1.encode(key)}</span>: `;\n        }\n        return `<li>${wrapKey(key)}<span class=\"${c(typeof val)}\">\"${util_1.encode(val)}\"</span></li>`;\n    }\n    appendTpl() {\n        const data = this.map[this.data.id];\n        this.$container.html(this.objToHtml(data, true));\n    }\n    bindEvent() {\n        this.$container.on('click', 'li', this.onItemClick);\n    }\n}\nexports.default = JsonViewer;\nfunction createMap(map, data) {\n    const id = data.id;\n    if (!id && id !== 0)\n        return;\n    const isArr = data.type && startWith_1.default(data.type, 'Array');\n    if (isArr && data.enumerable) {\n        const arr = objToArr(data, id, data.type);\n        if (arr.length > 100)\n            data = splitBigArr(arr);\n    }\n    map[id] = data;\n    const values = [];\n    each_1.default(['enumerable', 'unenumerable', 'symbol'], (type) => {\n        if (!data[type])\n            return;\n        for (const key in data[type]) {\n            values.push(data[type][key]);\n        }\n    });\n    if (data.proto) {\n        values.push(data.proto);\n    }\n    for (let i = 0, len = values.length; i < len; i++) {\n        const val = values[i];\n        if (isObj_1.default(val))\n            createMap(map, val);\n    }\n}\nfunction splitBigArr(data) {\n    let idx = 0;\n    const enumerable = {};\n    each_1.default(chunk_1.default(data, 100), (val) => {\n        const obj = {};\n        const startIdx = idx;\n        obj.type = '[' + startIdx;\n        obj.enumerable = {};\n        each_1.default(val, (val) => {\n            obj.enumerable[idx] = val;\n            idx += 1;\n        });\n        const endIdx = idx - 1;\n        obj.type += (endIdx - startIdx > 0 ? ' \u2026 ' + endIdx : '') + ']';\n        obj.id = uniqId_1.default('json');\n        obj.jsonSplitArr = true;\n        enumerable[idx] = obj;\n    });\n    const ret = {};\n    ret.enumerable = enumerable;\n    ret.id = data.id;\n    ret.type = data.type;\n    if (data.unenumerable)\n        ret.unenumerable = data.unenumerable;\n    if (data.symbol)\n        ret.symbol = data.symbol;\n    if (data.proto)\n        ret.proto = data.proto;\n    return ret;\n}\nfunction objToArr(data, id, type) {\n    const ret = [];\n    const enumerable = {};\n    each_1.default(data.enumerable, (val, key) => {\n        const idx = toNum_1.default(key);\n        if (!isNaN_1.default(idx)) {\n            ret[idx] = val;\n        }\n        else {\n            enumerable[key] = val;\n        }\n    });\n    ret.enumerable = enumerable;\n    ret.type = type;\n    ret.id = id;\n    if (data.unenumerable)\n        ret.unenumerable = data.unenumerable;\n    if (data.symbol)\n        ret.symbol = data.symbol;\n    if (data.proto)\n        ret.proto = data.proto;\n    return ret;\n}\nfunction getObjAbstract(data) {\n    const { type, value } = data;\n    if (!type)\n        return;\n    if (type === 'Function') {\n        return util_1.getFnAbstract(value);\n    }\n    if (type === 'Array' && data.unenumerable) {\n        return `Array(${data.unenumerable.length})`;\n    }\n    return data.type;\n}\nexports.getObjAbstract = getObjAbstract;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nconst Emitter_1 = __importDefault(require(\"licia/Emitter\"));\nconst getProto_1 = __importDefault(require(\"licia/getProto\"));\nconst isNum_1 = __importDefault(require(\"licia/isNum\"));\nconst isBool_1 = __importDefault(require(\"licia/isBool\"));\nconst lowerCase_1 = __importDefault(require(\"licia/lowerCase\"));\nconst isObj_1 = __importDefault(require(\"licia/isObj\"));\nconst isArr_1 = __importDefault(require(\"licia/isArr\"));\nconst upperFirst_1 = __importDefault(require(\"licia/upperFirst\"));\nconst keys_1 = __importDefault(require(\"licia/keys\"));\nconst each_1 = __importDefault(require(\"licia/each\"));\nconst toSrc_1 = __importDefault(require(\"licia/toSrc\"));\nconst isPromise_1 = __importDefault(require(\"licia/isPromise\"));\nconst type_1 = __importDefault(require(\"licia/type\"));\nconst _1 = __importDefault(require(\"licia/$\"));\nconst difference_1 = __importDefault(require(\"licia/difference\"));\nconst allKeys_1 = __importDefault(require(\"licia/allKeys\"));\nconst filter_1 = __importDefault(require(\"licia/filter\"));\nconst chunk_1 = __importDefault(require(\"licia/chunk\"));\nconst toStr_1 = __importDefault(require(\"licia/toStr\"));\nconst noop_1 = __importDefault(require(\"licia/noop\"));\nconst Visitor_1 = __importDefault(require(\"./Visitor\"));\nconst util_1 = require(\"./util\");\nconst Static_1 = __importDefault(require(\"./Static\"));\nconst util_2 = require(\"../share/util\");\nconst c = util_2.classPrefix('object-viewer');\nfunction getObjAbstract(data, type) {\n    if (!type)\n        return;\n    if (type === 'Function') {\n        return util_1.getFnAbstract(toSrc_1.default(data));\n    }\n    if (type === 'Array') {\n        return `Array(${data.length})`;\n    }\n    return type;\n}\nmodule.exports = (_a = class ObjectViewer extends Emitter_1.default {\n        constructor(container, { unenumerable = false, accessGetter = false } = {}) {\n            super();\n            this.onItemClick = (e) => {\n                const { map } = this;\n                const $this = _1.default(e.curTarget);\n                const circularId = $this.data('object-id');\n                const $firstSpan = $this.find('span').eq(0);\n                if ($this.data('first-level'))\n                    return;\n                if (circularId) {\n                    $this.find('ul').html(this.objToHtml(map[circularId], false));\n                    $this.rmAttr('data-object-id');\n                }\n                e.stopImmediatePropagation();\n                if (!$firstSpan.hasClass(c('expanded')))\n                    return;\n                const $ul = $this.find('ul').eq(0);\n                if ($firstSpan.hasClass(c('collapsed'))) {\n                    $firstSpan.rmClass(c('collapsed'));\n                    $ul.show();\n                }\n                else {\n                    $firstSpan.addClass(c('collapsed'));\n                    $ul.hide();\n                }\n                this.emit('change');\n            };\n            this.$container = _1.default(container);\n            this.$container.addClass('luna-object-viewer');\n            this.unenumerable = unenumerable;\n            this.accessGetter = accessGetter;\n            this.bindEvent();\n        }\n        set(data) {\n            this.data = [data];\n            this.visitor = new Visitor_1.default();\n            this.map = {};\n            this.appendTpl();\n        }\n        destroy() {\n            this.$container.off('click', 'li', this.onItemClick);\n            this.$container.rmClass('luna-object-viewer');\n            this.$container.html('');\n        }\n        objToHtml(data, firstLevel) {\n            const { visitor } = this;\n            let self = data;\n            let isBigArr = false;\n            const visitedObj = visitor.get(data);\n            if (visitedObj && visitedObj.self) {\n                self = visitedObj.self;\n            }\n            let ret = '';\n            const types = ['enumerable'];\n            let enumerableKeys = keys_1.default(data);\n            let unenumerableKeys = [];\n            let symbolKeys = [];\n            let virtualKeys = [];\n            const virtualData = {};\n            if (this.unenumerable && !firstLevel) {\n                types.push('unenumerable');\n                types.push('symbol');\n                unenumerableKeys = difference_1.default(allKeys_1.default(data, {\n                    prototype: false,\n                    unenumerable: true,\n                }), enumerableKeys);\n                symbolKeys = filter_1.default(allKeys_1.default(data, {\n                    prototype: false,\n                    symbol: true,\n                }), (key) => {\n                    return typeof key === 'symbol';\n                });\n            }\n            if (isArr_1.default(data) && data.length > 100) {\n                types.unshift('virtual');\n                isBigArr = true;\n                let idx = 0;\n                const map = {};\n                each_1.default(chunk_1.default(data, 100), (val) => {\n                    const obj = Object.create(null);\n                    const startIdx = idx;\n                    let key = '[' + startIdx;\n                    each_1.default(val, (val) => {\n                        obj[idx] = val;\n                        map[idx] = true;\n                        idx++;\n                    });\n                    const endIdx = idx - 1;\n                    key += (endIdx - startIdx > 0 ? ' \u2026 ' + endIdx : '') + ']';\n                    virtualData[key] = obj;\n                });\n                virtualKeys = keys_1.default(virtualData);\n                enumerableKeys = filter_1.default(enumerableKeys, (val) => !map[val]);\n            }\n            each_1.default(types, (type) => {\n                let typeKeys = [];\n                if (type === 'symbol') {\n                    typeKeys = symbolKeys;\n                }\n                else if (type === 'unenumerable') {\n                    typeKeys = unenumerableKeys;\n                }\n                else if (type === 'virtual') {\n                    typeKeys = virtualKeys;\n                }\n                else {\n                    typeKeys = enumerableKeys;\n                }\n                if (!isBigArr) {\n                    typeKeys.sort(util_1.sortObjName);\n                }\n                for (let i = 0, len = typeKeys.length; i < len; i++) {\n                    const key = toStr_1.default(typeKeys[i]);\n                    let val = '';\n                    const descriptor = Object.getOwnPropertyDescriptor(data, key);\n                    const hasGetter = descriptor && descriptor.get;\n                    const hasSetter = descriptor && descriptor.set;\n                    if (hasGetter && !this.accessGetter) {\n                        val = '(...)';\n                    }\n                    else {\n                        try {\n                            if (type === 'virtual') {\n                                val = virtualData[key];\n                            }\n                            else {\n                                val = self[key];\n                            }\n                            if (isPromise_1.default(val)) {\n                                ;\n                                val.catch(noop_1.default);\n                            }\n                        }\n                        catch (e) {\n                            val = e.message;\n                        }\n                    }\n                    ret += this.createEl(key, data, val, type, firstLevel);\n                    if (hasGetter) {\n                        ret += this.createEl(`get ${key}`, data, descriptor.get, type, firstLevel);\n                    }\n                    if (hasSetter) {\n                        ret += this.createEl(`set ${key}`, data, descriptor.set, type, firstLevel);\n                    }\n                }\n            });\n            const proto = getProto_1.default(data);\n            if (!firstLevel && proto) {\n                if (ret === '') {\n                    const id = visitor.set(proto, {\n                        self: data,\n                    });\n                    this.map[id] = proto;\n                    ret = this.objToHtml(proto);\n                }\n                else {\n                    ret += this.createEl('__proto__', self || data, proto, 'proto');\n                }\n            }\n            return ret;\n        }\n        createEl(key, self, val, keyType, firstLevel = false) {\n            const { visitor } = this;\n            let t = typeof val;\n            let valType = type_1.default(val, false);\n            if (keyType === 'virtual')\n                valType = key;\n            if (val === null) {\n                return `<li>${wrapKey(key)}<span class=\"${c('null')}\">null</span></li>`;\n            }\n            else if (isNum_1.default(val) || isBool_1.default(val)) {\n                return `<li>${wrapKey(key)}<span class=\"${c(t)}\">${util_1.encode(val)}</span></li>`;\n            }\n            if (valType === 'RegExp')\n                t = 'regexp';\n            if (valType === 'Number')\n                t = 'number';\n            if (valType === 'Number' || valType === 'RegExp') {\n                return `<li>${wrapKey(key)}<span class=\"${c(t)}\">${util_1.encode(val.value)}</span></li>`;\n            }\n            else if (valType === 'Undefined' || valType === 'Symbol') {\n                return `<li>${wrapKey(key)}<span class=\"${c('special')}\">${lowerCase_1.default(valType)}</span></li>`;\n            }\n            else if (val === '(...)') {\n                return `<li>${wrapKey(key)}<span class=\"${c('special')}\">${val}</span></li>`;\n            }\n            else if (isObj_1.default(val)) {\n                const visitedObj = visitor.get(val);\n                let id;\n                if (visitedObj) {\n                    id = visitedObj.id;\n                }\n                else {\n                    const extra = {};\n                    if (keyType === 'proto') {\n                        extra.self = self;\n                    }\n                    id = visitor.set(val, extra);\n                    this.map[id] = val;\n                }\n                const objAbstract = getObjAbstract(val, valType) || upperFirst_1.default(t);\n                const icon = firstLevel\n                    ? ''\n                    : `<span class=\"${c('expanded collapsed')}\"><span class=\"${c('icon icon-caret-right')}\"></span><span class=\"${c('icon icon-caret-down')}\"></span></span>`;\n                let obj = `<li ${firstLevel ? 'data-first-level=\"true\"' : ''} ${'data-object-id=\"' + id + '\"'}>${icon}${wrapKey(key)}<span class=\"${c('open')}\">${firstLevel ? '' : objAbstract}</span><ul class=\"${c(t)}\" ${firstLevel ? '' : 'style=\"display:none\"'}>`;\n                if (firstLevel)\n                    obj += this.objToHtml(val);\n                return obj + `</ul><span class=\"${c('close')}\"></span></li>`;\n            }\n            function wrapKey(key) {\n                if (firstLevel)\n                    return '';\n                if (isObj_1.default(val) && keyType === 'virtual')\n                    return '';\n                let keyClass = c('key');\n                if (keyType === 'unenumerable' ||\n                    keyType === 'proto' ||\n                    keyType === 'symbol') {\n                    keyClass = c('key-lighter');\n                }\n                return `<span class=\"${keyClass}\">${util_1.encode(key)}</span>: `;\n            }\n            return `<li>${wrapKey(key)}<span class=\"${c(typeof val)}\">\"${util_1.encode(val)}\"</span></li>`;\n        }\n        appendTpl() {\n            this.$container.html(this.objToHtml(this.data, true));\n        }\n        bindEvent() {\n            this.$container.on('click', 'li', this.onItemClick);\n        }\n    },\n    _a.Static = Static_1.default,\n    _a);\n", "var objToStr = require('./objToStr');\n\nexports = function(val) {\n    return objToStr(val) === '[object Error]';\n};\n\nmodule.exports = exports;\n", "exports = function(val) {\n    var type = typeof val;\n    return val == null || (type !== 'function' && type !== 'object');\n};\n\nmodule.exports = exports;\n", "var createAssigner = require('./createAssigner');\nvar allKeys = require('./allKeys');\n\nexports = createAssigner(allKeys, true);\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return !!(val && val.nodeType === 1);\n};\n\nmodule.exports = exports;\n", "var toNum = require('./toNum');\n\nexports = function(val) {\n    if (!val) return val === 0 ? val : 0;\n    val = toNum(val);\n    return val - (val % 1);\n};\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return val === null;\n};\n\nmodule.exports = exports;\n", "var isEl = require('./isEl');\nvar isStr = require('./isStr');\nvar startWith = require('./startWith');\nvar $class = require('./$class');\nvar $css = require('./$css');\nvar each = require('./each');\nvar isFn = require('./isFn');\n\nexports = function(tag, attrs) {\n    for (\n        var _len = arguments.length,\n            children = new Array(_len > 2 ? _len - 2 : 0),\n            _key = 2;\n        _key < _len;\n        _key++\n    ) {\n        children[_key - 2] = arguments[_key];\n    }\n\n    if (isEl(attrs) || isStr(attrs)) {\n        children.unshift(attrs);\n        attrs = null;\n    }\n\n    if (!attrs) attrs = {};\n\n    var _parseTag = parseTag(tag),\n        tagName = _parseTag.tagName,\n        id = _parseTag.id,\n        classes = _parseTag.classes;\n\n    var el = document.createElement(tagName);\n    if (id) el.setAttribute('id', id);\n    $class.add(el, classes);\n    each(children, function(child) {\n        if (isStr(child)) {\n            el.appendChild(document.createTextNode(child));\n        } else if (isEl(child)) {\n            el.appendChild(child);\n        }\n    });\n    each(attrs, function(val, key) {\n        if (isStr(val)) {\n            el.setAttribute(key, val);\n        } else if (isFn(val) && startWith(key, 'on')) {\n            el.addEventListener(key.slice(2), val, false);\n        } else if (key === 'style') {\n            $css(el, val);\n        }\n    });\n    return el;\n};\n\nfunction parseTag(tag) {\n    var tagName = 'div';\n    var id = '';\n    var classes = [];\n    var words = [];\n    var word = '';\n\n    for (var i = 0, len = tag.length; i < len; i++) {\n        var c = tag[i];\n\n        if (c === '#' || c === '.') {\n            words.push(word);\n            word = c;\n        } else {\n            word += c;\n        }\n    }\n\n    words.push(word);\n\n    for (var _i = 0, _len2 = words.length; _i < _len2; _i++) {\n        word = words[_i];\n        if (!word) continue;\n\n        if (startWith(word, '#')) {\n            id = word.slice(1);\n        } else if (startWith(word, '.')) {\n            classes.push(word.slice(1));\n        } else {\n            tagName = word;\n        }\n    }\n\n    return {\n        tagName: tagName,\n        id: id,\n        classes: classes\n    };\n}\n\nmodule.exports = exports;\n", "if (Date.now && !false) {\n    exports = Date.now;\n} else {\n    exports = function() {\n        return new Date().getTime();\n    };\n}\n\nmodule.exports = exports;\n", "exports = function(val) {\n    return typeof val === 'symbol';\n};\n\nmodule.exports = exports;\n", "var castPath = require('./castPath');\nvar isUndef = require('./isUndef');\nvar toStr = require('./toStr');\nvar isSymbol = require('./isSymbol');\nvar isStr = require('./isStr');\n\nexports = function(obj, path, val) {\n    path = castPath(path, obj);\n    var lastProp = path.pop();\n    var prop;\n    prop = path.shift();\n\n    while (!isUndef(prop)) {\n        if (!isStr(prop) && !isSymbol(prop)) {\n            prop = toStr(prop);\n        }\n\n        if (\n            prop === '__proto__' ||\n            prop === 'constructor' ||\n            prop === 'prototype'\n        ) {\n            return;\n        }\n\n        if (!obj[prop]) obj[prop] = {};\n        obj = obj[prop];\n        prop = path.shift();\n    }\n\n    obj[lastProp] = val;\n};\n\nmodule.exports = exports;\n", "var castPath = require('./castPath');\nvar isStr = require('./isStr');\nvar isObj = require('./isObj');\nvar each = require('./each');\n\nexports = function(obj, prop, descriptor) {\n    if (isStr(prop)) {\n        defineProp(obj, prop, descriptor);\n    } else if (isObj(prop)) {\n        each(prop, function(descriptor, prop) {\n            defineProp(obj, prop, descriptor);\n        });\n    }\n\n    return obj;\n};\n\nfunction defineProp(obj, prop, descriptor) {\n    var path = castPath(prop, obj);\n    var lastProp = path.pop();\n\n    while ((prop = path.shift())) {\n        if (!obj[prop]) obj[prop] = {};\n        obj = obj[prop];\n    }\n\n    Object.defineProperty(obj, lastProp, descriptor);\n}\n\nmodule.exports = exports;\n", "var isStr = require('./isStr');\nvar isArr = require('./isArr');\nvar contain = require('./contain');\nvar each = require('./each');\n\nexports = function(obj, filter, omit) {\n    if (isStr(filter)) filter = [filter];\n\n    if (isArr(filter)) {\n        var keys = filter;\n\n        filter = function(val, key) {\n            return contain(keys, key);\n        };\n    }\n\n    var ret = {};\n\n    var iteratee = function(val, key) {\n        if (filter(val, key)) ret[key] = val;\n    };\n\n    if (omit) {\n        iteratee = function(val, key) {\n            if (!filter(val, key)) ret[key] = val;\n        };\n    }\n\n    each(obj, iteratee);\n    return ret;\n};\n\nmodule.exports = exports;\n", "var escapeJsStr = require('./escapeJsStr');\nvar type = require('./type');\nvar toStr = require('./toStr');\nvar endWith = require('./endWith');\nvar toSrc = require('./toSrc');\nvar keys = require('./keys');\nvar each = require('./each');\nvar Class = require('./Class');\nvar getProto = require('./getProto');\nvar difference = require('./difference');\nvar extend = require('./extend');\nvar isPromise = require('./isPromise');\nvar filter = require('./filter');\nvar now = require('./now');\nvar allKeys = require('./allKeys');\nvar contain = require('./contain');\nvar isObj = require('./isObj');\nvar isMiniProgram = require('./isMiniProgram');\nvar create = require('./create');\nvar startWith = require('./startWith');\nvar safeSet = require('./safeSet');\nvar defineProp = require('./defineProp');\nvar pick = require('./pick');\nvar isArrLike = require('./isArrLike');\n\nexports = function(obj) {\n    var _ref =\n            arguments.length > 1 && arguments[1] !== undefined\n                ? arguments[1]\n                : {},\n        self = _ref.self,\n        _ref$startTime = _ref.startTime,\n        startTime = _ref$startTime === void 0 ? now() : _ref$startTime,\n        _ref$timeout = _ref.timeout,\n        timeout = _ref$timeout === void 0 ? 0 : _ref$timeout,\n        _ref$depth = _ref.depth,\n        depth = _ref$depth === void 0 ? 0 : _ref$depth,\n        _ref$curDepth = _ref.curDepth,\n        curDepth = _ref$curDepth === void 0 ? 1 : _ref$curDepth,\n        _ref$visitor = _ref.visitor,\n        visitor = _ref$visitor === void 0 ? new Visitor() : _ref$visitor,\n        _ref$unenumerable = _ref.unenumerable,\n        unenumerable = _ref$unenumerable === void 0 ? false : _ref$unenumerable,\n        _ref$symbol = _ref.symbol,\n        symbol = _ref$symbol === void 0 ? false : _ref$symbol,\n        _ref$accessGetter = _ref.accessGetter,\n        accessGetter = _ref$accessGetter === void 0 ? false : _ref$accessGetter,\n        _ref$ignore = _ref.ignore,\n        ignore = _ref$ignore === void 0 ? [] : _ref$ignore;\n\n    var json = '';\n    var options = {\n        visitor: visitor,\n        unenumerable: unenumerable,\n        symbol: symbol,\n        accessGetter: accessGetter,\n        depth: depth,\n        curDepth: curDepth + 1,\n        timeout: timeout,\n        startTime: startTime,\n        ignore: ignore\n    };\n    var t = type(obj, false);\n\n    if (t === 'String') {\n        json = wrapStr(obj);\n    } else if (t === 'Number') {\n        json = toStr(obj);\n\n        if (endWith(json, 'Infinity')) {\n            json = '{\"value\":\"'.concat(json, '\",\"type\":\"Number\"}');\n        }\n    } else if (t === 'NaN') {\n        json = '{\"value\":\"NaN\",\"type\":\"Number\"}';\n    } else if (t === 'Boolean') {\n        json = obj ? 'true' : 'false';\n    } else if (t === 'Null') {\n        json = 'null';\n    } else if (t === 'Undefined') {\n        json = '{\"type\":\"Undefined\"}';\n    } else if (t === 'Symbol') {\n        var val = 'Symbol';\n\n        try {\n            val = toStr(obj);\n        } catch (e) {}\n\n        json = '{\"value\":'.concat(wrapStr(val), ',\"type\":\"Symbol\"}');\n    } else {\n        if (timeout && now() - startTime > timeout) {\n            return wrapStr('Timeout');\n        }\n\n        if (depth && curDepth > depth) {\n            return wrapStr('{...}');\n        }\n\n        json = '{';\n        var parts = [];\n        var visitedObj = visitor.get(obj);\n        var id;\n\n        if (visitedObj) {\n            id = visitedObj.id;\n            parts.push('\"reference\":'.concat(id));\n        } else {\n            id = visitor.set(obj);\n            parts.push('\"id\":'.concat(id));\n        }\n\n        parts.push('\"type\":\"'.concat(t, '\"'));\n\n        if (endWith(t, 'Function')) {\n            parts.push('\"value\":'.concat(wrapStr(toSrc(obj))));\n        } else if (t === 'RegExp') {\n            parts.push('\"value\":'.concat(wrapStr(obj)));\n        }\n\n        if (!visitedObj) {\n            var enumerableKeys = keys(obj);\n\n            if (enumerableKeys.length) {\n                parts.push(\n                    iterateObj(\n                        'enumerable',\n                        enumerableKeys,\n                        self || obj,\n                        options\n                    )\n                );\n            }\n\n            if (unenumerable) {\n                var unenumerableKeys = difference(\n                    allKeys(obj, {\n                        prototype: false,\n                        unenumerable: true\n                    }),\n                    enumerableKeys\n                );\n\n                if (unenumerableKeys.length) {\n                    parts.push(\n                        iterateObj(\n                            'unenumerable',\n                            unenumerableKeys,\n                            self || obj,\n                            options\n                        )\n                    );\n                }\n            }\n\n            if (symbol) {\n                var symbolKeys = filter(\n                    allKeys(obj, {\n                        prototype: false,\n                        symbol: true\n                    }),\n                    function(key) {\n                        return typeof key === 'symbol';\n                    }\n                );\n\n                if (symbolKeys.length) {\n                    parts.push(\n                        iterateObj('symbol', symbolKeys, self || obj, options)\n                    );\n                }\n            }\n\n            var prototype = getProto(obj);\n\n            if (prototype && !contain(ignore, prototype)) {\n                var proto = '\"proto\":'.concat(\n                    exports(\n                        prototype,\n                        extend(options, {\n                            self: self || obj\n                        })\n                    )\n                );\n                parts.push(proto);\n            }\n        }\n\n        json += parts.join(',') + '}';\n    }\n\n    return json;\n};\n\nfunction iterateObj(name, keys, obj, options) {\n    var parts = [];\n    each(keys, function(key) {\n        var val;\n        var descriptor = Object.getOwnPropertyDescriptor(obj, key);\n        var hasGetter = descriptor && descriptor.get;\n        var hasSetter = descriptor && descriptor.set;\n\n        if (!options.accessGetter && hasGetter) {\n            val = '(...)';\n        } else {\n            try {\n                val = obj[key];\n\n                if (contain(options.ignore, val)) {\n                    return;\n                }\n\n                if (isPromise(val)) {\n                    val.catch(function() {});\n                }\n            } catch (e) {\n                val = e.message;\n            }\n        }\n\n        parts.push(''.concat(wrapKey(key), ':').concat(exports(val, options)));\n\n        if (hasGetter) {\n            parts.push(\n                ''\n                    .concat(wrapKey('get ' + toStr(key)), ':')\n                    .concat(exports(descriptor.get, options))\n            );\n        }\n\n        if (hasSetter) {\n            parts.push(\n                ''\n                    .concat(wrapKey('set ' + toStr(key)), ':')\n                    .concat(exports(descriptor.set, options))\n            );\n        }\n    });\n    return '\"'.concat(name, '\":{') + parts.join(',') + '}';\n}\n\nfunction wrapKey(key) {\n    return '\"'.concat(escapeJsonStr(key), '\"');\n}\n\nfunction wrapStr(str) {\n    return '\"'.concat(escapeJsonStr(toStr(str)), '\"');\n}\n\nfunction escapeJsonStr(str) {\n    return escapeJsStr(str)\n        .replace(/\\\\'/g, \"'\")\n        .replace(/\\t/g, '\\\\t');\n}\n\nvar Visitor = Class({\n    initialize: function() {\n        this.id = 1;\n        this.visited = [];\n    },\n    set: function(val) {\n        var visited = this.visited,\n            id = this.id;\n        var obj = {\n            id: id,\n            val: val\n        };\n        visited.push(obj);\n        this.id++;\n        return id;\n    },\n    get: function(val) {\n        var visited = this.visited;\n\n        for (var i = 0, len = visited.length; i < len; i++) {\n            var obj = visited[i];\n            if (val === obj.val) return obj;\n        }\n\n        return false;\n    }\n});\n\nexports.parse = function(str) {\n    var map = {};\n    var obj = parse(JSON.parse(str), {\n        map: map\n    });\n    correctReference(map);\n    return obj;\n};\n\nfunction correctReference(map) {\n    each(map, function(obj) {\n        var enumerableKeys = keys(obj);\n\n        for (var i = 0, len = enumerableKeys.length; i < len; i++) {\n            var key = enumerableKeys[i];\n\n            if (isObj(obj[key])) {\n                var reference = obj[key].reference;\n\n                if (reference && map[reference]) {\n                    obj[key] = map[reference];\n                }\n            }\n        }\n\n        var proto = getProto(obj);\n\n        if (proto && proto.reference) {\n            if (map[proto.reference]) {\n                Object.setPrototypeOf(obj, map[proto.reference]);\n            }\n        }\n    });\n}\n\nfunction parse(obj, options) {\n    var map = options.map;\n\n    if (!isObj(obj)) {\n        return obj;\n    }\n\n    var id = obj.id,\n        type = obj.type,\n        value = obj.value,\n        proto = obj.proto,\n        reference = obj.reference;\n    var enumerable = obj.enumerable,\n        unenumerable = obj.unenumerable;\n\n    if (reference) {\n        return obj;\n    }\n\n    if (type === 'Number') {\n        if (value === 'Infinity') {\n            return Number.POSITIVE_INFINITY;\n        } else if (value === '-Infinity') {\n            return Number.NEGATIVE_INFINITY;\n        }\n\n        return NaN;\n    } else if (type === 'Undefined') {\n        return undefined;\n    }\n\n    var newObj;\n\n    if (type === 'Function') {\n        newObj = function() {};\n\n        newObj.toString = function() {\n            return value;\n        };\n\n        if (proto) {\n            Object.setPrototypeOf(newObj, parse(proto, options));\n        }\n    } else if (type === 'RegExp') {\n        newObj = strToRegExp(value);\n    } else {\n        if (type !== 'Object') {\n            var Fn;\n\n            if (!isMiniProgram) {\n                Fn = new Function(type, '');\n            } else {\n                Fn = function() {};\n            }\n\n            if (proto) {\n                Fn.prototype = parse(proto, options);\n            }\n\n            newObj = new Fn();\n        } else {\n            if (proto) {\n                newObj = create(parse(proto, options));\n            } else {\n                newObj = create(null);\n            }\n        }\n    }\n\n    var defineProps = {};\n\n    if (enumerable) {\n        var len;\n\n        if (isArrLike(enumerable)) {\n            len = enumerable.length;\n            delete enumerable.length;\n        }\n\n        enumerable = pick(enumerable, function(value, key) {\n            return !handleGetterSetter(enumerable, value, key);\n        });\n        each(enumerable, function(value, key) {\n            var defineProp = defineProps[key] || {};\n\n            if (!defineProp.get) {\n                newObj[key] = parse(value, options);\n            }\n        });\n\n        if (len) {\n            newObj.length = len;\n        }\n    }\n\n    if (unenumerable) {\n        unenumerable = pick(unenumerable, function(value, key) {\n            return !handleGetterSetter(unenumerable, value, key);\n        });\n        each(unenumerable, function(value, key) {\n            var defineProp = defineProps[key] || {};\n\n            if (!defineProp.get) {\n                value = parse(value, options);\n\n                if (isObj(value) && value.reference) {\n                    var _reference = value.reference;\n\n                    value = function() {\n                        return map[_reference];\n                    };\n\n                    defineProp.get = value;\n                } else {\n                    defineProp.value = value;\n                }\n            }\n\n            defineProp.enumerable = false;\n            defineProps[key] = defineProp;\n        });\n    }\n\n    defineProp(newObj, defineProps);\n\n    function handleGetterSetter(obj, val, key) {\n        key = toStr(key);\n        var isGetterAndSetter = false;\n        each(['get', 'set'], function(type) {\n            if (startWith(key, type + ' ')) {\n                var realKey = key.replace(type + ' ', '');\n\n                if (obj[realKey]) {\n                    val = parse(val, options);\n\n                    if (val === 'Timeout') {\n                        val = retTimeout;\n                    }\n\n                    safeSet(defineProps, [realKey, type], val);\n                    isGetterAndSetter = true;\n                }\n            }\n        });\n        return isGetterAndSetter;\n    }\n\n    map[id] = newObj;\n    return newObj;\n}\n\nfunction retTimeout() {\n    return 'Timeout';\n}\n\nfunction strToRegExp(str) {\n    var lastSlash = str.lastIndexOf('/');\n    return new RegExp(str.slice(1, lastSlash), str.slice(lastSlash + 1));\n}\n\nmodule.exports = exports;\n", "if (typeof process === 'object' && process.nextTick && !false) {\n    exports = process.nextTick;\n} else if (typeof setImmediate === 'function') {\n    exports = function(cb) {\n        setImmediate(ensureCallable(cb));\n    };\n} else {\n    exports = function(cb) {\n        setTimeout(ensureCallable(cb), 0);\n    };\n}\n\nfunction ensureCallable(fn) {\n    if (typeof fn !== 'function')\n        throw new TypeError(fn + ' is not a function');\n    return fn;\n}\n\nmodule.exports = exports;\n", "var unique = require('./unique');\nvar trim = require('./trim');\nvar map = require('./map');\nvar toArr = require('./toArr');\n\nexports = function(str) {\n    var urlList = toArr(str.match(regUrl));\n    return unique(\n        map(urlList, function(url) {\n            return trim(url);\n        })\n    );\n};\n\nvar regUrl = /((https?)|(ftp)):\\/\\/[\\w.]+[^ \\f\\n\\r\\t\\v\"\\\\<>[\\]\\u2100-\\uFFFF(),]*/gi;\n\nmodule.exports = exports;\n", "exports = function(str) {\n    return str.replace(/\\W/g, '\\\\$&');\n};\n\nmodule.exports = exports;\n", "var extractUrls = require('./extractUrls');\nvar each = require('./each');\nvar escapeRegExp = require('./escapeRegExp');\n\nexports = function(str, hyperlink) {\n    hyperlink = hyperlink || defHyperlink;\n    var urlList = extractUrls(str);\n    each(urlList, function(url) {\n        str = str.replace(new RegExp(escapeRegExp(url), 'g'), hyperlink);\n    });\n    return str;\n};\n\nfunction defHyperlink(url) {\n    return '<a href=\"' + url + '\">' + url + '</a>';\n}\n\nmodule.exports = exports;\n", "var each = require('./each');\nvar defaults = require('./defaults');\n\nexports = function(str) {\n    var lang =\n        arguments.length > 1 && arguments[1] !== undefined\n            ? arguments[1]\n            : 'js';\n    var style =\n        arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    defaults(style, defStyle);\n    str = str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    lang = language[lang];\n    var subLangSi = 0;\n    var subLangs = [];\n    each(lang, function(val) {\n        if (!val.language) return;\n        str = str.replace(val.re, function($1, $2) {\n            if (!$2) {\n                return $1;\n            }\n\n            subLangs[subLangSi++] = exports($2, val.language, style);\n            return $1.replace($2, '___subtmpl' + (subLangSi - 1) + '___');\n        });\n    });\n    each(lang, function(val, key) {\n        if (language[val.language]) return;\n        str = str.replace(val.re, '___' + key + '___$1___end' + key + '___');\n    });\n    var levels = [];\n    str = str.replace(/___(?!subtmpl)\\w+?___/g, function($0) {\n        var end = $0.substr(3, 3) === 'end',\n            tag = (!end ? $0.substr(3) : $0.substr(6)).replace(/_/g, ''),\n            lastTag = levels.length > 0 ? levels[levels.length - 1] : null;\n\n        if (\n            !end &&\n            (lastTag == null ||\n                tag == lastTag ||\n                (lastTag != null &&\n                    lang[lastTag] &&\n                    lang[lastTag].embed != undefined &&\n                    lang[lastTag].embed.indexOf(tag) > -1))\n        ) {\n            levels.push(tag);\n            return $0;\n        } else if (end && tag == lastTag) {\n            levels.pop();\n            return $0;\n        }\n\n        return '';\n    });\n    each(lang, function(val, key) {\n        var s = style[val.style]\n            ? ' style=\"'.concat(style[val.style], '\"')\n            : '';\n        str = str\n            .replace(new RegExp('___end' + key + '___', 'g'), '</span>')\n            .replace(\n                new RegExp('___' + key + '___', 'g'),\n                '<span class=\"'.concat(val.style, '\"').concat(s, '>')\n            );\n    });\n    each(lang, function(val) {\n        if (!val.language) return;\n        str = str.replace(/___subtmpl\\d+___/g, function($tmpl) {\n            var i = parseInt($tmpl.replace(/___subtmpl(\\d+)___/, '$1'), 10);\n            return subLangs[i];\n        });\n    });\n    return str;\n};\n\nvar defStyle = {\n    comment: 'color:#63a35c;',\n    string: 'color:#183691;',\n    number: 'color:#0086b3;',\n    keyword: 'color:#a71d5d;',\n    operator: 'color:#994500;'\n};\nvar language = {};\nlanguage.js = {\n    comment: {\n        re: /(\\/\\/.*|\\/\\*([\\s\\S]*?)\\*\\/)/g,\n        style: 'comment'\n    },\n    string: {\n        re: /(('.*?')|(\".*?\"))/g,\n        style: 'string'\n    },\n    numbers: {\n        re: /(-?(\\d+|\\d+\\.\\d+|\\.\\d+))/g,\n        style: 'number'\n    },\n    keywords: {\n        re: /(?:\\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\\b)/gi,\n        style: 'keyword'\n    },\n    operator: {\n        re: /(\\+|-|\\/|\\*|%|=|&lt;|&gt;|\\||\\?|\\.)/g,\n        style: 'operator'\n    }\n};\nlanguage.html = {\n    comment: {\n        re: /(&lt;!--([\\s\\S]*?)--&gt;)/g,\n        style: 'comment'\n    },\n    tag: {\n        re: /(&lt;\\/?\\w(.|\\n)*?\\/?&gt;)/g,\n        style: 'keyword',\n        embed: ['string']\n    },\n    string: language.js.string,\n    css: {\n        re: /(?:&lt;style.*?&gt;)([\\s\\S]*)?(?:&lt;\\/style&gt;)/gi,\n        language: 'css'\n    },\n    script: {\n        re: /(?:&lt;script.*?&gt;)([\\s\\S]*?)(?:&lt;\\/script&gt;)/gi,\n        language: 'js'\n    }\n};\nlanguage.css = {\n    comment: language.js.comment,\n    string: language.js.string,\n    numbers: {\n        re: /((-?(\\d+|\\d+\\.\\d+|\\.\\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,\n        style: 'number'\n    },\n    keywords: {\n        re: /(@\\w+|:?:\\w+|[a-z-]+:)/g,\n        style: 'keyword'\n    }\n};\n\nmodule.exports = exports;\n", "exports = function() {\n    var arr = arguments;\n    var ret = arr[0];\n\n    for (var i = 1, len = arr.length; i < len; i++) {\n        if (arr[i] < ret) ret = arr[i];\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "var isStr = require('./isStr');\nvar toArr = require('./toArr');\nvar min = require('./min');\nvar map = require('./map');\nvar trim = require('./trim');\n\nexports = function(literals) {\n    if (isStr(literals)) literals = toArr(literals);\n    var str = '';\n\n    for (\n        var _len = arguments.length,\n            placeholders = new Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n        _key < _len;\n        _key++\n    ) {\n        placeholders[_key - 1] = arguments[_key];\n    }\n\n    for (var i = 0, len = literals.length; i < len; i++) {\n        str += literals[i];\n        if (placeholders[i]) str += placeholders[i];\n    }\n\n    var lines = str.split('\\n');\n    var indentLens = [];\n\n    for (var _i = 0, _len2 = lines.length; _i < _len2; _i++) {\n        var line = lines[_i];\n\n        var _indent = line.match(regStartSpaces);\n\n        if (_indent) {\n            indentLens.push(_indent[1].length);\n        }\n    }\n\n    var indent = indentLens.length > 0 ? min.apply(null, indentLens) : 0;\n    return trim(\n        map(lines, function(line) {\n            return line[0] === ' ' ? line.slice(indent) : line;\n        }).join('\\n')\n    );\n};\n\nvar regStartSpaces = /^(\\s+)\\S+/;\n\nmodule.exports = exports;\n", "/*jshint node:true */\n/*\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nfunction OutputLine(parent) {\n  this.__parent = parent;\n  this.__character_count = 0;\n  // use indent_count as a marker for this.__lines that have preserved indentation\n  this.__indent_count = -1;\n  this.__alignment_count = 0;\n  this.__wrap_point_index = 0;\n  this.__wrap_point_character_count = 0;\n  this.__wrap_point_indent_count = -1;\n  this.__wrap_point_alignment_count = 0;\n\n  this.__items = [];\n}\n\nOutputLine.prototype.clone_empty = function() {\n  var line = new OutputLine(this.__parent);\n  line.set_indent(this.__indent_count, this.__alignment_count);\n  return line;\n};\n\nOutputLine.prototype.item = function(index) {\n  if (index < 0) {\n    return this.__items[this.__items.length + index];\n  } else {\n    return this.__items[index];\n  }\n};\n\nOutputLine.prototype.has_match = function(pattern) {\n  for (var lastCheckedOutput = this.__items.length - 1; lastCheckedOutput >= 0; lastCheckedOutput--) {\n    if (this.__items[lastCheckedOutput].match(pattern)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nOutputLine.prototype.set_indent = function(indent, alignment) {\n  if (this.is_empty()) {\n    this.__indent_count = indent || 0;\n    this.__alignment_count = alignment || 0;\n    this.__character_count = this.__parent.get_indent_size(this.__indent_count, this.__alignment_count);\n  }\n};\n\nOutputLine.prototype._set_wrap_point = function() {\n  if (this.__parent.wrap_line_length) {\n    this.__wrap_point_index = this.__items.length;\n    this.__wrap_point_character_count = this.__character_count;\n    this.__wrap_point_indent_count = this.__parent.next_line.__indent_count;\n    this.__wrap_point_alignment_count = this.__parent.next_line.__alignment_count;\n  }\n};\n\nOutputLine.prototype._should_wrap = function() {\n  return this.__wrap_point_index &&\n    this.__character_count > this.__parent.wrap_line_length &&\n    this.__wrap_point_character_count > this.__parent.next_line.__character_count;\n};\n\nOutputLine.prototype._allow_wrap = function() {\n  if (this._should_wrap()) {\n    this.__parent.add_new_line();\n    var next = this.__parent.current_line;\n    next.set_indent(this.__wrap_point_indent_count, this.__wrap_point_alignment_count);\n    next.__items = this.__items.slice(this.__wrap_point_index);\n    this.__items = this.__items.slice(0, this.__wrap_point_index);\n\n    next.__character_count += this.__character_count - this.__wrap_point_character_count;\n    this.__character_count = this.__wrap_point_character_count;\n\n    if (next.__items[0] === \" \") {\n      next.__items.splice(0, 1);\n      next.__character_count -= 1;\n    }\n    return true;\n  }\n  return false;\n};\n\nOutputLine.prototype.is_empty = function() {\n  return this.__items.length === 0;\n};\n\nOutputLine.prototype.last = function() {\n  if (!this.is_empty()) {\n    return this.__items[this.__items.length - 1];\n  } else {\n    return null;\n  }\n};\n\nOutputLine.prototype.push = function(item) {\n  this.__items.push(item);\n  var last_newline_index = item.lastIndexOf('\\n');\n  if (last_newline_index !== -1) {\n    this.__character_count = item.length - last_newline_index;\n  } else {\n    this.__character_count += item.length;\n  }\n};\n\nOutputLine.prototype.pop = function() {\n  var item = null;\n  if (!this.is_empty()) {\n    item = this.__items.pop();\n    this.__character_count -= item.length;\n  }\n  return item;\n};\n\n\nOutputLine.prototype._remove_indent = function() {\n  if (this.__indent_count > 0) {\n    this.__indent_count -= 1;\n    this.__character_count -= this.__parent.indent_size;\n  }\n};\n\nOutputLine.prototype._remove_wrap_indent = function() {\n  if (this.__wrap_point_indent_count > 0) {\n    this.__wrap_point_indent_count -= 1;\n  }\n};\nOutputLine.prototype.trim = function() {\n  while (this.last() === ' ') {\n    this.__items.pop();\n    this.__character_count -= 1;\n  }\n};\n\nOutputLine.prototype.toString = function() {\n  var result = '';\n  if (this.is_empty()) {\n    if (this.__parent.indent_empty_lines) {\n      result = this.__parent.get_indent_string(this.__indent_count);\n    }\n  } else {\n    result = this.__parent.get_indent_string(this.__indent_count, this.__alignment_count);\n    result += this.__items.join('');\n  }\n  return result;\n};\n\nfunction IndentStringCache(options, baseIndentString) {\n  this.__cache = [''];\n  this.__indent_size = options.indent_size;\n  this.__indent_string = options.indent_char;\n  if (!options.indent_with_tabs) {\n    this.__indent_string = new Array(options.indent_size + 1).join(options.indent_char);\n  }\n\n  // Set to null to continue support for auto detection of base indent\n  baseIndentString = baseIndentString || '';\n  if (options.indent_level > 0) {\n    baseIndentString = new Array(options.indent_level + 1).join(this.__indent_string);\n  }\n\n  this.__base_string = baseIndentString;\n  this.__base_string_length = baseIndentString.length;\n}\n\nIndentStringCache.prototype.get_indent_size = function(indent, column) {\n  var result = this.__base_string_length;\n  column = column || 0;\n  if (indent < 0) {\n    result = 0;\n  }\n  result += indent * this.__indent_size;\n  result += column;\n  return result;\n};\n\nIndentStringCache.prototype.get_indent_string = function(indent_level, column) {\n  var result = this.__base_string;\n  column = column || 0;\n  if (indent_level < 0) {\n    indent_level = 0;\n    result = '';\n  }\n  column += indent_level * this.__indent_size;\n  this.__ensure_cache(column);\n  result += this.__cache[column];\n  return result;\n};\n\nIndentStringCache.prototype.__ensure_cache = function(column) {\n  while (column >= this.__cache.length) {\n    this.__add_column();\n  }\n};\n\nIndentStringCache.prototype.__add_column = function() {\n  var column = this.__cache.length;\n  var indent = 0;\n  var result = '';\n  if (this.__indent_size && column >= this.__indent_size) {\n    indent = Math.floor(column / this.__indent_size);\n    column -= indent * this.__indent_size;\n    result = new Array(indent + 1).join(this.__indent_string);\n  }\n  if (column) {\n    result += new Array(column + 1).join(' ');\n  }\n\n  this.__cache.push(result);\n};\n\nfunction Output(options, baseIndentString) {\n  this.__indent_cache = new IndentStringCache(options, baseIndentString);\n  this.raw = false;\n  this._end_with_newline = options.end_with_newline;\n  this.indent_size = options.indent_size;\n  this.wrap_line_length = options.wrap_line_length;\n  this.indent_empty_lines = options.indent_empty_lines;\n  this.__lines = [];\n  this.previous_line = null;\n  this.current_line = null;\n  this.next_line = new OutputLine(this);\n  this.space_before_token = false;\n  this.non_breaking_space = false;\n  this.previous_token_wrapped = false;\n  // initialize\n  this.__add_outputline();\n}\n\nOutput.prototype.__add_outputline = function() {\n  this.previous_line = this.current_line;\n  this.current_line = this.next_line.clone_empty();\n  this.__lines.push(this.current_line);\n};\n\nOutput.prototype.get_line_number = function() {\n  return this.__lines.length;\n};\n\nOutput.prototype.get_indent_string = function(indent, column) {\n  return this.__indent_cache.get_indent_string(indent, column);\n};\n\nOutput.prototype.get_indent_size = function(indent, column) {\n  return this.__indent_cache.get_indent_size(indent, column);\n};\n\nOutput.prototype.is_empty = function() {\n  return !this.previous_line && this.current_line.is_empty();\n};\n\nOutput.prototype.add_new_line = function(force_newline) {\n  // never newline at the start of file\n  // otherwise, newline only if we didn't just add one or we're forced\n  if (this.is_empty() ||\n    (!force_newline && this.just_added_newline())) {\n    return false;\n  }\n\n  // if raw output is enabled, don't print additional newlines,\n  // but still return True as though you had\n  if (!this.raw) {\n    this.__add_outputline();\n  }\n  return true;\n};\n\nOutput.prototype.get_code = function(eol) {\n  this.trim(true);\n\n  // handle some edge cases where the last tokens\n  // has text that ends with newline(s)\n  var last_item = this.current_line.pop();\n  if (last_item) {\n    if (last_item[last_item.length - 1] === '\\n') {\n      last_item = last_item.replace(/\\n+$/g, '');\n    }\n    this.current_line.push(last_item);\n  }\n\n  if (this._end_with_newline) {\n    this.__add_outputline();\n  }\n\n  var sweet_code = this.__lines.join('\\n');\n\n  if (eol !== '\\n') {\n    sweet_code = sweet_code.replace(/[\\n]/g, eol);\n  }\n  return sweet_code;\n};\n\nOutput.prototype.set_wrap_point = function() {\n  this.current_line._set_wrap_point();\n};\n\nOutput.prototype.set_indent = function(indent, alignment) {\n  indent = indent || 0;\n  alignment = alignment || 0;\n\n  // Next line stores alignment values\n  this.next_line.set_indent(indent, alignment);\n\n  // Never indent your first output indent at the start of the file\n  if (this.__lines.length > 1) {\n    this.current_line.set_indent(indent, alignment);\n    return true;\n  }\n\n  this.current_line.set_indent();\n  return false;\n};\n\nOutput.prototype.add_raw_token = function(token) {\n  for (var x = 0; x < token.newlines; x++) {\n    this.__add_outputline();\n  }\n  this.current_line.set_indent(-1);\n  this.current_line.push(token.whitespace_before);\n  this.current_line.push(token.text);\n  this.space_before_token = false;\n  this.non_breaking_space = false;\n  this.previous_token_wrapped = false;\n};\n\nOutput.prototype.add_token = function(printable_token) {\n  this.__add_space_before_token();\n  this.current_line.push(printable_token);\n  this.space_before_token = false;\n  this.non_breaking_space = false;\n  this.previous_token_wrapped = this.current_line._allow_wrap();\n};\n\nOutput.prototype.__add_space_before_token = function() {\n  if (this.space_before_token && !this.just_added_newline()) {\n    if (!this.non_breaking_space) {\n      this.set_wrap_point();\n    }\n    this.current_line.push(' ');\n  }\n};\n\nOutput.prototype.remove_indent = function(index) {\n  var output_length = this.__lines.length;\n  while (index < output_length) {\n    this.__lines[index]._remove_indent();\n    index++;\n  }\n  this.current_line._remove_wrap_indent();\n};\n\nOutput.prototype.trim = function(eat_newlines) {\n  eat_newlines = (eat_newlines === undefined) ? false : eat_newlines;\n\n  this.current_line.trim();\n\n  while (eat_newlines && this.__lines.length > 1 &&\n    this.current_line.is_empty()) {\n    this.__lines.pop();\n    this.current_line = this.__lines[this.__lines.length - 1];\n    this.current_line.trim();\n  }\n\n  this.previous_line = this.__lines.length > 1 ?\n    this.__lines[this.__lines.length - 2] : null;\n};\n\nOutput.prototype.just_added_newline = function() {\n  return this.current_line.is_empty();\n};\n\nOutput.prototype.just_added_blankline = function() {\n  return this.is_empty() ||\n    (this.current_line.is_empty() && this.previous_line.is_empty());\n};\n\nOutput.prototype.ensure_empty_line_above = function(starts_with, ends_with) {\n  var index = this.__lines.length - 2;\n  while (index >= 0) {\n    var potentialEmptyLine = this.__lines[index];\n    if (potentialEmptyLine.is_empty()) {\n      break;\n    } else if (potentialEmptyLine.item(0).indexOf(starts_with) !== 0 &&\n      potentialEmptyLine.item(-1) !== ends_with) {\n      this.__lines.splice(index + 1, 0, new OutputLine(this));\n      this.previous_line = this.__lines[this.__lines.length - 2];\n      break;\n    }\n    index--;\n  }\n};\n\nmodule.exports.Output = Output;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nfunction Token(type, text, newlines, whitespace_before) {\n  this.type = type;\n  this.text = text;\n\n  // comments_before are\n  // comments that have a new line before them\n  // and may or may not have a newline after\n  // this is a set of comments before\n  this.comments_before = null; /* inline comment*/\n\n\n  // this.comments_after =  new TokenStream(); // no new line before and newline after\n  this.newlines = newlines || 0;\n  this.whitespace_before = whitespace_before || '';\n  this.parent = null;\n  this.next = null;\n  this.previous = null;\n  this.opened = null;\n  this.closed = null;\n  this.directives = null;\n}\n\n\nmodule.exports.Token = Token;\n", "/* jshint node: true, curly: false */\n// Parts of this section of code is taken from acorn.\n//\n// Acorn was written by Marijn Haverbeke and released under an MIT\n// license. The Unicode regexps (for identifiers and whitespace) were\n// taken from [Esprima](http://esprima.org) by Ariya Hidayat.\n//\n// Git repositories for Acorn are available at\n//\n//     http://marijnhaverbeke.nl/git/acorn\n//     https://github.com/marijnh/acorn.git\n\n// ## Character categories\n\n\n'use strict';\n\n// acorn used char codes to squeeze the last bit of performance out\n// Beautifier is okay without that, so we're using regex\n// permit # (23), $ (36), and @ (64). @ is used in ES7 decorators.\n// 65 through 91 are uppercase letters.\n// permit _ (95).\n// 97 through 123 are lowercase letters.\nvar baseASCIIidentifierStartChars = \"\\\\x23\\\\x24\\\\x40\\\\x41-\\\\x5a\\\\x5f\\\\x61-\\\\x7a\";\n\n// inside an identifier @ is not allowed but 0-9 are.\nvar baseASCIIidentifierChars = \"\\\\x24\\\\x30-\\\\x39\\\\x41-\\\\x5a\\\\x5f\\\\x61-\\\\x7a\";\n\n// Big ugly regular expressions that match characters in the\n// whitespace, identifier, and identifier-start categories. These\n// are only applied when a character is found to actually have a\n// code point above 128.\nvar nonASCIIidentifierStartChars = \"\\\\xaa\\\\xb5\\\\xba\\\\xc0-\\\\xd6\\\\xd8-\\\\xf6\\\\xf8-\\\\u02c1\\\\u02c6-\\\\u02d1\\\\u02e0-\\\\u02e4\\\\u02ec\\\\u02ee\\\\u0370-\\\\u0374\\\\u0376\\\\u0377\\\\u037a-\\\\u037d\\\\u0386\\\\u0388-\\\\u038a\\\\u038c\\\\u038e-\\\\u03a1\\\\u03a3-\\\\u03f5\\\\u03f7-\\\\u0481\\\\u048a-\\\\u0527\\\\u0531-\\\\u0556\\\\u0559\\\\u0561-\\\\u0587\\\\u05d0-\\\\u05ea\\\\u05f0-\\\\u05f2\\\\u0620-\\\\u064a\\\\u066e\\\\u066f\\\\u0671-\\\\u06d3\\\\u06d5\\\\u06e5\\\\u06e6\\\\u06ee\\\\u06ef\\\\u06fa-\\\\u06fc\\\\u06ff\\\\u0710\\\\u0712-\\\\u072f\\\\u074d-\\\\u07a5\\\\u07b1\\\\u07ca-\\\\u07ea\\\\u07f4\\\\u07f5\\\\u07fa\\\\u0800-\\\\u0815\\\\u081a\\\\u0824\\\\u0828\\\\u0840-\\\\u0858\\\\u08a0\\\\u08a2-\\\\u08ac\\\\u0904-\\\\u0939\\\\u093d\\\\u0950\\\\u0958-\\\\u0961\\\\u0971-\\\\u0977\\\\u0979-\\\\u097f\\\\u0985-\\\\u098c\\\\u098f\\\\u0990\\\\u0993-\\\\u09a8\\\\u09aa-\\\\u09b0\\\\u09b2\\\\u09b6-\\\\u09b9\\\\u09bd\\\\u09ce\\\\u09dc\\\\u09dd\\\\u09df-\\\\u09e1\\\\u09f0\\\\u09f1\\\\u0a05-\\\\u0a0a\\\\u0a0f\\\\u0a10\\\\u0a13-\\\\u0a28\\\\u0a2a-\\\\u0a30\\\\u0a32\\\\u0a33\\\\u0a35\\\\u0a36\\\\u0a38\\\\u0a39\\\\u0a59-\\\\u0a5c\\\\u0a5e\\\\u0a72-\\\\u0a74\\\\u0a85-\\\\u0a8d\\\\u0a8f-\\\\u0a91\\\\u0a93-\\\\u0aa8\\\\u0aaa-\\\\u0ab0\\\\u0ab2\\\\u0ab3\\\\u0ab5-\\\\u0ab9\\\\u0abd\\\\u0ad0\\\\u0ae0\\\\u0ae1\\\\u0b05-\\\\u0b0c\\\\u0b0f\\\\u0b10\\\\u0b13-\\\\u0b28\\\\u0b2a-\\\\u0b30\\\\u0b32\\\\u0b33\\\\u0b35-\\\\u0b39\\\\u0b3d\\\\u0b5c\\\\u0b5d\\\\u0b5f-\\\\u0b61\\\\u0b71\\\\u0b83\\\\u0b85-\\\\u0b8a\\\\u0b8e-\\\\u0b90\\\\u0b92-\\\\u0b95\\\\u0b99\\\\u0b9a\\\\u0b9c\\\\u0b9e\\\\u0b9f\\\\u0ba3\\\\u0ba4\\\\u0ba8-\\\\u0baa\\\\u0bae-\\\\u0bb9\\\\u0bd0\\\\u0c05-\\\\u0c0c\\\\u0c0e-\\\\u0c10\\\\u0c12-\\\\u0c28\\\\u0c2a-\\\\u0c33\\\\u0c35-\\\\u0c39\\\\u0c3d\\\\u0c58\\\\u0c59\\\\u0c60\\\\u0c61\\\\u0c85-\\\\u0c8c\\\\u0c8e-\\\\u0c90\\\\u0c92-\\\\u0ca8\\\\u0caa-\\\\u0cb3\\\\u0cb5-\\\\u0cb9\\\\u0cbd\\\\u0cde\\\\u0ce0\\\\u0ce1\\\\u0cf1\\\\u0cf2\\\\u0d05-\\\\u0d0c\\\\u0d0e-\\\\u0d10\\\\u0d12-\\\\u0d3a\\\\u0d3d\\\\u0d4e\\\\u0d60\\\\u0d61\\\\u0d7a-\\\\u0d7f\\\\u0d85-\\\\u0d96\\\\u0d9a-\\\\u0db1\\\\u0db3-\\\\u0dbb\\\\u0dbd\\\\u0dc0-\\\\u0dc6\\\\u0e01-\\\\u0e30\\\\u0e32\\\\u0e33\\\\u0e40-\\\\u0e46\\\\u0e81\\\\u0e82\\\\u0e84\\\\u0e87\\\\u0e88\\\\u0e8a\\\\u0e8d\\\\u0e94-\\\\u0e97\\\\u0e99-\\\\u0e9f\\\\u0ea1-\\\\u0ea3\\\\u0ea5\\\\u0ea7\\\\u0eaa\\\\u0eab\\\\u0ead-\\\\u0eb0\\\\u0eb2\\\\u0eb3\\\\u0ebd\\\\u0ec0-\\\\u0ec4\\\\u0ec6\\\\u0edc-\\\\u0edf\\\\u0f00\\\\u0f40-\\\\u0f47\\\\u0f49-\\\\u0f6c\\\\u0f88-\\\\u0f8c\\\\u1000-\\\\u102a\\\\u103f\\\\u1050-\\\\u1055\\\\u105a-\\\\u105d\\\\u1061\\\\u1065\\\\u1066\\\\u106e-\\\\u1070\\\\u1075-\\\\u1081\\\\u108e\\\\u10a0-\\\\u10c5\\\\u10c7\\\\u10cd\\\\u10d0-\\\\u10fa\\\\u10fc-\\\\u1248\\\\u124a-\\\\u124d\\\\u1250-\\\\u1256\\\\u1258\\\\u125a-\\\\u125d\\\\u1260-\\\\u1288\\\\u128a-\\\\u128d\\\\u1290-\\\\u12b0\\\\u12b2-\\\\u12b5\\\\u12b8-\\\\u12be\\\\u12c0\\\\u12c2-\\\\u12c5\\\\u12c8-\\\\u12d6\\\\u12d8-\\\\u1310\\\\u1312-\\\\u1315\\\\u1318-\\\\u135a\\\\u1380-\\\\u138f\\\\u13a0-\\\\u13f4\\\\u1401-\\\\u166c\\\\u166f-\\\\u167f\\\\u1681-\\\\u169a\\\\u16a0-\\\\u16ea\\\\u16ee-\\\\u16f0\\\\u1700-\\\\u170c\\\\u170e-\\\\u1711\\\\u1720-\\\\u1731\\\\u1740-\\\\u1751\\\\u1760-\\\\u176c\\\\u176e-\\\\u1770\\\\u1780-\\\\u17b3\\\\u17d7\\\\u17dc\\\\u1820-\\\\u1877\\\\u1880-\\\\u18a8\\\\u18aa\\\\u18b0-\\\\u18f5\\\\u1900-\\\\u191c\\\\u1950-\\\\u196d\\\\u1970-\\\\u1974\\\\u1980-\\\\u19ab\\\\u19c1-\\\\u19c7\\\\u1a00-\\\\u1a16\\\\u1a20-\\\\u1a54\\\\u1aa7\\\\u1b05-\\\\u1b33\\\\u1b45-\\\\u1b4b\\\\u1b83-\\\\u1ba0\\\\u1bae\\\\u1baf\\\\u1bba-\\\\u1be5\\\\u1c00-\\\\u1c23\\\\u1c4d-\\\\u1c4f\\\\u1c5a-\\\\u1c7d\\\\u1ce9-\\\\u1cec\\\\u1cee-\\\\u1cf1\\\\u1cf5\\\\u1cf6\\\\u1d00-\\\\u1dbf\\\\u1e00-\\\\u1f15\\\\u1f18-\\\\u1f1d\\\\u1f20-\\\\u1f45\\\\u1f48-\\\\u1f4d\\\\u1f50-\\\\u1f57\\\\u1f59\\\\u1f5b\\\\u1f5d\\\\u1f5f-\\\\u1f7d\\\\u1f80-\\\\u1fb4\\\\u1fb6-\\\\u1fbc\\\\u1fbe\\\\u1fc2-\\\\u1fc4\\\\u1fc6-\\\\u1fcc\\\\u1fd0-\\\\u1fd3\\\\u1fd6-\\\\u1fdb\\\\u1fe0-\\\\u1fec\\\\u1ff2-\\\\u1ff4\\\\u1ff6-\\\\u1ffc\\\\u2071\\\\u207f\\\\u2090-\\\\u209c\\\\u2102\\\\u2107\\\\u210a-\\\\u2113\\\\u2115\\\\u2119-\\\\u211d\\\\u2124\\\\u2126\\\\u2128\\\\u212a-\\\\u212d\\\\u212f-\\\\u2139\\\\u213c-\\\\u213f\\\\u2145-\\\\u2149\\\\u214e\\\\u2160-\\\\u2188\\\\u2c00-\\\\u2c2e\\\\u2c30-\\\\u2c5e\\\\u2c60-\\\\u2ce4\\\\u2ceb-\\\\u2cee\\\\u2cf2\\\\u2cf3\\\\u2d00-\\\\u2d25\\\\u2d27\\\\u2d2d\\\\u2d30-\\\\u2d67\\\\u2d6f\\\\u2d80-\\\\u2d96\\\\u2da0-\\\\u2da6\\\\u2da8-\\\\u2dae\\\\u2db0-\\\\u2db6\\\\u2db8-\\\\u2dbe\\\\u2dc0-\\\\u2dc6\\\\u2dc8-\\\\u2dce\\\\u2dd0-\\\\u2dd6\\\\u2dd8-\\\\u2dde\\\\u2e2f\\\\u3005-\\\\u3007\\\\u3021-\\\\u3029\\\\u3031-\\\\u3035\\\\u3038-\\\\u303c\\\\u3041-\\\\u3096\\\\u309d-\\\\u309f\\\\u30a1-\\\\u30fa\\\\u30fc-\\\\u30ff\\\\u3105-\\\\u312d\\\\u3131-\\\\u318e\\\\u31a0-\\\\u31ba\\\\u31f0-\\\\u31ff\\\\u3400-\\\\u4db5\\\\u4e00-\\\\u9fcc\\\\ua000-\\\\ua48c\\\\ua4d0-\\\\ua4fd\\\\ua500-\\\\ua60c\\\\ua610-\\\\ua61f\\\\ua62a\\\\ua62b\\\\ua640-\\\\ua66e\\\\ua67f-\\\\ua697\\\\ua6a0-\\\\ua6ef\\\\ua717-\\\\ua71f\\\\ua722-\\\\ua788\\\\ua78b-\\\\ua78e\\\\ua790-\\\\ua793\\\\ua7a0-\\\\ua7aa\\\\ua7f8-\\\\ua801\\\\ua803-\\\\ua805\\\\ua807-\\\\ua80a\\\\ua80c-\\\\ua822\\\\ua840-\\\\ua873\\\\ua882-\\\\ua8b3\\\\ua8f2-\\\\ua8f7\\\\ua8fb\\\\ua90a-\\\\ua925\\\\ua930-\\\\ua946\\\\ua960-\\\\ua97c\\\\ua984-\\\\ua9b2\\\\ua9cf\\\\uaa00-\\\\uaa28\\\\uaa40-\\\\uaa42\\\\uaa44-\\\\uaa4b\\\\uaa60-\\\\uaa76\\\\uaa7a\\\\uaa80-\\\\uaaaf\\\\uaab1\\\\uaab5\\\\uaab6\\\\uaab9-\\\\uaabd\\\\uaac0\\\\uaac2\\\\uaadb-\\\\uaadd\\\\uaae0-\\\\uaaea\\\\uaaf2-\\\\uaaf4\\\\uab01-\\\\uab06\\\\uab09-\\\\uab0e\\\\uab11-\\\\uab16\\\\uab20-\\\\uab26\\\\uab28-\\\\uab2e\\\\uabc0-\\\\uabe2\\\\uac00-\\\\ud7a3\\\\ud7b0-\\\\ud7c6\\\\ud7cb-\\\\ud7fb\\\\uf900-\\\\ufa6d\\\\ufa70-\\\\ufad9\\\\ufb00-\\\\ufb06\\\\ufb13-\\\\ufb17\\\\ufb1d\\\\ufb1f-\\\\ufb28\\\\ufb2a-\\\\ufb36\\\\ufb38-\\\\ufb3c\\\\ufb3e\\\\ufb40\\\\ufb41\\\\ufb43\\\\ufb44\\\\ufb46-\\\\ufbb1\\\\ufbd3-\\\\ufd3d\\\\ufd50-\\\\ufd8f\\\\ufd92-\\\\ufdc7\\\\ufdf0-\\\\ufdfb\\\\ufe70-\\\\ufe74\\\\ufe76-\\\\ufefc\\\\uff21-\\\\uff3a\\\\uff41-\\\\uff5a\\\\uff66-\\\\uffbe\\\\uffc2-\\\\uffc7\\\\uffca-\\\\uffcf\\\\uffd2-\\\\uffd7\\\\uffda-\\\\uffdc\";\nvar nonASCIIidentifierChars = \"\\\\u0300-\\\\u036f\\\\u0483-\\\\u0487\\\\u0591-\\\\u05bd\\\\u05bf\\\\u05c1\\\\u05c2\\\\u05c4\\\\u05c5\\\\u05c7\\\\u0610-\\\\u061a\\\\u0620-\\\\u0649\\\\u0672-\\\\u06d3\\\\u06e7-\\\\u06e8\\\\u06fb-\\\\u06fc\\\\u0730-\\\\u074a\\\\u0800-\\\\u0814\\\\u081b-\\\\u0823\\\\u0825-\\\\u0827\\\\u0829-\\\\u082d\\\\u0840-\\\\u0857\\\\u08e4-\\\\u08fe\\\\u0900-\\\\u0903\\\\u093a-\\\\u093c\\\\u093e-\\\\u094f\\\\u0951-\\\\u0957\\\\u0962-\\\\u0963\\\\u0966-\\\\u096f\\\\u0981-\\\\u0983\\\\u09bc\\\\u09be-\\\\u09c4\\\\u09c7\\\\u09c8\\\\u09d7\\\\u09df-\\\\u09e0\\\\u0a01-\\\\u0a03\\\\u0a3c\\\\u0a3e-\\\\u0a42\\\\u0a47\\\\u0a48\\\\u0a4b-\\\\u0a4d\\\\u0a51\\\\u0a66-\\\\u0a71\\\\u0a75\\\\u0a81-\\\\u0a83\\\\u0abc\\\\u0abe-\\\\u0ac5\\\\u0ac7-\\\\u0ac9\\\\u0acb-\\\\u0acd\\\\u0ae2-\\\\u0ae3\\\\u0ae6-\\\\u0aef\\\\u0b01-\\\\u0b03\\\\u0b3c\\\\u0b3e-\\\\u0b44\\\\u0b47\\\\u0b48\\\\u0b4b-\\\\u0b4d\\\\u0b56\\\\u0b57\\\\u0b5f-\\\\u0b60\\\\u0b66-\\\\u0b6f\\\\u0b82\\\\u0bbe-\\\\u0bc2\\\\u0bc6-\\\\u0bc8\\\\u0bca-\\\\u0bcd\\\\u0bd7\\\\u0be6-\\\\u0bef\\\\u0c01-\\\\u0c03\\\\u0c46-\\\\u0c48\\\\u0c4a-\\\\u0c4d\\\\u0c55\\\\u0c56\\\\u0c62-\\\\u0c63\\\\u0c66-\\\\u0c6f\\\\u0c82\\\\u0c83\\\\u0cbc\\\\u0cbe-\\\\u0cc4\\\\u0cc6-\\\\u0cc8\\\\u0cca-\\\\u0ccd\\\\u0cd5\\\\u0cd6\\\\u0ce2-\\\\u0ce3\\\\u0ce6-\\\\u0cef\\\\u0d02\\\\u0d03\\\\u0d46-\\\\u0d48\\\\u0d57\\\\u0d62-\\\\u0d63\\\\u0d66-\\\\u0d6f\\\\u0d82\\\\u0d83\\\\u0dca\\\\u0dcf-\\\\u0dd4\\\\u0dd6\\\\u0dd8-\\\\u0ddf\\\\u0df2\\\\u0df3\\\\u0e34-\\\\u0e3a\\\\u0e40-\\\\u0e45\\\\u0e50-\\\\u0e59\\\\u0eb4-\\\\u0eb9\\\\u0ec8-\\\\u0ecd\\\\u0ed0-\\\\u0ed9\\\\u0f18\\\\u0f19\\\\u0f20-\\\\u0f29\\\\u0f35\\\\u0f37\\\\u0f39\\\\u0f41-\\\\u0f47\\\\u0f71-\\\\u0f84\\\\u0f86-\\\\u0f87\\\\u0f8d-\\\\u0f97\\\\u0f99-\\\\u0fbc\\\\u0fc6\\\\u1000-\\\\u1029\\\\u1040-\\\\u1049\\\\u1067-\\\\u106d\\\\u1071-\\\\u1074\\\\u1082-\\\\u108d\\\\u108f-\\\\u109d\\\\u135d-\\\\u135f\\\\u170e-\\\\u1710\\\\u1720-\\\\u1730\\\\u1740-\\\\u1750\\\\u1772\\\\u1773\\\\u1780-\\\\u17b2\\\\u17dd\\\\u17e0-\\\\u17e9\\\\u180b-\\\\u180d\\\\u1810-\\\\u1819\\\\u1920-\\\\u192b\\\\u1930-\\\\u193b\\\\u1951-\\\\u196d\\\\u19b0-\\\\u19c0\\\\u19c8-\\\\u19c9\\\\u19d0-\\\\u19d9\\\\u1a00-\\\\u1a15\\\\u1a20-\\\\u1a53\\\\u1a60-\\\\u1a7c\\\\u1a7f-\\\\u1a89\\\\u1a90-\\\\u1a99\\\\u1b46-\\\\u1b4b\\\\u1b50-\\\\u1b59\\\\u1b6b-\\\\u1b73\\\\u1bb0-\\\\u1bb9\\\\u1be6-\\\\u1bf3\\\\u1c00-\\\\u1c22\\\\u1c40-\\\\u1c49\\\\u1c5b-\\\\u1c7d\\\\u1cd0-\\\\u1cd2\\\\u1d00-\\\\u1dbe\\\\u1e01-\\\\u1f15\\\\u200c\\\\u200d\\\\u203f\\\\u2040\\\\u2054\\\\u20d0-\\\\u20dc\\\\u20e1\\\\u20e5-\\\\u20f0\\\\u2d81-\\\\u2d96\\\\u2de0-\\\\u2dff\\\\u3021-\\\\u3028\\\\u3099\\\\u309a\\\\ua640-\\\\ua66d\\\\ua674-\\\\ua67d\\\\ua69f\\\\ua6f0-\\\\ua6f1\\\\ua7f8-\\\\ua800\\\\ua806\\\\ua80b\\\\ua823-\\\\ua827\\\\ua880-\\\\ua881\\\\ua8b4-\\\\ua8c4\\\\ua8d0-\\\\ua8d9\\\\ua8f3-\\\\ua8f7\\\\ua900-\\\\ua909\\\\ua926-\\\\ua92d\\\\ua930-\\\\ua945\\\\ua980-\\\\ua983\\\\ua9b3-\\\\ua9c0\\\\uaa00-\\\\uaa27\\\\uaa40-\\\\uaa41\\\\uaa4c-\\\\uaa4d\\\\uaa50-\\\\uaa59\\\\uaa7b\\\\uaae0-\\\\uaae9\\\\uaaf2-\\\\uaaf3\\\\uabc0-\\\\uabe1\\\\uabec\\\\uabed\\\\uabf0-\\\\uabf9\\\\ufb20-\\\\ufb28\\\\ufe00-\\\\ufe0f\\\\ufe20-\\\\ufe26\\\\ufe33\\\\ufe34\\\\ufe4d-\\\\ufe4f\\\\uff10-\\\\uff19\\\\uff3f\";\n//var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n//var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\nvar identifierStart = \"(?:\\\\\\\\u[0-9a-fA-F]{4}|[\" + baseASCIIidentifierStartChars + nonASCIIidentifierStartChars + \"])\";\nvar identifierChars = \"(?:\\\\\\\\u[0-9a-fA-F]{4}|[\" + baseASCIIidentifierChars + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"])*\";\n\nexports.identifier = new RegExp(identifierStart + identifierChars, 'g');\nexports.identifierStart = new RegExp(identifierStart);\nexports.identifierMatch = new RegExp(\"(?:\\\\\\\\u[0-9a-fA-F]{4}|[\" + baseASCIIidentifierChars + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"])+\");\n\nvar nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/; // jshint ignore:line\n\n// Whether a single character denotes a newline.\n\nexports.newline = /[\\n\\r\\u2028\\u2029]/;\n\n// Matches a whole line break (where CRLF is considered a single\n// line break). Used to count lines.\n\n// in javascript, these two differ\n// in python they are the same, different methods are called on them\nexports.lineBreak = new RegExp('\\r\\n|' + exports.newline.source);\nexports.allLineBreaks = new RegExp(exports.lineBreak.source, 'g');\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nfunction Options(options, merge_child_field) {\n  this.raw_options = _mergeOpts(options, merge_child_field);\n\n  // Support passing the source text back with no change\n  this.disabled = this._get_boolean('disabled');\n\n  this.eol = this._get_characters('eol', 'auto');\n  this.end_with_newline = this._get_boolean('end_with_newline');\n  this.indent_size = this._get_number('indent_size', 4);\n  this.indent_char = this._get_characters('indent_char', ' ');\n  this.indent_level = this._get_number('indent_level');\n\n  this.preserve_newlines = this._get_boolean('preserve_newlines', true);\n  this.max_preserve_newlines = this._get_number('max_preserve_newlines', 32786);\n  if (!this.preserve_newlines) {\n    this.max_preserve_newlines = 0;\n  }\n\n  this.indent_with_tabs = this._get_boolean('indent_with_tabs', this.indent_char === '\\t');\n  if (this.indent_with_tabs) {\n    this.indent_char = '\\t';\n\n    // indent_size behavior changed after 1.8.6\n    // It used to be that indent_size would be\n    // set to 1 for indent_with_tabs. That is no longer needed and\n    // actually doesn't make sense - why not use spaces? Further,\n    // that might produce unexpected behavior - tabs being used\n    // for single-column alignment. So, when indent_with_tabs is true\n    // and indent_size is 1, reset indent_size to 4.\n    if (this.indent_size === 1) {\n      this.indent_size = 4;\n    }\n  }\n\n  // Backwards compat with 1.3.x\n  this.wrap_line_length = this._get_number('wrap_line_length', this._get_number('max_char'));\n\n  this.indent_empty_lines = this._get_boolean('indent_empty_lines');\n\n  // valid templating languages ['django', 'erb', 'handlebars', 'php', 'smarty']\n  // For now, 'auto' = all off for javascript, all on for html (and inline javascript).\n  // other values ignored\n  this.templating = this._get_selection_list('templating', ['auto', 'none', 'django', 'erb', 'handlebars', 'php', 'smarty'], ['auto']);\n}\n\nOptions.prototype._get_array = function(name, default_value) {\n  var option_value = this.raw_options[name];\n  var result = default_value || [];\n  if (typeof option_value === 'object') {\n    if (option_value !== null && typeof option_value.concat === 'function') {\n      result = option_value.concat();\n    }\n  } else if (typeof option_value === 'string') {\n    result = option_value.split(/[^a-zA-Z0-9_\\/\\-]+/);\n  }\n  return result;\n};\n\nOptions.prototype._get_boolean = function(name, default_value) {\n  var option_value = this.raw_options[name];\n  var result = option_value === undefined ? !!default_value : !!option_value;\n  return result;\n};\n\nOptions.prototype._get_characters = function(name, default_value) {\n  var option_value = this.raw_options[name];\n  var result = default_value || '';\n  if (typeof option_value === 'string') {\n    result = option_value.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n').replace(/\\\\t/, '\\t');\n  }\n  return result;\n};\n\nOptions.prototype._get_number = function(name, default_value) {\n  var option_value = this.raw_options[name];\n  default_value = parseInt(default_value, 10);\n  if (isNaN(default_value)) {\n    default_value = 0;\n  }\n  var result = parseInt(option_value, 10);\n  if (isNaN(result)) {\n    result = default_value;\n  }\n  return result;\n};\n\nOptions.prototype._get_selection = function(name, selection_list, default_value) {\n  var result = this._get_selection_list(name, selection_list, default_value);\n  if (result.length !== 1) {\n    throw new Error(\n      \"Invalid Option Value: The option '\" + name + \"' can only be one of the following values:\\n\" +\n      selection_list + \"\\nYou passed in: '\" + this.raw_options[name] + \"'\");\n  }\n\n  return result[0];\n};\n\n\nOptions.prototype._get_selection_list = function(name, selection_list, default_value) {\n  if (!selection_list || selection_list.length === 0) {\n    throw new Error(\"Selection list cannot be empty.\");\n  }\n\n  default_value = default_value || [selection_list[0]];\n  if (!this._is_valid_selection(default_value, selection_list)) {\n    throw new Error(\"Invalid Default Value!\");\n  }\n\n  var result = this._get_array(name, default_value);\n  if (!this._is_valid_selection(result, selection_list)) {\n    throw new Error(\n      \"Invalid Option Value: The option '\" + name + \"' can contain only the following values:\\n\" +\n      selection_list + \"\\nYou passed in: '\" + this.raw_options[name] + \"'\");\n  }\n\n  return result;\n};\n\nOptions.prototype._is_valid_selection = function(result, selection_list) {\n  return result.length && selection_list.length &&\n    !result.some(function(item) { return selection_list.indexOf(item) === -1; });\n};\n\n\n// merges child options up with the parent options object\n// Example: obj = {a: 1, b: {a: 2}}\n//          mergeOpts(obj, 'b')\n//\n//          Returns: {a: 2}\nfunction _mergeOpts(allOptions, childFieldName) {\n  var finalOpts = {};\n  allOptions = _normalizeOpts(allOptions);\n  var name;\n\n  for (name in allOptions) {\n    if (name !== childFieldName) {\n      finalOpts[name] = allOptions[name];\n    }\n  }\n\n  //merge in the per type settings for the childFieldName\n  if (childFieldName && allOptions[childFieldName]) {\n    for (name in allOptions[childFieldName]) {\n      finalOpts[name] = allOptions[childFieldName][name];\n    }\n  }\n  return finalOpts;\n}\n\nfunction _normalizeOpts(options) {\n  var convertedOpts = {};\n  var key;\n\n  for (key in options) {\n    var newKey = key.replace(/-/g, \"_\");\n    convertedOpts[newKey] = options[key];\n  }\n  return convertedOpts;\n}\n\nmodule.exports.Options = Options;\nmodule.exports.normalizeOpts = _normalizeOpts;\nmodule.exports.mergeOpts = _mergeOpts;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar BaseOptions = require('../core/options').Options;\n\nvar validPositionValues = ['before-newline', 'after-newline', 'preserve-newline'];\n\nfunction Options(options) {\n  BaseOptions.call(this, options, 'js');\n\n  // compatibility, re\n  var raw_brace_style = this.raw_options.brace_style || null;\n  if (raw_brace_style === \"expand-strict\") { //graceful handling of deprecated option\n    this.raw_options.brace_style = \"expand\";\n  } else if (raw_brace_style === \"collapse-preserve-inline\") { //graceful handling of deprecated option\n    this.raw_options.brace_style = \"collapse,preserve-inline\";\n  } else if (this.raw_options.braces_on_own_line !== undefined) { //graceful handling of deprecated option\n    this.raw_options.brace_style = this.raw_options.braces_on_own_line ? \"expand\" : \"collapse\";\n    // } else if (!raw_brace_style) { //Nothing exists to set it\n    //   raw_brace_style = \"collapse\";\n  }\n\n  //preserve-inline in delimited string will trigger brace_preserve_inline, everything\n  //else is considered a brace_style and the last one only will have an effect\n\n  var brace_style_split = this._get_selection_list('brace_style', ['collapse', 'expand', 'end-expand', 'none', 'preserve-inline']);\n\n  this.brace_preserve_inline = false; //Defaults in case one or other was not specified in meta-option\n  this.brace_style = \"collapse\";\n\n  for (var bs = 0; bs < brace_style_split.length; bs++) {\n    if (brace_style_split[bs] === \"preserve-inline\") {\n      this.brace_preserve_inline = true;\n    } else {\n      this.brace_style = brace_style_split[bs];\n    }\n  }\n\n  this.unindent_chained_methods = this._get_boolean('unindent_chained_methods');\n  this.break_chained_methods = this._get_boolean('break_chained_methods');\n  this.space_in_paren = this._get_boolean('space_in_paren');\n  this.space_in_empty_paren = this._get_boolean('space_in_empty_paren');\n  this.jslint_happy = this._get_boolean('jslint_happy');\n  this.space_after_anon_function = this._get_boolean('space_after_anon_function');\n  this.space_after_named_function = this._get_boolean('space_after_named_function');\n  this.keep_array_indentation = this._get_boolean('keep_array_indentation');\n  this.space_before_conditional = this._get_boolean('space_before_conditional', true);\n  this.unescape_strings = this._get_boolean('unescape_strings');\n  this.e4x = this._get_boolean('e4x');\n  this.comma_first = this._get_boolean('comma_first');\n  this.operator_position = this._get_selection('operator_position', validPositionValues);\n\n  // For testing of beautify preserve:start directive\n  this.test_output_raw = this._get_boolean('test_output_raw');\n\n  // force this._options.space_after_anon_function to true if this._options.jslint_happy\n  if (this.jslint_happy) {\n    this.space_after_anon_function = true;\n  }\n\n}\nOptions.prototype = new BaseOptions();\n\n\n\nmodule.exports.Options = Options;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar regexp_has_sticky = RegExp.prototype.hasOwnProperty('sticky');\n\nfunction InputScanner(input_string) {\n  this.__input = input_string || '';\n  this.__input_length = this.__input.length;\n  this.__position = 0;\n}\n\nInputScanner.prototype.restart = function() {\n  this.__position = 0;\n};\n\nInputScanner.prototype.back = function() {\n  if (this.__position > 0) {\n    this.__position -= 1;\n  }\n};\n\nInputScanner.prototype.hasNext = function() {\n  return this.__position < this.__input_length;\n};\n\nInputScanner.prototype.next = function() {\n  var val = null;\n  if (this.hasNext()) {\n    val = this.__input.charAt(this.__position);\n    this.__position += 1;\n  }\n  return val;\n};\n\nInputScanner.prototype.peek = function(index) {\n  var val = null;\n  index = index || 0;\n  index += this.__position;\n  if (index >= 0 && index < this.__input_length) {\n    val = this.__input.charAt(index);\n  }\n  return val;\n};\n\n// This is a JavaScript only helper function (not in python)\n// Javascript doesn't have a match method\n// and not all implementation support \"sticky\" flag.\n// If they do not support sticky then both this.match() and this.test() method\n// must get the match and check the index of the match.\n// If sticky is supported and set, this method will use it.\n// Otherwise it will check that global is set, and fall back to the slower method.\nInputScanner.prototype.__match = function(pattern, index) {\n  pattern.lastIndex = index;\n  var pattern_match = pattern.exec(this.__input);\n\n  if (pattern_match && !(regexp_has_sticky && pattern.sticky)) {\n    if (pattern_match.index !== index) {\n      pattern_match = null;\n    }\n  }\n\n  return pattern_match;\n};\n\nInputScanner.prototype.test = function(pattern, index) {\n  index = index || 0;\n  index += this.__position;\n\n  if (index >= 0 && index < this.__input_length) {\n    return !!this.__match(pattern, index);\n  } else {\n    return false;\n  }\n};\n\nInputScanner.prototype.testChar = function(pattern, index) {\n  // test one character regex match\n  var val = this.peek(index);\n  pattern.lastIndex = 0;\n  return val !== null && pattern.test(val);\n};\n\nInputScanner.prototype.match = function(pattern) {\n  var pattern_match = this.__match(pattern, this.__position);\n  if (pattern_match) {\n    this.__position += pattern_match[0].length;\n  } else {\n    pattern_match = null;\n  }\n  return pattern_match;\n};\n\nInputScanner.prototype.read = function(starting_pattern, until_pattern, until_after) {\n  var val = '';\n  var match;\n  if (starting_pattern) {\n    match = this.match(starting_pattern);\n    if (match) {\n      val += match[0];\n    }\n  }\n  if (until_pattern && (match || !starting_pattern)) {\n    val += this.readUntil(until_pattern, until_after);\n  }\n  return val;\n};\n\nInputScanner.prototype.readUntil = function(pattern, until_after) {\n  var val = '';\n  var match_index = this.__position;\n  pattern.lastIndex = this.__position;\n  var pattern_match = pattern.exec(this.__input);\n  if (pattern_match) {\n    match_index = pattern_match.index;\n    if (until_after) {\n      match_index += pattern_match[0].length;\n    }\n  } else {\n    match_index = this.__input_length;\n  }\n\n  val = this.__input.substring(this.__position, match_index);\n  this.__position = match_index;\n  return val;\n};\n\nInputScanner.prototype.readUntilAfter = function(pattern) {\n  return this.readUntil(pattern, true);\n};\n\nInputScanner.prototype.get_regexp = function(pattern, match_from) {\n  var result = null;\n  var flags = 'g';\n  if (match_from && regexp_has_sticky) {\n    flags = 'y';\n  }\n  // strings are converted to regexp\n  if (typeof pattern === \"string\" && pattern !== '') {\n    // result = new RegExp(pattern.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), flags);\n    result = new RegExp(pattern, flags);\n  } else if (pattern) {\n    result = new RegExp(pattern.source, flags);\n  }\n  return result;\n};\n\nInputScanner.prototype.get_literal_regexp = function(literal_string) {\n  return RegExp(literal_string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'));\n};\n\n/* css beautifier legacy helpers */\nInputScanner.prototype.peekUntilAfter = function(pattern) {\n  var start = this.__position;\n  var val = this.readUntilAfter(pattern);\n  this.__position = start;\n  return val;\n};\n\nInputScanner.prototype.lookBack = function(testVal) {\n  var start = this.__position - 1;\n  return start >= testVal.length && this.__input.substring(start - testVal.length, start)\n    .toLowerCase() === testVal;\n};\n\nmodule.exports.InputScanner = InputScanner;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nfunction TokenStream(parent_token) {\n  // private\n  this.__tokens = [];\n  this.__tokens_length = this.__tokens.length;\n  this.__position = 0;\n  this.__parent_token = parent_token;\n}\n\nTokenStream.prototype.restart = function() {\n  this.__position = 0;\n};\n\nTokenStream.prototype.isEmpty = function() {\n  return this.__tokens_length === 0;\n};\n\nTokenStream.prototype.hasNext = function() {\n  return this.__position < this.__tokens_length;\n};\n\nTokenStream.prototype.next = function() {\n  var val = null;\n  if (this.hasNext()) {\n    val = this.__tokens[this.__position];\n    this.__position += 1;\n  }\n  return val;\n};\n\nTokenStream.prototype.peek = function(index) {\n  var val = null;\n  index = index || 0;\n  index += this.__position;\n  if (index >= 0 && index < this.__tokens_length) {\n    val = this.__tokens[index];\n  }\n  return val;\n};\n\nTokenStream.prototype.add = function(token) {\n  if (this.__parent_token) {\n    token.parent = this.__parent_token;\n  }\n  this.__tokens.push(token);\n  this.__tokens_length += 1;\n};\n\nmodule.exports.TokenStream = TokenStream;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nfunction Pattern(input_scanner, parent) {\n  this._input = input_scanner;\n  this._starting_pattern = null;\n  this._match_pattern = null;\n  this._until_pattern = null;\n  this._until_after = false;\n\n  if (parent) {\n    this._starting_pattern = this._input.get_regexp(parent._starting_pattern, true);\n    this._match_pattern = this._input.get_regexp(parent._match_pattern, true);\n    this._until_pattern = this._input.get_regexp(parent._until_pattern);\n    this._until_after = parent._until_after;\n  }\n}\n\nPattern.prototype.read = function() {\n  var result = this._input.read(this._starting_pattern);\n  if (!this._starting_pattern || result) {\n    result += this._input.read(this._match_pattern, this._until_pattern, this._until_after);\n  }\n  return result;\n};\n\nPattern.prototype.read_match = function() {\n  return this._input.match(this._match_pattern);\n};\n\nPattern.prototype.until_after = function(pattern) {\n  var result = this._create();\n  result._until_after = true;\n  result._until_pattern = this._input.get_regexp(pattern);\n  result._update();\n  return result;\n};\n\nPattern.prototype.until = function(pattern) {\n  var result = this._create();\n  result._until_after = false;\n  result._until_pattern = this._input.get_regexp(pattern);\n  result._update();\n  return result;\n};\n\nPattern.prototype.starting_with = function(pattern) {\n  var result = this._create();\n  result._starting_pattern = this._input.get_regexp(pattern, true);\n  result._update();\n  return result;\n};\n\nPattern.prototype.matching = function(pattern) {\n  var result = this._create();\n  result._match_pattern = this._input.get_regexp(pattern, true);\n  result._update();\n  return result;\n};\n\nPattern.prototype._create = function() {\n  return new Pattern(this._input, this);\n};\n\nPattern.prototype._update = function() {};\n\nmodule.exports.Pattern = Pattern;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Pattern = require('../core/pattern').Pattern;\n\nfunction WhitespacePattern(input_scanner, parent) {\n  Pattern.call(this, input_scanner, parent);\n  if (parent) {\n    this._line_regexp = this._input.get_regexp(parent._line_regexp);\n  } else {\n    this.__set_whitespace_patterns('', '');\n  }\n\n  this.newline_count = 0;\n  this.whitespace_before_token = '';\n}\nWhitespacePattern.prototype = new Pattern();\n\nWhitespacePattern.prototype.__set_whitespace_patterns = function(whitespace_chars, newline_chars) {\n  whitespace_chars += '\\\\t ';\n  newline_chars += '\\\\n\\\\r';\n\n  this._match_pattern = this._input.get_regexp(\n    '[' + whitespace_chars + newline_chars + ']+', true);\n  this._newline_regexp = this._input.get_regexp(\n    '\\\\r\\\\n|[' + newline_chars + ']');\n};\n\nWhitespacePattern.prototype.read = function() {\n  this.newline_count = 0;\n  this.whitespace_before_token = '';\n\n  var resulting_string = this._input.read(this._match_pattern);\n  if (resulting_string === ' ') {\n    this.whitespace_before_token = ' ';\n  } else if (resulting_string) {\n    var matches = this.__split(this._newline_regexp, resulting_string);\n    this.newline_count = matches.length - 1;\n    this.whitespace_before_token = matches[this.newline_count];\n  }\n\n  return resulting_string;\n};\n\nWhitespacePattern.prototype.matching = function(whitespace_chars, newline_chars) {\n  var result = this._create();\n  result.__set_whitespace_patterns(whitespace_chars, newline_chars);\n  result._update();\n  return result;\n};\n\nWhitespacePattern.prototype._create = function() {\n  return new WhitespacePattern(this._input, this);\n};\n\nWhitespacePattern.prototype.__split = function(regexp, input_string) {\n  regexp.lastIndex = 0;\n  var start_index = 0;\n  var result = [];\n  var next_match = regexp.exec(input_string);\n  while (next_match) {\n    result.push(input_string.substring(start_index, next_match.index));\n    start_index = next_match.index + next_match[0].length;\n    next_match = regexp.exec(input_string);\n  }\n\n  if (start_index < input_string.length) {\n    result.push(input_string.substring(start_index, input_string.length));\n  } else {\n    result.push('');\n  }\n\n  return result;\n};\n\n\n\nmodule.exports.WhitespacePattern = WhitespacePattern;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar InputScanner = require('../core/inputscanner').InputScanner;\nvar Token = require('../core/token').Token;\nvar TokenStream = require('../core/tokenstream').TokenStream;\nvar WhitespacePattern = require('./whitespacepattern').WhitespacePattern;\n\nvar TOKEN = {\n  START: 'TK_START',\n  RAW: 'TK_RAW',\n  EOF: 'TK_EOF'\n};\n\nvar Tokenizer = function(input_string, options) {\n  this._input = new InputScanner(input_string);\n  this._options = options || {};\n  this.__tokens = null;\n\n  this._patterns = {};\n  this._patterns.whitespace = new WhitespacePattern(this._input);\n};\n\nTokenizer.prototype.tokenize = function() {\n  this._input.restart();\n  this.__tokens = new TokenStream();\n\n  this._reset();\n\n  var current;\n  var previous = new Token(TOKEN.START, '');\n  var open_token = null;\n  var open_stack = [];\n  var comments = new TokenStream();\n\n  while (previous.type !== TOKEN.EOF) {\n    current = this._get_next_token(previous, open_token);\n    while (this._is_comment(current)) {\n      comments.add(current);\n      current = this._get_next_token(previous, open_token);\n    }\n\n    if (!comments.isEmpty()) {\n      current.comments_before = comments;\n      comments = new TokenStream();\n    }\n\n    current.parent = open_token;\n\n    if (this._is_opening(current)) {\n      open_stack.push(open_token);\n      open_token = current;\n    } else if (open_token && this._is_closing(current, open_token)) {\n      current.opened = open_token;\n      open_token.closed = current;\n      open_token = open_stack.pop();\n      current.parent = open_token;\n    }\n\n    current.previous = previous;\n    previous.next = current;\n\n    this.__tokens.add(current);\n    previous = current;\n  }\n\n  return this.__tokens;\n};\n\n\nTokenizer.prototype._is_first_token = function() {\n  return this.__tokens.isEmpty();\n};\n\nTokenizer.prototype._reset = function() {};\n\nTokenizer.prototype._get_next_token = function(previous_token, open_token) { // jshint unused:false\n  this._readWhitespace();\n  var resulting_string = this._input.read(/.+/g);\n  if (resulting_string) {\n    return this._create_token(TOKEN.RAW, resulting_string);\n  } else {\n    return this._create_token(TOKEN.EOF, '');\n  }\n};\n\nTokenizer.prototype._is_comment = function(current_token) { // jshint unused:false\n  return false;\n};\n\nTokenizer.prototype._is_opening = function(current_token) { // jshint unused:false\n  return false;\n};\n\nTokenizer.prototype._is_closing = function(current_token, open_token) { // jshint unused:false\n  return false;\n};\n\nTokenizer.prototype._create_token = function(type, text) {\n  var token = new Token(type, text,\n    this._patterns.whitespace.newline_count,\n    this._patterns.whitespace.whitespace_before_token);\n  return token;\n};\n\nTokenizer.prototype._readWhitespace = function() {\n  return this._patterns.whitespace.read();\n};\n\n\n\nmodule.exports.Tokenizer = Tokenizer;\nmodule.exports.TOKEN = TOKEN;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nfunction Directives(start_block_pattern, end_block_pattern) {\n  start_block_pattern = typeof start_block_pattern === 'string' ? start_block_pattern : start_block_pattern.source;\n  end_block_pattern = typeof end_block_pattern === 'string' ? end_block_pattern : end_block_pattern.source;\n  this.__directives_block_pattern = new RegExp(start_block_pattern + / beautify( \\w+[:]\\w+)+ /.source + end_block_pattern, 'g');\n  this.__directive_pattern = / (\\w+)[:](\\w+)/g;\n\n  this.__directives_end_ignore_pattern = new RegExp(start_block_pattern + /\\sbeautify\\signore:end\\s/.source + end_block_pattern, 'g');\n}\n\nDirectives.prototype.get_directives = function(text) {\n  if (!text.match(this.__directives_block_pattern)) {\n    return null;\n  }\n\n  var directives = {};\n  this.__directive_pattern.lastIndex = 0;\n  var directive_match = this.__directive_pattern.exec(text);\n\n  while (directive_match) {\n    directives[directive_match[1]] = directive_match[2];\n    directive_match = this.__directive_pattern.exec(text);\n  }\n\n  return directives;\n};\n\nDirectives.prototype.readIgnored = function(input) {\n  return input.readUntilAfter(this.__directives_end_ignore_pattern);\n};\n\n\nmodule.exports.Directives = Directives;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Pattern = require('./pattern').Pattern;\n\n\nvar template_names = {\n  django: false,\n  erb: false,\n  handlebars: false,\n  php: false,\n  smarty: false\n};\n\n// This lets templates appear anywhere we would do a readUntil\n// The cost is higher but it is pay to play.\nfunction TemplatablePattern(input_scanner, parent) {\n  Pattern.call(this, input_scanner, parent);\n  this.__template_pattern = null;\n  this._disabled = Object.assign({}, template_names);\n  this._excluded = Object.assign({}, template_names);\n\n  if (parent) {\n    this.__template_pattern = this._input.get_regexp(parent.__template_pattern);\n    this._excluded = Object.assign(this._excluded, parent._excluded);\n    this._disabled = Object.assign(this._disabled, parent._disabled);\n  }\n  var pattern = new Pattern(input_scanner);\n  this.__patterns = {\n    handlebars_comment: pattern.starting_with(/{{!--/).until_after(/--}}/),\n    handlebars_unescaped: pattern.starting_with(/{{{/).until_after(/}}}/),\n    handlebars: pattern.starting_with(/{{/).until_after(/}}/),\n    php: pattern.starting_with(/<\\?(?:[= ]|php)/).until_after(/\\?>/),\n    erb: pattern.starting_with(/<%[^%]/).until_after(/[^%]%>/),\n    // django coflicts with handlebars a bit.\n    django: pattern.starting_with(/{%/).until_after(/%}/),\n    django_value: pattern.starting_with(/{{/).until_after(/}}/),\n    django_comment: pattern.starting_with(/{#/).until_after(/#}/),\n    smarty: pattern.starting_with(/{(?=[^}{\\s\\n])/).until_after(/[^\\s\\n]}/),\n    smarty_comment: pattern.starting_with(/{\\*/).until_after(/\\*}/),\n    smarty_literal: pattern.starting_with(/{literal}/).until_after(/{\\/literal}/)\n  };\n}\nTemplatablePattern.prototype = new Pattern();\n\nTemplatablePattern.prototype._create = function() {\n  return new TemplatablePattern(this._input, this);\n};\n\nTemplatablePattern.prototype._update = function() {\n  this.__set_templated_pattern();\n};\n\nTemplatablePattern.prototype.disable = function(language) {\n  var result = this._create();\n  result._disabled[language] = true;\n  result._update();\n  return result;\n};\n\nTemplatablePattern.prototype.read_options = function(options) {\n  var result = this._create();\n  for (var language in template_names) {\n    result._disabled[language] = options.templating.indexOf(language) === -1;\n  }\n  result._update();\n  return result;\n};\n\nTemplatablePattern.prototype.exclude = function(language) {\n  var result = this._create();\n  result._excluded[language] = true;\n  result._update();\n  return result;\n};\n\nTemplatablePattern.prototype.read = function() {\n  var result = '';\n  if (this._match_pattern) {\n    result = this._input.read(this._starting_pattern);\n  } else {\n    result = this._input.read(this._starting_pattern, this.__template_pattern);\n  }\n  var next = this._read_template();\n  while (next) {\n    if (this._match_pattern) {\n      next += this._input.read(this._match_pattern);\n    } else {\n      next += this._input.readUntil(this.__template_pattern);\n    }\n    result += next;\n    next = this._read_template();\n  }\n\n  if (this._until_after) {\n    result += this._input.readUntilAfter(this._until_pattern);\n  }\n  return result;\n};\n\nTemplatablePattern.prototype.__set_templated_pattern = function() {\n  var items = [];\n\n  if (!this._disabled.php) {\n    items.push(this.__patterns.php._starting_pattern.source);\n  }\n  if (!this._disabled.handlebars) {\n    items.push(this.__patterns.handlebars._starting_pattern.source);\n  }\n  if (!this._disabled.erb) {\n    items.push(this.__patterns.erb._starting_pattern.source);\n  }\n  if (!this._disabled.django) {\n    items.push(this.__patterns.django._starting_pattern.source);\n    // The starting pattern for django is more complex because it has different\n    // patterns for value, comment, and other sections\n    items.push(this.__patterns.django_value._starting_pattern.source);\n    items.push(this.__patterns.django_comment._starting_pattern.source);\n  }\n  if (!this._disabled.smarty) {\n    items.push(this.__patterns.smarty._starting_pattern.source);\n  }\n\n  if (this._until_pattern) {\n    items.push(this._until_pattern.source);\n  }\n  this.__template_pattern = this._input.get_regexp('(?:' + items.join('|') + ')');\n};\n\nTemplatablePattern.prototype._read_template = function() {\n  var resulting_string = '';\n  var c = this._input.peek();\n  if (c === '<') {\n    var peek1 = this._input.peek(1);\n    //if we're in a comment, do something special\n    // We treat all comments as literals, even more than preformatted tags\n    // we just look for the appropriate close tag\n    if (!this._disabled.php && !this._excluded.php && peek1 === '?') {\n      resulting_string = resulting_string ||\n        this.__patterns.php.read();\n    }\n    if (!this._disabled.erb && !this._excluded.erb && peek1 === '%') {\n      resulting_string = resulting_string ||\n        this.__patterns.erb.read();\n    }\n  } else if (c === '{') {\n    if (!this._disabled.handlebars && !this._excluded.handlebars) {\n      resulting_string = resulting_string ||\n        this.__patterns.handlebars_comment.read();\n      resulting_string = resulting_string ||\n        this.__patterns.handlebars_unescaped.read();\n      resulting_string = resulting_string ||\n        this.__patterns.handlebars.read();\n    }\n    if (!this._disabled.django) {\n      // django coflicts with handlebars a bit.\n      if (!this._excluded.django && !this._excluded.handlebars) {\n        resulting_string = resulting_string ||\n          this.__patterns.django_value.read();\n      }\n      if (!this._excluded.django) {\n        resulting_string = resulting_string ||\n          this.__patterns.django_comment.read();\n        resulting_string = resulting_string ||\n          this.__patterns.django.read();\n      }\n    }\n    if (!this._disabled.smarty) {\n      // smarty cannot be enabled with django or handlebars enabled\n      if (this._disabled.django && this._disabled.handlebars) {\n        resulting_string = resulting_string ||\n          this.__patterns.smarty_comment.read();\n        resulting_string = resulting_string ||\n          this.__patterns.smarty_literal.read();\n        resulting_string = resulting_string ||\n          this.__patterns.smarty.read();\n      }\n    }\n  }\n  return resulting_string;\n};\n\n\nmodule.exports.TemplatablePattern = TemplatablePattern;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar InputScanner = require('../core/inputscanner').InputScanner;\nvar BaseTokenizer = require('../core/tokenizer').Tokenizer;\nvar BASETOKEN = require('../core/tokenizer').TOKEN;\nvar Directives = require('../core/directives').Directives;\nvar acorn = require('./acorn');\nvar Pattern = require('../core/pattern').Pattern;\nvar TemplatablePattern = require('../core/templatablepattern').TemplatablePattern;\n\n\nfunction in_array(what, arr) {\n  return arr.indexOf(what) !== -1;\n}\n\n\nvar TOKEN = {\n  START_EXPR: 'TK_START_EXPR',\n  END_EXPR: 'TK_END_EXPR',\n  START_BLOCK: 'TK_START_BLOCK',\n  END_BLOCK: 'TK_END_BLOCK',\n  WORD: 'TK_WORD',\n  RESERVED: 'TK_RESERVED',\n  SEMICOLON: 'TK_SEMICOLON',\n  STRING: 'TK_STRING',\n  EQUALS: 'TK_EQUALS',\n  OPERATOR: 'TK_OPERATOR',\n  COMMA: 'TK_COMMA',\n  BLOCK_COMMENT: 'TK_BLOCK_COMMENT',\n  COMMENT: 'TK_COMMENT',\n  DOT: 'TK_DOT',\n  UNKNOWN: 'TK_UNKNOWN',\n  START: BASETOKEN.START,\n  RAW: BASETOKEN.RAW,\n  EOF: BASETOKEN.EOF\n};\n\n\nvar directives_core = new Directives(/\\/\\*/, /\\*\\//);\n\nvar number_pattern = /0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\\d[\\d_]*n|(?:\\.\\d[\\d_]*|\\d[\\d_]*\\.?[\\d_]*)(?:[eE][+-]?[\\d_]+)?/;\n\nvar digit = /[0-9]/;\n\n// Dot \".\" must be distinguished from \"...\" and decimal\nvar dot_pattern = /[^\\d\\.]/;\n\nvar positionable_operators = (\n  \">>> === !== \" +\n  \"<< && >= ** != == <= >> || ?? |> \" +\n  \"< / - + > : & % ? ^ | *\").split(' ');\n\n// IMPORTANT: this must be sorted longest to shortest or tokenizing many not work.\n// Also, you must update possitionable operators separately from punct\nvar punct =\n  \">>>= \" +\n  \"... >>= <<= === >>> !== **= \" +\n  \"=> ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> \" +\n  \"= ! ? > < : / ^ - + * & % ~ |\";\n\npunct = punct.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, \"\\\\$&\");\n// ?. but not if followed by a number \npunct = '\\\\?\\\\.(?!\\\\d) ' + punct;\npunct = punct.replace(/ /g, '|');\n\nvar punct_pattern = new RegExp(punct);\n\n// words which should always start on new line.\nvar line_starters = 'continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',');\nvar reserved_words = line_starters.concat(['do', 'in', 'of', 'else', 'get', 'set', 'new', 'catch', 'finally', 'typeof', 'yield', 'async', 'await', 'from', 'as']);\nvar reserved_word_pattern = new RegExp('^(?:' + reserved_words.join('|') + ')$');\n\n// var template_pattern = /(?:(?:<\\?php|<\\?=)[\\s\\S]*?\\?>)|(?:<%[\\s\\S]*?%>)/g;\n\nvar in_html_comment;\n\nvar Tokenizer = function(input_string, options) {\n  BaseTokenizer.call(this, input_string, options);\n\n  this._patterns.whitespace = this._patterns.whitespace.matching(\n    /\\u00A0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff/.source,\n    /\\u2028\\u2029/.source);\n\n  var pattern_reader = new Pattern(this._input);\n  var templatable = new TemplatablePattern(this._input)\n    .read_options(this._options);\n\n  this.__patterns = {\n    template: templatable,\n    identifier: templatable.starting_with(acorn.identifier).matching(acorn.identifierMatch),\n    number: pattern_reader.matching(number_pattern),\n    punct: pattern_reader.matching(punct_pattern),\n    // comment ends just before nearest linefeed or end of file\n    comment: pattern_reader.starting_with(/\\/\\//).until(/[\\n\\r\\u2028\\u2029]/),\n    //  /* ... */ comment ends with nearest */ or end of file\n    block_comment: pattern_reader.starting_with(/\\/\\*/).until_after(/\\*\\//),\n    html_comment_start: pattern_reader.matching(/<!--/),\n    html_comment_end: pattern_reader.matching(/-->/),\n    include: pattern_reader.starting_with(/#include/).until_after(acorn.lineBreak),\n    shebang: pattern_reader.starting_with(/#!/).until_after(acorn.lineBreak),\n    xml: pattern_reader.matching(/[\\s\\S]*?<(\\/?)([-a-zA-Z:0-9_.]+|{[\\s\\S]+?}|!\\[CDATA\\[[\\s\\S]*?\\]\\]|)(\\s+{[\\s\\S]+?}|\\s+[-a-zA-Z:0-9_.]+|\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{[\\s\\S]+?}))*\\s*(\\/?)\\s*>/),\n    single_quote: templatable.until(/['\\\\\\n\\r\\u2028\\u2029]/),\n    double_quote: templatable.until(/[\"\\\\\\n\\r\\u2028\\u2029]/),\n    template_text: templatable.until(/[`\\\\$]/),\n    template_expression: templatable.until(/[`}\\\\]/)\n  };\n\n};\nTokenizer.prototype = new BaseTokenizer();\n\nTokenizer.prototype._is_comment = function(current_token) {\n  return current_token.type === TOKEN.COMMENT || current_token.type === TOKEN.BLOCK_COMMENT || current_token.type === TOKEN.UNKNOWN;\n};\n\nTokenizer.prototype._is_opening = function(current_token) {\n  return current_token.type === TOKEN.START_BLOCK || current_token.type === TOKEN.START_EXPR;\n};\n\nTokenizer.prototype._is_closing = function(current_token, open_token) {\n  return (current_token.type === TOKEN.END_BLOCK || current_token.type === TOKEN.END_EXPR) &&\n    (open_token && (\n      (current_token.text === ']' && open_token.text === '[') ||\n      (current_token.text === ')' && open_token.text === '(') ||\n      (current_token.text === '}' && open_token.text === '{')));\n};\n\nTokenizer.prototype._reset = function() {\n  in_html_comment = false;\n};\n\nTokenizer.prototype._get_next_token = function(previous_token, open_token) { // jshint unused:false\n  var token = null;\n  this._readWhitespace();\n  var c = this._input.peek();\n\n  if (c === null) {\n    return this._create_token(TOKEN.EOF, '');\n  }\n\n  token = token || this._read_non_javascript(c);\n  token = token || this._read_string(c);\n  token = token || this._read_word(previous_token);\n  token = token || this._read_singles(c);\n  token = token || this._read_comment(c);\n  token = token || this._read_regexp(c, previous_token);\n  token = token || this._read_xml(c, previous_token);\n  token = token || this._read_punctuation();\n  token = token || this._create_token(TOKEN.UNKNOWN, this._input.next());\n\n  return token;\n};\n\nTokenizer.prototype._read_word = function(previous_token) {\n  var resulting_string;\n  resulting_string = this.__patterns.identifier.read();\n  if (resulting_string !== '') {\n    resulting_string = resulting_string.replace(acorn.allLineBreaks, '\\n');\n    if (!(previous_token.type === TOKEN.DOT ||\n        (previous_token.type === TOKEN.RESERVED && (previous_token.text === 'set' || previous_token.text === 'get'))) &&\n      reserved_word_pattern.test(resulting_string)) {\n      if (resulting_string === 'in' || resulting_string === 'of') { // hack for 'in' and 'of' operators\n        return this._create_token(TOKEN.OPERATOR, resulting_string);\n      }\n      return this._create_token(TOKEN.RESERVED, resulting_string);\n    }\n    return this._create_token(TOKEN.WORD, resulting_string);\n  }\n\n  resulting_string = this.__patterns.number.read();\n  if (resulting_string !== '') {\n    return this._create_token(TOKEN.WORD, resulting_string);\n  }\n};\n\nTokenizer.prototype._read_singles = function(c) {\n  var token = null;\n  if (c === '(' || c === '[') {\n    token = this._create_token(TOKEN.START_EXPR, c);\n  } else if (c === ')' || c === ']') {\n    token = this._create_token(TOKEN.END_EXPR, c);\n  } else if (c === '{') {\n    token = this._create_token(TOKEN.START_BLOCK, c);\n  } else if (c === '}') {\n    token = this._create_token(TOKEN.END_BLOCK, c);\n  } else if (c === ';') {\n    token = this._create_token(TOKEN.SEMICOLON, c);\n  } else if (c === '.' && dot_pattern.test(this._input.peek(1))) {\n    token = this._create_token(TOKEN.DOT, c);\n  } else if (c === ',') {\n    token = this._create_token(TOKEN.COMMA, c);\n  }\n\n  if (token) {\n    this._input.next();\n  }\n  return token;\n};\n\nTokenizer.prototype._read_punctuation = function() {\n  var resulting_string = this.__patterns.punct.read();\n\n  if (resulting_string !== '') {\n    if (resulting_string === '=') {\n      return this._create_token(TOKEN.EQUALS, resulting_string);\n    } else if (resulting_string === '?.') {\n      return this._create_token(TOKEN.DOT, resulting_string);\n    } else {\n      return this._create_token(TOKEN.OPERATOR, resulting_string);\n    }\n  }\n};\n\nTokenizer.prototype._read_non_javascript = function(c) {\n  var resulting_string = '';\n\n  if (c === '#') {\n    if (this._is_first_token()) {\n      resulting_string = this.__patterns.shebang.read();\n\n      if (resulting_string) {\n        return this._create_token(TOKEN.UNKNOWN, resulting_string.trim() + '\\n');\n      }\n    }\n\n    // handles extendscript #includes\n    resulting_string = this.__patterns.include.read();\n\n    if (resulting_string) {\n      return this._create_token(TOKEN.UNKNOWN, resulting_string.trim() + '\\n');\n    }\n\n    c = this._input.next();\n\n    // Spidermonkey-specific sharp variables for circular references. Considered obsolete.\n    var sharp = '#';\n    if (this._input.hasNext() && this._input.testChar(digit)) {\n      do {\n        c = this._input.next();\n        sharp += c;\n      } while (this._input.hasNext() && c !== '#' && c !== '=');\n      if (c === '#') {\n        //\n      } else if (this._input.peek() === '[' && this._input.peek(1) === ']') {\n        sharp += '[]';\n        this._input.next();\n        this._input.next();\n      } else if (this._input.peek() === '{' && this._input.peek(1) === '}') {\n        sharp += '{}';\n        this._input.next();\n        this._input.next();\n      }\n      return this._create_token(TOKEN.WORD, sharp);\n    }\n\n    this._input.back();\n\n  } else if (c === '<' && this._is_first_token()) {\n    resulting_string = this.__patterns.html_comment_start.read();\n    if (resulting_string) {\n      while (this._input.hasNext() && !this._input.testChar(acorn.newline)) {\n        resulting_string += this._input.next();\n      }\n      in_html_comment = true;\n      return this._create_token(TOKEN.COMMENT, resulting_string);\n    }\n  } else if (in_html_comment && c === '-') {\n    resulting_string = this.__patterns.html_comment_end.read();\n    if (resulting_string) {\n      in_html_comment = false;\n      return this._create_token(TOKEN.COMMENT, resulting_string);\n    }\n  }\n\n  return null;\n};\n\nTokenizer.prototype._read_comment = function(c) {\n  var token = null;\n  if (c === '/') {\n    var comment = '';\n    if (this._input.peek(1) === '*') {\n      // peek for comment /* ... */\n      comment = this.__patterns.block_comment.read();\n      var directives = directives_core.get_directives(comment);\n      if (directives && directives.ignore === 'start') {\n        comment += directives_core.readIgnored(this._input);\n      }\n      comment = comment.replace(acorn.allLineBreaks, '\\n');\n      token = this._create_token(TOKEN.BLOCK_COMMENT, comment);\n      token.directives = directives;\n    } else if (this._input.peek(1) === '/') {\n      // peek for comment // ...\n      comment = this.__patterns.comment.read();\n      token = this._create_token(TOKEN.COMMENT, comment);\n    }\n  }\n  return token;\n};\n\nTokenizer.prototype._read_string = function(c) {\n  if (c === '`' || c === \"'\" || c === '\"') {\n    var resulting_string = this._input.next();\n    this.has_char_escapes = false;\n\n    if (c === '`') {\n      resulting_string += this._read_string_recursive('`', true, '${');\n    } else {\n      resulting_string += this._read_string_recursive(c);\n    }\n\n    if (this.has_char_escapes && this._options.unescape_strings) {\n      resulting_string = unescape_string(resulting_string);\n    }\n\n    if (this._input.peek() === c) {\n      resulting_string += this._input.next();\n    }\n\n    resulting_string = resulting_string.replace(acorn.allLineBreaks, '\\n');\n\n    return this._create_token(TOKEN.STRING, resulting_string);\n  }\n\n  return null;\n};\n\nTokenizer.prototype._allow_regexp_or_xml = function(previous_token) {\n  // regex and xml can only appear in specific locations during parsing\n  return (previous_token.type === TOKEN.RESERVED && in_array(previous_token.text, ['return', 'case', 'throw', 'else', 'do', 'typeof', 'yield'])) ||\n    (previous_token.type === TOKEN.END_EXPR && previous_token.text === ')' &&\n      previous_token.opened.previous.type === TOKEN.RESERVED && in_array(previous_token.opened.previous.text, ['if', 'while', 'for'])) ||\n    (in_array(previous_token.type, [TOKEN.COMMENT, TOKEN.START_EXPR, TOKEN.START_BLOCK, TOKEN.START,\n      TOKEN.END_BLOCK, TOKEN.OPERATOR, TOKEN.EQUALS, TOKEN.EOF, TOKEN.SEMICOLON, TOKEN.COMMA\n    ]));\n};\n\nTokenizer.prototype._read_regexp = function(c, previous_token) {\n\n  if (c === '/' && this._allow_regexp_or_xml(previous_token)) {\n    // handle regexp\n    //\n    var resulting_string = this._input.next();\n    var esc = false;\n\n    var in_char_class = false;\n    while (this._input.hasNext() &&\n      ((esc || in_char_class || this._input.peek() !== c) &&\n        !this._input.testChar(acorn.newline))) {\n      resulting_string += this._input.peek();\n      if (!esc) {\n        esc = this._input.peek() === '\\\\';\n        if (this._input.peek() === '[') {\n          in_char_class = true;\n        } else if (this._input.peek() === ']') {\n          in_char_class = false;\n        }\n      } else {\n        esc = false;\n      }\n      this._input.next();\n    }\n\n    if (this._input.peek() === c) {\n      resulting_string += this._input.next();\n\n      // regexps may have modifiers /regexp/MOD , so fetch those, too\n      // Only [gim] are valid, but if the user puts in garbage, do what we can to take it.\n      resulting_string += this._input.read(acorn.identifier);\n    }\n    return this._create_token(TOKEN.STRING, resulting_string);\n  }\n  return null;\n};\n\nTokenizer.prototype._read_xml = function(c, previous_token) {\n\n  if (this._options.e4x && c === \"<\" && this._allow_regexp_or_xml(previous_token)) {\n    var xmlStr = '';\n    var match = this.__patterns.xml.read_match();\n    // handle e4x xml literals\n    //\n    if (match) {\n      // Trim root tag to attempt to\n      var rootTag = match[2].replace(/^{\\s+/, '{').replace(/\\s+}$/, '}');\n      var isCurlyRoot = rootTag.indexOf('{') === 0;\n      var depth = 0;\n      while (match) {\n        var isEndTag = !!match[1];\n        var tagName = match[2];\n        var isSingletonTag = (!!match[match.length - 1]) || (tagName.slice(0, 8) === \"![CDATA[\");\n        if (!isSingletonTag &&\n          (tagName === rootTag || (isCurlyRoot && tagName.replace(/^{\\s+/, '{').replace(/\\s+}$/, '}')))) {\n          if (isEndTag) {\n            --depth;\n          } else {\n            ++depth;\n          }\n        }\n        xmlStr += match[0];\n        if (depth <= 0) {\n          break;\n        }\n        match = this.__patterns.xml.read_match();\n      }\n      // if we didn't close correctly, keep unformatted.\n      if (!match) {\n        xmlStr += this._input.match(/[\\s\\S]*/g)[0];\n      }\n      xmlStr = xmlStr.replace(acorn.allLineBreaks, '\\n');\n      return this._create_token(TOKEN.STRING, xmlStr);\n    }\n  }\n\n  return null;\n};\n\nfunction unescape_string(s) {\n  // You think that a regex would work for this\n  // return s.replace(/\\\\x([0-9a-f]{2})/gi, function(match, val) {\n  //         return String.fromCharCode(parseInt(val, 16));\n  //     })\n  // However, dealing with '\\xff', '\\\\xff', '\\\\\\xff' makes this more fun.\n  var out = '',\n    escaped = 0;\n\n  var input_scan = new InputScanner(s);\n  var matched = null;\n\n  while (input_scan.hasNext()) {\n    // Keep any whitespace, non-slash characters\n    // also keep slash pairs.\n    matched = input_scan.match(/([\\s]|[^\\\\]|\\\\\\\\)+/g);\n\n    if (matched) {\n      out += matched[0];\n    }\n\n    if (input_scan.peek() === '\\\\') {\n      input_scan.next();\n      if (input_scan.peek() === 'x') {\n        matched = input_scan.match(/x([0-9A-Fa-f]{2})/g);\n      } else if (input_scan.peek() === 'u') {\n        matched = input_scan.match(/u([0-9A-Fa-f]{4})/g);\n      } else {\n        out += '\\\\';\n        if (input_scan.hasNext()) {\n          out += input_scan.next();\n        }\n        continue;\n      }\n\n      // If there's some error decoding, return the original string\n      if (!matched) {\n        return s;\n      }\n\n      escaped = parseInt(matched[1], 16);\n\n      if (escaped > 0x7e && escaped <= 0xff && matched[0].indexOf('x') === 0) {\n        // we bail out on \\x7f..\\xff,\n        // leaving whole string escaped,\n        // as it's probably completely binary\n        return s;\n      } else if (escaped >= 0x00 && escaped < 0x20) {\n        // leave 0x00...0x1f escaped\n        out += '\\\\' + matched[0];\n        continue;\n      } else if (escaped === 0x22 || escaped === 0x27 || escaped === 0x5c) {\n        // single-quote, apostrophe, backslash - escape these\n        out += '\\\\' + String.fromCharCode(escaped);\n      } else {\n        out += String.fromCharCode(escaped);\n      }\n    }\n  }\n\n  return out;\n}\n\n// handle string\n//\nTokenizer.prototype._read_string_recursive = function(delimiter, allow_unescaped_newlines, start_sub) {\n  var current_char;\n  var pattern;\n  if (delimiter === '\\'') {\n    pattern = this.__patterns.single_quote;\n  } else if (delimiter === '\"') {\n    pattern = this.__patterns.double_quote;\n  } else if (delimiter === '`') {\n    pattern = this.__patterns.template_text;\n  } else if (delimiter === '}') {\n    pattern = this.__patterns.template_expression;\n  }\n\n  var resulting_string = pattern.read();\n  var next = '';\n  while (this._input.hasNext()) {\n    next = this._input.next();\n    if (next === delimiter ||\n      (!allow_unescaped_newlines && acorn.newline.test(next))) {\n      this._input.back();\n      break;\n    } else if (next === '\\\\' && this._input.hasNext()) {\n      current_char = this._input.peek();\n\n      if (current_char === 'x' || current_char === 'u') {\n        this.has_char_escapes = true;\n      } else if (current_char === '\\r' && this._input.peek(1) === '\\n') {\n        this._input.next();\n      }\n      next += this._input.next();\n    } else if (start_sub) {\n      if (start_sub === '${' && next === '$' && this._input.peek() === '{') {\n        next += this._input.next();\n      }\n\n      if (start_sub === next) {\n        if (delimiter === '`') {\n          next += this._read_string_recursive('}', allow_unescaped_newlines, '`');\n        } else {\n          next += this._read_string_recursive('`', allow_unescaped_newlines, '${');\n        }\n        if (this._input.hasNext()) {\n          next += this._input.next();\n        }\n      }\n    }\n    next += pattern.read();\n    resulting_string += next;\n  }\n\n  return resulting_string;\n};\n\nmodule.exports.Tokenizer = Tokenizer;\nmodule.exports.TOKEN = TOKEN;\nmodule.exports.positionable_operators = positionable_operators.slice();\nmodule.exports.line_starters = line_starters.slice();\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Output = require('../core/output').Output;\nvar Token = require('../core/token').Token;\nvar acorn = require('./acorn');\nvar Options = require('./options').Options;\nvar Tokenizer = require('./tokenizer').Tokenizer;\nvar line_starters = require('./tokenizer').line_starters;\nvar positionable_operators = require('./tokenizer').positionable_operators;\nvar TOKEN = require('./tokenizer').TOKEN;\n\n\nfunction in_array(what, arr) {\n  return arr.indexOf(what) !== -1;\n}\n\nfunction ltrim(s) {\n  return s.replace(/^\\s+/g, '');\n}\n\nfunction generateMapFromStrings(list) {\n  var result = {};\n  for (var x = 0; x < list.length; x++) {\n    // make the mapped names underscored instead of dash\n    result[list[x].replace(/-/g, '_')] = list[x];\n  }\n  return result;\n}\n\nfunction reserved_word(token, word) {\n  return token && token.type === TOKEN.RESERVED && token.text === word;\n}\n\nfunction reserved_array(token, words) {\n  return token && token.type === TOKEN.RESERVED && in_array(token.text, words);\n}\n// Unsure of what they mean, but they work. Worth cleaning up in future.\nvar special_words = ['case', 'return', 'do', 'if', 'throw', 'else', 'await', 'break', 'continue', 'async'];\n\nvar validPositionValues = ['before-newline', 'after-newline', 'preserve-newline'];\n\n// Generate map from array\nvar OPERATOR_POSITION = generateMapFromStrings(validPositionValues);\n\nvar OPERATOR_POSITION_BEFORE_OR_PRESERVE = [OPERATOR_POSITION.before_newline, OPERATOR_POSITION.preserve_newline];\n\nvar MODE = {\n  BlockStatement: 'BlockStatement', // 'BLOCK'\n  Statement: 'Statement', // 'STATEMENT'\n  ObjectLiteral: 'ObjectLiteral', // 'OBJECT',\n  ArrayLiteral: 'ArrayLiteral', //'[EXPRESSION]',\n  ForInitializer: 'ForInitializer', //'(FOR-EXPRESSION)',\n  Conditional: 'Conditional', //'(COND-EXPRESSION)',\n  Expression: 'Expression' //'(EXPRESSION)'\n};\n\nfunction remove_redundant_indentation(output, frame) {\n  // This implementation is effective but has some issues:\n  //     - can cause line wrap to happen too soon due to indent removal\n  //           after wrap points are calculated\n  // These issues are minor compared to ugly indentation.\n\n  if (frame.multiline_frame ||\n    frame.mode === MODE.ForInitializer ||\n    frame.mode === MODE.Conditional) {\n    return;\n  }\n\n  // remove one indent from each line inside this section\n  output.remove_indent(frame.start_line_index);\n}\n\n// we could use just string.split, but\n// IE doesn't like returning empty strings\nfunction split_linebreaks(s) {\n  //return s.split(/\\x0d\\x0a|\\x0a/);\n\n  s = s.replace(acorn.allLineBreaks, '\\n');\n  var out = [],\n    idx = s.indexOf(\"\\n\");\n  while (idx !== -1) {\n    out.push(s.substring(0, idx));\n    s = s.substring(idx + 1);\n    idx = s.indexOf(\"\\n\");\n  }\n  if (s.length) {\n    out.push(s);\n  }\n  return out;\n}\n\nfunction is_array(mode) {\n  return mode === MODE.ArrayLiteral;\n}\n\nfunction is_expression(mode) {\n  return in_array(mode, [MODE.Expression, MODE.ForInitializer, MODE.Conditional]);\n}\n\nfunction all_lines_start_with(lines, c) {\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i].trim();\n    if (line.charAt(0) !== c) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction each_line_matches_indent(lines, indent) {\n  var i = 0,\n    len = lines.length,\n    line;\n  for (; i < len; i++) {\n    line = lines[i];\n    // allow empty lines to pass through\n    if (line && line.indexOf(indent) !== 0) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\nfunction Beautifier(source_text, options) {\n  options = options || {};\n  this._source_text = source_text || '';\n\n  this._output = null;\n  this._tokens = null;\n  this._last_last_text = null;\n  this._flags = null;\n  this._previous_flags = null;\n\n  this._flag_store = null;\n  this._options = new Options(options);\n}\n\nBeautifier.prototype.create_flags = function(flags_base, mode) {\n  var next_indent_level = 0;\n  if (flags_base) {\n    next_indent_level = flags_base.indentation_level;\n    if (!this._output.just_added_newline() &&\n      flags_base.line_indent_level > next_indent_level) {\n      next_indent_level = flags_base.line_indent_level;\n    }\n  }\n\n  var next_flags = {\n    mode: mode,\n    parent: flags_base,\n    last_token: flags_base ? flags_base.last_token : new Token(TOKEN.START_BLOCK, ''), // last token text\n    last_word: flags_base ? flags_base.last_word : '', // last TOKEN.WORD passed\n    declaration_statement: false,\n    declaration_assignment: false,\n    multiline_frame: false,\n    inline_frame: false,\n    if_block: false,\n    else_block: false,\n    do_block: false,\n    do_while: false,\n    import_block: false,\n    in_case_statement: false, // switch(..){ INSIDE HERE }\n    in_case: false, // we're on the exact line with \"case 0:\"\n    case_body: false, // the indented case-action block\n    indentation_level: next_indent_level,\n    alignment: 0,\n    line_indent_level: flags_base ? flags_base.line_indent_level : next_indent_level,\n    start_line_index: this._output.get_line_number(),\n    ternary_depth: 0\n  };\n  return next_flags;\n};\n\nBeautifier.prototype._reset = function(source_text) {\n  var baseIndentString = source_text.match(/^[\\t ]*/)[0];\n\n  this._last_last_text = ''; // pre-last token text\n  this._output = new Output(this._options, baseIndentString);\n\n  // If testing the ignore directive, start with output disable set to true\n  this._output.raw = this._options.test_output_raw;\n\n\n  // Stack of parsing/formatting states, including MODE.\n  // We tokenize, parse, and output in an almost purely a forward-only stream of token input\n  // and formatted output.  This makes the beautifier less accurate than full parsers\n  // but also far more tolerant of syntax errors.\n  //\n  // For example, the default mode is MODE.BlockStatement. If we see a '{' we push a new frame of type\n  // MODE.BlockStatement on the the stack, even though it could be object literal.  If we later\n  // encounter a \":\", we'll switch to to MODE.ObjectLiteral.  If we then see a \";\",\n  // most full parsers would die, but the beautifier gracefully falls back to\n  // MODE.BlockStatement and continues on.\n  this._flag_store = [];\n  this.set_mode(MODE.BlockStatement);\n  var tokenizer = new Tokenizer(source_text, this._options);\n  this._tokens = tokenizer.tokenize();\n  return source_text;\n};\n\nBeautifier.prototype.beautify = function() {\n  // if disabled, return the input unchanged.\n  if (this._options.disabled) {\n    return this._source_text;\n  }\n\n  var sweet_code;\n  var source_text = this._reset(this._source_text);\n\n  var eol = this._options.eol;\n  if (this._options.eol === 'auto') {\n    eol = '\\n';\n    if (source_text && acorn.lineBreak.test(source_text || '')) {\n      eol = source_text.match(acorn.lineBreak)[0];\n    }\n  }\n\n  var current_token = this._tokens.next();\n  while (current_token) {\n    this.handle_token(current_token);\n\n    this._last_last_text = this._flags.last_token.text;\n    this._flags.last_token = current_token;\n\n    current_token = this._tokens.next();\n  }\n\n  sweet_code = this._output.get_code(eol);\n\n  return sweet_code;\n};\n\nBeautifier.prototype.handle_token = function(current_token, preserve_statement_flags) {\n  if (current_token.type === TOKEN.START_EXPR) {\n    this.handle_start_expr(current_token);\n  } else if (current_token.type === TOKEN.END_EXPR) {\n    this.handle_end_expr(current_token);\n  } else if (current_token.type === TOKEN.START_BLOCK) {\n    this.handle_start_block(current_token);\n  } else if (current_token.type === TOKEN.END_BLOCK) {\n    this.handle_end_block(current_token);\n  } else if (current_token.type === TOKEN.WORD) {\n    this.handle_word(current_token);\n  } else if (current_token.type === TOKEN.RESERVED) {\n    this.handle_word(current_token);\n  } else if (current_token.type === TOKEN.SEMICOLON) {\n    this.handle_semicolon(current_token);\n  } else if (current_token.type === TOKEN.STRING) {\n    this.handle_string(current_token);\n  } else if (current_token.type === TOKEN.EQUALS) {\n    this.handle_equals(current_token);\n  } else if (current_token.type === TOKEN.OPERATOR) {\n    this.handle_operator(current_token);\n  } else if (current_token.type === TOKEN.COMMA) {\n    this.handle_comma(current_token);\n  } else if (current_token.type === TOKEN.BLOCK_COMMENT) {\n    this.handle_block_comment(current_token, preserve_statement_flags);\n  } else if (current_token.type === TOKEN.COMMENT) {\n    this.handle_comment(current_token, preserve_statement_flags);\n  } else if (current_token.type === TOKEN.DOT) {\n    this.handle_dot(current_token);\n  } else if (current_token.type === TOKEN.EOF) {\n    this.handle_eof(current_token);\n  } else if (current_token.type === TOKEN.UNKNOWN) {\n    this.handle_unknown(current_token, preserve_statement_flags);\n  } else {\n    this.handle_unknown(current_token, preserve_statement_flags);\n  }\n};\n\nBeautifier.prototype.handle_whitespace_and_comments = function(current_token, preserve_statement_flags) {\n  var newlines = current_token.newlines;\n  var keep_whitespace = this._options.keep_array_indentation && is_array(this._flags.mode);\n\n  if (current_token.comments_before) {\n    var comment_token = current_token.comments_before.next();\n    while (comment_token) {\n      // The cleanest handling of inline comments is to treat them as though they aren't there.\n      // Just continue formatting and the behavior should be logical.\n      // Also ignore unknown tokens.  Again, this should result in better behavior.\n      this.handle_whitespace_and_comments(comment_token, preserve_statement_flags);\n      this.handle_token(comment_token, preserve_statement_flags);\n      comment_token = current_token.comments_before.next();\n    }\n  }\n\n  if (keep_whitespace) {\n    for (var i = 0; i < newlines; i += 1) {\n      this.print_newline(i > 0, preserve_statement_flags);\n    }\n  } else {\n    if (this._options.max_preserve_newlines && newlines > this._options.max_preserve_newlines) {\n      newlines = this._options.max_preserve_newlines;\n    }\n\n    if (this._options.preserve_newlines) {\n      if (newlines > 1) {\n        this.print_newline(false, preserve_statement_flags);\n        for (var j = 1; j < newlines; j += 1) {\n          this.print_newline(true, preserve_statement_flags);\n        }\n      }\n    }\n  }\n\n};\n\nvar newline_restricted_tokens = ['async', 'break', 'continue', 'return', 'throw', 'yield'];\n\nBeautifier.prototype.allow_wrap_or_preserved_newline = function(current_token, force_linewrap) {\n  force_linewrap = (force_linewrap === undefined) ? false : force_linewrap;\n\n  // Never wrap the first token on a line\n  if (this._output.just_added_newline()) {\n    return;\n  }\n\n  var shouldPreserveOrForce = (this._options.preserve_newlines && current_token.newlines) || force_linewrap;\n  var operatorLogicApplies = in_array(this._flags.last_token.text, positionable_operators) ||\n    in_array(current_token.text, positionable_operators);\n\n  if (operatorLogicApplies) {\n    var shouldPrintOperatorNewline = (\n        in_array(this._flags.last_token.text, positionable_operators) &&\n        in_array(this._options.operator_position, OPERATOR_POSITION_BEFORE_OR_PRESERVE)\n      ) ||\n      in_array(current_token.text, positionable_operators);\n    shouldPreserveOrForce = shouldPreserveOrForce && shouldPrintOperatorNewline;\n  }\n\n  if (shouldPreserveOrForce) {\n    this.print_newline(false, true);\n  } else if (this._options.wrap_line_length) {\n    if (reserved_array(this._flags.last_token, newline_restricted_tokens)) {\n      // These tokens should never have a newline inserted\n      // between them and the following expression.\n      return;\n    }\n    this._output.set_wrap_point();\n  }\n};\n\nBeautifier.prototype.print_newline = function(force_newline, preserve_statement_flags) {\n  if (!preserve_statement_flags) {\n    if (this._flags.last_token.text !== ';' && this._flags.last_token.text !== ',' && this._flags.last_token.text !== '=' && (this._flags.last_token.type !== TOKEN.OPERATOR || this._flags.last_token.text === '--' || this._flags.last_token.text === '++')) {\n      var next_token = this._tokens.peek();\n      while (this._flags.mode === MODE.Statement &&\n        !(this._flags.if_block && reserved_word(next_token, 'else')) &&\n        !this._flags.do_block) {\n        this.restore_mode();\n      }\n    }\n  }\n\n  if (this._output.add_new_line(force_newline)) {\n    this._flags.multiline_frame = true;\n  }\n};\n\nBeautifier.prototype.print_token_line_indentation = function(current_token) {\n  if (this._output.just_added_newline()) {\n    if (this._options.keep_array_indentation &&\n      current_token.newlines &&\n      (current_token.text === '[' || is_array(this._flags.mode))) {\n      this._output.current_line.set_indent(-1);\n      this._output.current_line.push(current_token.whitespace_before);\n      this._output.space_before_token = false;\n    } else if (this._output.set_indent(this._flags.indentation_level, this._flags.alignment)) {\n      this._flags.line_indent_level = this._flags.indentation_level;\n    }\n  }\n};\n\nBeautifier.prototype.print_token = function(current_token) {\n  if (this._output.raw) {\n    this._output.add_raw_token(current_token);\n    return;\n  }\n\n  if (this._options.comma_first && current_token.previous && current_token.previous.type === TOKEN.COMMA &&\n    this._output.just_added_newline()) {\n    if (this._output.previous_line.last() === ',') {\n      var popped = this._output.previous_line.pop();\n      // if the comma was already at the start of the line,\n      // pull back onto that line and reprint the indentation\n      if (this._output.previous_line.is_empty()) {\n        this._output.previous_line.push(popped);\n        this._output.trim(true);\n        this._output.current_line.pop();\n        this._output.trim();\n      }\n\n      // add the comma in front of the next token\n      this.print_token_line_indentation(current_token);\n      this._output.add_token(',');\n      this._output.space_before_token = true;\n    }\n  }\n\n  this.print_token_line_indentation(current_token);\n  this._output.non_breaking_space = true;\n  this._output.add_token(current_token.text);\n  if (this._output.previous_token_wrapped) {\n    this._flags.multiline_frame = true;\n  }\n};\n\nBeautifier.prototype.indent = function() {\n  this._flags.indentation_level += 1;\n  this._output.set_indent(this._flags.indentation_level, this._flags.alignment);\n};\n\nBeautifier.prototype.deindent = function() {\n  if (this._flags.indentation_level > 0 &&\n    ((!this._flags.parent) || this._flags.indentation_level > this._flags.parent.indentation_level)) {\n    this._flags.indentation_level -= 1;\n    this._output.set_indent(this._flags.indentation_level, this._flags.alignment);\n  }\n};\n\nBeautifier.prototype.set_mode = function(mode) {\n  if (this._flags) {\n    this._flag_store.push(this._flags);\n    this._previous_flags = this._flags;\n  } else {\n    this._previous_flags = this.create_flags(null, mode);\n  }\n\n  this._flags = this.create_flags(this._previous_flags, mode);\n  this._output.set_indent(this._flags.indentation_level, this._flags.alignment);\n};\n\n\nBeautifier.prototype.restore_mode = function() {\n  if (this._flag_store.length > 0) {\n    this._previous_flags = this._flags;\n    this._flags = this._flag_store.pop();\n    if (this._previous_flags.mode === MODE.Statement) {\n      remove_redundant_indentation(this._output, this._previous_flags);\n    }\n    this._output.set_indent(this._flags.indentation_level, this._flags.alignment);\n  }\n};\n\nBeautifier.prototype.start_of_object_property = function() {\n  return this._flags.parent.mode === MODE.ObjectLiteral && this._flags.mode === MODE.Statement && (\n    (this._flags.last_token.text === ':' && this._flags.ternary_depth === 0) || (reserved_array(this._flags.last_token, ['get', 'set'])));\n};\n\nBeautifier.prototype.start_of_statement = function(current_token) {\n  var start = false;\n  start = start || reserved_array(this._flags.last_token, ['var', 'let', 'const']) && current_token.type === TOKEN.WORD;\n  start = start || reserved_word(this._flags.last_token, 'do');\n  start = start || (!(this._flags.parent.mode === MODE.ObjectLiteral && this._flags.mode === MODE.Statement)) && reserved_array(this._flags.last_token, newline_restricted_tokens) && !current_token.newlines;\n  start = start || reserved_word(this._flags.last_token, 'else') &&\n    !(reserved_word(current_token, 'if') && !current_token.comments_before);\n  start = start || (this._flags.last_token.type === TOKEN.END_EXPR && (this._previous_flags.mode === MODE.ForInitializer || this._previous_flags.mode === MODE.Conditional));\n  start = start || (this._flags.last_token.type === TOKEN.WORD && this._flags.mode === MODE.BlockStatement &&\n    !this._flags.in_case &&\n    !(current_token.text === '--' || current_token.text === '++') &&\n    this._last_last_text !== 'function' &&\n    current_token.type !== TOKEN.WORD && current_token.type !== TOKEN.RESERVED);\n  start = start || (this._flags.mode === MODE.ObjectLiteral && (\n    (this._flags.last_token.text === ':' && this._flags.ternary_depth === 0) || reserved_array(this._flags.last_token, ['get', 'set'])));\n\n  if (start) {\n    this.set_mode(MODE.Statement);\n    this.indent();\n\n    this.handle_whitespace_and_comments(current_token, true);\n\n    // Issue #276:\n    // If starting a new statement with [if, for, while, do], push to a new line.\n    // if (a) if (b) if(c) d(); else e(); else f();\n    if (!this.start_of_object_property()) {\n      this.allow_wrap_or_preserved_newline(current_token,\n        reserved_array(current_token, ['do', 'for', 'if', 'while']));\n    }\n    return true;\n  }\n  return false;\n};\n\nBeautifier.prototype.handle_start_expr = function(current_token) {\n  // The conditional starts the statement if appropriate.\n  if (!this.start_of_statement(current_token)) {\n    this.handle_whitespace_and_comments(current_token);\n  }\n\n  var next_mode = MODE.Expression;\n  if (current_token.text === '[') {\n\n    if (this._flags.last_token.type === TOKEN.WORD || this._flags.last_token.text === ')') {\n      // this is array index specifier, break immediately\n      // a[x], fn()[x]\n      if (reserved_array(this._flags.last_token, line_starters)) {\n        this._output.space_before_token = true;\n      }\n      this.print_token(current_token);\n      this.set_mode(next_mode);\n      this.indent();\n      if (this._options.space_in_paren) {\n        this._output.space_before_token = true;\n      }\n      return;\n    }\n\n    next_mode = MODE.ArrayLiteral;\n    if (is_array(this._flags.mode)) {\n      if (this._flags.last_token.text === '[' ||\n        (this._flags.last_token.text === ',' && (this._last_last_text === ']' || this._last_last_text === '}'))) {\n        // ], [ goes to new line\n        // }, [ goes to new line\n        if (!this._options.keep_array_indentation) {\n          this.print_newline();\n        }\n      }\n    }\n\n    if (!in_array(this._flags.last_token.type, [TOKEN.START_EXPR, TOKEN.END_EXPR, TOKEN.WORD, TOKEN.OPERATOR, TOKEN.DOT])) {\n      this._output.space_before_token = true;\n    }\n  } else {\n    if (this._flags.last_token.type === TOKEN.RESERVED) {\n      if (this._flags.last_token.text === 'for') {\n        this._output.space_before_token = this._options.space_before_conditional;\n        next_mode = MODE.ForInitializer;\n      } else if (in_array(this._flags.last_token.text, ['if', 'while', 'switch'])) {\n        this._output.space_before_token = this._options.space_before_conditional;\n        next_mode = MODE.Conditional;\n      } else if (in_array(this._flags.last_word, ['await', 'async'])) {\n        // Should be a space between await and an IIFE, or async and an arrow function\n        this._output.space_before_token = true;\n      } else if (this._flags.last_token.text === 'import' && current_token.whitespace_before === '') {\n        this._output.space_before_token = false;\n      } else if (in_array(this._flags.last_token.text, line_starters) || this._flags.last_token.text === 'catch') {\n        this._output.space_before_token = true;\n      }\n    } else if (this._flags.last_token.type === TOKEN.EQUALS || this._flags.last_token.type === TOKEN.OPERATOR) {\n      // Support of this kind of newline preservation.\n      // a = (b &&\n      //     (c || d));\n      if (!this.start_of_object_property()) {\n        this.allow_wrap_or_preserved_newline(current_token);\n      }\n    } else if (this._flags.last_token.type === TOKEN.WORD) {\n      this._output.space_before_token = false;\n\n      // function name() vs function name ()\n      // function* name() vs function* name ()\n      // async name() vs async name ()\n      // In ES6, you can also define the method properties of an object\n      // var obj = {a: function() {}}\n      // It can be abbreviated\n      // var obj = {a() {}}\n      // var obj = { a() {}} vs var obj = { a () {}}\n      // var obj = { * a() {}} vs var obj = { * a () {}}\n      var peek_back_two = this._tokens.peek(-3);\n      if (this._options.space_after_named_function && peek_back_two) {\n        // peek starts at next character so -1 is current token\n        var peek_back_three = this._tokens.peek(-4);\n        if (reserved_array(peek_back_two, ['async', 'function']) ||\n          (peek_back_two.text === '*' && reserved_array(peek_back_three, ['async', 'function']))) {\n          this._output.space_before_token = true;\n        } else if (this._flags.mode === MODE.ObjectLiteral) {\n          if ((peek_back_two.text === '{' || peek_back_two.text === ',') ||\n            (peek_back_two.text === '*' && (peek_back_three.text === '{' || peek_back_three.text === ','))) {\n            this._output.space_before_token = true;\n          }\n        }\n      }\n    } else {\n      // Support preserving wrapped arrow function expressions\n      // a.b('c',\n      //     () => d.e\n      // )\n      this.allow_wrap_or_preserved_newline(current_token);\n    }\n\n    // function() vs function ()\n    // yield*() vs yield* ()\n    // function*() vs function* ()\n    if ((this._flags.last_token.type === TOKEN.RESERVED && (this._flags.last_word === 'function' || this._flags.last_word === 'typeof')) ||\n      (this._flags.last_token.text === '*' &&\n        (in_array(this._last_last_text, ['function', 'yield']) ||\n          (this._flags.mode === MODE.ObjectLiteral && in_array(this._last_last_text, ['{', ',']))))) {\n      this._output.space_before_token = this._options.space_after_anon_function;\n    }\n  }\n\n  if (this._flags.last_token.text === ';' || this._flags.last_token.type === TOKEN.START_BLOCK) {\n    this.print_newline();\n  } else if (this._flags.last_token.type === TOKEN.END_EXPR || this._flags.last_token.type === TOKEN.START_EXPR || this._flags.last_token.type === TOKEN.END_BLOCK || this._flags.last_token.text === '.' || this._flags.last_token.type === TOKEN.COMMA) {\n    // do nothing on (( and )( and ][ and ]( and .(\n    // TODO: Consider whether forcing this is required.  Review failing tests when removed.\n    this.allow_wrap_or_preserved_newline(current_token, current_token.newlines);\n  }\n\n  this.print_token(current_token);\n  this.set_mode(next_mode);\n  if (this._options.space_in_paren) {\n    this._output.space_before_token = true;\n  }\n\n  // In all cases, if we newline while inside an expression it should be indented.\n  this.indent();\n};\n\nBeautifier.prototype.handle_end_expr = function(current_token) {\n  // statements inside expressions are not valid syntax, but...\n  // statements must all be closed when their container closes\n  while (this._flags.mode === MODE.Statement) {\n    this.restore_mode();\n  }\n\n  this.handle_whitespace_and_comments(current_token);\n\n  if (this._flags.multiline_frame) {\n    this.allow_wrap_or_preserved_newline(current_token,\n      current_token.text === ']' && is_array(this._flags.mode) && !this._options.keep_array_indentation);\n  }\n\n  if (this._options.space_in_paren) {\n    if (this._flags.last_token.type === TOKEN.START_EXPR && !this._options.space_in_empty_paren) {\n      // () [] no inner space in empty parens like these, ever, ref #320\n      this._output.trim();\n      this._output.space_before_token = false;\n    } else {\n      this._output.space_before_token = true;\n    }\n  }\n  this.deindent();\n  this.print_token(current_token);\n  this.restore_mode();\n\n  remove_redundant_indentation(this._output, this._previous_flags);\n\n  // do {} while () // no statement required after\n  if (this._flags.do_while && this._previous_flags.mode === MODE.Conditional) {\n    this._previous_flags.mode = MODE.Expression;\n    this._flags.do_block = false;\n    this._flags.do_while = false;\n\n  }\n};\n\nBeautifier.prototype.handle_start_block = function(current_token) {\n  this.handle_whitespace_and_comments(current_token);\n\n  // Check if this is should be treated as a ObjectLiteral\n  var next_token = this._tokens.peek();\n  var second_token = this._tokens.peek(1);\n  if (this._flags.last_word === 'switch' && this._flags.last_token.type === TOKEN.END_EXPR) {\n    this.set_mode(MODE.BlockStatement);\n    this._flags.in_case_statement = true;\n  } else if (this._flags.case_body) {\n    this.set_mode(MODE.BlockStatement);\n  } else if (second_token && (\n      (in_array(second_token.text, [':', ',']) && in_array(next_token.type, [TOKEN.STRING, TOKEN.WORD, TOKEN.RESERVED])) ||\n      (in_array(next_token.text, ['get', 'set', '...']) && in_array(second_token.type, [TOKEN.WORD, TOKEN.RESERVED]))\n    )) {\n    // We don't support TypeScript,but we didn't break it for a very long time.\n    // We'll try to keep not breaking it.\n    if (!in_array(this._last_last_text, ['class', 'interface'])) {\n      this.set_mode(MODE.ObjectLiteral);\n    } else {\n      this.set_mode(MODE.BlockStatement);\n    }\n  } else if (this._flags.last_token.type === TOKEN.OPERATOR && this._flags.last_token.text === '=>') {\n    // arrow function: (param1, paramN) => { statements }\n    this.set_mode(MODE.BlockStatement);\n  } else if (in_array(this._flags.last_token.type, [TOKEN.EQUALS, TOKEN.START_EXPR, TOKEN.COMMA, TOKEN.OPERATOR]) ||\n    reserved_array(this._flags.last_token, ['return', 'throw', 'import', 'default'])\n  ) {\n    // Detecting shorthand function syntax is difficult by scanning forward,\n    //     so check the surrounding context.\n    // If the block is being returned, imported, export default, passed as arg,\n    //     assigned with = or assigned in a nested object, treat as an ObjectLiteral.\n    this.set_mode(MODE.ObjectLiteral);\n  } else {\n    this.set_mode(MODE.BlockStatement);\n  }\n\n  var empty_braces = !next_token.comments_before && next_token.text === '}';\n  var empty_anonymous_function = empty_braces && this._flags.last_word === 'function' &&\n    this._flags.last_token.type === TOKEN.END_EXPR;\n\n  if (this._options.brace_preserve_inline) // check for inline, set inline_frame if so\n  {\n    // search forward for a newline wanted inside this block\n    var index = 0;\n    var check_token = null;\n    this._flags.inline_frame = true;\n    do {\n      index += 1;\n      check_token = this._tokens.peek(index - 1);\n      if (check_token.newlines) {\n        this._flags.inline_frame = false;\n        break;\n      }\n    } while (check_token.type !== TOKEN.EOF &&\n      !(check_token.type === TOKEN.END_BLOCK && check_token.opened === current_token));\n  }\n\n  if ((this._options.brace_style === \"expand\" ||\n      (this._options.brace_style === \"none\" && current_token.newlines)) &&\n    !this._flags.inline_frame) {\n    if (this._flags.last_token.type !== TOKEN.OPERATOR &&\n      (empty_anonymous_function ||\n        this._flags.last_token.type === TOKEN.EQUALS ||\n        (reserved_array(this._flags.last_token, special_words) && this._flags.last_token.text !== 'else'))) {\n      this._output.space_before_token = true;\n    } else {\n      this.print_newline(false, true);\n    }\n  } else { // collapse || inline_frame\n    if (is_array(this._previous_flags.mode) && (this._flags.last_token.type === TOKEN.START_EXPR || this._flags.last_token.type === TOKEN.COMMA)) {\n      if (this._flags.last_token.type === TOKEN.COMMA || this._options.space_in_paren) {\n        this._output.space_before_token = true;\n      }\n\n      if (this._flags.last_token.type === TOKEN.COMMA || (this._flags.last_token.type === TOKEN.START_EXPR && this._flags.inline_frame)) {\n        this.allow_wrap_or_preserved_newline(current_token);\n        this._previous_flags.multiline_frame = this._previous_flags.multiline_frame || this._flags.multiline_frame;\n        this._flags.multiline_frame = false;\n      }\n    }\n    if (this._flags.last_token.type !== TOKEN.OPERATOR && this._flags.last_token.type !== TOKEN.START_EXPR) {\n      if (this._flags.last_token.type === TOKEN.START_BLOCK && !this._flags.inline_frame) {\n        this.print_newline();\n      } else {\n        this._output.space_before_token = true;\n      }\n    }\n  }\n  this.print_token(current_token);\n  this.indent();\n\n  // Except for specific cases, open braces are followed by a new line.\n  if (!empty_braces && !(this._options.brace_preserve_inline && this._flags.inline_frame)) {\n    this.print_newline();\n  }\n};\n\nBeautifier.prototype.handle_end_block = function(current_token) {\n  // statements must all be closed when their container closes\n  this.handle_whitespace_and_comments(current_token);\n\n  while (this._flags.mode === MODE.Statement) {\n    this.restore_mode();\n  }\n\n  var empty_braces = this._flags.last_token.type === TOKEN.START_BLOCK;\n\n  if (this._flags.inline_frame && !empty_braces) { // try inline_frame (only set if this._options.braces-preserve-inline) first\n    this._output.space_before_token = true;\n  } else if (this._options.brace_style === \"expand\") {\n    if (!empty_braces) {\n      this.print_newline();\n    }\n  } else {\n    // skip {}\n    if (!empty_braces) {\n      if (is_array(this._flags.mode) && this._options.keep_array_indentation) {\n        // we REALLY need a newline here, but newliner would skip that\n        this._options.keep_array_indentation = false;\n        this.print_newline();\n        this._options.keep_array_indentation = true;\n\n      } else {\n        this.print_newline();\n      }\n    }\n  }\n  this.restore_mode();\n  this.print_token(current_token);\n};\n\nBeautifier.prototype.handle_word = function(current_token) {\n  if (current_token.type === TOKEN.RESERVED) {\n    if (in_array(current_token.text, ['set', 'get']) && this._flags.mode !== MODE.ObjectLiteral) {\n      current_token.type = TOKEN.WORD;\n    } else if (current_token.text === 'import' && this._tokens.peek().text === '(') {\n      current_token.type = TOKEN.WORD;\n    } else if (in_array(current_token.text, ['as', 'from']) && !this._flags.import_block) {\n      current_token.type = TOKEN.WORD;\n    } else if (this._flags.mode === MODE.ObjectLiteral) {\n      var next_token = this._tokens.peek();\n      if (next_token.text === ':') {\n        current_token.type = TOKEN.WORD;\n      }\n    }\n  }\n\n  if (this.start_of_statement(current_token)) {\n    // The conditional starts the statement if appropriate.\n    if (reserved_array(this._flags.last_token, ['var', 'let', 'const']) && current_token.type === TOKEN.WORD) {\n      this._flags.declaration_statement = true;\n    }\n  } else if (current_token.newlines && !is_expression(this._flags.mode) &&\n    (this._flags.last_token.type !== TOKEN.OPERATOR || (this._flags.last_token.text === '--' || this._flags.last_token.text === '++')) &&\n    this._flags.last_token.type !== TOKEN.EQUALS &&\n    (this._options.preserve_newlines || !reserved_array(this._flags.last_token, ['var', 'let', 'const', 'set', 'get']))) {\n    this.handle_whitespace_and_comments(current_token);\n    this.print_newline();\n  } else {\n    this.handle_whitespace_and_comments(current_token);\n  }\n\n  if (this._flags.do_block && !this._flags.do_while) {\n    if (reserved_word(current_token, 'while')) {\n      // do {} ## while ()\n      this._output.space_before_token = true;\n      this.print_token(current_token);\n      this._output.space_before_token = true;\n      this._flags.do_while = true;\n      return;\n    } else {\n      // do {} should always have while as the next word.\n      // if we don't see the expected while, recover\n      this.print_newline();\n      this._flags.do_block = false;\n    }\n  }\n\n  // if may be followed by else, or not\n  // Bare/inline ifs are tricky\n  // Need to unwind the modes correctly: if (a) if (b) c(); else d(); else e();\n  if (this._flags.if_block) {\n    if (!this._flags.else_block && reserved_word(current_token, 'else')) {\n      this._flags.else_block = true;\n    } else {\n      while (this._flags.mode === MODE.Statement) {\n        this.restore_mode();\n      }\n      this._flags.if_block = false;\n      this._flags.else_block = false;\n    }\n  }\n\n  if (this._flags.in_case_statement && reserved_array(current_token, ['case', 'default'])) {\n    this.print_newline();\n    if (this._flags.last_token.type !== TOKEN.END_BLOCK && (this._flags.case_body || this._options.jslint_happy)) {\n      // switch cases following one another\n      this.deindent();\n    }\n    this._flags.case_body = false;\n\n    this.print_token(current_token);\n    this._flags.in_case = true;\n    return;\n  }\n\n  if (this._flags.last_token.type === TOKEN.COMMA || this._flags.last_token.type === TOKEN.START_EXPR || this._flags.last_token.type === TOKEN.EQUALS || this._flags.last_token.type === TOKEN.OPERATOR) {\n    if (!this.start_of_object_property()) {\n      this.allow_wrap_or_preserved_newline(current_token);\n    }\n  }\n\n  if (reserved_word(current_token, 'function')) {\n    if (in_array(this._flags.last_token.text, ['}', ';']) ||\n      (this._output.just_added_newline() && !(in_array(this._flags.last_token.text, ['(', '[', '{', ':', '=', ',']) || this._flags.last_token.type === TOKEN.OPERATOR))) {\n      // make sure there is a nice clean space of at least one blank line\n      // before a new function definition\n      if (!this._output.just_added_blankline() && !current_token.comments_before) {\n        this.print_newline();\n        this.print_newline(true);\n      }\n    }\n    if (this._flags.last_token.type === TOKEN.RESERVED || this._flags.last_token.type === TOKEN.WORD) {\n      if (reserved_array(this._flags.last_token, ['get', 'set', 'new', 'export']) ||\n        reserved_array(this._flags.last_token, newline_restricted_tokens)) {\n        this._output.space_before_token = true;\n      } else if (reserved_word(this._flags.last_token, 'default') && this._last_last_text === 'export') {\n        this._output.space_before_token = true;\n      } else if (this._flags.last_token.text === 'declare') {\n        // accomodates Typescript declare function formatting\n        this._output.space_before_token = true;\n      } else {\n        this.print_newline();\n      }\n    } else if (this._flags.last_token.type === TOKEN.OPERATOR || this._flags.last_token.text === '=') {\n      // foo = function\n      this._output.space_before_token = true;\n    } else if (!this._flags.multiline_frame && (is_expression(this._flags.mode) || is_array(this._flags.mode))) {\n      // (function\n    } else {\n      this.print_newline();\n    }\n\n    this.print_token(current_token);\n    this._flags.last_word = current_token.text;\n    return;\n  }\n\n  var prefix = 'NONE';\n\n  if (this._flags.last_token.type === TOKEN.END_BLOCK) {\n\n    if (this._previous_flags.inline_frame) {\n      prefix = 'SPACE';\n    } else if (!reserved_array(current_token, ['else', 'catch', 'finally', 'from'])) {\n      prefix = 'NEWLINE';\n    } else {\n      if (this._options.brace_style === \"expand\" ||\n        this._options.brace_style === \"end-expand\" ||\n        (this._options.brace_style === \"none\" && current_token.newlines)) {\n        prefix = 'NEWLINE';\n      } else {\n        prefix = 'SPACE';\n        this._output.space_before_token = true;\n      }\n    }\n  } else if (this._flags.last_token.type === TOKEN.SEMICOLON && this._flags.mode === MODE.BlockStatement) {\n    // TODO: Should this be for STATEMENT as well?\n    prefix = 'NEWLINE';\n  } else if (this._flags.last_token.type === TOKEN.SEMICOLON && is_expression(this._flags.mode)) {\n    prefix = 'SPACE';\n  } else if (this._flags.last_token.type === TOKEN.STRING) {\n    prefix = 'NEWLINE';\n  } else if (this._flags.last_token.type === TOKEN.RESERVED || this._flags.last_token.type === TOKEN.WORD ||\n    (this._flags.last_token.text === '*' &&\n      (in_array(this._last_last_text, ['function', 'yield']) ||\n        (this._flags.mode === MODE.ObjectLiteral && in_array(this._last_last_text, ['{', ',']))))) {\n    prefix = 'SPACE';\n  } else if (this._flags.last_token.type === TOKEN.START_BLOCK) {\n    if (this._flags.inline_frame) {\n      prefix = 'SPACE';\n    } else {\n      prefix = 'NEWLINE';\n    }\n  } else if (this._flags.last_token.type === TOKEN.END_EXPR) {\n    this._output.space_before_token = true;\n    prefix = 'NEWLINE';\n  }\n\n  if (reserved_array(current_token, line_starters) && this._flags.last_token.text !== ')') {\n    if (this._flags.inline_frame || this._flags.last_token.text === 'else' || this._flags.last_token.text === 'export') {\n      prefix = 'SPACE';\n    } else {\n      prefix = 'NEWLINE';\n    }\n\n  }\n\n  if (reserved_array(current_token, ['else', 'catch', 'finally'])) {\n    if ((!(this._flags.last_token.type === TOKEN.END_BLOCK && this._previous_flags.mode === MODE.BlockStatement) ||\n        this._options.brace_style === \"expand\" ||\n        this._options.brace_style === \"end-expand\" ||\n        (this._options.brace_style === \"none\" && current_token.newlines)) &&\n      !this._flags.inline_frame) {\n      this.print_newline();\n    } else {\n      this._output.trim(true);\n      var line = this._output.current_line;\n      // If we trimmed and there's something other than a close block before us\n      // put a newline back in.  Handles '} // comment' scenario.\n      if (line.last() !== '}') {\n        this.print_newline();\n      }\n      this._output.space_before_token = true;\n    }\n  } else if (prefix === 'NEWLINE') {\n    if (reserved_array(this._flags.last_token, special_words)) {\n      // no newline between 'return nnn'\n      this._output.space_before_token = true;\n    } else if (this._flags.last_token.text === 'declare' && reserved_array(current_token, ['var', 'let', 'const'])) {\n      // accomodates Typescript declare formatting\n      this._output.space_before_token = true;\n    } else if (this._flags.last_token.type !== TOKEN.END_EXPR) {\n      if ((this._flags.last_token.type !== TOKEN.START_EXPR || !reserved_array(current_token, ['var', 'let', 'const'])) && this._flags.last_token.text !== ':') {\n        // no need to force newline on 'var': for (var x = 0...)\n        if (reserved_word(current_token, 'if') && reserved_word(current_token.previous, 'else')) {\n          // no newline for } else if {\n          this._output.space_before_token = true;\n        } else {\n          this.print_newline();\n        }\n      }\n    } else if (reserved_array(current_token, line_starters) && this._flags.last_token.text !== ')') {\n      this.print_newline();\n    }\n  } else if (this._flags.multiline_frame && is_array(this._flags.mode) && this._flags.last_token.text === ',' && this._last_last_text === '}') {\n    this.print_newline(); // }, in lists get a newline treatment\n  } else if (prefix === 'SPACE') {\n    this._output.space_before_token = true;\n  }\n  if (current_token.previous && (current_token.previous.type === TOKEN.WORD || current_token.previous.type === TOKEN.RESERVED)) {\n    this._output.space_before_token = true;\n  }\n  this.print_token(current_token);\n  this._flags.last_word = current_token.text;\n\n  if (current_token.type === TOKEN.RESERVED) {\n    if (current_token.text === 'do') {\n      this._flags.do_block = true;\n    } else if (current_token.text === 'if') {\n      this._flags.if_block = true;\n    } else if (current_token.text === 'import') {\n      this._flags.import_block = true;\n    } else if (this._flags.import_block && reserved_word(current_token, 'from')) {\n      this._flags.import_block = false;\n    }\n  }\n};\n\nBeautifier.prototype.handle_semicolon = function(current_token) {\n  if (this.start_of_statement(current_token)) {\n    // The conditional starts the statement if appropriate.\n    // Semicolon can be the start (and end) of a statement\n    this._output.space_before_token = false;\n  } else {\n    this.handle_whitespace_and_comments(current_token);\n  }\n\n  var next_token = this._tokens.peek();\n  while (this._flags.mode === MODE.Statement &&\n    !(this._flags.if_block && reserved_word(next_token, 'else')) &&\n    !this._flags.do_block) {\n    this.restore_mode();\n  }\n\n  // hacky but effective for the moment\n  if (this._flags.import_block) {\n    this._flags.import_block = false;\n  }\n  this.print_token(current_token);\n};\n\nBeautifier.prototype.handle_string = function(current_token) {\n  if (current_token.text.startsWith(\"`\") && current_token.newlines === 0 && current_token.whitespace_before === '' && (current_token.previous.text === ')' || this._flags.last_token.type === TOKEN.WORD)) {\n    //Conditional for detectign backtick strings\n  } else if (this.start_of_statement(current_token)) {\n    // The conditional starts the statement if appropriate.\n    // One difference - strings want at least a space before\n    this._output.space_before_token = true;\n  } else {\n    this.handle_whitespace_and_comments(current_token);\n    if (this._flags.last_token.type === TOKEN.RESERVED || this._flags.last_token.type === TOKEN.WORD || this._flags.inline_frame) {\n      this._output.space_before_token = true;\n    } else if (this._flags.last_token.type === TOKEN.COMMA || this._flags.last_token.type === TOKEN.START_EXPR || this._flags.last_token.type === TOKEN.EQUALS || this._flags.last_token.type === TOKEN.OPERATOR) {\n      if (!this.start_of_object_property()) {\n        this.allow_wrap_or_preserved_newline(current_token);\n      }\n    } else if ((current_token.text.startsWith(\"`\") && this._flags.last_token.type === TOKEN.END_EXPR && (current_token.previous.text === ']' || current_token.previous.text === ')') && current_token.newlines === 0)) {\n      this._output.space_before_token = true;\n    } else {\n      this.print_newline();\n    }\n  }\n  this.print_token(current_token);\n};\n\nBeautifier.prototype.handle_equals = function(current_token) {\n  if (this.start_of_statement(current_token)) {\n    // The conditional starts the statement if appropriate.\n  } else {\n    this.handle_whitespace_and_comments(current_token);\n  }\n\n  if (this._flags.declaration_statement) {\n    // just got an '=' in a var-line, different formatting/line-breaking, etc will now be done\n    this._flags.declaration_assignment = true;\n  }\n  this._output.space_before_token = true;\n  this.print_token(current_token);\n  this._output.space_before_token = true;\n};\n\nBeautifier.prototype.handle_comma = function(current_token) {\n  this.handle_whitespace_and_comments(current_token, true);\n\n  this.print_token(current_token);\n  this._output.space_before_token = true;\n  if (this._flags.declaration_statement) {\n    if (is_expression(this._flags.parent.mode)) {\n      // do not break on comma, for(var a = 1, b = 2)\n      this._flags.declaration_assignment = false;\n    }\n\n    if (this._flags.declaration_assignment) {\n      this._flags.declaration_assignment = false;\n      this.print_newline(false, true);\n    } else if (this._options.comma_first) {\n      // for comma-first, we want to allow a newline before the comma\n      // to turn into a newline after the comma, which we will fixup later\n      this.allow_wrap_or_preserved_newline(current_token);\n    }\n  } else if (this._flags.mode === MODE.ObjectLiteral ||\n    (this._flags.mode === MODE.Statement && this._flags.parent.mode === MODE.ObjectLiteral)) {\n    if (this._flags.mode === MODE.Statement) {\n      this.restore_mode();\n    }\n\n    if (!this._flags.inline_frame) {\n      this.print_newline();\n    }\n  } else if (this._options.comma_first) {\n    // EXPR or DO_BLOCK\n    // for comma-first, we want to allow a newline before the comma\n    // to turn into a newline after the comma, which we will fixup later\n    this.allow_wrap_or_preserved_newline(current_token);\n  }\n};\n\nBeautifier.prototype.handle_operator = function(current_token) {\n  var isGeneratorAsterisk = current_token.text === '*' &&\n    (reserved_array(this._flags.last_token, ['function', 'yield']) ||\n      (in_array(this._flags.last_token.type, [TOKEN.START_BLOCK, TOKEN.COMMA, TOKEN.END_BLOCK, TOKEN.SEMICOLON]))\n    );\n  var isUnary = in_array(current_token.text, ['-', '+']) && (\n    in_array(this._flags.last_token.type, [TOKEN.START_BLOCK, TOKEN.START_EXPR, TOKEN.EQUALS, TOKEN.OPERATOR]) ||\n    in_array(this._flags.last_token.text, line_starters) ||\n    this._flags.last_token.text === ','\n  );\n\n  if (this.start_of_statement(current_token)) {\n    // The conditional starts the statement if appropriate.\n  } else {\n    var preserve_statement_flags = !isGeneratorAsterisk;\n    this.handle_whitespace_and_comments(current_token, preserve_statement_flags);\n  }\n\n  if (reserved_array(this._flags.last_token, special_words)) {\n    // \"return\" had a special handling in TK_WORD. Now we need to return the favor\n    this._output.space_before_token = true;\n    this.print_token(current_token);\n    return;\n  }\n\n  // hack for actionscript's import .*;\n  if (current_token.text === '*' && this._flags.last_token.type === TOKEN.DOT) {\n    this.print_token(current_token);\n    return;\n  }\n\n  if (current_token.text === '::') {\n    // no spaces around exotic namespacing syntax operator\n    this.print_token(current_token);\n    return;\n  }\n\n  // Allow line wrapping between operators when operator_position is\n  //   set to before or preserve\n  if (this._flags.last_token.type === TOKEN.OPERATOR && in_array(this._options.operator_position, OPERATOR_POSITION_BEFORE_OR_PRESERVE)) {\n    this.allow_wrap_or_preserved_newline(current_token);\n  }\n\n  if (current_token.text === ':' && this._flags.in_case) {\n    this.print_token(current_token);\n\n    this._flags.in_case = false;\n    this._flags.case_body = true;\n    if (this._tokens.peek().type !== TOKEN.START_BLOCK) {\n      this.indent();\n      this.print_newline();\n    } else {\n      this._output.space_before_token = true;\n    }\n    return;\n  }\n\n  var space_before = true;\n  var space_after = true;\n  var in_ternary = false;\n  if (current_token.text === ':') {\n    if (this._flags.ternary_depth === 0) {\n      // Colon is invalid javascript outside of ternary and object, but do our best to guess what was meant.\n      space_before = false;\n    } else {\n      this._flags.ternary_depth -= 1;\n      in_ternary = true;\n    }\n  } else if (current_token.text === '?') {\n    this._flags.ternary_depth += 1;\n  }\n\n  // let's handle the operator_position option prior to any conflicting logic\n  if (!isUnary && !isGeneratorAsterisk && this._options.preserve_newlines && in_array(current_token.text, positionable_operators)) {\n    var isColon = current_token.text === ':';\n    var isTernaryColon = (isColon && in_ternary);\n    var isOtherColon = (isColon && !in_ternary);\n\n    switch (this._options.operator_position) {\n      case OPERATOR_POSITION.before_newline:\n        // if the current token is : and it's not a ternary statement then we set space_before to false\n        this._output.space_before_token = !isOtherColon;\n\n        this.print_token(current_token);\n\n        if (!isColon || isTernaryColon) {\n          this.allow_wrap_or_preserved_newline(current_token);\n        }\n\n        this._output.space_before_token = true;\n        return;\n\n      case OPERATOR_POSITION.after_newline:\n        // if the current token is anything but colon, or (via deduction) it's a colon and in a ternary statement,\n        //   then print a newline.\n\n        this._output.space_before_token = true;\n\n        if (!isColon || isTernaryColon) {\n          if (this._tokens.peek().newlines) {\n            this.print_newline(false, true);\n          } else {\n            this.allow_wrap_or_preserved_newline(current_token);\n          }\n        } else {\n          this._output.space_before_token = false;\n        }\n\n        this.print_token(current_token);\n\n        this._output.space_before_token = true;\n        return;\n\n      case OPERATOR_POSITION.preserve_newline:\n        if (!isOtherColon) {\n          this.allow_wrap_or_preserved_newline(current_token);\n        }\n\n        // if we just added a newline, or the current token is : and it's not a ternary statement,\n        //   then we set space_before to false\n        space_before = !(this._output.just_added_newline() || isOtherColon);\n\n        this._output.space_before_token = space_before;\n        this.print_token(current_token);\n        this._output.space_before_token = true;\n        return;\n    }\n  }\n\n  if (isGeneratorAsterisk) {\n    this.allow_wrap_or_preserved_newline(current_token);\n    space_before = false;\n    var next_token = this._tokens.peek();\n    space_after = next_token && in_array(next_token.type, [TOKEN.WORD, TOKEN.RESERVED]);\n  } else if (current_token.text === '...') {\n    this.allow_wrap_or_preserved_newline(current_token);\n    space_before = this._flags.last_token.type === TOKEN.START_BLOCK;\n    space_after = false;\n  } else if (in_array(current_token.text, ['--', '++', '!', '~']) || isUnary) {\n    // unary operators (and binary +/- pretending to be unary) special cases\n    if (this._flags.last_token.type === TOKEN.COMMA || this._flags.last_token.type === TOKEN.START_EXPR) {\n      this.allow_wrap_or_preserved_newline(current_token);\n    }\n\n    space_before = false;\n    space_after = false;\n\n    // http://www.ecma-international.org/ecma-262/5.1/#sec-7.9.1\n    // if there is a newline between -- or ++ and anything else we should preserve it.\n    if (current_token.newlines && (current_token.text === '--' || current_token.text === '++')) {\n      this.print_newline(false, true);\n    }\n\n    if (this._flags.last_token.text === ';' && is_expression(this._flags.mode)) {\n      // for (;; ++i)\n      //        ^^^\n      space_before = true;\n    }\n\n    if (this._flags.last_token.type === TOKEN.RESERVED) {\n      space_before = true;\n    } else if (this._flags.last_token.type === TOKEN.END_EXPR) {\n      space_before = !(this._flags.last_token.text === ']' && (current_token.text === '--' || current_token.text === '++'));\n    } else if (this._flags.last_token.type === TOKEN.OPERATOR) {\n      // a++ + ++b;\n      // a - -b\n      space_before = in_array(current_token.text, ['--', '-', '++', '+']) && in_array(this._flags.last_token.text, ['--', '-', '++', '+']);\n      // + and - are not unary when preceeded by -- or ++ operator\n      // a-- + b\n      // a * +b\n      // a - -b\n      if (in_array(current_token.text, ['+', '-']) && in_array(this._flags.last_token.text, ['--', '++'])) {\n        space_after = true;\n      }\n    }\n\n\n    if (((this._flags.mode === MODE.BlockStatement && !this._flags.inline_frame) || this._flags.mode === MODE.Statement) &&\n      (this._flags.last_token.text === '{' || this._flags.last_token.text === ';')) {\n      // { foo; --i }\n      // foo(); --bar;\n      this.print_newline();\n    }\n  }\n\n  this._output.space_before_token = this._output.space_before_token || space_before;\n  this.print_token(current_token);\n  this._output.space_before_token = space_after;\n};\n\nBeautifier.prototype.handle_block_comment = function(current_token, preserve_statement_flags) {\n  if (this._output.raw) {\n    this._output.add_raw_token(current_token);\n    if (current_token.directives && current_token.directives.preserve === 'end') {\n      // If we're testing the raw output behavior, do not allow a directive to turn it off.\n      this._output.raw = this._options.test_output_raw;\n    }\n    return;\n  }\n\n  if (current_token.directives) {\n    this.print_newline(false, preserve_statement_flags);\n    this.print_token(current_token);\n    if (current_token.directives.preserve === 'start') {\n      this._output.raw = true;\n    }\n    this.print_newline(false, true);\n    return;\n  }\n\n  // inline block\n  if (!acorn.newline.test(current_token.text) && !current_token.newlines) {\n    this._output.space_before_token = true;\n    this.print_token(current_token);\n    this._output.space_before_token = true;\n    return;\n  } else {\n    this.print_block_commment(current_token, preserve_statement_flags);\n  }\n};\n\nBeautifier.prototype.print_block_commment = function(current_token, preserve_statement_flags) {\n  var lines = split_linebreaks(current_token.text);\n  var j; // iterator for this case\n  var javadoc = false;\n  var starless = false;\n  var lastIndent = current_token.whitespace_before;\n  var lastIndentLength = lastIndent.length;\n\n  // block comment starts with a new line\n  this.print_newline(false, preserve_statement_flags);\n\n  // first line always indented\n  this.print_token_line_indentation(current_token);\n  this._output.add_token(lines[0]);\n  this.print_newline(false, preserve_statement_flags);\n\n\n  if (lines.length > 1) {\n    lines = lines.slice(1);\n    javadoc = all_lines_start_with(lines, '*');\n    starless = each_line_matches_indent(lines, lastIndent);\n\n    if (javadoc) {\n      this._flags.alignment = 1;\n    }\n\n    for (j = 0; j < lines.length; j++) {\n      if (javadoc) {\n        // javadoc: reformat and re-indent\n        this.print_token_line_indentation(current_token);\n        this._output.add_token(ltrim(lines[j]));\n      } else if (starless && lines[j]) {\n        // starless: re-indent non-empty content, avoiding trim\n        this.print_token_line_indentation(current_token);\n        this._output.add_token(lines[j].substring(lastIndentLength));\n      } else {\n        // normal comments output raw\n        this._output.current_line.set_indent(-1);\n        this._output.add_token(lines[j]);\n      }\n\n      // for comments on their own line or  more than one line, make sure there's a new line after\n      this.print_newline(false, preserve_statement_flags);\n    }\n\n    this._flags.alignment = 0;\n  }\n};\n\n\nBeautifier.prototype.handle_comment = function(current_token, preserve_statement_flags) {\n  if (current_token.newlines) {\n    this.print_newline(false, preserve_statement_flags);\n  } else {\n    this._output.trim(true);\n  }\n\n  this._output.space_before_token = true;\n  this.print_token(current_token);\n  this.print_newline(false, preserve_statement_flags);\n};\n\nBeautifier.prototype.handle_dot = function(current_token) {\n  if (this.start_of_statement(current_token)) {\n    // The conditional starts the statement if appropriate.\n  } else {\n    this.handle_whitespace_and_comments(current_token, true);\n  }\n\n  if (reserved_array(this._flags.last_token, special_words)) {\n    this._output.space_before_token = false;\n  } else {\n    // allow preserved newlines before dots in general\n    // force newlines on dots after close paren when break_chained - for bar().baz()\n    this.allow_wrap_or_preserved_newline(current_token,\n      this._flags.last_token.text === ')' && this._options.break_chained_methods);\n  }\n\n  // Only unindent chained method dot if this dot starts a new line.\n  // Otherwise the automatic extra indentation removal will handle the over indent\n  if (this._options.unindent_chained_methods && this._output.just_added_newline()) {\n    this.deindent();\n  }\n\n  this.print_token(current_token);\n};\n\nBeautifier.prototype.handle_unknown = function(current_token, preserve_statement_flags) {\n  this.print_token(current_token);\n\n  if (current_token.text[current_token.text.length - 1] === '\\n') {\n    this.print_newline(false, preserve_statement_flags);\n  }\n};\n\nBeautifier.prototype.handle_eof = function(current_token) {\n  // Unwind any open statements\n  while (this._flags.mode === MODE.Statement) {\n    this.restore_mode();\n  }\n  this.handle_whitespace_and_comments(current_token);\n};\n\nmodule.exports.Beautifier = Beautifier;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Beautifier = require('./beautifier').Beautifier,\n  Options = require('./options').Options;\n\nfunction js_beautify(js_source_text, options) {\n  var beautifier = new Beautifier(js_source_text, options);\n  return beautifier.beautify();\n}\n\nmodule.exports = js_beautify;\nmodule.exports.defaultOptions = function() {\n  return new Options();\n};\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar BaseOptions = require('../core/options').Options;\n\nfunction Options(options) {\n  BaseOptions.call(this, options, 'css');\n\n  this.selector_separator_newline = this._get_boolean('selector_separator_newline', true);\n  this.newline_between_rules = this._get_boolean('newline_between_rules', true);\n  var space_around_selector_separator = this._get_boolean('space_around_selector_separator');\n  this.space_around_combinator = this._get_boolean('space_around_combinator') || space_around_selector_separator;\n\n  var brace_style_split = this._get_selection_list('brace_style', ['collapse', 'expand', 'end-expand', 'none', 'preserve-inline']);\n  this.brace_style = 'collapse';\n  for (var bs = 0; bs < brace_style_split.length; bs++) {\n    if (brace_style_split[bs] !== 'expand') {\n      // default to collapse, as only collapse|expand is implemented for now\n      this.brace_style = 'collapse';\n    } else {\n      this.brace_style = brace_style_split[bs];\n    }\n  }\n}\nOptions.prototype = new BaseOptions();\n\n\n\nmodule.exports.Options = Options;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Options = require('./options').Options;\nvar Output = require('../core/output').Output;\nvar InputScanner = require('../core/inputscanner').InputScanner;\nvar Directives = require('../core/directives').Directives;\n\nvar directives_core = new Directives(/\\/\\*/, /\\*\\//);\n\nvar lineBreak = /\\r\\n|[\\r\\n]/;\nvar allLineBreaks = /\\r\\n|[\\r\\n]/g;\n\n// tokenizer\nvar whitespaceChar = /\\s/;\nvar whitespacePattern = /(?:\\s|\\n)+/g;\nvar block_comment_pattern = /\\/\\*(?:[\\s\\S]*?)((?:\\*\\/)|$)/g;\nvar comment_pattern = /\\/\\/(?:[^\\n\\r\\u2028\\u2029]*)/g;\n\nfunction Beautifier(source_text, options) {\n  this._source_text = source_text || '';\n  // Allow the setting of language/file-type specific options\n  // with inheritance of overall settings\n  this._options = new Options(options);\n  this._ch = null;\n  this._input = null;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule\n  this.NESTED_AT_RULE = {\n    \"@page\": true,\n    \"@font-face\": true,\n    \"@keyframes\": true,\n    // also in CONDITIONAL_GROUP_RULE below\n    \"@media\": true,\n    \"@supports\": true,\n    \"@document\": true\n  };\n  this.CONDITIONAL_GROUP_RULE = {\n    \"@media\": true,\n    \"@supports\": true,\n    \"@document\": true\n  };\n\n}\n\nBeautifier.prototype.eatString = function(endChars) {\n  var result = '';\n  this._ch = this._input.next();\n  while (this._ch) {\n    result += this._ch;\n    if (this._ch === \"\\\\\") {\n      result += this._input.next();\n    } else if (endChars.indexOf(this._ch) !== -1 || this._ch === \"\\n\") {\n      break;\n    }\n    this._ch = this._input.next();\n  }\n  return result;\n};\n\n// Skips any white space in the source text from the current position.\n// When allowAtLeastOneNewLine is true, will output new lines for each\n// newline character found; if the user has preserve_newlines off, only\n// the first newline will be output\nBeautifier.prototype.eatWhitespace = function(allowAtLeastOneNewLine) {\n  var result = whitespaceChar.test(this._input.peek());\n  var newline_count = 0;\n  while (whitespaceChar.test(this._input.peek())) {\n    this._ch = this._input.next();\n    if (allowAtLeastOneNewLine && this._ch === '\\n') {\n      if (newline_count === 0 || newline_count < this._options.max_preserve_newlines) {\n        newline_count++;\n        this._output.add_new_line(true);\n      }\n    }\n  }\n  return result;\n};\n\n// Nested pseudo-class if we are insideRule\n// and the next special character found opens\n// a new block\nBeautifier.prototype.foundNestedPseudoClass = function() {\n  var openParen = 0;\n  var i = 1;\n  var ch = this._input.peek(i);\n  while (ch) {\n    if (ch === \"{\") {\n      return true;\n    } else if (ch === '(') {\n      // pseudoclasses can contain ()\n      openParen += 1;\n    } else if (ch === ')') {\n      if (openParen === 0) {\n        return false;\n      }\n      openParen -= 1;\n    } else if (ch === \";\" || ch === \"}\") {\n      return false;\n    }\n    i++;\n    ch = this._input.peek(i);\n  }\n  return false;\n};\n\nBeautifier.prototype.print_string = function(output_string) {\n  this._output.set_indent(this._indentLevel);\n  this._output.non_breaking_space = true;\n  this._output.add_token(output_string);\n};\n\nBeautifier.prototype.preserveSingleSpace = function(isAfterSpace) {\n  if (isAfterSpace) {\n    this._output.space_before_token = true;\n  }\n};\n\nBeautifier.prototype.indent = function() {\n  this._indentLevel++;\n};\n\nBeautifier.prototype.outdent = function() {\n  if (this._indentLevel > 0) {\n    this._indentLevel--;\n  }\n};\n\n/*_____________________--------------------_____________________*/\n\nBeautifier.prototype.beautify = function() {\n  if (this._options.disabled) {\n    return this._source_text;\n  }\n\n  var source_text = this._source_text;\n  var eol = this._options.eol;\n  if (eol === 'auto') {\n    eol = '\\n';\n    if (source_text && lineBreak.test(source_text || '')) {\n      eol = source_text.match(lineBreak)[0];\n    }\n  }\n\n\n  // HACK: newline parsing inconsistent. This brute force normalizes the this._input.\n  source_text = source_text.replace(allLineBreaks, '\\n');\n\n  // reset\n  var baseIndentString = source_text.match(/^[\\t ]*/)[0];\n\n  this._output = new Output(this._options, baseIndentString);\n  this._input = new InputScanner(source_text);\n  this._indentLevel = 0;\n  this._nestedLevel = 0;\n\n  this._ch = null;\n  var parenLevel = 0;\n\n  var insideRule = false;\n  // This is the value side of a property value pair (blue in the following ex)\n  // label { content: blue }\n  var insidePropertyValue = false;\n  var enteringConditionalGroup = false;\n  var insideAtExtend = false;\n  var insideAtImport = false;\n  var topCharacter = this._ch;\n  var whitespace;\n  var isAfterSpace;\n  var previous_ch;\n\n  while (true) {\n    whitespace = this._input.read(whitespacePattern);\n    isAfterSpace = whitespace !== '';\n    previous_ch = topCharacter;\n    this._ch = this._input.next();\n    if (this._ch === '\\\\' && this._input.hasNext()) {\n      this._ch += this._input.next();\n    }\n    topCharacter = this._ch;\n\n    if (!this._ch) {\n      break;\n    } else if (this._ch === '/' && this._input.peek() === '*') {\n      // /* css comment */\n      // Always start block comments on a new line.\n      // This handles scenarios where a block comment immediately\n      // follows a property definition on the same line or where\n      // minified code is being beautified.\n      this._output.add_new_line();\n      this._input.back();\n\n      var comment = this._input.read(block_comment_pattern);\n\n      // Handle ignore directive\n      var directives = directives_core.get_directives(comment);\n      if (directives && directives.ignore === 'start') {\n        comment += directives_core.readIgnored(this._input);\n      }\n\n      this.print_string(comment);\n\n      // Ensures any new lines following the comment are preserved\n      this.eatWhitespace(true);\n\n      // Block comments are followed by a new line so they don't\n      // share a line with other properties\n      this._output.add_new_line();\n    } else if (this._ch === '/' && this._input.peek() === '/') {\n      // // single line comment\n      // Preserves the space before a comment\n      // on the same line as a rule\n      this._output.space_before_token = true;\n      this._input.back();\n      this.print_string(this._input.read(comment_pattern));\n\n      // Ensures any new lines following the comment are preserved\n      this.eatWhitespace(true);\n    } else if (this._ch === '@') {\n      this.preserveSingleSpace(isAfterSpace);\n\n      // deal with less propery mixins @{...}\n      if (this._input.peek() === '{') {\n        this.print_string(this._ch + this.eatString('}'));\n      } else {\n        this.print_string(this._ch);\n\n        // strip trailing space, if present, for hash property checks\n        var variableOrRule = this._input.peekUntilAfter(/[: ,;{}()[\\]\\/='\"]/g);\n\n        if (variableOrRule.match(/[ :]$/)) {\n          // we have a variable or pseudo-class, add it and insert one space before continuing\n          variableOrRule = this.eatString(\": \").replace(/\\s$/, '');\n          this.print_string(variableOrRule);\n          this._output.space_before_token = true;\n        }\n\n        variableOrRule = variableOrRule.replace(/\\s$/, '');\n\n        if (variableOrRule === 'extend') {\n          insideAtExtend = true;\n        } else if (variableOrRule === 'import') {\n          insideAtImport = true;\n        }\n\n        // might be a nesting at-rule\n        if (variableOrRule in this.NESTED_AT_RULE) {\n          this._nestedLevel += 1;\n          if (variableOrRule in this.CONDITIONAL_GROUP_RULE) {\n            enteringConditionalGroup = true;\n          }\n          // might be less variable\n        } else if (!insideRule && parenLevel === 0 && variableOrRule.indexOf(':') !== -1) {\n          insidePropertyValue = true;\n          this.indent();\n        }\n      }\n    } else if (this._ch === '#' && this._input.peek() === '{') {\n      this.preserveSingleSpace(isAfterSpace);\n      this.print_string(this._ch + this.eatString('}'));\n    } else if (this._ch === '{') {\n      if (insidePropertyValue) {\n        insidePropertyValue = false;\n        this.outdent();\n      }\n\n      // when entering conditional groups, only rulesets are allowed\n      if (enteringConditionalGroup) {\n        enteringConditionalGroup = false;\n        insideRule = (this._indentLevel >= this._nestedLevel);\n      } else {\n        // otherwise, declarations are also allowed\n        insideRule = (this._indentLevel >= this._nestedLevel - 1);\n      }\n      if (this._options.newline_between_rules && insideRule) {\n        if (this._output.previous_line && this._output.previous_line.item(-1) !== '{') {\n          this._output.ensure_empty_line_above('/', ',');\n        }\n      }\n\n      this._output.space_before_token = true;\n\n      // The difference in print_string and indent order is necessary to indent the '{' correctly\n      if (this._options.brace_style === 'expand') {\n        this._output.add_new_line();\n        this.print_string(this._ch);\n        this.indent();\n        this._output.set_indent(this._indentLevel);\n      } else {\n        this.indent();\n        this.print_string(this._ch);\n      }\n\n      this.eatWhitespace(true);\n      this._output.add_new_line();\n    } else if (this._ch === '}') {\n      this.outdent();\n      this._output.add_new_line();\n      if (previous_ch === '{') {\n        this._output.trim(true);\n      }\n      insideAtImport = false;\n      insideAtExtend = false;\n      if (insidePropertyValue) {\n        this.outdent();\n        insidePropertyValue = false;\n      }\n      this.print_string(this._ch);\n      insideRule = false;\n      if (this._nestedLevel) {\n        this._nestedLevel--;\n      }\n\n      this.eatWhitespace(true);\n      this._output.add_new_line();\n\n      if (this._options.newline_between_rules && !this._output.just_added_blankline()) {\n        if (this._input.peek() !== '}') {\n          this._output.add_new_line(true);\n        }\n      }\n    } else if (this._ch === \":\") {\n      if ((insideRule || enteringConditionalGroup) && !(this._input.lookBack(\"&\") || this.foundNestedPseudoClass()) && !this._input.lookBack(\"(\") && !insideAtExtend && parenLevel === 0) {\n        // 'property: value' delimiter\n        // which could be in a conditional group query\n        this.print_string(':');\n        if (!insidePropertyValue) {\n          insidePropertyValue = true;\n          this._output.space_before_token = true;\n          this.eatWhitespace(true);\n          this.indent();\n        }\n      } else {\n        // sass/less parent reference don't use a space\n        // sass nested pseudo-class don't use a space\n\n        // preserve space before pseudoclasses/pseudoelements, as it means \"in any child\"\n        if (this._input.lookBack(\" \")) {\n          this._output.space_before_token = true;\n        }\n        if (this._input.peek() === \":\") {\n          // pseudo-element\n          this._ch = this._input.next();\n          this.print_string(\"::\");\n        } else {\n          // pseudo-class\n          this.print_string(':');\n        }\n      }\n    } else if (this._ch === '\"' || this._ch === '\\'') {\n      this.preserveSingleSpace(isAfterSpace);\n      this.print_string(this._ch + this.eatString(this._ch));\n      this.eatWhitespace(true);\n    } else if (this._ch === ';') {\n      if (parenLevel === 0) {\n        if (insidePropertyValue) {\n          this.outdent();\n          insidePropertyValue = false;\n        }\n        insideAtExtend = false;\n        insideAtImport = false;\n        this.print_string(this._ch);\n        this.eatWhitespace(true);\n\n        // This maintains single line comments on the same\n        // line. Block comments are also affected, but\n        // a new line is always output before one inside\n        // that section\n        if (this._input.peek() !== '/') {\n          this._output.add_new_line();\n        }\n      } else {\n        this.print_string(this._ch);\n        this.eatWhitespace(true);\n        this._output.space_before_token = true;\n      }\n    } else if (this._ch === '(') { // may be a url\n      if (this._input.lookBack(\"url\")) {\n        this.print_string(this._ch);\n        this.eatWhitespace();\n        parenLevel++;\n        this.indent();\n        this._ch = this._input.next();\n        if (this._ch === ')' || this._ch === '\"' || this._ch === '\\'') {\n          this._input.back();\n        } else if (this._ch) {\n          this.print_string(this._ch + this.eatString(')'));\n          if (parenLevel) {\n            parenLevel--;\n            this.outdent();\n          }\n        }\n      } else {\n        this.preserveSingleSpace(isAfterSpace);\n        this.print_string(this._ch);\n        this.eatWhitespace();\n        parenLevel++;\n        this.indent();\n      }\n    } else if (this._ch === ')') {\n      if (parenLevel) {\n        parenLevel--;\n        this.outdent();\n      }\n      this.print_string(this._ch);\n    } else if (this._ch === ',') {\n      this.print_string(this._ch);\n      this.eatWhitespace(true);\n      if (this._options.selector_separator_newline && !insidePropertyValue && parenLevel === 0 && !insideAtImport && !insideAtExtend) {\n        this._output.add_new_line();\n      } else {\n        this._output.space_before_token = true;\n      }\n    } else if ((this._ch === '>' || this._ch === '+' || this._ch === '~') && !insidePropertyValue && parenLevel === 0) {\n      //handle combinator spacing\n      if (this._options.space_around_combinator) {\n        this._output.space_before_token = true;\n        this.print_string(this._ch);\n        this._output.space_before_token = true;\n      } else {\n        this.print_string(this._ch);\n        this.eatWhitespace();\n        // squash extra whitespace\n        if (this._ch && whitespaceChar.test(this._ch)) {\n          this._ch = '';\n        }\n      }\n    } else if (this._ch === ']') {\n      this.print_string(this._ch);\n    } else if (this._ch === '[') {\n      this.preserveSingleSpace(isAfterSpace);\n      this.print_string(this._ch);\n    } else if (this._ch === '=') { // no whitespace before or after\n      this.eatWhitespace();\n      this.print_string('=');\n      if (whitespaceChar.test(this._ch)) {\n        this._ch = '';\n      }\n    } else if (this._ch === '!' && !this._input.lookBack(\"\\\\\")) { // !important\n      this.print_string(' ');\n      this.print_string(this._ch);\n    } else {\n      this.preserveSingleSpace(isAfterSpace);\n      this.print_string(this._ch);\n    }\n  }\n\n  var sweetCode = this._output.get_code(eol);\n\n  return sweetCode;\n};\n\nmodule.exports.Beautifier = Beautifier;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Beautifier = require('./beautifier').Beautifier,\n  Options = require('./options').Options;\n\nfunction css_beautify(source_text, options) {\n  var beautifier = new Beautifier(source_text, options);\n  return beautifier.beautify();\n}\n\nmodule.exports = css_beautify;\nmodule.exports.defaultOptions = function() {\n  return new Options();\n};\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar BaseOptions = require('../core/options').Options;\n\nfunction Options(options) {\n  BaseOptions.call(this, options, 'html');\n  if (this.templating.length === 1 && this.templating[0] === 'auto') {\n    this.templating = ['django', 'erb', 'handlebars', 'php'];\n  }\n\n  this.indent_inner_html = this._get_boolean('indent_inner_html');\n  this.indent_body_inner_html = this._get_boolean('indent_body_inner_html', true);\n  this.indent_head_inner_html = this._get_boolean('indent_head_inner_html', true);\n\n  this.indent_handlebars = this._get_boolean('indent_handlebars', true);\n  this.wrap_attributes = this._get_selection('wrap_attributes',\n    ['auto', 'force', 'force-aligned', 'force-expand-multiline', 'aligned-multiple', 'preserve', 'preserve-aligned']);\n  this.wrap_attributes_indent_size = this._get_number('wrap_attributes_indent_size', this.indent_size);\n  this.extra_liners = this._get_array('extra_liners', ['head', 'body', '/html']);\n\n  // Block vs inline elements\n  // https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\n  // https://developer.mozilla.org/en-US/docs/Web/HTML/Inline_elements\n  // https://www.w3.org/TR/html5/dom.html#phrasing-content\n  this.inline = this._get_array('inline', [\n    'a', 'abbr', 'area', 'audio', 'b', 'bdi', 'bdo', 'br', 'button', 'canvas', 'cite',\n    'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'i', 'iframe', 'img',\n    'input', 'ins', 'kbd', 'keygen', 'label', 'map', 'mark', 'math', 'meter', 'noscript',\n    'object', 'output', 'progress', 'q', 'ruby', 's', 'samp', /* 'script', */ 'select', 'small',\n    'span', 'strong', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'var',\n    'video', 'wbr', 'text',\n    // obsolete inline tags\n    'acronym', 'big', 'strike', 'tt'\n  ]);\n  this.void_elements = this._get_array('void_elements', [\n    // HTLM void elements - aka self-closing tags - aka singletons\n    // https://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\n    'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen',\n    'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr',\n    // NOTE: Optional tags are too complex for a simple list\n    // they are hard coded in _do_optional_end_element\n\n    // Doctype and xml elements\n    '!doctype', '?xml',\n\n    // obsolete tags\n    // basefont: https://www.computerhope.com/jargon/h/html-basefont-tag.htm\n    // isndex: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/isindex\n    'basefont', 'isindex'\n  ]);\n  this.unformatted = this._get_array('unformatted', []);\n  this.content_unformatted = this._get_array('content_unformatted', [\n    'pre', 'textarea'\n  ]);\n  this.unformatted_content_delimiter = this._get_characters('unformatted_content_delimiter');\n  this.indent_scripts = this._get_selection('indent_scripts', ['normal', 'keep', 'separate']);\n\n}\nOptions.prototype = new BaseOptions();\n\n\n\nmodule.exports.Options = Options;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar BaseTokenizer = require('../core/tokenizer').Tokenizer;\nvar BASETOKEN = require('../core/tokenizer').TOKEN;\nvar Directives = require('../core/directives').Directives;\nvar TemplatablePattern = require('../core/templatablepattern').TemplatablePattern;\nvar Pattern = require('../core/pattern').Pattern;\n\nvar TOKEN = {\n  TAG_OPEN: 'TK_TAG_OPEN',\n  TAG_CLOSE: 'TK_TAG_CLOSE',\n  ATTRIBUTE: 'TK_ATTRIBUTE',\n  EQUALS: 'TK_EQUALS',\n  VALUE: 'TK_VALUE',\n  COMMENT: 'TK_COMMENT',\n  TEXT: 'TK_TEXT',\n  UNKNOWN: 'TK_UNKNOWN',\n  START: BASETOKEN.START,\n  RAW: BASETOKEN.RAW,\n  EOF: BASETOKEN.EOF\n};\n\nvar directives_core = new Directives(/<\\!--/, /-->/);\n\nvar Tokenizer = function(input_string, options) {\n  BaseTokenizer.call(this, input_string, options);\n  this._current_tag_name = '';\n\n  // Words end at whitespace or when a tag starts\n  // if we are indenting handlebars, they are considered tags\n  var templatable_reader = new TemplatablePattern(this._input).read_options(this._options);\n  var pattern_reader = new Pattern(this._input);\n\n  this.__patterns = {\n    word: templatable_reader.until(/[\\n\\r\\t <]/),\n    single_quote: templatable_reader.until_after(/'/),\n    double_quote: templatable_reader.until_after(/\"/),\n    attribute: templatable_reader.until(/[\\n\\r\\t =>]|\\/>/),\n    element_name: templatable_reader.until(/[\\n\\r\\t >\\/]/),\n\n    handlebars_comment: pattern_reader.starting_with(/{{!--/).until_after(/--}}/),\n    handlebars: pattern_reader.starting_with(/{{/).until_after(/}}/),\n    handlebars_open: pattern_reader.until(/[\\n\\r\\t }]/),\n    handlebars_raw_close: pattern_reader.until(/}}/),\n    comment: pattern_reader.starting_with(/<!--/).until_after(/-->/),\n    cdata: pattern_reader.starting_with(/<!\\[CDATA\\[/).until_after(/]]>/),\n    // https://en.wikipedia.org/wiki/Conditional_comment\n    conditional_comment: pattern_reader.starting_with(/<!\\[/).until_after(/]>/),\n    processing: pattern_reader.starting_with(/<\\?/).until_after(/\\?>/)\n  };\n\n  if (this._options.indent_handlebars) {\n    this.__patterns.word = this.__patterns.word.exclude('handlebars');\n  }\n\n  this._unformatted_content_delimiter = null;\n\n  if (this._options.unformatted_content_delimiter) {\n    var literal_regexp = this._input.get_literal_regexp(this._options.unformatted_content_delimiter);\n    this.__patterns.unformatted_content_delimiter =\n      pattern_reader.matching(literal_regexp)\n      .until_after(literal_regexp);\n  }\n};\nTokenizer.prototype = new BaseTokenizer();\n\nTokenizer.prototype._is_comment = function(current_token) { // jshint unused:false\n  return false; //current_token.type === TOKEN.COMMENT || current_token.type === TOKEN.UNKNOWN;\n};\n\nTokenizer.prototype._is_opening = function(current_token) {\n  return current_token.type === TOKEN.TAG_OPEN;\n};\n\nTokenizer.prototype._is_closing = function(current_token, open_token) {\n  return current_token.type === TOKEN.TAG_CLOSE &&\n    (open_token && (\n      ((current_token.text === '>' || current_token.text === '/>') && open_token.text[0] === '<') ||\n      (current_token.text === '}}' && open_token.text[0] === '{' && open_token.text[1] === '{')));\n};\n\nTokenizer.prototype._reset = function() {\n  this._current_tag_name = '';\n};\n\nTokenizer.prototype._get_next_token = function(previous_token, open_token) { // jshint unused:false\n  var token = null;\n  this._readWhitespace();\n  var c = this._input.peek();\n\n  if (c === null) {\n    return this._create_token(TOKEN.EOF, '');\n  }\n\n  token = token || this._read_open_handlebars(c, open_token);\n  token = token || this._read_attribute(c, previous_token, open_token);\n  token = token || this._read_close(c, open_token);\n  token = token || this._read_raw_content(c, previous_token, open_token);\n  token = token || this._read_content_word(c);\n  token = token || this._read_comment_or_cdata(c);\n  token = token || this._read_processing(c);\n  token = token || this._read_open(c, open_token);\n  token = token || this._create_token(TOKEN.UNKNOWN, this._input.next());\n\n  return token;\n};\n\nTokenizer.prototype._read_comment_or_cdata = function(c) { // jshint unused:false\n  var token = null;\n  var resulting_string = null;\n  var directives = null;\n\n  if (c === '<') {\n    var peek1 = this._input.peek(1);\n    // We treat all comments as literals, even more than preformatted tags\n    // we only look for the appropriate closing marker\n    if (peek1 === '!') {\n      resulting_string = this.__patterns.comment.read();\n\n      // only process directive on html comments\n      if (resulting_string) {\n        directives = directives_core.get_directives(resulting_string);\n        if (directives && directives.ignore === 'start') {\n          resulting_string += directives_core.readIgnored(this._input);\n        }\n      } else {\n        resulting_string = this.__patterns.cdata.read();\n      }\n    }\n\n    if (resulting_string) {\n      token = this._create_token(TOKEN.COMMENT, resulting_string);\n      token.directives = directives;\n    }\n  }\n\n  return token;\n};\n\nTokenizer.prototype._read_processing = function(c) { // jshint unused:false\n  var token = null;\n  var resulting_string = null;\n  var directives = null;\n\n  if (c === '<') {\n    var peek1 = this._input.peek(1);\n    if (peek1 === '!' || peek1 === '?') {\n      resulting_string = this.__patterns.conditional_comment.read();\n      resulting_string = resulting_string || this.__patterns.processing.read();\n    }\n\n    if (resulting_string) {\n      token = this._create_token(TOKEN.COMMENT, resulting_string);\n      token.directives = directives;\n    }\n  }\n\n  return token;\n};\n\nTokenizer.prototype._read_open = function(c, open_token) {\n  var resulting_string = null;\n  var token = null;\n  if (!open_token) {\n    if (c === '<') {\n\n      resulting_string = this._input.next();\n      if (this._input.peek() === '/') {\n        resulting_string += this._input.next();\n      }\n      resulting_string += this.__patterns.element_name.read();\n      token = this._create_token(TOKEN.TAG_OPEN, resulting_string);\n    }\n  }\n  return token;\n};\n\nTokenizer.prototype._read_open_handlebars = function(c, open_token) {\n  var resulting_string = null;\n  var token = null;\n  if (!open_token) {\n    if (this._options.indent_handlebars && c === '{' && this._input.peek(1) === '{') {\n      if (this._input.peek(2) === '!') {\n        resulting_string = this.__patterns.handlebars_comment.read();\n        resulting_string = resulting_string || this.__patterns.handlebars.read();\n        token = this._create_token(TOKEN.COMMENT, resulting_string);\n      } else {\n        resulting_string = this.__patterns.handlebars_open.read();\n        token = this._create_token(TOKEN.TAG_OPEN, resulting_string);\n      }\n    }\n  }\n  return token;\n};\n\n\nTokenizer.prototype._read_close = function(c, open_token) {\n  var resulting_string = null;\n  var token = null;\n  if (open_token) {\n    if (open_token.text[0] === '<' && (c === '>' || (c === '/' && this._input.peek(1) === '>'))) {\n      resulting_string = this._input.next();\n      if (c === '/') { //  for close tag \"/>\"\n        resulting_string += this._input.next();\n      }\n      token = this._create_token(TOKEN.TAG_CLOSE, resulting_string);\n    } else if (open_token.text[0] === '{' && c === '}' && this._input.peek(1) === '}') {\n      this._input.next();\n      this._input.next();\n      token = this._create_token(TOKEN.TAG_CLOSE, '}}');\n    }\n  }\n\n  return token;\n};\n\nTokenizer.prototype._read_attribute = function(c, previous_token, open_token) {\n  var token = null;\n  var resulting_string = '';\n  if (open_token && open_token.text[0] === '<') {\n\n    if (c === '=') {\n      token = this._create_token(TOKEN.EQUALS, this._input.next());\n    } else if (c === '\"' || c === \"'\") {\n      var content = this._input.next();\n      if (c === '\"') {\n        content += this.__patterns.double_quote.read();\n      } else {\n        content += this.__patterns.single_quote.read();\n      }\n      token = this._create_token(TOKEN.VALUE, content);\n    } else {\n      resulting_string = this.__patterns.attribute.read();\n\n      if (resulting_string) {\n        if (previous_token.type === TOKEN.EQUALS) {\n          token = this._create_token(TOKEN.VALUE, resulting_string);\n        } else {\n          token = this._create_token(TOKEN.ATTRIBUTE, resulting_string);\n        }\n      }\n    }\n  }\n  return token;\n};\n\nTokenizer.prototype._is_content_unformatted = function(tag_name) {\n  // void_elements have no content and so cannot have unformatted content\n  // script and style tags should always be read as unformatted content\n  // finally content_unformatted and unformatted element contents are unformatted\n  return this._options.void_elements.indexOf(tag_name) === -1 &&\n    (this._options.content_unformatted.indexOf(tag_name) !== -1 ||\n      this._options.unformatted.indexOf(tag_name) !== -1);\n};\n\n\nTokenizer.prototype._read_raw_content = function(c, previous_token, open_token) { // jshint unused:false\n  var resulting_string = '';\n  if (open_token && open_token.text[0] === '{') {\n    resulting_string = this.__patterns.handlebars_raw_close.read();\n  } else if (previous_token.type === TOKEN.TAG_CLOSE &&\n    previous_token.opened.text[0] === '<' && previous_token.text[0] !== '/') {\n    // ^^ empty tag has no content \n    var tag_name = previous_token.opened.text.substr(1).toLowerCase();\n    if (tag_name === 'script' || tag_name === 'style') {\n      // Script and style tags are allowed to have comments wrapping their content\n      // or just have regular content.\n      var token = this._read_comment_or_cdata(c);\n      if (token) {\n        token.type = TOKEN.TEXT;\n        return token;\n      }\n      resulting_string = this._input.readUntil(new RegExp('</' + tag_name + '[\\\\n\\\\r\\\\t ]*?>', 'ig'));\n    } else if (this._is_content_unformatted(tag_name)) {\n\n      resulting_string = this._input.readUntil(new RegExp('</' + tag_name + '[\\\\n\\\\r\\\\t ]*?>', 'ig'));\n    }\n  }\n\n  if (resulting_string) {\n    return this._create_token(TOKEN.TEXT, resulting_string);\n  }\n\n  return null;\n};\n\nTokenizer.prototype._read_content_word = function(c) {\n  var resulting_string = '';\n  if (this._options.unformatted_content_delimiter) {\n    if (c === this._options.unformatted_content_delimiter[0]) {\n      resulting_string = this.__patterns.unformatted_content_delimiter.read();\n    }\n  }\n\n  if (!resulting_string) {\n    resulting_string = this.__patterns.word.read();\n  }\n  if (resulting_string) {\n    return this._create_token(TOKEN.TEXT, resulting_string);\n  }\n};\n\nmodule.exports.Tokenizer = Tokenizer;\nmodule.exports.TOKEN = TOKEN;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Options = require('../html/options').Options;\nvar Output = require('../core/output').Output;\nvar Tokenizer = require('../html/tokenizer').Tokenizer;\nvar TOKEN = require('../html/tokenizer').TOKEN;\n\nvar lineBreak = /\\r\\n|[\\r\\n]/;\nvar allLineBreaks = /\\r\\n|[\\r\\n]/g;\n\nvar Printer = function(options, base_indent_string) { //handles input/output and some other printing functions\n\n  this.indent_level = 0;\n  this.alignment_size = 0;\n  this.max_preserve_newlines = options.max_preserve_newlines;\n  this.preserve_newlines = options.preserve_newlines;\n\n  this._output = new Output(options, base_indent_string);\n\n};\n\nPrinter.prototype.current_line_has_match = function(pattern) {\n  return this._output.current_line.has_match(pattern);\n};\n\nPrinter.prototype.set_space_before_token = function(value, non_breaking) {\n  this._output.space_before_token = value;\n  this._output.non_breaking_space = non_breaking;\n};\n\nPrinter.prototype.set_wrap_point = function() {\n  this._output.set_indent(this.indent_level, this.alignment_size);\n  this._output.set_wrap_point();\n};\n\n\nPrinter.prototype.add_raw_token = function(token) {\n  this._output.add_raw_token(token);\n};\n\nPrinter.prototype.print_preserved_newlines = function(raw_token) {\n  var newlines = 0;\n  if (raw_token.type !== TOKEN.TEXT && raw_token.previous.type !== TOKEN.TEXT) {\n    newlines = raw_token.newlines ? 1 : 0;\n  }\n\n  if (this.preserve_newlines) {\n    newlines = raw_token.newlines < this.max_preserve_newlines + 1 ? raw_token.newlines : this.max_preserve_newlines + 1;\n  }\n  for (var n = 0; n < newlines; n++) {\n    this.print_newline(n > 0);\n  }\n\n  return newlines !== 0;\n};\n\nPrinter.prototype.traverse_whitespace = function(raw_token) {\n  if (raw_token.whitespace_before || raw_token.newlines) {\n    if (!this.print_preserved_newlines(raw_token)) {\n      this._output.space_before_token = true;\n    }\n    return true;\n  }\n  return false;\n};\n\nPrinter.prototype.previous_token_wrapped = function() {\n  return this._output.previous_token_wrapped;\n};\n\nPrinter.prototype.print_newline = function(force) {\n  this._output.add_new_line(force);\n};\n\nPrinter.prototype.print_token = function(token) {\n  if (token.text) {\n    this._output.set_indent(this.indent_level, this.alignment_size);\n    this._output.add_token(token.text);\n  }\n};\n\nPrinter.prototype.indent = function() {\n  this.indent_level++;\n};\n\nPrinter.prototype.get_full_indent = function(level) {\n  level = this.indent_level + (level || 0);\n  if (level < 1) {\n    return '';\n  }\n\n  return this._output.get_indent_string(level);\n};\n\nvar get_type_attribute = function(start_token) {\n  var result = null;\n  var raw_token = start_token.next;\n\n  // Search attributes for a type attribute\n  while (raw_token.type !== TOKEN.EOF && start_token.closed !== raw_token) {\n    if (raw_token.type === TOKEN.ATTRIBUTE && raw_token.text === 'type') {\n      if (raw_token.next && raw_token.next.type === TOKEN.EQUALS &&\n        raw_token.next.next && raw_token.next.next.type === TOKEN.VALUE) {\n        result = raw_token.next.next.text;\n      }\n      break;\n    }\n    raw_token = raw_token.next;\n  }\n\n  return result;\n};\n\nvar get_custom_beautifier_name = function(tag_check, raw_token) {\n  var typeAttribute = null;\n  var result = null;\n\n  if (!raw_token.closed) {\n    return null;\n  }\n\n  if (tag_check === 'script') {\n    typeAttribute = 'text/javascript';\n  } else if (tag_check === 'style') {\n    typeAttribute = 'text/css';\n  }\n\n  typeAttribute = get_type_attribute(raw_token) || typeAttribute;\n\n  // For script and style tags that have a type attribute, only enable custom beautifiers for matching values\n  // For those without a type attribute use default;\n  if (typeAttribute.search('text/css') > -1) {\n    result = 'css';\n  } else if (typeAttribute.search(/module|((text|application|dojo)\\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\\+)?json|method|aspect))/) > -1) {\n    result = 'javascript';\n  } else if (typeAttribute.search(/(text|application|dojo)\\/(x-)?(html)/) > -1) {\n    result = 'html';\n  } else if (typeAttribute.search(/test\\/null/) > -1) {\n    // Test only mime-type for testing the beautifier when null is passed as beautifing function\n    result = 'null';\n  }\n\n  return result;\n};\n\nfunction in_array(what, arr) {\n  return arr.indexOf(what) !== -1;\n}\n\nfunction TagFrame(parent, parser_token, indent_level) {\n  this.parent = parent || null;\n  this.tag = parser_token ? parser_token.tag_name : '';\n  this.indent_level = indent_level || 0;\n  this.parser_token = parser_token || null;\n}\n\nfunction TagStack(printer) {\n  this._printer = printer;\n  this._current_frame = null;\n}\n\nTagStack.prototype.get_parser_token = function() {\n  return this._current_frame ? this._current_frame.parser_token : null;\n};\n\nTagStack.prototype.record_tag = function(parser_token) { //function to record a tag and its parent in this.tags Object\n  var new_frame = new TagFrame(this._current_frame, parser_token, this._printer.indent_level);\n  this._current_frame = new_frame;\n};\n\nTagStack.prototype._try_pop_frame = function(frame) { //function to retrieve the opening tag to the corresponding closer\n  var parser_token = null;\n\n  if (frame) {\n    parser_token = frame.parser_token;\n    this._printer.indent_level = frame.indent_level;\n    this._current_frame = frame.parent;\n  }\n\n  return parser_token;\n};\n\nTagStack.prototype._get_frame = function(tag_list, stop_list) { //function to retrieve the opening tag to the corresponding closer\n  var frame = this._current_frame;\n\n  while (frame) { //till we reach '' (the initial value);\n    if (tag_list.indexOf(frame.tag) !== -1) { //if this is it use it\n      break;\n    } else if (stop_list && stop_list.indexOf(frame.tag) !== -1) {\n      frame = null;\n      break;\n    }\n    frame = frame.parent;\n  }\n\n  return frame;\n};\n\nTagStack.prototype.try_pop = function(tag, stop_list) { //function to retrieve the opening tag to the corresponding closer\n  var frame = this._get_frame([tag], stop_list);\n  return this._try_pop_frame(frame);\n};\n\nTagStack.prototype.indent_to_tag = function(tag_list) {\n  var frame = this._get_frame(tag_list);\n  if (frame) {\n    this._printer.indent_level = frame.indent_level;\n  }\n};\n\nfunction Beautifier(source_text, options, js_beautify, css_beautify) {\n  //Wrapper function to invoke all the necessary constructors and deal with the output.\n  this._source_text = source_text || '';\n  options = options || {};\n  this._js_beautify = js_beautify;\n  this._css_beautify = css_beautify;\n  this._tag_stack = null;\n\n  // Allow the setting of language/file-type specific options\n  // with inheritance of overall settings\n  var optionHtml = new Options(options, 'html');\n\n  this._options = optionHtml;\n\n  this._is_wrap_attributes_force = this._options.wrap_attributes.substr(0, 'force'.length) === 'force';\n  this._is_wrap_attributes_force_expand_multiline = (this._options.wrap_attributes === 'force-expand-multiline');\n  this._is_wrap_attributes_force_aligned = (this._options.wrap_attributes === 'force-aligned');\n  this._is_wrap_attributes_aligned_multiple = (this._options.wrap_attributes === 'aligned-multiple');\n  this._is_wrap_attributes_preserve = this._options.wrap_attributes.substr(0, 'preserve'.length) === 'preserve';\n  this._is_wrap_attributes_preserve_aligned = (this._options.wrap_attributes === 'preserve-aligned');\n}\n\nBeautifier.prototype.beautify = function() {\n\n  // if disabled, return the input unchanged.\n  if (this._options.disabled) {\n    return this._source_text;\n  }\n\n  var source_text = this._source_text;\n  var eol = this._options.eol;\n  if (this._options.eol === 'auto') {\n    eol = '\\n';\n    if (source_text && lineBreak.test(source_text)) {\n      eol = source_text.match(lineBreak)[0];\n    }\n  }\n\n  // HACK: newline parsing inconsistent. This brute force normalizes the input.\n  source_text = source_text.replace(allLineBreaks, '\\n');\n\n  var baseIndentString = source_text.match(/^[\\t ]*/)[0];\n\n  var last_token = {\n    text: '',\n    type: ''\n  };\n\n  var last_tag_token = new TagOpenParserToken();\n\n  var printer = new Printer(this._options, baseIndentString);\n  var tokens = new Tokenizer(source_text, this._options).tokenize();\n\n  this._tag_stack = new TagStack(printer);\n\n  var parser_token = null;\n  var raw_token = tokens.next();\n  while (raw_token.type !== TOKEN.EOF) {\n\n    if (raw_token.type === TOKEN.TAG_OPEN || raw_token.type === TOKEN.COMMENT) {\n      parser_token = this._handle_tag_open(printer, raw_token, last_tag_token, last_token);\n      last_tag_token = parser_token;\n    } else if ((raw_token.type === TOKEN.ATTRIBUTE || raw_token.type === TOKEN.EQUALS || raw_token.type === TOKEN.VALUE) ||\n      (raw_token.type === TOKEN.TEXT && !last_tag_token.tag_complete)) {\n      parser_token = this._handle_inside_tag(printer, raw_token, last_tag_token, tokens);\n    } else if (raw_token.type === TOKEN.TAG_CLOSE) {\n      parser_token = this._handle_tag_close(printer, raw_token, last_tag_token);\n    } else if (raw_token.type === TOKEN.TEXT) {\n      parser_token = this._handle_text(printer, raw_token, last_tag_token);\n    } else {\n      // This should never happen, but if it does. Print the raw token\n      printer.add_raw_token(raw_token);\n    }\n\n    last_token = parser_token;\n\n    raw_token = tokens.next();\n  }\n  var sweet_code = printer._output.get_code(eol);\n\n  return sweet_code;\n};\n\nBeautifier.prototype._handle_tag_close = function(printer, raw_token, last_tag_token) {\n  var parser_token = {\n    text: raw_token.text,\n    type: raw_token.type\n  };\n  printer.alignment_size = 0;\n  last_tag_token.tag_complete = true;\n\n  printer.set_space_before_token(raw_token.newlines || raw_token.whitespace_before !== '', true);\n  if (last_tag_token.is_unformatted) {\n    printer.add_raw_token(raw_token);\n  } else {\n    if (last_tag_token.tag_start_char === '<') {\n      printer.set_space_before_token(raw_token.text[0] === '/', true); // space before />, no space before >\n      if (this._is_wrap_attributes_force_expand_multiline && last_tag_token.has_wrapped_attrs) {\n        printer.print_newline(false);\n      }\n    }\n    printer.print_token(raw_token);\n\n  }\n\n  if (last_tag_token.indent_content &&\n    !(last_tag_token.is_unformatted || last_tag_token.is_content_unformatted)) {\n    printer.indent();\n\n    // only indent once per opened tag\n    last_tag_token.indent_content = false;\n  }\n\n  if (!last_tag_token.is_inline_element &&\n    !(last_tag_token.is_unformatted || last_tag_token.is_content_unformatted)) {\n    printer.set_wrap_point();\n  }\n\n  return parser_token;\n};\n\nBeautifier.prototype._handle_inside_tag = function(printer, raw_token, last_tag_token, tokens) {\n  var wrapped = last_tag_token.has_wrapped_attrs;\n  var parser_token = {\n    text: raw_token.text,\n    type: raw_token.type\n  };\n\n  printer.set_space_before_token(raw_token.newlines || raw_token.whitespace_before !== '', true);\n  if (last_tag_token.is_unformatted) {\n    printer.add_raw_token(raw_token);\n  } else if (last_tag_token.tag_start_char === '{' && raw_token.type === TOKEN.TEXT) {\n    // For the insides of handlebars allow newlines or a single space between open and contents\n    if (printer.print_preserved_newlines(raw_token)) {\n      raw_token.newlines = 0;\n      printer.add_raw_token(raw_token);\n    } else {\n      printer.print_token(raw_token);\n    }\n  } else {\n    if (raw_token.type === TOKEN.ATTRIBUTE) {\n      printer.set_space_before_token(true);\n      last_tag_token.attr_count += 1;\n    } else if (raw_token.type === TOKEN.EQUALS) { //no space before =\n      printer.set_space_before_token(false);\n    } else if (raw_token.type === TOKEN.VALUE && raw_token.previous.type === TOKEN.EQUALS) { //no space before value\n      printer.set_space_before_token(false);\n    }\n\n    if (raw_token.type === TOKEN.ATTRIBUTE && last_tag_token.tag_start_char === '<') {\n      if (this._is_wrap_attributes_preserve || this._is_wrap_attributes_preserve_aligned) {\n        printer.traverse_whitespace(raw_token);\n        wrapped = wrapped || raw_token.newlines !== 0;\n      }\n\n\n      if (this._is_wrap_attributes_force) {\n        var force_attr_wrap = last_tag_token.attr_count > 1;\n        if (this._is_wrap_attributes_force_expand_multiline && last_tag_token.attr_count === 1) {\n          var is_only_attribute = true;\n          var peek_index = 0;\n          var peek_token;\n          do {\n            peek_token = tokens.peek(peek_index);\n            if (peek_token.type === TOKEN.ATTRIBUTE) {\n              is_only_attribute = false;\n              break;\n            }\n            peek_index += 1;\n          } while (peek_index < 4 && peek_token.type !== TOKEN.EOF && peek_token.type !== TOKEN.TAG_CLOSE);\n\n          force_attr_wrap = !is_only_attribute;\n        }\n\n        if (force_attr_wrap) {\n          printer.print_newline(false);\n          wrapped = true;\n        }\n      }\n    }\n    printer.print_token(raw_token);\n    wrapped = wrapped || printer.previous_token_wrapped();\n    last_tag_token.has_wrapped_attrs = wrapped;\n  }\n  return parser_token;\n};\n\nBeautifier.prototype._handle_text = function(printer, raw_token, last_tag_token) {\n  var parser_token = {\n    text: raw_token.text,\n    type: 'TK_CONTENT'\n  };\n  if (last_tag_token.custom_beautifier_name) { //check if we need to format javascript\n    this._print_custom_beatifier_text(printer, raw_token, last_tag_token);\n  } else if (last_tag_token.is_unformatted || last_tag_token.is_content_unformatted) {\n    printer.add_raw_token(raw_token);\n  } else {\n    printer.traverse_whitespace(raw_token);\n    printer.print_token(raw_token);\n  }\n  return parser_token;\n};\n\nBeautifier.prototype._print_custom_beatifier_text = function(printer, raw_token, last_tag_token) {\n  var local = this;\n  if (raw_token.text !== '') {\n\n    var text = raw_token.text,\n      _beautifier,\n      script_indent_level = 1,\n      pre = '',\n      post = '';\n    if (last_tag_token.custom_beautifier_name === 'javascript' && typeof this._js_beautify === 'function') {\n      _beautifier = this._js_beautify;\n    } else if (last_tag_token.custom_beautifier_name === 'css' && typeof this._css_beautify === 'function') {\n      _beautifier = this._css_beautify;\n    } else if (last_tag_token.custom_beautifier_name === 'html') {\n      _beautifier = function(html_source, options) {\n        var beautifier = new Beautifier(html_source, options, local._js_beautify, local._css_beautify);\n        return beautifier.beautify();\n      };\n    }\n\n    if (this._options.indent_scripts === \"keep\") {\n      script_indent_level = 0;\n    } else if (this._options.indent_scripts === \"separate\") {\n      script_indent_level = -printer.indent_level;\n    }\n\n    var indentation = printer.get_full_indent(script_indent_level);\n\n    // if there is at least one empty line at the end of this text, strip it\n    // we'll be adding one back after the text but before the containing tag.\n    text = text.replace(/\\n[ \\t]*$/, '');\n\n    // Handle the case where content is wrapped in a comment or cdata.\n    if (last_tag_token.custom_beautifier_name !== 'html' &&\n      text[0] === '<' && text.match(/^(<!--|<!\\[CDATA\\[)/)) {\n      var matched = /^(<!--[^\\n]*|<!\\[CDATA\\[)(\\n?)([ \\t\\n]*)([\\s\\S]*)(-->|]]>)$/.exec(text);\n\n      // if we start to wrap but don't finish, print raw\n      if (!matched) {\n        printer.add_raw_token(raw_token);\n        return;\n      }\n\n      pre = indentation + matched[1] + '\\n';\n      text = matched[4];\n      if (matched[5]) {\n        post = indentation + matched[5];\n      }\n\n      // if there is at least one empty line at the end of this text, strip it\n      // we'll be adding one back after the text but before the containing tag.\n      text = text.replace(/\\n[ \\t]*$/, '');\n\n      if (matched[2] || matched[3].indexOf('\\n') !== -1) {\n        // if the first line of the non-comment text has spaces\n        // use that as the basis for indenting in null case.\n        matched = matched[3].match(/[ \\t]+$/);\n        if (matched) {\n          raw_token.whitespace_before = matched[0];\n        }\n      }\n    }\n\n    if (text) {\n      if (_beautifier) {\n\n        // call the Beautifier if avaliable\n        var Child_options = function() {\n          this.eol = '\\n';\n        };\n        Child_options.prototype = this._options.raw_options;\n        var child_options = new Child_options();\n        text = _beautifier(indentation + text, child_options);\n      } else {\n        // simply indent the string otherwise\n        var white = raw_token.whitespace_before;\n        if (white) {\n          text = text.replace(new RegExp('\\n(' + white + ')?', 'g'), '\\n');\n        }\n\n        text = indentation + text.replace(/\\n/g, '\\n' + indentation);\n      }\n    }\n\n    if (pre) {\n      if (!text) {\n        text = pre + post;\n      } else {\n        text = pre + text + '\\n' + post;\n      }\n    }\n\n    printer.print_newline(false);\n    if (text) {\n      raw_token.text = text;\n      raw_token.whitespace_before = '';\n      raw_token.newlines = 0;\n      printer.add_raw_token(raw_token);\n      printer.print_newline(true);\n    }\n  }\n};\n\nBeautifier.prototype._handle_tag_open = function(printer, raw_token, last_tag_token, last_token) {\n  var parser_token = this._get_tag_open_token(raw_token);\n\n  if ((last_tag_token.is_unformatted || last_tag_token.is_content_unformatted) &&\n    !last_tag_token.is_empty_element &&\n    raw_token.type === TOKEN.TAG_OPEN && raw_token.text.indexOf('</') === 0) {\n    // End element tags for unformatted or content_unformatted elements\n    // are printed raw to keep any newlines inside them exactly the same.\n    printer.add_raw_token(raw_token);\n    parser_token.start_tag_token = this._tag_stack.try_pop(parser_token.tag_name);\n  } else {\n    printer.traverse_whitespace(raw_token);\n    this._set_tag_position(printer, raw_token, parser_token, last_tag_token, last_token);\n    if (!parser_token.is_inline_element) {\n      printer.set_wrap_point();\n    }\n    printer.print_token(raw_token);\n  }\n\n  //indent attributes an auto, forced, aligned or forced-align line-wrap\n  if (this._is_wrap_attributes_force_aligned || this._is_wrap_attributes_aligned_multiple || this._is_wrap_attributes_preserve_aligned) {\n    parser_token.alignment_size = raw_token.text.length + 1;\n  }\n\n  if (!parser_token.tag_complete && !parser_token.is_unformatted) {\n    printer.alignment_size = parser_token.alignment_size;\n  }\n\n  return parser_token;\n};\n\nvar TagOpenParserToken = function(parent, raw_token) {\n  this.parent = parent || null;\n  this.text = '';\n  this.type = 'TK_TAG_OPEN';\n  this.tag_name = '';\n  this.is_inline_element = false;\n  this.is_unformatted = false;\n  this.is_content_unformatted = false;\n  this.is_empty_element = false;\n  this.is_start_tag = false;\n  this.is_end_tag = false;\n  this.indent_content = false;\n  this.multiline_content = false;\n  this.custom_beautifier_name = null;\n  this.start_tag_token = null;\n  this.attr_count = 0;\n  this.has_wrapped_attrs = false;\n  this.alignment_size = 0;\n  this.tag_complete = false;\n  this.tag_start_char = '';\n  this.tag_check = '';\n\n  if (!raw_token) {\n    this.tag_complete = true;\n  } else {\n    var tag_check_match;\n\n    this.tag_start_char = raw_token.text[0];\n    this.text = raw_token.text;\n\n    if (this.tag_start_char === '<') {\n      tag_check_match = raw_token.text.match(/^<([^\\s>]*)/);\n      this.tag_check = tag_check_match ? tag_check_match[1] : '';\n    } else {\n      tag_check_match = raw_token.text.match(/^{{(?:[\\^]|#\\*?)?([^\\s}]+)/);\n      this.tag_check = tag_check_match ? tag_check_match[1] : '';\n\n      // handle \"{{#> myPartial}}\n      if (raw_token.text === '{{#>' && this.tag_check === '>' && raw_token.next !== null) {\n        this.tag_check = raw_token.next.text;\n      }\n    }\n    this.tag_check = this.tag_check.toLowerCase();\n\n    if (raw_token.type === TOKEN.COMMENT) {\n      this.tag_complete = true;\n    }\n\n    this.is_start_tag = this.tag_check.charAt(0) !== '/';\n    this.tag_name = !this.is_start_tag ? this.tag_check.substr(1) : this.tag_check;\n    this.is_end_tag = !this.is_start_tag ||\n      (raw_token.closed && raw_token.closed.text === '/>');\n\n    // handlebars tags that don't start with # or ^ are single_tags, and so also start and end.\n    this.is_end_tag = this.is_end_tag ||\n      (this.tag_start_char === '{' && (this.text.length < 3 || (/[^#\\^]/.test(this.text.charAt(2)))));\n  }\n};\n\nBeautifier.prototype._get_tag_open_token = function(raw_token) { //function to get a full tag and parse its type\n  var parser_token = new TagOpenParserToken(this._tag_stack.get_parser_token(), raw_token);\n\n  parser_token.alignment_size = this._options.wrap_attributes_indent_size;\n\n  parser_token.is_end_tag = parser_token.is_end_tag ||\n    in_array(parser_token.tag_check, this._options.void_elements);\n\n  parser_token.is_empty_element = parser_token.tag_complete ||\n    (parser_token.is_start_tag && parser_token.is_end_tag);\n\n  parser_token.is_unformatted = !parser_token.tag_complete && in_array(parser_token.tag_check, this._options.unformatted);\n  parser_token.is_content_unformatted = !parser_token.is_empty_element && in_array(parser_token.tag_check, this._options.content_unformatted);\n  parser_token.is_inline_element = in_array(parser_token.tag_name, this._options.inline) || parser_token.tag_start_char === '{';\n\n  return parser_token;\n};\n\nBeautifier.prototype._set_tag_position = function(printer, raw_token, parser_token, last_tag_token, last_token) {\n\n  if (!parser_token.is_empty_element) {\n    if (parser_token.is_end_tag) { //this tag is a double tag so check for tag-ending\n      parser_token.start_tag_token = this._tag_stack.try_pop(parser_token.tag_name); //remove it and all ancestors\n    } else { // it's a start-tag\n      // check if this tag is starting an element that has optional end element\n      // and do an ending needed\n      if (this._do_optional_end_element(parser_token)) {\n        if (!parser_token.is_inline_element) {\n          printer.print_newline(false);\n        }\n      }\n\n      this._tag_stack.record_tag(parser_token); //push it on the tag stack\n\n      if ((parser_token.tag_name === 'script' || parser_token.tag_name === 'style') &&\n        !(parser_token.is_unformatted || parser_token.is_content_unformatted)) {\n        parser_token.custom_beautifier_name = get_custom_beautifier_name(parser_token.tag_check, raw_token);\n      }\n    }\n  }\n\n  if (in_array(parser_token.tag_check, this._options.extra_liners)) { //check if this double needs an extra line\n    printer.print_newline(false);\n    if (!printer._output.just_added_blankline()) {\n      printer.print_newline(true);\n    }\n  }\n\n  if (parser_token.is_empty_element) { //if this tag name is a single tag type (either in the list or has a closing /)\n\n    // if you hit an else case, reset the indent level if you are inside an:\n    // 'if', 'unless', or 'each' block.\n    if (parser_token.tag_start_char === '{' && parser_token.tag_check === 'else') {\n      this._tag_stack.indent_to_tag(['if', 'unless', 'each']);\n      parser_token.indent_content = true;\n      // Don't add a newline if opening {{#if}} tag is on the current line\n      var foundIfOnCurrentLine = printer.current_line_has_match(/{{#if/);\n      if (!foundIfOnCurrentLine) {\n        printer.print_newline(false);\n      }\n    }\n\n    // Don't add a newline before elements that should remain where they are.\n    if (parser_token.tag_name === '!--' && last_token.type === TOKEN.TAG_CLOSE &&\n      last_tag_token.is_end_tag && parser_token.text.indexOf('\\n') === -1) {\n      //Do nothing. Leave comments on same line.\n    } else {\n      if (!(parser_token.is_inline_element || parser_token.is_unformatted)) {\n        printer.print_newline(false);\n      }\n      this._calcluate_parent_multiline(printer, parser_token);\n    }\n  } else if (parser_token.is_end_tag) { //this tag is a double tag so check for tag-ending\n    var do_end_expand = false;\n\n    // deciding whether a block is multiline should not be this hard\n    do_end_expand = parser_token.start_tag_token && parser_token.start_tag_token.multiline_content;\n    do_end_expand = do_end_expand || (!parser_token.is_inline_element &&\n      !(last_tag_token.is_inline_element || last_tag_token.is_unformatted) &&\n      !(last_token.type === TOKEN.TAG_CLOSE && parser_token.start_tag_token === last_tag_token) &&\n      last_token.type !== 'TK_CONTENT'\n    );\n\n    if (parser_token.is_content_unformatted || parser_token.is_unformatted) {\n      do_end_expand = false;\n    }\n\n    if (do_end_expand) {\n      printer.print_newline(false);\n    }\n  } else { // it's a start-tag\n    parser_token.indent_content = !parser_token.custom_beautifier_name;\n\n    if (parser_token.tag_start_char === '<') {\n      if (parser_token.tag_name === 'html') {\n        parser_token.indent_content = this._options.indent_inner_html;\n      } else if (parser_token.tag_name === 'head') {\n        parser_token.indent_content = this._options.indent_head_inner_html;\n      } else if (parser_token.tag_name === 'body') {\n        parser_token.indent_content = this._options.indent_body_inner_html;\n      }\n    }\n\n    if (!(parser_token.is_inline_element || parser_token.is_unformatted) &&\n      (last_token.type !== 'TK_CONTENT' || parser_token.is_content_unformatted)) {\n      printer.print_newline(false);\n    }\n\n    this._calcluate_parent_multiline(printer, parser_token);\n  }\n};\n\nBeautifier.prototype._calcluate_parent_multiline = function(printer, parser_token) {\n  if (parser_token.parent && printer._output.just_added_newline() &&\n    !((parser_token.is_inline_element || parser_token.is_unformatted) && parser_token.parent.is_inline_element)) {\n    parser_token.parent.multiline_content = true;\n  }\n};\n\n//To be used for <p> tag special case:\nvar p_closers = ['address', 'article', 'aside', 'blockquote', 'details', 'div', 'dl', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hr', 'main', 'nav', 'ol', 'p', 'pre', 'section', 'table', 'ul'];\nvar p_parent_excludes = ['a', 'audio', 'del', 'ins', 'map', 'noscript', 'video'];\n\nBeautifier.prototype._do_optional_end_element = function(parser_token) {\n  var result = null;\n  // NOTE: cases of \"if there is no more content in the parent element\"\n  // are handled automatically by the beautifier.\n  // It assumes parent or ancestor close tag closes all children.\n  // https://www.w3.org/TR/html5/syntax.html#optional-tags\n  if (parser_token.is_empty_element || !parser_token.is_start_tag || !parser_token.parent) {\n    return;\n\n  }\n\n  if (parser_token.tag_name === 'body') {\n    // A head element\u2019s end tag may be omitted if the head element is not immediately followed by a space character or a comment.\n    result = result || this._tag_stack.try_pop('head');\n\n    //} else if (parser_token.tag_name === 'body') {\n    // DONE: A body element\u2019s end tag may be omitted if the body element is not immediately followed by a comment.\n\n  } else if (parser_token.tag_name === 'li') {\n    // An li element\u2019s end tag may be omitted if the li element is immediately followed by another li element or if there is no more content in the parent element.\n    result = result || this._tag_stack.try_pop('li', ['ol', 'ul']);\n\n  } else if (parser_token.tag_name === 'dd' || parser_token.tag_name === 'dt') {\n    // A dd element\u2019s end tag may be omitted if the dd element is immediately followed by another dd element or a dt element, or if there is no more content in the parent element.\n    // A dt element\u2019s end tag may be omitted if the dt element is immediately followed by another dt element or a dd element.\n    result = result || this._tag_stack.try_pop('dt', ['dl']);\n    result = result || this._tag_stack.try_pop('dd', ['dl']);\n\n\n  } else if (parser_token.parent.tag_name === 'p' && p_closers.indexOf(parser_token.tag_name) !== -1) {\n    // IMPORTANT: this else-if works because p_closers has no overlap with any other element we look for in this method\n    // check for the parent element is an HTML element that is not an <a>, <audio>, <del>, <ins>, <map>, <noscript>, or <video> element,  or an autonomous custom element.\n    // To do this right, this needs to be coded as an inclusion of the inverse of the exclusion above.\n    // But to start with (if we ignore \"autonomous custom elements\") the exclusion would be fine.\n    var p_parent = parser_token.parent.parent;\n    if (!p_parent || p_parent_excludes.indexOf(p_parent.tag_name) === -1) {\n      result = result || this._tag_stack.try_pop('p');\n    }\n  } else if (parser_token.tag_name === 'rp' || parser_token.tag_name === 'rt') {\n    // An rt element\u2019s end tag may be omitted if the rt element is immediately followed by an rt or rp element, or if there is no more content in the parent element.\n    // An rp element\u2019s end tag may be omitted if the rp element is immediately followed by an rt or rp element, or if there is no more content in the parent element.\n    result = result || this._tag_stack.try_pop('rt', ['ruby', 'rtc']);\n    result = result || this._tag_stack.try_pop('rp', ['ruby', 'rtc']);\n\n  } else if (parser_token.tag_name === 'optgroup') {\n    // An optgroup element\u2019s end tag may be omitted if the optgroup element is immediately followed by another optgroup element, or if there is no more content in the parent element.\n    // An option element\u2019s end tag may be omitted if the option element is immediately followed by another option element, or if it is immediately followed by an optgroup element, or if there is no more content in the parent element.\n    result = result || this._tag_stack.try_pop('optgroup', ['select']);\n    //result = result || this._tag_stack.try_pop('option', ['select']);\n\n  } else if (parser_token.tag_name === 'option') {\n    // An option element\u2019s end tag may be omitted if the option element is immediately followed by another option element, or if it is immediately followed by an optgroup element, or if there is no more content in the parent element.\n    result = result || this._tag_stack.try_pop('option', ['select', 'datalist', 'optgroup']);\n\n  } else if (parser_token.tag_name === 'colgroup') {\n    // DONE: A colgroup element\u2019s end tag may be omitted if the colgroup element is not immediately followed by a space character or a comment.\n    // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.\n    result = result || this._tag_stack.try_pop('caption', ['table']);\n\n  } else if (parser_token.tag_name === 'thead') {\n    // A colgroup element's end tag may be ommitted if a thead, tfoot, tbody, or tr element is started.\n    // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.\n    result = result || this._tag_stack.try_pop('caption', ['table']);\n    result = result || this._tag_stack.try_pop('colgroup', ['table']);\n\n    //} else if (parser_token.tag_name === 'caption') {\n    // DONE: A caption element\u2019s end tag may be omitted if the caption element is not immediately followed by a space character or a comment.\n\n  } else if (parser_token.tag_name === 'tbody' || parser_token.tag_name === 'tfoot') {\n    // A thead element\u2019s end tag may be omitted if the thead element is immediately followed by a tbody or tfoot element.\n    // A tbody element\u2019s end tag may be omitted if the tbody element is immediately followed by a tbody or tfoot element, or if there is no more content in the parent element.\n    // A colgroup element's end tag may be ommitted if a thead, tfoot, tbody, or tr element is started.\n    // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.\n    result = result || this._tag_stack.try_pop('caption', ['table']);\n    result = result || this._tag_stack.try_pop('colgroup', ['table']);\n    result = result || this._tag_stack.try_pop('thead', ['table']);\n    result = result || this._tag_stack.try_pop('tbody', ['table']);\n\n    //} else if (parser_token.tag_name === 'tfoot') {\n    // DONE: A tfoot element\u2019s end tag may be omitted if there is no more content in the parent element.\n\n  } else if (parser_token.tag_name === 'tr') {\n    // A tr element\u2019s end tag may be omitted if the tr element is immediately followed by another tr element, or if there is no more content in the parent element.\n    // A colgroup element's end tag may be ommitted if a thead, tfoot, tbody, or tr element is started.\n    // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.\n    result = result || this._tag_stack.try_pop('caption', ['table']);\n    result = result || this._tag_stack.try_pop('colgroup', ['table']);\n    result = result || this._tag_stack.try_pop('tr', ['table', 'thead', 'tbody', 'tfoot']);\n\n  } else if (parser_token.tag_name === 'th' || parser_token.tag_name === 'td') {\n    // A td element\u2019s end tag may be omitted if the td element is immediately followed by a td or th element, or if there is no more content in the parent element.\n    // A th element\u2019s end tag may be omitted if the th element is immediately followed by a td or th element, or if there is no more content in the parent element.\n    result = result || this._tag_stack.try_pop('td', ['table', 'thead', 'tbody', 'tfoot', 'tr']);\n    result = result || this._tag_stack.try_pop('th', ['table', 'thead', 'tbody', 'tfoot', 'tr']);\n  }\n\n  // Start element omission not handled currently\n  // A head element\u2019s start tag may be omitted if the element is empty, or if the first thing inside the head element is an element.\n  // A tbody element\u2019s start tag may be omitted if the first thing inside the tbody element is a tr element, and if the element is not immediately preceded by a tbody, thead, or tfoot element whose end tag has been omitted. (It can\u2019t be omitted if the element is empty.)\n  // A colgroup element\u2019s start tag may be omitted if the first thing inside the colgroup element is a col element, and if the element is not immediately preceded by another colgroup element whose end tag has been omitted. (It can\u2019t be omitted if the element is empty.)\n\n  // Fix up the parent of the parser token\n  parser_token.parent = this._tag_stack.get_parser_token();\n\n  return result;\n};\n\nmodule.exports.Beautifier = Beautifier;\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar Beautifier = require('./beautifier').Beautifier,\n  Options = require('./options').Options;\n\nfunction style_html(html_source, options, js_beautify, css_beautify) {\n  var beautifier = new Beautifier(html_source, options, js_beautify, css_beautify);\n  return beautifier.beautify();\n}\n\nmodule.exports = style_html;\nmodule.exports.defaultOptions = function() {\n  return new Options();\n};\n", "/*jshint node:true */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n*/\n\n'use strict';\n\nvar js_beautify = require('./javascript/index');\nvar css_beautify = require('./css/index');\nvar html_beautify = require('./html/index');\n\nfunction style_html(html_source, options, js, css) {\n  js = js || js_beautify;\n  css = css || css_beautify;\n  return html_beautify(html_source, options, js, css);\n}\nstyle_html.defaultOptions = html_beautify.defaultOptions;\n\nmodule.exports.js = js_beautify;\nmodule.exports.css = css_beautify;\nmodule.exports.html = style_html;\n", "/*jshint node:true */\n/* globals define */\n/*\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n*/\n\n'use strict';\n\n/**\nThe following batches are equivalent:\n\nvar beautify_js = require('js-beautify');\nvar beautify_js = require('js-beautify').js;\nvar beautify_js = require('js-beautify').js_beautify;\n\nvar beautify_css = require('js-beautify').css;\nvar beautify_css = require('js-beautify').css_beautify;\n\nvar beautify_html = require('js-beautify').html;\nvar beautify_html = require('js-beautify').html_beautify;\n\nAll methods returned accept two arguments, the source string and an options object.\n**/\n\nfunction get_beautify(js_beautify, css_beautify, html_beautify) {\n  // the default is js\n  var beautify = function(src, config) {\n    return js_beautify.js_beautify(src, config);\n  };\n\n  // short aliases\n  beautify.js = js_beautify.js_beautify;\n  beautify.css = css_beautify.css_beautify;\n  beautify.html = html_beautify.html_beautify;\n\n  // legacy aliases\n  beautify.js_beautify = js_beautify.js_beautify;\n  beautify.css_beautify = css_beautify.css_beautify;\n  beautify.html_beautify = html_beautify.html_beautify;\n\n  return beautify;\n}\n\nif (typeof define === \"function\" && define.amd) {\n  // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n  define([\n    \"./lib/beautify\",\n    \"./lib/beautify-css\",\n    \"./lib/beautify-html\"\n  ], function(js_beautify, css_beautify, html_beautify) {\n    return get_beautify(js_beautify, css_beautify, html_beautify);\n  });\n} else {\n  (function(mod) {\n    var beautifier = require('./src/index');\n    beautifier.js_beautify = beautifier.js;\n    beautifier.css_beautify = beautifier.css;\n    beautifier.html_beautify = beautifier.html;\n\n    mod.exports = get_beautify(beautifier, beautifier, beautifier);\n\n  })(module);\n}", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst getAbstract_1 = __importDefault(require(\"./getAbstract\"));\n// @ts-ignore\nconst luna_object_viewer_1 = __importDefault(require(\"luna-object-viewer\"));\nconst isObj_1 = __importDefault(require(\"licia/isObj\"));\nconst isStr_1 = __importDefault(require(\"licia/isStr\"));\nconst isErr_1 = __importDefault(require(\"licia/isErr\"));\nconst isPrimitive_1 = __importDefault(require(\"licia/isPrimitive\"));\nconst defaults_1 = __importDefault(require(\"licia/defaults\"));\nconst isEl_1 = __importDefault(require(\"licia/isEl\"));\nconst toStr_1 = __importDefault(require(\"licia/toStr\"));\nconst toNum_1 = __importDefault(require(\"licia/toNum\"));\nconst toInt_1 = __importDefault(require(\"licia/toInt\"));\nconst escape_1 = __importDefault(require(\"licia/escape\"));\nconst isNull_1 = __importDefault(require(\"licia/isNull\"));\nconst isUndef_1 = __importDefault(require(\"licia/isUndef\"));\nconst isFn_1 = __importDefault(require(\"licia/isFn\"));\nconst toArr_1 = __importDefault(require(\"licia/toArr\"));\nconst isArr_1 = __importDefault(require(\"licia/isArr\"));\nconst unique_1 = __importDefault(require(\"licia/unique\"));\nconst contain_1 = __importDefault(require(\"licia/contain\"));\nconst isEmpty_1 = __importDefault(require(\"licia/isEmpty\"));\nconst clone_1 = __importDefault(require(\"licia/clone\"));\nconst noop_1 = __importDefault(require(\"licia/noop\"));\nconst each_1 = __importDefault(require(\"licia/each\"));\nconst trim_1 = __importDefault(require(\"licia/trim\"));\nconst lowerCase_1 = __importDefault(require(\"licia/lowerCase\"));\nconst keys_1 = __importDefault(require(\"licia/keys\"));\nconst _1 = __importDefault(require(\"licia/$\"));\nconst h_1 = __importDefault(require(\"licia/h\"));\nconst Emitter_1 = __importDefault(require(\"licia/Emitter\"));\nconst stringifyAll_1 = __importDefault(require(\"licia/stringifyAll\"));\nconst nextTick_1 = __importDefault(require(\"licia/nextTick\"));\nconst linkify_1 = __importDefault(require(\"licia/linkify\"));\nconst highlight_1 = __importDefault(require(\"licia/highlight\"));\nconst util_1 = require(\"./util\");\nconst stripIndent_1 = __importDefault(require(\"licia/stripIndent\"));\nconst js_beautify_1 = __importDefault(require(\"js-beautify\"));\nconst regJsUrl = /https?:\\/\\/([0-9.\\-A-Za-z]+)(?::(\\d+))?\\/[A-Z.a-z0-9/]*\\.js/g;\nconst emptyHighlightStyle = {\n    comment: '',\n    string: '',\n    number: '',\n    keyword: '',\n    operator: '',\n};\nclass Log extends Emitter_1.default {\n    constructor(console, { type = 'log', args = [], id, group, targetGroup, header, ignoreFilter = false, accessGetter, unenumerable, lazyEvaluation, }) {\n        super();\n        this.container = h_1.default('div');\n        this.count = 1;\n        this.width = 0;\n        this.height = 0;\n        this.console = console;\n        this.type = type;\n        this.group = group;\n        this.targetGroup = targetGroup;\n        this.args = args;\n        this.id = id;\n        this.header = header;\n        this.ignoreFilter = ignoreFilter;\n        this.collapsed = false;\n        this.container.log = this;\n        this.height = 0;\n        this.width = 0;\n        this.$container = _1.default(this.container);\n        this.accessGetter = accessGetter;\n        this.unenumerable = unenumerable;\n        this.lazyEvaluation = lazyEvaluation;\n        this.formatMsg();\n        if (this.group) {\n            this.checkGroup();\n        }\n    }\n    // If state changed, return true.\n    checkGroup() {\n        let { group } = this;\n        let collapsed = false;\n        while (group) {\n            if (group.collapsed) {\n                collapsed = true;\n                break;\n            }\n            group = group.parent;\n        }\n        if (collapsed !== this.collapsed) {\n            this.collapsed = collapsed;\n            return true;\n        }\n        return false;\n    }\n    updateIcon(icon) {\n        const { c } = this.console;\n        const $icon = this.$container.find(c('.icon'));\n        $icon.rmAttr('class').addClass([c('icon'), c(`icon-${icon}`)]);\n        return this;\n    }\n    addCount() {\n        this.count++;\n        const { $container, count } = this;\n        const { c } = this.console;\n        const $countContainer = $container.find(c('.count-container'));\n        const $icon = $container.find(c('.icon-container'));\n        const $count = $countContainer.find(c('.count'));\n        if (count === 2) {\n            $countContainer.rmClass(c('hidden'));\n        }\n        $count.text(toStr_1.default(count));\n        $icon.addClass(c('hidden'));\n        return this;\n    }\n    groupEnd() {\n        const { $container } = this;\n        const { c } = this.console;\n        const $lastNesting = $container\n            .find(`.${c('nesting-level')}:not(.${c('group-closed')})`)\n            .last();\n        $lastNesting.addClass(c('group-closed'));\n        return this;\n    }\n    updateTime(time) {\n        const $timeContainer = this.$container.find(this.console.c('.time-container'));\n        if (this.header) {\n            $timeContainer.find('span').eq(0).text(time);\n            this.header.time = time;\n        }\n        return this;\n    }\n    isAttached() {\n        return !!this.container.parentNode;\n    }\n    updateSize(silent = true) {\n        const height = this.container.offsetHeight;\n        const width = this.container.offsetWidth;\n        if (this.height !== height || this.width !== width) {\n            this.height = height;\n            this.width = width;\n            if (!silent)\n                this.emit('updateSize');\n        }\n    }\n    html() {\n        return this.container.outerHTML;\n    }\n    text() {\n        return this.content.textContent || '';\n    }\n    needSrc() {\n        const { type, args } = this;\n        if (type === 'html')\n            return false;\n        for (let i = 0, len = args.length; i < len; i++) {\n            if (isObj_1.default(args[i]))\n                return true;\n        }\n        return false;\n    }\n    extractObj(cb = noop_1.default) {\n        const { args, type } = this;\n        const setSrc = (result) => {\n            this.src = result;\n            cb();\n        };\n        if (type === 'table') {\n            this._extractObj(args[0], {}, setSrc);\n        }\n        else {\n            this._extractObj(args.length === 1 && isObj_1.default(args[0]) ? args[0] : args, {}, setSrc);\n        }\n    }\n    _extractObj(obj, options = {}, cb) {\n        const { accessGetter, unenumerable } = this;\n        defaults_1.default(options, {\n            accessGetter,\n            unenumerable,\n            symbol: unenumerable,\n            timeout: 1000,\n        });\n        stringify(obj, options, (result) => cb(JSON.parse(result)));\n    }\n    click() {\n        const { type, src, $container, console, unenumerable, accessGetter } = this;\n        const { c } = console;\n        let { args } = this;\n        switch (type) {\n            case 'log':\n            case 'warn':\n            case 'debug':\n            case 'output':\n            case 'table':\n            case 'dir':\n            case 'group':\n            case 'groupCollapsed':\n                if (src || args) {\n                    const $json = $container.find(c('.json'));\n                    if ($json.hasClass(c('hidden'))) {\n                        if ($json.data('init') !== 'true') {\n                            if (src) {\n                                const staticViewer = new luna_object_viewer_1.default.Static($json.get(0));\n                                staticViewer.set(src);\n                                staticViewer.on('change', () => this.updateSize(false));\n                            }\n                            else {\n                                if (type === 'table' || args.length === 1) {\n                                    if (isObj_1.default(args[0]))\n                                        args = args[0];\n                                }\n                                const objViewer = new luna_object_viewer_1.default($json.get(0), {\n                                    unenumerable,\n                                    accessGetter,\n                                });\n                                objViewer.set(args);\n                                objViewer.on('change', () => this.updateSize(false));\n                            }\n                            $json.data('init', 'true');\n                        }\n                        $json.rmClass(c('hidden'));\n                    }\n                    else {\n                        $json.addClass(c('hidden'));\n                    }\n                }\n                else if (type === 'group' || type === 'groupCollapsed') {\n                    console.toggleGroup(this);\n                }\n                break;\n            case 'error':\n                $container.find(c('.stack')).toggleClass(c('hidden'));\n                break;\n        }\n        this.updateSize(false);\n    }\n    formatMsg() {\n        let { args } = this;\n        const { type, id, header, group, lazyEvaluation } = this;\n        const { c } = this.console;\n        // Don't change original args for lazy evaluation.\n        args = clone_1.default(args);\n        if (this.needSrc() && !lazyEvaluation) {\n            this.extractObj();\n        }\n        let msg = '';\n        let icon;\n        let err;\n        if (type === 'group' || type === 'groupCollapsed') {\n            if (args.length === 0) {\n                args = ['console.group'];\n            }\n        }\n        switch (type) {\n            case 'log':\n                msg = this.formatCommon(args);\n                break;\n            case 'debug':\n                msg = this.formatCommon(args);\n                break;\n            case 'dir':\n                msg = this.formatDir(args);\n                break;\n            case 'warn':\n                icon = 'warn';\n                msg = this.formatCommon(args);\n                break;\n            case 'error':\n                if (isStr_1.default(args[0]) && args.length !== 1)\n                    args = this.substituteStr(args);\n                err = args[0];\n                icon = 'error';\n                err = isErr_1.default(err) ? err : new Error(this.formatCommon(args));\n                this.src = err;\n                msg = this.formatErr(err);\n                break;\n            case 'table':\n                msg = this.formatTable(args);\n                break;\n            case 'html':\n                msg = args[0];\n                break;\n            case 'input':\n                msg = this.formatJs(args[0]);\n                icon = 'input';\n                break;\n            case 'output':\n                msg = this.formatCommon(args);\n                icon = 'output';\n                break;\n            case 'groupCollapsed':\n                msg = this.formatCommon(args);\n                icon = 'caret-right';\n                break;\n            case 'group':\n                msg = this.formatCommon(args);\n                icon = 'caret-down';\n                break;\n        }\n        if (!this.needSrc() || !lazyEvaluation) {\n            delete this.args;\n        }\n        // Only linkify for simple types\n        if (type !== 'error' && !this.args) {\n            msg = linkify_1.default(msg, (url) => {\n                return `<a href=\"${url}\" target=\"_blank\">${url}</a>`;\n            });\n        }\n        msg = this.render({ msg, type, icon, id, header, group });\n        this.$container.addClass(`${c('log-container')}`).html(msg);\n        this.$content = this.$container.find(c('.log-content'));\n        this.content = this.$content.get(0);\n    }\n    render(data) {\n        const { c } = this.console;\n        let html = '';\n        let indent = '';\n        if (data.group) {\n            const { indentLevel } = data.group;\n            for (let i = 0; i < indentLevel; i++) {\n                indent += `<div class=\"${c('nesting-level')}\"></div>`;\n            }\n        }\n        if (data.header) {\n            html += stripIndent_1.default `\n      <div class=\"${c('header')}\">\n        ${indent}\n        <div class=\"${c('time-from-container')}\">\n          <span>${data.header.time}</span> <span>${data.header.from}</span>\n        </div>\n      </div>`;\n        }\n        let icon = '';\n        if (data.icon) {\n            icon = `<div class=\"${c('icon-container')}\"><span class=\"${c('icon icon-' + data.icon)}\"></span></div>`;\n        }\n        html += `\n    <div class=\"${c(data.type + ' log-item')}\">\n      ${indent}\n      ${icon}\n      <div class=\"${c('count-container hidden')}\">\n        <div class=\"${c('count')}\"></div>\n      </div>    \n      <div class=\"${c('log-content-wrapper')}\">\n        <div class=\"${c('log-content')}\">${data.msg}</div>\n      </div>\n    </div>`;\n        return html;\n    }\n    formatTable(args) {\n        const Value = '__LunaConsoleValue';\n        const table = args[0];\n        let ret = '';\n        let filter = args[1];\n        let columns = [];\n        if (isStr_1.default(filter))\n            filter = toArr_1.default(filter);\n        if (!isArr_1.default(filter))\n            filter = null;\n        if (!isObj_1.default(table))\n            return this.formatCommon(args);\n        each_1.default(table, (val) => {\n            if (isPrimitive_1.default(val)) {\n                columns.push(Value);\n            }\n            else if (isObj_1.default(val)) {\n                columns = columns.concat(keys_1.default(val));\n            }\n        });\n        columns = unique_1.default(columns);\n        columns.sort();\n        if (filter)\n            columns = columns.filter((val) => contain_1.default(filter, val));\n        if (columns.length > 20)\n            columns = columns.slice(0, 20);\n        if (isEmpty_1.default(columns))\n            return this.formatCommon(args);\n        ret += '<table><thead><tr><th>(index)</th>';\n        columns.forEach((val) => (ret += `<th>${val === Value ? 'Value' : toStr_1.default(val)}</th>`));\n        ret += '</tr></thead><tbody>';\n        each_1.default(table, (obj, idx) => {\n            ret += `<tr><td>${idx}</td>`;\n            columns.forEach((column) => {\n                if (isObj_1.default(obj)) {\n                    ret +=\n                        column === Value\n                            ? '<td></td>'\n                            : `<td>${this.formatTableVal(obj[column])}</td>`;\n                }\n                else if (isPrimitive_1.default(obj)) {\n                    ret +=\n                        column === Value\n                            ? `<td>${this.formatTableVal(obj)}</td>`\n                            : '<td></td>';\n                }\n            });\n            ret += '</tr>';\n        });\n        ret += '</tbody></table>';\n        ret += `<div class=\"${this.console.c('json hidden')}\"></div>`;\n        return ret;\n    }\n    formatErr(err) {\n        let lines = err.stack ? err.stack.split('\\n') : [];\n        const msg = `${err.message || lines[0]}<br/>`;\n        lines = lines.map((val) => escape_1.default(val));\n        const stack = `<div class=\"${this.console.c('stack hidden')}\">${lines\n            .slice(1)\n            .join('<br/>')}</div>`;\n        return (msg +\n            stack.replace(regJsUrl, (match) => `<a href=\"${match}\" target=\"_blank\">${match}</a>`));\n    }\n    formatCommon(args, { htmlForEl = true } = {}) {\n        const needStrSubstitution = isStr_1.default(args[0]) && args.length !== 1;\n        if (needStrSubstitution)\n            args = this.substituteStr(args);\n        for (let i = 0, len = args.length; i < len; i++) {\n            let val = args[i];\n            if (isEl_1.default(val) && htmlForEl) {\n                args[i] = this.formatEl(val);\n            }\n            else if (isFn_1.default(val)) {\n                args[i] = this.formatJs(val);\n            }\n            else if (isObj_1.default(val)) {\n                args[i] = this.formatObj(val);\n            }\n            else if (isUndef_1.default(val)) {\n                args[i] = 'undefined';\n            }\n            else if (isNull_1.default(val)) {\n                args[i] = 'null';\n            }\n            else {\n                val = toStr_1.default(val);\n                if (i !== 0 || !needStrSubstitution)\n                    val = escape_1.default(val);\n                args[i] = val;\n            }\n        }\n        return (args.join(' ') + `<div class=\"${this.console.c('json hidden')}\"></div>`);\n    }\n    formatDir(args) {\n        return this.formatCommon(args, { htmlForEl: false });\n    }\n    formatTableVal(val) {\n        if (isObj_1.default(val))\n            return (val = '{\u2026}');\n        if (isPrimitive_1.default(val))\n            return this.getAbstract(val);\n        return toStr_1.default(val);\n    }\n    getAbstract(obj) {\n        return (`<span class=\"${this.console.c('abstract')}\">` +\n            getAbstract_1.default(obj, {\n                getterVal: this.accessGetter,\n                unenumerable: false,\n            }) +\n            '</span>');\n    }\n    substituteStr(args) {\n        const str = escape_1.default(args[0]);\n        let isInCss = false;\n        let newStr = '';\n        args.shift();\n        for (let i = 0, len = str.length; i < len; i++) {\n            const c = str[i];\n            if (c === '%' && args.length !== 0) {\n                i++;\n                const arg = args.shift();\n                switch (str[i]) {\n                    case 'i':\n                    case 'd':\n                        newStr += toInt_1.default(arg);\n                        break;\n                    case 'f':\n                        newStr += toNum_1.default(arg);\n                        break;\n                    case 's':\n                        newStr += toStr_1.default(arg);\n                        break;\n                    case 'O':\n                        if (isObj_1.default(arg)) {\n                            newStr += this.getAbstract(arg);\n                        }\n                        break;\n                    case 'o':\n                        if (isEl_1.default(arg)) {\n                            newStr += this.formatEl(arg);\n                        }\n                        else if (isObj_1.default(arg)) {\n                            newStr += this.getAbstract(arg);\n                        }\n                        break;\n                    case 'c':\n                        if (str.length <= i + 1) {\n                            break;\n                        }\n                        if (isInCss)\n                            newStr += '</span>';\n                        isInCss = true;\n                        newStr += `<span style=\"${correctStyle(arg)}\">`;\n                        break;\n                    default:\n                        i--;\n                        args.unshift(arg);\n                        newStr += c;\n                }\n            }\n            else {\n                newStr += c;\n            }\n        }\n        if (isInCss)\n            newStr += '</span>';\n        args.unshift(newStr);\n        return args;\n    }\n    formatJs(val) {\n        return `<pre class=\"${this.console.c('code')}\">${this.console.c(highlight_1.default(js_beautify_1.default(val, { indent_size: 2 }), 'js', emptyHighlightStyle))}</pre>`;\n    }\n    formatObj(val) {\n        let type = util_1.getObjType(val);\n        if (type === 'Array' && val.length > 1)\n            type = `(${val.length})`;\n        return `${type} ${this.getAbstract(val)}`;\n    }\n    formatEl(val) {\n        const { c } = this.console;\n        return `<pre class=\"${c('code')}\">${c(highlight_1.default(js_beautify_1.default.html(val.outerHTML, { unformatted: [], indent_size: 2 }), 'html', emptyHighlightStyle))}</pre>`;\n    }\n}\nexports.default = Log;\nfunction correctStyle(val) {\n    val = lowerCase_1.default(val);\n    const rules = val.split(';');\n    const style = {};\n    each_1.default(rules, (rule) => {\n        if (!contain_1.default(rule, ':'))\n            return;\n        const [name, val] = rule.split(':');\n        style[trim_1.default(name)] = trim_1.default(val);\n    });\n    style['display'] = 'inline-block';\n    style['max-width'] = '100%';\n    delete style.width;\n    delete style.height;\n    let ret = '';\n    each_1.default(style, (val, key) => {\n        ret += `${key}:${val};`;\n    });\n    return ret;\n}\nfunction stringify(obj, options, cb) {\n    const result = stringifyAll_1.default(obj, options);\n    nextTick_1.default(() => cb(result));\n}\n", "var now = require('./now');\nvar root = require('./root');\n\nvar performance = root.performance;\nvar process = root.process;\nvar loadTime;\n\nif (performance && performance.now) {\n    exports = function() {\n        return performance.now();\n    };\n} else if (process && process.hrtime) {\n    var getNanoSeconds = function() {\n        var hr = process.hrtime();\n        return hr[0] * 1e9 + hr[1];\n    };\n\n    loadTime = getNanoSeconds() - process.uptime() * 1e9;\n\n    exports = function() {\n        return (getNanoSeconds() - loadTime) / 1e6;\n    };\n} else {\n    loadTime = now();\n\n    exports = function() {\n        return now() - loadTime;\n    };\n}\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\n\nexports = function(val) {\n    return objToStr(val) === '[object RegExp]';\n};\n\nmodule.exports = exports;\n", "var extend = require('./extend');\nvar noop = require('./noop');\n\nexports = function(text, cb) {\n    cb = cb || noop;\n    var el = document.createElement('textarea');\n    var body = document.body;\n    extend(el.style, {\n        fontSize: '12pt',\n        border: '0',\n        padding: '0',\n        margin: '0',\n        position: 'absolute',\n        left: '-9999px'\n    });\n    el.value = text;\n    body.appendChild(el);\n\n    el.setAttribute('readonly', '');\n    el.select();\n    el.setSelectionRange(0, text.length);\n\n    try {\n        document.execCommand('copy');\n        cb();\n    } catch (e) {\n        cb(e);\n    } finally {\n        body.removeChild(el);\n    }\n};\n\nmodule.exports = exports;\n", "exports = function(fn, wait, immediate) {\n    var timeout;\n    return function() {\n        var ctx = this;\n        var args = arguments;\n\n        var throttler = function() {\n            timeout = null;\n            fn.apply(ctx, args);\n        };\n\n        if (!immediate) clearTimeout(timeout);\n        if (!immediate || !timeout) timeout = setTimeout(throttler, wait);\n    };\n};\n\nmodule.exports = exports;\n", "var debounce = require('./debounce');\n\nexports = function(fn, wait) {\n    return debounce(fn, wait, true);\n};\n\nmodule.exports = exports;\n", "exports = function(xpath) {\n    var ret = [];\n    var nodesSnapshot = document.evaluate(\n        xpath,\n        document,\n        null,\n        XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,\n        null\n    );\n\n    for (var i = 0; i < nodesSnapshot.snapshotLength; i++) {\n        ret.push(nodesSnapshot.snapshotItem(i));\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "var objToStr = require('./objToStr');\n\nexports = function(val) {\n    return objToStr(val) === '[object Date]';\n};\n\nmodule.exports = exports;\n", "exports = function(str, n) {\n    var ret = '';\n    if (n < 1) return '';\n\n    while (n > 0) {\n        if (n & 1) ret += str;\n        n >>= 1;\n        str += str;\n    }\n\n    return ret;\n};\n\nmodule.exports = exports;\n", "var repeat = require('./repeat');\nvar toStr = require('./toStr');\n\nexports = function(str, len, chars) {\n    str = toStr(str);\n    var strLen = str.length;\n    chars = chars || ' ';\n    if (strLen < len) str = (repeat(chars, len - strLen) + str).slice(-len);\n    return str;\n};\n\nmodule.exports = exports;\n", "var isStr = require('./isStr');\nvar isDate = require('./isDate');\nvar toStr = require('./toStr');\nvar lpad = require('./lpad');\n\nexports = function(date, mask, utc, gmt) {\n    if (arguments.length === 1 && isStr(date) && !regNum.test(date)) {\n        mask = date;\n        date = undefined;\n    }\n\n    date = date || new Date();\n    if (!isDate(date)) date = new Date(date);\n    mask = toStr(exports.masks[mask] || mask || exports.masks['default']);\n    var maskSlice = mask.slice(0, 4);\n\n    if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n        mask = mask.slice(4);\n        utc = true;\n        if (maskSlice === 'GMT:') gmt = true;\n    }\n\n    var prefix = utc ? 'getUTC' : 'get';\n    var d = date[prefix + 'Date']();\n    var D = date[prefix + 'Day']();\n    var m = date[prefix + 'Month']();\n    var y = date[prefix + 'FullYear']();\n    var H = date[prefix + 'Hours']();\n    var M = date[prefix + 'Minutes']();\n    var s = date[prefix + 'Seconds']();\n    var L = date[prefix + 'Milliseconds']();\n    var o = utc ? 0 : date.getTimezoneOffset();\n    var flags = {\n        d: d,\n        dd: padZero(d),\n        ddd: exports.i18n.dayNames[D],\n        dddd: exports.i18n.dayNames[D + 7],\n        m: m + 1,\n        mm: padZero(m + 1),\n        mmm: exports.i18n.monthNames[m],\n        mmmm: exports.i18n.monthNames[m + 12],\n        yy: toStr(y).slice(2),\n        yyyy: y,\n        h: H % 12 || 12,\n        hh: padZero(H % 12 || 12),\n        H: H,\n        HH: padZero(H),\n        M: M,\n        MM: padZero(M),\n        s: s,\n        ss: padZero(s),\n        l: padZero(L, 3),\n        L: padZero(Math.round(L / 10)),\n        t: H < 12 ? 'a' : 'p',\n        tt: H < 12 ? 'am' : 'pm',\n        T: H < 12 ? 'A' : 'P',\n        TT: H < 12 ? 'AM' : 'PM',\n        Z: gmt\n            ? 'GMT'\n            : utc\n            ? 'UTC'\n            : (toStr(date).match(regTimezone) || [''])\n                  .pop()\n                  .replace(regTimezoneClip, ''),\n        o:\n            (o > 0 ? '-' : '+') +\n            padZero(Math.floor(Math.abs(o) / 60) * 100 + (Math.abs(o) % 60), 4),\n        S: ['th', 'st', 'nd', 'rd'][\n            d % 10 > 3 ? 0 : (((d % 100) - (d % 10) != 10) * d) % 10\n        ]\n    };\n    return mask.replace(regToken, function(match) {\n        if (match in flags) return flags[match];\n        return match.slice(1, match.length - 1);\n    });\n};\n\nvar padZero = function(str) {\n    var len =\n        arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    return lpad(toStr(str), len, '0');\n};\n\nvar regToken = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\nvar regTimezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\nvar regNum = /\\d/;\nvar regTimezoneClip = /[^-+\\dA-Z]/g;\nexports.masks = {\n    default: 'ddd mmm dd yyyy HH:MM:ss',\n    shortDate: 'm/d/yy',\n    mediumDate: 'mmm d, yyyy',\n    longDate: 'mmmm d, yyyy',\n    fullDate: 'dddd, mmmm d, yyyy',\n    shortTime: 'h:MM TT',\n    mediumTime: 'h:MM:ss TT',\n    longTime: 'h:MM:ss TT Z',\n    isoDate: 'yyyy-mm-dd',\n    isoTime: 'HH:MM:ss',\n    isoDateTime: \"yyyy-mm-dd'T'HH:MM:sso\",\n    isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\",\n    expiresHeaderFormat: 'ddd, dd mmm yyyy HH:MM:ss Z'\n};\nexports.i18n = {\n    dayNames: [\n        'Sun',\n        'Mon',\n        'Tue',\n        'Wed',\n        'Thu',\n        'Fri',\n        'Sat',\n        'Sunday',\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Saturday'\n    ],\n    monthNames: [\n        'Jan',\n        'Feb',\n        'Mar',\n        'Apr',\n        'May',\n        'Jun',\n        'Jul',\n        'Aug',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Dec',\n        'January',\n        'February',\n        'March',\n        'April',\n        'May',\n        'June',\n        'July',\n        'August',\n        'September',\n        'October',\n        'November',\n        'December'\n    ]\n};\n\nmodule.exports = exports;\n", "var root = require('./root');\n\nvar getComputedStyle = root.getComputedStyle;\nvar document = root.document;\n\nexports = function(el) {\n    var _ref =\n            arguments.length > 1 && arguments[1] !== undefined\n                ? arguments[1]\n                : {},\n        _ref$display = _ref.display,\n        display = _ref$display === void 0 ? true : _ref$display,\n        _ref$visibility = _ref.visibility,\n        visibility = _ref$visibility === void 0 ? false : _ref$visibility,\n        _ref$opacity = _ref.opacity,\n        opacity = _ref$opacity === void 0 ? false : _ref$opacity,\n        _ref$size = _ref.size,\n        size = _ref$size === void 0 ? false : _ref$size,\n        _ref$viewport = _ref.viewport,\n        viewport = _ref$viewport === void 0 ? false : _ref$viewport,\n        _ref$overflow = _ref.overflow,\n        overflow = _ref$overflow === void 0 ? false : _ref$overflow;\n\n    if (display) {\n        return el.offsetParent === null;\n    }\n\n    var computedStyle = getComputedStyle(el);\n\n    if (visibility && computedStyle.visibility === 'hidden') {\n        return true;\n    }\n\n    if (opacity) {\n        if (computedStyle.opacity === '0') {\n            return true;\n        } else {\n            var cur = el;\n\n            while ((cur = cur.parentElement)) {\n                var _computedStyle = getComputedStyle(cur);\n\n                if (_computedStyle.opacity === '0') {\n                    return true;\n                }\n            }\n        }\n    }\n\n    var clientRect = el.getBoundingClientRect();\n\n    if (size && (clientRect.width === 0 || clientRect.height === 0)) {\n        return true;\n    }\n\n    if (viewport) {\n        var containerRect = {\n            top: 0,\n            left: 0,\n            right: document.documentElement.clientWidth,\n            bottom: document.documentElement.clientHeight\n        };\n        return isOutside(clientRect, containerRect);\n    }\n\n    if (overflow) {\n        var _cur = el;\n\n        while ((_cur = _cur.parentElement)) {\n            var _computedStyle2 = getComputedStyle(_cur);\n\n            var _overflow = _computedStyle2.overflow;\n\n            if (_overflow === 'scroll' || _overflow === 'hidden') {\n                var curRect = _cur.getBoundingClientRect();\n\n                if (isOutside(clientRect, curRect)) return true;\n            }\n        }\n    }\n\n    return false;\n};\n\nfunction isOutside(clientRect, containerRect) {\n    return (\n        clientRect.right < containerRect.left ||\n        clientRect.left > containerRect.right ||\n        clientRect.bottom < containerRect.top ||\n        clientRect.top > containerRect.bottom\n    );\n}\n\nmodule.exports = exports;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Emitter_1 = __importDefault(require(\"licia/Emitter\"));\nconst _1 = __importDefault(require(\"licia/$\"));\nconst util_1 = require(\"./util\");\nconst each_1 = __importDefault(require(\"licia/each\"));\nclass Component extends Emitter_1.default {\n    constructor(container, { compName }) {\n        super();\n        this.compName = compName;\n        this.c = util_1.classPrefix(compName);\n        this.options = {};\n        this.container = container;\n        this.$container = _1.default(container);\n        this.$container.addClass(`luna-${compName}`);\n    }\n    destroy() {\n        this.$container.rmClass(`luna-${this.compName}`);\n        this.$container.html('');\n        this.emit('destroy');\n        this.removeAllListeners();\n    }\n    setOption(name, val) {\n        const options = this.options;\n        let newOptions = {};\n        if (typeof name === 'string') {\n            newOptions[name] = val;\n        }\n        else {\n            newOptions = name;\n        }\n        each_1.default(newOptions, (val, name) => {\n            const oldVal = options[name];\n            options[name] = val;\n            this.emit('optionChange', name, val, oldVal);\n        });\n    }\n    find(selector) {\n        return this.$container.find(this.c(selector));\n    }\n}\nexports.default = Component;\n", "var now = require('./now');\nvar isBrowser = require('./isBrowser');\n\nvar raf, cancel;\nvar lastTime = 0;\n\nif (isBrowser) {\n    raf = window.requestAnimationFrame;\n    cancel = window.cancelAnimationFrame;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n\n    for (var i = 0, len = vendors.length; i < len && !raf; i++) {\n        raf = window[vendors[i] + 'RequestAnimationFrame'];\n        cancel =\n            window[vendors[i] + 'CancelAnimationFrame'] ||\n            window[vendors[i] + 'CancelRequestAnimationFrame'];\n    }\n}\n\nraf =\n    raf ||\n    function(cb) {\n        var curTime = now();\n        var timeToCall = Math.max(0, 16 - (curTime - lastTime));\n        var id = setTimeout(function() {\n            cb(curTime + timeToCall);\n        }, timeToCall);\n        lastTime = curTime + timeToCall;\n        return id;\n    };\n\ncancel =\n    cancel ||\n    function(id) {\n        clearTimeout(id);\n    };\n\nraf.cancel = cancel;\nexports = raf;\n\nmodule.exports = exports;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Log_1 = __importDefault(require(\"./Log\"));\nconst isUndef_1 = __importDefault(require(\"licia/isUndef\"));\nconst perfNow_1 = __importDefault(require(\"licia/perfNow\"));\nconst now_1 = __importDefault(require(\"licia/now\"));\nconst isStr_1 = __importDefault(require(\"licia/isStr\"));\nconst extend_1 = __importDefault(require(\"licia/extend\"));\nconst uniqId_1 = __importDefault(require(\"licia/uniqId\"));\nconst isRegExp_1 = __importDefault(require(\"licia/isRegExp\"));\nconst isFn_1 = __importDefault(require(\"licia/isFn\"));\nconst Stack_1 = __importDefault(require(\"licia/Stack\"));\nconst isEmpty_1 = __importDefault(require(\"licia/isEmpty\"));\nconst contain_1 = __importDefault(require(\"licia/contain\"));\nconst copy_1 = __importDefault(require(\"licia/copy\"));\nconst each_1 = __importDefault(require(\"licia/each\"));\nconst toArr_1 = __importDefault(require(\"licia/toArr\"));\nconst keys_1 = __importDefault(require(\"licia/keys\"));\nconst last_1 = __importDefault(require(\"licia/last\"));\nconst throttle_1 = __importDefault(require(\"licia/throttle\"));\nconst xpath_1 = __importDefault(require(\"licia/xpath\"));\nconst lowerCase_1 = __importDefault(require(\"licia/lowerCase\"));\nconst dateFormat_1 = __importDefault(require(\"licia/dateFormat\"));\nconst isHidden_1 = __importDefault(require(\"licia/isHidden\"));\nconst stripIndent_1 = __importDefault(require(\"licia/stripIndent\"));\nconst util_1 = require(\"../share/util\");\nconst Component_1 = __importDefault(require(\"../share/Component\"));\nconst raf = require(\"licia/raf\");\nconst u = navigator.userAgent;\nconst isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;\nconst c = util_1.classPrefix('console');\nlet id = 0;\nclass Console extends Component_1.default {\n    constructor(container, { maxNum = 0, asyncRender = true, showHeader = false, filter = 'all', accessGetter = false, unenumerable = true, lazyEvaluation = true, } = {}) {\n        super(container, { compName: 'console' });\n        this.spaceHeight = 0;\n        this.topSpaceHeight = 0;\n        // @ts-ignore\n        this.bottomSpaceHeight = 0;\n        this.lastScrollTop = 0;\n        this.lastTimestamp = 0;\n        this.speedToleranceFactor = 100;\n        this.maxSpeedTolerance = 2000;\n        this.minSpeedTolerance = 100;\n        this.logs = [];\n        this.displayLogs = [];\n        this.timer = {};\n        this.counter = {};\n        this.asyncList = [];\n        this.asyncTimer = null;\n        this.isAtBottom = true;\n        this.groupStack = new Stack_1.default();\n        this.onScroll = () => {\n            const { scrollHeight, offsetHeight, scrollTop } = this\n                .container;\n            // safari bounce effect\n            if (scrollTop <= 0)\n                return;\n            if (offsetHeight + scrollTop > scrollHeight)\n                return;\n            let isAtBottom = false;\n            if (scrollHeight === offsetHeight) {\n                isAtBottom = true;\n            }\n            else if (scrollTop === scrollHeight - offsetHeight) {\n                isAtBottom = true;\n            }\n            this.isAtBottom = isAtBottom;\n            const lastScrollTop = this.lastScrollTop;\n            const lastTimestamp = this.lastTimestamp;\n            const timestamp = now_1.default();\n            const duration = timestamp - lastTimestamp;\n            const distance = scrollTop - lastScrollTop;\n            const speed = Math.abs(distance / duration);\n            let speedTolerance = speed * this.speedToleranceFactor;\n            if (duration > 1000) {\n                speedTolerance = 1000;\n            }\n            if (speedTolerance > this.maxSpeedTolerance) {\n                speedTolerance = this.maxSpeedTolerance;\n            }\n            if (speedTolerance < this.minSpeedTolerance) {\n                speedTolerance = this.minSpeedTolerance;\n            }\n            this.lastScrollTop = scrollTop;\n            this.lastTimestamp = timestamp;\n            let topTolerance = 0;\n            let bottomTolerance = 0;\n            if (lastScrollTop < scrollTop) {\n                topTolerance = this.minSpeedTolerance;\n                bottomTolerance = speedTolerance;\n            }\n            else {\n                topTolerance = speedTolerance;\n                bottomTolerance = this.minSpeedTolerance;\n            }\n            if (this.topSpaceHeight < scrollTop - topTolerance &&\n                this.topSpaceHeight + this.el.offsetHeight >\n                    scrollTop + offsetHeight + bottomTolerance) {\n                return;\n            }\n            this.renderViewport({\n                topTolerance: topTolerance * 2,\n                bottomTolerance: bottomTolerance * 2,\n            });\n        };\n        this.initTpl();\n        this.options = {\n            maxNum,\n            asyncRender,\n            showHeader,\n            filter,\n            accessGetter,\n            unenumerable,\n            lazyEvaluation,\n        };\n        this.$el = this.find('.logs');\n        this.el = this.$el.get(0);\n        this.$fakeEl = this.find('.fake-logs');\n        this.fakeEl = this.$fakeEl.get(0);\n        this.$space = this.find('.logs-space');\n        this.space = this.$space.get(0);\n        // For android slowing rendering\n        if (isAndroid) {\n            this.speedToleranceFactor = 800;\n            this.maxSpeedTolerance = 3000;\n            this.minSpeedTolerance = 800;\n        }\n        this.renderViewport = throttle_1.default((options) => {\n            this._renderViewport(options);\n        }, 16);\n        // https://developers.google.cn/web/tools/chrome-devtools/console/utilities\n        this.global = {\n            copy(value) {\n                if (!isStr_1.default(value))\n                    value = JSON.stringify(value, null, 2);\n                copy_1.default(value);\n            },\n            $(selectors) {\n                return document.querySelector(selectors);\n            },\n            $$(selectors) {\n                return toArr_1.default(document.querySelectorAll(selectors));\n            },\n            $x(path) {\n                return xpath_1.default(path);\n            },\n            clear: () => {\n                this.clear();\n            },\n            dir: (value) => {\n                this.dir(value);\n            },\n            table: (data, columns) => {\n                this.table(data, columns);\n            },\n            keys: keys_1.default,\n        };\n        this.bindEvent();\n    }\n    setGlobal(name, val) {\n        this.global[name] = val;\n    }\n    destroy() {\n        super.destroy();\n        this.$container.off('scroll', this.onScroll);\n    }\n    count(label = 'default') {\n        const { counter } = this;\n        !isUndef_1.default(counter[label]) ? counter[label]++ : (counter[label] = 1);\n        this.info(`${label}: ${counter[label]}`);\n    }\n    countReset(label = 'default') {\n        this.counter[label] = 0;\n    }\n    assert(...args) {\n        if (isEmpty_1.default(args))\n            return;\n        const exp = args.shift();\n        if (!exp) {\n            if (args.length === 0)\n                args.unshift('console.assert');\n            args.unshift('Assertion failed: ');\n            this.insert('error', args);\n        }\n    }\n    log(...args) {\n        if (isEmpty_1.default(args))\n            return;\n        this.insert('log', args);\n    }\n    debug(...args) {\n        if (isEmpty_1.default(args))\n            return;\n        this.insert('debug', args);\n    }\n    dir(obj) {\n        if (isUndef_1.default(obj))\n            return;\n        this.insert('dir', [obj]);\n    }\n    table(...args) {\n        if (isEmpty_1.default(args))\n            return;\n        this.insert('table', args);\n    }\n    time(name = 'default') {\n        if (this.timer[name]) {\n            return this.insert('warn', [`Timer '${name}' already exists`]);\n        }\n        this.timer[name] = perfNow_1.default();\n    }\n    timeLog(name = 'default') {\n        const startTime = this.timer[name];\n        if (!startTime) {\n            return this.insert('warn', [`Timer '${name}' does not exist`]);\n        }\n        this.info(`${name}: ${perfNow_1.default() - startTime}ms`);\n    }\n    timeEnd(name = 'default') {\n        this.timeLog(name);\n        delete this.timer[name];\n    }\n    clear(silent = false) {\n        this.logs = [];\n        this.displayLogs = [];\n        this.lastLog = undefined;\n        this.counter = {};\n        this.timer = {};\n        this.groupStack = new Stack_1.default();\n        this.asyncList = [];\n        if (this.asyncTimer) {\n            clearTimeout(this.asyncTimer);\n            this.asyncTimer = null;\n        }\n        if (silent) {\n            this.render();\n        }\n        else {\n            this.insert('log', [\n                '%cConsole was cleared',\n                'color:#808080;font-style:italic;',\n            ]);\n        }\n    }\n    info(...args) {\n        if (isEmpty_1.default(args))\n            return;\n        this.insert('log', args);\n    }\n    error(...args) {\n        if (isEmpty_1.default(args))\n            return;\n        this.insert('error', args);\n    }\n    warn(...args) {\n        if (isEmpty_1.default(args))\n            return;\n        this.insert('warn', args);\n    }\n    group(...args) {\n        this.insert({\n            type: 'group',\n            args,\n            ignoreFilter: true,\n        });\n    }\n    groupCollapsed(...args) {\n        this.insert({\n            type: 'groupCollapsed',\n            args,\n            ignoreFilter: true,\n        });\n    }\n    groupEnd() {\n        this.insert('groupEnd');\n    }\n    evaluate(code) {\n        this.insert({\n            type: 'input',\n            args: [code],\n            ignoreFilter: true,\n        });\n        try {\n            this.output(this.evalJs(code));\n        }\n        catch (e) {\n            this.insert({\n                type: 'error',\n                ignoreFilter: true,\n                args: [e],\n            });\n        }\n    }\n    html(...args) {\n        this.insert('html', args);\n    }\n    toggleGroup(log) {\n        const { targetGroup } = log;\n        targetGroup.collapsed\n            ? this.openGroup(log)\n            : this.collapseGroup(log);\n    }\n    output(val) {\n        this.insert({\n            type: 'output',\n            args: [val],\n            ignoreFilter: true,\n        });\n    }\n    render() {\n        const { logs } = this;\n        this.$el.html('');\n        this.isAtBottom = true;\n        this.updateBottomSpace(0);\n        this.updateTopSpace(0);\n        this.displayLogs = [];\n        for (let i = 0, len = logs.length; i < len; i++) {\n            this.attachLog(logs[i]);\n        }\n    }\n    insert(type, args) {\n        const { showHeader, asyncRender } = this.options;\n        let header;\n        if (showHeader) {\n            header = {\n                time: getCurTime(),\n                from: getFrom(),\n            };\n        }\n        if (asyncRender) {\n            return this.insertAsync(type, args, header);\n        }\n        this.insertSync(type, args, header);\n    }\n    insertAsync(type, args, header) {\n        this.asyncList.push([type, args, header]);\n        this.handleAsyncList();\n    }\n    insertSync(type, args, header) {\n        const { logs, groupStack } = this;\n        const { maxNum, accessGetter, unenumerable, lazyEvaluation } = this.options;\n        let options;\n        if (isStr_1.default(type)) {\n            options = {\n                type: type,\n                args: args,\n                header,\n            };\n        }\n        else {\n            options = type;\n        }\n        // Because asynchronous rendering, groupEnd must be put here.\n        if (options.type === 'groupEnd') {\n            const lastLog = this.lastLog;\n            lastLog.groupEnd();\n            this.groupStack.pop();\n            return;\n        }\n        if (groupStack.size > 0) {\n            options.group = groupStack.peek();\n        }\n        extend_1.default(options, {\n            id: ++id,\n            accessGetter,\n            unenumerable,\n            lazyEvaluation,\n        });\n        if (options.type === 'group' || options.type === 'groupCollapsed') {\n            const group = {\n                id: uniqId_1.default('group'),\n                collapsed: false,\n                parent: groupStack.peek(),\n                indentLevel: groupStack.size + 1,\n            };\n            if (options.type === 'groupCollapsed')\n                group.collapsed = true;\n            options.targetGroup = group;\n            groupStack.push(group);\n        }\n        let log = new Log_1.default(this, options);\n        log.on('updateSize', () => {\n            this.isAtBottom = false;\n            this.renderViewport();\n        });\n        const lastLog = this.lastLog;\n        if (lastLog &&\n            !contain_1.default(['html', 'group', 'groupCollapsed'], log.type) &&\n            lastLog.type === log.type &&\n            !log.src &&\n            !log.args &&\n            lastLog.text() === log.text()) {\n            lastLog.addCount();\n            if (log.header)\n                lastLog.updateTime(log.header.time);\n            log = lastLog;\n            this.detachLog(lastLog);\n        }\n        else {\n            logs.push(log);\n            this.lastLog = log;\n        }\n        if (maxNum !== 0 && logs.length > maxNum) {\n            const firstLog = logs[0];\n            this.detachLog(firstLog);\n            logs.shift();\n        }\n        this.attachLog(log);\n        this.emit('insert', log);\n    }\n    updateTopSpace(height) {\n        this.topSpaceHeight = height;\n        this.el.style.top = height + 'px';\n    }\n    updateBottomSpace(height) {\n        this.bottomSpaceHeight = height;\n    }\n    updateSpace(height) {\n        if (this.spaceHeight === height)\n            return;\n        this.spaceHeight = height;\n        this.space.style.height = height + 'px';\n    }\n    detachLog(log) {\n        const { displayLogs } = this;\n        const idx = displayLogs.indexOf(log);\n        if (idx > -1) {\n            displayLogs.splice(idx, 1);\n            this.renderViewport();\n        }\n    }\n    // Binary search\n    attachLog(log) {\n        if (!this.filterLog(log) || log.collapsed)\n            return;\n        const { displayLogs } = this;\n        if (displayLogs.length === 0) {\n            displayLogs.push(log);\n            this.renderViewport();\n            return;\n        }\n        const lastDisplayLog = last_1.default(displayLogs);\n        if (log.id > lastDisplayLog.id) {\n            displayLogs.push(log);\n            this.renderViewport();\n            return;\n        }\n        let startIdx = 0;\n        let endIdx = displayLogs.length - 1;\n        let middleLog;\n        let middleIdx = 0;\n        while (startIdx <= endIdx) {\n            middleIdx = startIdx + Math.floor((endIdx - startIdx) / 2);\n            middleLog = displayLogs[middleIdx];\n            if (middleLog.id === log.id) {\n                return;\n            }\n            if (middleLog.id < log.id) {\n                startIdx = middleIdx + 1;\n            }\n            else {\n                endIdx = middleIdx - 1;\n            }\n        }\n        if (middleLog.id < log.id) {\n            displayLogs.splice(middleIdx + 1, 0, log);\n        }\n        else {\n            displayLogs.splice(middleIdx, 0, log);\n        }\n        this.renderViewport();\n    }\n    handleAsyncList(timeout = 20) {\n        const asyncList = this.asyncList;\n        if (this.asyncTimer)\n            return;\n        this.asyncTimer = setTimeout(() => {\n            this.asyncTimer = null;\n            let done = false;\n            const len = asyncList.length;\n            // insert faster if logs is huge, thus takes more time to render.\n            let timeout, num;\n            if (len < 1000) {\n                num = 200;\n                timeout = 400;\n            }\n            else if (len < 5000) {\n                num = 500;\n                timeout = 800;\n            }\n            else if (len < 10000) {\n                num = 800;\n                timeout = 1000;\n            }\n            else if (len < 25000) {\n                num = 1000;\n                timeout = 1200;\n            }\n            else if (len < 50000) {\n                num = 1500;\n                timeout = 1500;\n            }\n            else {\n                num = 2000;\n                timeout = 2500;\n            }\n            if (num > len) {\n                num = len;\n                done = true;\n            }\n            for (let i = 0; i < num; i++) {\n                const [type, args, header] = asyncList.shift();\n                this.insertSync(type, args, header);\n            }\n            if (!done) {\n                raf(() => this.handleAsyncList(timeout));\n            }\n        }, timeout);\n    }\n    injectGlobal() {\n        each_1.default(this.global, (val, name) => {\n            if (window[name])\n                return;\n            window[name] = val;\n        });\n    }\n    clearGlobal() {\n        each_1.default(this.global, (val, name) => {\n            if (window[name] && window[name] === val) {\n                delete window[name];\n            }\n        });\n    }\n    evalJs(jsInput) {\n        let ret;\n        this.injectGlobal();\n        try {\n            ret = eval.call(window, `(${jsInput})`);\n        }\n        catch (e) {\n            ret = eval.call(window, jsInput);\n        }\n        this.setGlobal('$_', ret);\n        this.clearGlobal();\n        return ret;\n    }\n    filterLog(log) {\n        const { filter } = this.options;\n        if (filter === 'all')\n            return true;\n        if (log.ignoreFilter) {\n            return true;\n        }\n        if (isFn_1.default(filter)) {\n            return filter(log);\n        }\n        if (isRegExp_1.default(filter)) {\n            return filter.test(lowerCase_1.default(log.text()));\n        }\n        return log.type === filter;\n    }\n    collapseGroup(log) {\n        const { targetGroup } = log;\n        targetGroup.collapsed = true;\n        log.updateIcon('caret-right');\n        this.updateGroup(log);\n    }\n    openGroup(log) {\n        const { targetGroup } = log;\n        targetGroup.collapsed = false;\n        log.updateIcon('caret-down');\n        this.updateGroup(log);\n    }\n    updateGroup(log) {\n        const { targetGroup } = log;\n        const { logs } = this;\n        const len = logs.length;\n        let i = logs.indexOf(log) + 1;\n        while (i < len) {\n            const log = logs[i];\n            if (!log.checkGroup() && log.group === targetGroup) {\n                break;\n            }\n            log.collapsed ? this.detachLog(log) : this.attachLog(log);\n            i++;\n        }\n    }\n    bindEvent() {\n        const { $el } = this;\n        $el.on('click', c('.log-container'), function () {\n            this.log.click();\n        });\n        this.on('optionChange', (name, val) => {\n            const { logs } = this;\n            switch (name) {\n                case 'maxNum':\n                    if (val > 0 && logs.length > val) {\n                        this.logs = logs.slice(logs.length - val);\n                        this.render();\n                    }\n                    break;\n                case 'filter':\n                    this.render();\n                    break;\n            }\n        });\n        this.$container.on('scroll', this.onScroll);\n    }\n    _renderViewport({ topTolerance = 500, bottomTolerance = 500 } = {}) {\n        const { el, container } = this;\n        if (isHidden_1.default(container))\n            return;\n        const { scrollTop, clientWidth, offsetHeight } = container;\n        const top = scrollTop - topTolerance;\n        const bottom = scrollTop + offsetHeight + bottomTolerance;\n        const { displayLogs } = this;\n        let topSpaceHeight = 0;\n        let bottomSpaceHeight = 0;\n        let currentHeight = 0;\n        const len = displayLogs.length;\n        const { fakeEl } = this;\n        const fakeFrag = document.createDocumentFragment();\n        const logs = [];\n        for (let i = 0; i < len; i++) {\n            const log = displayLogs[i];\n            const { width, height } = log;\n            if (height === 0 || width !== clientWidth) {\n                fakeFrag.appendChild(log.container);\n                logs.push(log);\n            }\n        }\n        if (logs.length > 0) {\n            fakeEl.appendChild(fakeFrag);\n            for (let i = 0, len = logs.length; i < len; i++) {\n                logs[i].updateSize();\n            }\n            fakeEl.innerHTML = '';\n        }\n        const frag = document.createDocumentFragment();\n        for (let i = 0; i < len; i++) {\n            const log = displayLogs[i];\n            const { container, height } = log;\n            if (currentHeight > bottom) {\n                bottomSpaceHeight += height;\n            }\n            else if (currentHeight + height > top) {\n                frag.appendChild(container);\n            }\n            else if (currentHeight < top) {\n                topSpaceHeight += height;\n            }\n            currentHeight += height;\n        }\n        this.updateSpace(currentHeight);\n        this.updateTopSpace(topSpaceHeight);\n        this.updateBottomSpace(bottomSpaceHeight);\n        while (el.firstChild) {\n            if (el.lastChild) {\n                el.removeChild(el.lastChild);\n            }\n        }\n        el.appendChild(frag);\n        const { scrollHeight } = container;\n        if (this.isAtBottom && scrollTop <= scrollHeight - offsetHeight) {\n            container.scrollTop = 10000000;\n        }\n    }\n    initTpl() {\n        this.$container.html(this.c(stripIndent_1.default `\n      <div class=\"logs-space\">\n        <div class=\"fake-logs\"></div>\n        <div class=\"logs\"></div>\n      </div>\n    `));\n    }\n}\nexports.default = Console;\nmodule.exports = Console;\nmodule.exports.default = Console;\nconst getCurTime = () => dateFormat_1.default('HH:MM:ss ');\nfunction getFrom() {\n    const e = new Error();\n    let ret = '';\n    const lines = e.stack ? e.stack.split('\\n') : '';\n    for (let i = 0, len = lines.length; i < len; i++) {\n        ret = lines[i];\n        if (ret.indexOf('winConsole') > -1 && i < len - 1) {\n            ret = lines[i + 1];\n            break;\n        }\n    }\n    return ret;\n}\n", "import type { Config, Language, Processor, WorkerMessageEvent } from '../models';\r\n\r\nexport const debounce = (fn: (...x: any[]) => any, delay: number | (() => number)) => {\r\n  let timeout: any;\r\n\r\n  return (...args: unknown[]) => {\r\n    if (timeout) clearTimeout(timeout);\r\n    timeout = setTimeout(() => fn.apply(null, args), typeof delay === 'function' ? delay() : delay);\r\n  };\r\n};\r\n\r\nexport const decodeHTML = (html: string) => {\r\n  const txt = document.createElement('textarea');\r\n  txt.innerHTML = html;\r\n  return txt.value;\r\n};\r\n\r\nexport const encodeHTML = (html: string) =>\r\n  html\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/'/g, '&#39;')\r\n    .replace(/\"/g, '&#34;');\r\n\r\nexport const escapeScript = (code: string) => code.replace(/<\\/script>/g, '<\\\\/script>');\r\n\r\nexport const escapeCode = (code: string, slash = true) =>\r\n  code\r\n    .replace(/\\\\/g, slash ? '\\\\\\\\' : '\\\\')\r\n    .replace(/`/g, '\\\\`')\r\n    .replace(/<\\/script>/g, '<\\\\/script>');\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport const pipe = (...fns: Function[]) =>\r\n  fns.reduce(\r\n    (f, g) =>\r\n      (...args: any) =>\r\n        g(f(...args)),\r\n  );\r\n\r\n// replace non-alphanumeric with underscore\r\nexport const safeName = (name: string, symbol = '_') => name.replace(/[\\W]+/g, symbol);\r\n\r\n// from https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\r\n// added safari (on mac & ios): monaco editor is broken on safari\r\nexport const isMobile = () => {\r\n  let mobile = false;\r\n  const userAgent = navigator.userAgent.toLowerCase();\r\n  (function (a) {\r\n    if (\r\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\r\n        a,\r\n      ) ||\r\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\r\n        a.substr(0, 4),\r\n      )\r\n    ) {\r\n      mobile = true;\r\n    }\r\n  })(userAgent || navigator.vendor || (window as any).opera);\r\n\r\n  const safari = userAgent.indexOf('safari') > -1 && userAgent.indexOf('chrome') === -1; // chrome says it is safari!\r\n\r\n  return mobile || safari;\r\n};\r\n\r\nexport const isRelativeUrl = (url?: string) =>\r\n  !url?.startsWith('http') && !url?.startsWith('data:');\r\n\r\nexport const getAbsoluteUrl = (url: string, baseUrl = document.baseURI) =>\r\n  isRelativeUrl(url) ? new URL(url, baseUrl).href : url;\r\n\r\nexport const cloneObject = <T>(x: Record<string, any>): T => JSON.parse(JSON.stringify(x));\r\n\r\nexport const objectMap = (\r\n  obj: Record<string, any>,\r\n  fn: (value: any, key: string, index: number) => any,\r\n) => Object.fromEntries(Object.entries(obj).map(([k, v], i) => [k, fn(v, k, i)]));\r\n\r\nexport const objectFilter = (\r\n  obj: Record<string, any>,\r\n  predicate: (value: any, key: string, index: number) => any,\r\n) => Object.fromEntries(Object.entries(obj).filter(([k, v], i) => predicate(v, k, i)));\r\n\r\nexport const copyToClipboard = (text: string) => {\r\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\r\n    const textarea = document.createElement('textarea');\r\n    textarea.textContent = text;\r\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n    try {\r\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\r\n    } catch (ex) {\r\n      // eslint-disable-next-line no-console\r\n      console.warn('Copy to clipboard failed.', ex);\r\n      return false;\r\n    } finally {\r\n      document.body.removeChild(textarea);\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const stringToValidJson = (str: string) =>\r\n  str\r\n    .replace(/'[^'\"]*'(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g, function replaceSingleQuotes(matchedStr) {\r\n      return '\"' + matchedStr.substring(1, matchedStr.length - 1) + '\"';\r\n    })\r\n    .replace(\r\n      /(\\w+(?=([^\"\\\\]*(\\\\.|\"([^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^\"]*$))(\\s*:)(?!(\\w*)(?:\"))/gm,\r\n      function quoteNonQuoted(matchedStr) {\r\n        return '\"' + matchedStr.substring(0, matchedStr.length - 1).trimEnd() + '\":';\r\n      },\r\n    )\r\n    .replace(/,\\s*([\\]}])/g, '$1'); // remove trailing comma\r\n\r\nexport const stringify = (obj: any, pretty = false) => {\r\n  try {\r\n    return JSON.stringify(obj, undefined, pretty ? 2 : undefined);\r\n  } catch {\r\n    return '';\r\n  }\r\n};\r\n\r\nexport const getRandomString = () => String(Math.random()) + '-' + Date.now().toFixed();\r\n\r\nexport const downloadFile = (filename: string, extension: string, content: string) => {\r\n  const a = document.createElement('a');\r\n  a.style.display = 'none';\r\n  a.href = content;\r\n  a.download = safeName(filename) + '.' + extension;\r\n  a.click();\r\n  a.remove();\r\n};\r\n\r\nexport const loadScript = (url: string, name?: string) =>\r\n  new Promise((resolve, reject) => {\r\n    if (name && (globalThis as any)[name]) {\r\n      return resolve((globalThis as any)[name]);\r\n    }\r\n\r\n    // if running in web worker\r\n    if (typeof (globalThis as any).importScripts === 'function') {\r\n      (globalThis as any).importScripts(url);\r\n      if (name && (globalThis as any)[name]) {\r\n        return resolve((globalThis as any)[name]);\r\n      }\r\n      return resolve(globalThis);\r\n    }\r\n\r\n    const script = document.createElement('script');\r\n    script.src = url;\r\n    script.async = true;\r\n    const removeEventListeners = () => {\r\n      script.removeEventListener('load', onLoad);\r\n      script.removeEventListener('error', onError);\r\n    };\r\n    const onLoad = () => {\r\n      removeEventListeners();\r\n      if (!name) {\r\n        return resolve('loaded: ' + url);\r\n      }\r\n      const i = setInterval(() => {\r\n        if ((window as any)[name]) {\r\n          clearInterval(i);\r\n          return resolve((window as any)[name]);\r\n        }\r\n      }, 5);\r\n    };\r\n    const onError = () => {\r\n      removeEventListeners();\r\n      reject('failed to load: ' + url);\r\n    };\r\n    script.addEventListener('load', onLoad);\r\n    script.addEventListener('error', onError);\r\n    document.head.appendChild(script);\r\n  });\r\n\r\nexport const loadStylesheet = (url: string, id?: string, insertBefore?: string) => {\r\n  if (id && document.getElementById(id)) return;\r\n  const stylesheet = document.createElement('link');\r\n  stylesheet.rel = 'stylesheet';\r\n  stylesheet.href = url;\r\n  stylesheet.id = id || 'styles-' + getRandomString();\r\n  document.head.insertBefore(\r\n    stylesheet,\r\n    insertBefore ? document.querySelector(insertBefore) : null,\r\n  );\r\n};\r\n\r\nexport const typedArrayToBuffer = (array: Uint8Array): ArrayBuffer =>\r\n  array.buffer.slice(array.byteOffset, array.byteLength + array.byteOffset);\r\n\r\nexport const getDate = () => {\r\n  let date = new Date();\r\n  const offset = date.getTimezoneOffset();\r\n  date = new Date(date.getTime() - offset * 60 * 1000);\r\n  return date.toISOString().split('T')[0];\r\n};\r\n\r\nexport const handleFetchError = (res: Response) => (res.ok ? res : Promise.reject());\r\nexport const fetchWithHandler = (input: RequestInfo, init?: RequestInit) =>\r\n  fetch(input, init).then(handleFetchError);\r\n\r\nexport const blobToBase64 = (file: Blob): Promise<string> =>\r\n  new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => (typeof reader.result === 'string' ? resolve(reader.result) : reject());\r\n    reader.onerror = (error) => reject(error);\r\n  });\r\n\r\nexport const Uint8ArrayToBase64 = (u8: Uint8Array) => {\r\n  const CHUNK_SZ = 0x8000;\r\n  const c = [];\r\n  for (let i = 0; i < u8.length; i += CHUNK_SZ) {\r\n    c.push(String.fromCharCode.apply(null, (u8 as any).subarray(i, i + CHUNK_SZ)));\r\n  }\r\n  return btoa(c.join(''));\r\n};\r\n\r\nexport const base64ToUint8Array = (str: string) =>\r\n  new Uint8Array(\r\n    atob(str)\r\n      .split('')\r\n      .map((c) => c.charCodeAt(0)),\r\n  );\r\n\r\nexport const typedArraysAreEqual = (a: Uint8Array, b: Uint8Array) => {\r\n  if (a === b) {\r\n    return true;\r\n  }\r\n  if (a.byteLength !== b.byteLength) {\r\n    return false;\r\n  }\r\n  for (let i = 0; i < a.byteLength; i++) {\r\n    if (a[i] !== b[i]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const getWorkerDataURL = (url: string) => {\r\n  const content = `importScripts(\"${url}\");`;\r\n  return 'data:text/javascript;base64,' + btoa(content);\r\n};\r\n\r\nexport const removeComments = (src: string) =>\r\n  src.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, '$1');\r\n\r\nexport const removeStrings = (src: string) =>\r\n  src\r\n    .replace(/'[^\\n']*'/gm, \"''\")\r\n    .replace(/\"[^\\n\"]*\"/gm, '\"\"')\r\n    .replace(/`[^`]*`/gm, '``');\r\n\r\nexport const removeCommentsAndStrings = (src: string) => removeStrings(removeComments(src));\r\n\r\nexport const getLanguageCustomSettings = (language: Language | Processor, config: Config) => ({\r\n  ...(config.customSettings as any)[language],\r\n});\r\n\r\nexport const getValidUrl = (url?: string) => {\r\n  if (!url) return null;\r\n  let validUrl = null;\r\n  if (url.startsWith('http') || url.startsWith('data:')) {\r\n    try {\r\n      validUrl = new URL(url).href;\r\n    } catch {\r\n      try {\r\n        validUrl = new URL(decodeURIComponent(url)).href;\r\n      } catch {\r\n        //\r\n      }\r\n    }\r\n  }\r\n  return validUrl;\r\n};\r\n\r\nexport const runOrContinue =\r\n  <T>(fn: (x: T) => Promise<T>, catchFn?: (err: unknown) => void) =>\r\n  async (x: T): Promise<T> => {\r\n    try {\r\n      const result = await fn(x);\r\n      return result;\r\n    } catch (error) {\r\n      if (typeof catchFn === 'function') {\r\n        catchFn(error);\r\n      }\r\n      return x;\r\n    }\r\n  };\r\n\r\nexport const getFileExtension = (file: string) => file.split('.')[file.split('.').length - 1];\r\n\r\nexport const isInIframe = () => {\r\n  try {\r\n    return window.self !== window.top;\r\n  } catch {\r\n    return true;\r\n  }\r\n};\r\n\r\nexport const indentCode = (code: string, spaces: number, skipFirstLine = true) =>\r\n  (skipFirstLine ? '' : ' '.repeat(spaces)) + code.split('\\n').join('\\n' + ' '.repeat(spaces));\r\n\r\nexport const hideOnClickOutside = (element: HTMLElement) => {\r\n  const hideElement = () => {\r\n    element.style.display = 'none';\r\n    removeListeners();\r\n    (window as any).watchingEscape = false;\r\n  };\r\n\r\n  const outsideClickListener = (event: MouseEvent) => {\r\n    if (!element.contains(event.target as Node) && isVisible(element)) {\r\n      hideElement();\r\n    }\r\n  };\r\n\r\n  const escapeListener = (event: KeyboardEvent) => {\r\n    if (event.key === 'Escape') {\r\n      hideElement();\r\n      event.preventDefault();\r\n    }\r\n  };\r\n\r\n  const isVisible = (elem: HTMLElement) =>\r\n    !!elem && !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);\r\n\r\n  const removeListeners = () => {\r\n    document.removeEventListener('click', outsideClickListener);\r\n    document.removeEventListener('keydown', escapeListener);\r\n  };\r\n\r\n  document.addEventListener('click', outsideClickListener);\r\n  document.addEventListener('keydown', escapeListener);\r\n  (window as any).watchingEscape = true;\r\n\r\n  return {\r\n    clear: () => removeListeners(),\r\n  };\r\n};\r\n\r\nexport const callWorker = async <T = string, K = unknown>(\r\n  worker: Worker,\r\n  message: { method: T; args?: any },\r\n) =>\r\n  new Promise<K>((resolve) => {\r\n    const messageId = getRandomString();\r\n\r\n    const handler = (event: WorkerMessageEvent<T, K>) => {\r\n      const received = event.data;\r\n\r\n      if (received.method === message.method && received.messageId === messageId) {\r\n        worker.removeEventListener('message', handler);\r\n        resolve(received.data as K);\r\n      }\r\n    };\r\n    worker.addEventListener('message', handler);\r\n\r\n    worker.postMessage({\r\n      ...message,\r\n      messageId,\r\n    });\r\n  });\r\n\r\nexport const toCamelCase = (str: string) =>\r\n  str\r\n    .replace(/[-_.]+/g, ' ')\r\n    .trim()\r\n    .replace(/^([A-Z])|\\s+(\\w)/g, function (_match, p1, p2) {\r\n      if (p2) return p2.toUpperCase();\r\n      return p1.toLowerCase();\r\n    });\r\n\r\nexport const removeDuplicates = (arr: any[] | undefined) => Array.from(new Set(arr));\r\n", "function createInstance(url: string) {\n  return import(url);\n}\n\nlet instancePromise: any = null;\n\nexport function getImportInstance(url: string) {\n  if (!instancePromise) {\n    instancePromise = createInstance(url).catch(() => {\n      //\n    });\n  }\n  return instancePromise;\n}\n", "import type { CDN } from '../models';\r\n\r\ndeclare const globalThis: { appCDN: CDN };\r\n\r\nconst moduleCDNs: CDN[] = ['jspm', 'skypack'];\r\nconst npmCDNs: CDN[] = ['unpkg', 'jsdelivr'];\r\nconst ghCDNs: CDN[] = ['jsdelivr.gh', 'statically'];\r\n\r\nexport const modulesService = {\r\n  getModuleUrl: (\r\n    moduleName: string,\r\n    { isModule = true, defaultCDN = 'jspm' }: { isModule?: boolean; defaultCDN?: CDN } = {},\r\n  ) => {\r\n    moduleName = moduleName.replace(/#nobundle/g, '');\r\n\r\n    const moduleUrl = getCdnUrl(moduleName, isModule, defaultCDN);\r\n    if (moduleUrl) {\r\n      return moduleUrl;\r\n    }\r\n\r\n    return isModule\r\n      ? 'https://jspm.dev/' + moduleName\r\n      : 'https://cdn.jsdelivr.net/npm/' + moduleName;\r\n  },\r\n\r\n  getUrl: (path: string, cdn?: CDN) =>\r\n    path.startsWith('http') ? path : getCdnUrl(path, false, cdn || getAppCDN()) || path,\r\n\r\n  cdnLists: { npm: npmCDNs, module: moduleCDNs, gh: ghCDNs },\r\n\r\n  checkCDNs: async (testModule: string, preferredCDN?: CDN) => {\r\n    const cdns: CDN[] = [preferredCDN, ...modulesService.cdnLists.npm].filter(Boolean) as CDN[];\r\n    for (const cdn of cdns) {\r\n      try {\r\n        const res = await fetch(modulesService.getUrl(testModule, cdn), {\r\n          method: 'HEAD',\r\n        });\r\n        if (res.ok) return cdn;\r\n      } catch {\r\n        // continue;\r\n      }\r\n    }\r\n    // fall back to first\r\n    return modulesService.cdnLists.npm[0];\r\n  },\r\n};\r\n\r\nexport const getAppCDN = (): CDN => {\r\n  if (globalThis.appCDN) return globalThis.appCDN;\r\n  try {\r\n    const url = new URL(location.href);\r\n    return (url.searchParams.get('appCDN') as CDN) || modulesService.cdnLists.npm[0];\r\n  } catch {\r\n    return modulesService.cdnLists.npm[0] as CDN;\r\n  }\r\n};\r\n\r\nconst getCdnUrl = (modName: string, isModule: boolean, defaultCDN?: CDN) => {\r\n  const post = isModule && modName.startsWith('unpkg:') ? '?module' : '';\r\n  if (modName.startsWith('gh:')) {\r\n    modName = modName.replace('gh', ghCDNs[0]);\r\n  } else if (!modName.includes(':')) {\r\n    const prefix = defaultCDN || (isModule ? moduleCDNs[0] : npmCDNs[0]);\r\n    modName = prefix + ':' + modName;\r\n  }\r\n  for (const i of TEMPLATES) {\r\n    const [pattern, template] = i;\r\n    if (pattern.test(modName)) {\r\n      return modName.replace(pattern, template) + post;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n// based on https://github.com/neoascetic/rawgithack/blob/master/web/rawgithack.js\r\nconst TEMPLATES: Array<[RegExp, string]> = [\r\n  [/^(jspm:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(npm:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(node:)(.+)/i, 'https://jspm.dev/$2'],\r\n\r\n  [/^(skypack:)(.+)/i, 'https://cdn.skypack.dev/$2'],\r\n\r\n  [/^(jsdelivr:)(.+)/i, 'https://cdn.jsdelivr.net/npm/$2'],\r\n\r\n  [/^(jsdelivr.gh:)(.+)/i, 'https://cdn.jsdelivr.net/gh/$2'],\r\n\r\n  [/^(statically:)(.+)/i, 'https://cdn.statically.io/gh/$2'],\r\n\r\n  [/^(esm.run:)(.+)/i, 'https://esm.run/$2'],\r\n\r\n  [/^(esm.sh:)(.+)/i, 'https://esm.sh/$2'],\r\n\r\n  [/^(esbuild:)(.+)/i, 'https://esbuild.vercel.app/$2'],\r\n\r\n  [/^(bundle.run:)(.+)/i, 'https://bundle.run/$2'],\r\n\r\n  [/^(unpkg:)(.+)/i, 'https://unpkg.com/$2'],\r\n\r\n  [/^(bundlejs:)(.+)/i, 'https://deno.bundlejs.com/?file&q=$2'],\r\n\r\n  [/^(bundle:)(.+)/i, 'https://deno.bundlejs.com/?file&q=$2'],\r\n\r\n  [/^(deno:)(.+)/i, 'https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts'],\r\n\r\n  [/^(https:\\/\\/deno\\.land\\/.+)/i, 'https://deno.bundlejs.com/?file&q=$1'],\r\n\r\n  [\r\n    /^(github:|https:\\/\\/github\\.com\\/)(.[^\\/]+?)\\/(.[^\\/]+?)\\/(?!releases\\/)(?:(?:blob|raw)\\/)?(.+?\\/.+)/i,\r\n    'https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4',\r\n  ],\r\n\r\n  [/^(gist\\.github:)(.+?\\/[0-9a-f]+\\/raw\\/(?:[0-9a-f]+\\/)?.+)$/i, 'https://gist.githack.com/$2'],\r\n\r\n  [\r\n    /^(gitlab:|https:\\/\\/gitlab\\.com\\/)([^\\/]+.*\\/[^\\/]+)\\/(?:raw|blob)\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3',\r\n  ],\r\n  [\r\n    /^(bitbucket:|https:\\/\\/bitbucket\\.org\\/)([^\\/]+\\/[^\\/]+)\\/(?:raw|src)\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3',\r\n  ],\r\n\r\n  // snippet file URL from web interface, with revision\r\n  [\r\n    /^(bitbucket:)snippets\\/([^\\/]+\\/[^\\/]+)\\/revisions\\/([^\\/\\#\\?]+)(?:\\?[^#]*)?(?:\\#file-(.+?))$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4',\r\n  ],\r\n  // snippet file URL from web interface, no revision\r\n  [\r\n    /^(bitbucket:)snippets\\/([^\\/]+\\/[^\\/\\#\\?]+)(?:\\?[^#]*)?(?:\\#file-(.+?))$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3',\r\n  ],\r\n  // snippet file URLs from REST API\r\n  [\r\n    /^(bitbucket:)\\!api\\/2.0\\/snippets\\/([^\\/]+\\/[^\\/]+\\/[^\\/]+)\\/files\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/files/$3',\r\n  ],\r\n  [\r\n    /^(api\\.bitbucket:)2.0\\/snippets\\/([^\\/]+\\/[^\\/]+\\/[^\\/]+)\\/files\\/(.+?)(?:\\?.*)?$/i,\r\n    'https://bb.githack.com/!api/2.0/snippets/$2/files/$3',\r\n  ],\r\n\r\n  [/^(rawgit:)(.+?\\/[0-9a-f]+\\/raw\\/(?:[0-9a-f]+\\/)?.+)$/i, 'https://gist.githack.com/$2'],\r\n  [\r\n    /^(rawgit:|https:\\/\\/raw\\.githubusercontent\\.com)(\\/[^\\/]+\\/[^\\/]+|[0-9A-Za-z-]+\\/[0-9a-f]+\\/raw)\\/(.+)/i,\r\n    'https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3',\r\n  ],\r\n];\r\n", "// eslint-disable-next-line import/no-internal-modules\r\nimport { modulesService } from './services/modules';\r\n\r\nconst { getUrl, getModuleUrl } = modulesService;\r\n\r\nexport const vendorsBaseUrl = // 'http://127.0.0.1:8081/';\r\n  /* @__PURE__ */ getUrl('@live-codes/browser-compilers@0.7.4/dist/');\r\n\r\nexport const acornUrl = /* @__PURE__ */ getUrl('acorn@8.8.2/dist/acorn.js');\r\n\r\nexport const artTemplateUrl = /* @__PURE__ */ getUrl('art-template@4.13.2/lib/template-web.js');\r\n\r\nexport const asciidocUrl = /* @__PURE__ */ getUrl(\r\n  '@asciidoctor/core@2.2.6/dist/browser/asciidoctor.js',\r\n);\r\n\r\nexport const assemblyscriptLoaderUrl = /* @__PURE__ */ getUrl(\r\n  '@assemblyscript/loader@0.27.5/umd/index.js',\r\n);\r\n\r\nexport const astringUrl = /* @__PURE__ */ getUrl('astring@1.8.1/dist/astring.min.js');\r\n\r\nexport const astroBaseUrl = /* @__PURE__ */ getUrl('@hatemhosny/astro-internal@0.0.4/');\r\n\r\nexport const astroWasmURL = /* @__PURE__ */ getUrl('@astrojs/compiler@0.9.2/astro.wasm');\r\n\r\nexport const autoCompleteUrl = /* @__PURE__ */ getUrl(\r\n  '@tarekraafat/autocomplete.js@10.2.6/dist/autoComplete.js',\r\n);\r\n\r\nexport const babelUrl = /* @__PURE__ */ getUrl('@babel/standalone@7.22.4/babel.js');\r\n\r\nexport const biwaschemeUrl = /* @__PURE__ */ getUrl('biwascheme@0.8.0/release/biwascheme.js');\r\n\r\nexport const blocklyCdnBaseUrl = /* @__PURE__ */ getUrl('blockly@9.3.3/');\r\n\r\nexport const brythonBaseUrl = /* @__PURE__ */ getUrl('brython@3.11.2/');\r\n\r\nexport const chaiUrl = /* @__PURE__ */ getModuleUrl('chai@4.3.6');\r\n\r\nexport const chaiTypesUrl = /* @__PURE__ */ getUrl('@types/chai@4.2.22/index.d.ts');\r\n\r\nexport const cherryCljsBaseUrl = /* @__PURE__ */ getUrl('cherry-cljs@0.0.4/');\r\n\r\nexport const cjs2esUrl = /* @__PURE__ */ getUrl('cjs2es@1.1.1/dist/cjs2es.browser.js');\r\n\r\nexport const clioBaseUrl = /* @__PURE__ */ getUrl(\r\n  '@live-codes/clio-browser-compiler@0.0.3/public/build/',\r\n);\r\n\r\nexport const coffeeScriptUrl = /* @__PURE__ */ getUrl(\r\n  'coffeescript@2.7.0/lib/coffeescript-browser-compiler-legacy/coffeescript.js',\r\n);\r\n\r\nexport const cppWasmBaseUrl = /* @__PURE__ */ getUrl('@chriskoch/cpp-wasm@1.0.2');\r\n\r\nexport const csstreeUrl = /* @__PURE__ */ getUrl('css-tree@1.1.3/dist/csstree.js');\r\n\r\nexport const cytoscapeSvgUrl = /* @__PURE__ */ getUrl('cytoscape-svg@0.4.0/cytoscape-svg.js');\r\n\r\nexport const cytoscapeUrl = /* @__PURE__ */ getUrl('cytoscape@3.25.0/dist/cytoscape.min.js');\r\n\r\nexport const dotUrl = /* @__PURE__ */ getUrl('dot@1.1.3/doT.js');\r\n\r\nexport const ejsUrl = /* @__PURE__ */ getUrl('ejs@3.1.9/ejs.js');\r\n\r\nexport const elkjsBaseUrl = /* @__PURE__ */ getUrl('elkjs@0.8.2/lib/');\r\n\r\nexport const emmetMonacoUrl = /* @__PURE__ */ getUrl('emmet-monaco-es@5.0.0/dist/emmet-monaco.js');\r\n\r\nexport const esModuleShimsPath = 'es-module-shims@1.4.4/dist/es-module-shims.js';\r\n\r\nexport const etaUrl = /* @__PURE__ */ getUrl('eta@2.2.0/dist/eta.umd.js');\r\n\r\nexport const flexSearchUrl = /* @__PURE__ */ getUrl('flexsearch@0.7.21/dist/flexsearch.bundle.js');\r\n\r\nexport const fontAnonymousProUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/anonymous-pro@4.5.9/index.css',\r\n);\r\n\r\nexport const fontCascadiaCodeUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/cascadia-code@4.2.1/index.css',\r\n);\r\n\r\nexport const fontCodeNewRomanUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/code-new-roman-2',\r\n);\r\n\r\nexport const fontComicMonoUrl = /* @__PURE__ */ getUrl('comic-mono@0.0.1/index.css');\r\n\r\nexport const fontCourierPrimeUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/courier-prime@4.5.9/index.css',\r\n);\r\n\r\nexport const fontDECTerminalModernUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/dec-terminal-modern',\r\n);\r\n\r\nexport const fontDejaVuMonoUrl = /* @__PURE__ */ getUrl('@fontsource/dejavu-mono@4.5.4/index.css');\r\n\r\nexport const fontFantasqueUrl = /* @__PURE__ */ getUrl(\r\n  '@typopro/web-fantasque-sans-mono@3.7.5/TypoPRO-FantasqueSansMono.css',\r\n);\r\n\r\nexport const fontFiraCodeUrl = /* @__PURE__ */ getUrl('firacode@6.2.0/distr/fira_code.css');\r\n\r\nexport const fontFixedsysUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/fixedsys-62');\r\n\r\nexport const fontHackUrl = /* @__PURE__ */ getUrl('hack-font@3.3.0/build/web/hack.css');\r\n\r\nexport const fontHermitUrl = /* @__PURE__ */ getUrl('typeface-hermit@0.0.44/index.css');\r\n\r\nexport const fontIBMPlexMonoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap',\r\n);\r\n\r\nexport const fontInconsolataUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Inconsolata&display=swap',\r\n);\r\n\r\nexport const fontIosevkaUrl = /* @__PURE__ */ getUrl('@fontsource/iosevka@4.5.4/index.css');\r\n\r\nexport const fontJetbrainsMonoUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/jetbrains-mono@4.5.11/index.css',\r\n);\r\n\r\nexport const fontMenloUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/menlo');\r\n\r\nexport const fontMonofurUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/monofur');\r\n\r\nexport const fontMonoidUrl = /* @__PURE__ */ getUrl('@typopro/web-monoid@3.7.5/TypoPRO-Monoid.css');\r\n\r\nexport const fontNotoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&display=swap',\r\n);\r\n\r\nexport const fontNovaMonoUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.googleapis.com/css2?family=Nova+Mono&display=swap',\r\n);\r\n\r\nexport const fontOpenDyslexicUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/opendyslexic@4.5.4/index.css',\r\n);\r\n\r\nexport const fontProFontWindowsUrl = /* @__PURE__ */ getUrl(\r\n  'https://fonts.cdnfonts.com/css/profontwindows',\r\n);\r\n\r\nexport const fontRobotoMonoUrl = /* @__PURE__ */ getUrl('@fontsource/roboto-mono@4.5.8/index.css');\r\n\r\nexport const fontSFMonoUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/sf-mono');\r\n\r\nexport const fontSourceCodeProUrl = /* @__PURE__ */ getUrl(\r\n  '@fontsource/source-code-pro@4.5.12/index.css',\r\n);\r\n\r\nexport const fontSpaceMonoUrl = /* @__PURE__ */ getUrl('@fontsource/space-mono@4.5.10/index.css');\r\n\r\nexport const fontSudoVarUrl = /* @__PURE__ */ getUrl('https://fonts.cdnfonts.com/css/sudo-var');\r\n\r\nexport const fontUbuntuMonoUrl = /* @__PURE__ */ getUrl('@fontsource/ubuntu-mono@4.5.11/index.css');\r\n\r\nexport const fontVictorMonoUrl = /* @__PURE__ */ getUrl('victormono@1.5.4/dist/index.css');\r\n\r\nexport const fscreenUrl = /* @__PURE__ */ getUrl('fscreen@1.2.0/dist/fscreen.esm.js');\r\n\r\nexport const githubMarkdownCss = /* @__PURE__ */ getUrl(\r\n  'github-markdown-css@5.1.0/github-markdown.css',\r\n);\r\n\r\nexport const go2jsBaseUrl = /* @__PURE__ */ getUrl('@live-codes/go2js@0.4.0/build/');\r\n\r\nexport const graphreCdnUrl = /* @__PURE__ */ getUrl('graphre@0.1.3/dist/graphre.js');\r\n\r\nexport const handlebarsBaseUrl = /* @__PURE__ */ getUrl('handlebars@4.7.7/dist/');\r\n\r\nexport const highlightjsUrl = /* @__PURE__ */ getModuleUrl('highlight.js@11.5.1');\r\n\r\nexport const hintCssUrl = /* @__PURE__ */ getUrl('hint.css@2.7.0/hint.css');\r\n\r\nexport const hpccJsCdnUrl = /* @__PURE__ */ getUrl('@hpcc-js/wasm@2.13.0/dist/index.js');\r\n\r\nexport const imbaBaseUrl = /* @__PURE__ */ getUrl('imba@2.0.0-alpha.229/dist/');\r\n\r\nexport const jestLiteUrl = /* @__PURE__ */ getUrl('jest-lite@1.0.0-alpha.4/dist/core.js');\r\n\r\nexport const jestTypesUrl = /* @__PURE__ */ getUrl('@types/jest@27.4.1/index.d.ts');\r\n\r\nexport const jsclUrl = /* @__PURE__ */ getUrl(\r\n  'gh:jscl-project/jscl-project.github.io@efd3aecdba496d132ed650b7b5be976fd0ca278f/jscl.js',\r\n);\r\n\r\nexport const jsZipUrl = /* @__PURE__ */ getUrl('jszip@3.10.1/dist/jszip.js');\r\n\r\nexport const juliaWasmBaseUrl = /* @__PURE__ */ getUrl('@chriskoch/julia-wasm@1.0.4');\r\n\r\nexport const liquidJsUrl = /* @__PURE__ */ getUrl('liquidjs@10.8.2/dist/liquid.browser.min.js');\r\n\r\nexport const localforageUrl = /* @__PURE__ */ getUrl('localforage@1.10.0/dist/localforage.js');\r\n\r\nexport const luaUrl = /* @__PURE__ */ getUrl('fengari-web@0.1.4/dist/fengari-web.js');\r\n\r\nexport const lunaObjViewerStylesUrl = /* @__PURE__ */ getUrl(\r\n  'luna-object-viewer@0.2.0/luna-object-viewer.css',\r\n);\r\n\r\nexport const lunaConsoleStylesUrl = /* @__PURE__ */ getUrl('luna-console@0.2.1/luna-console.css');\r\n\r\nexport const malinaVersion = '0.6.64';\r\nexport const malinaUrl = /* @__PURE__ */ getUrl(`malinajs@${malinaVersion}/malina.js`);\r\n\r\nexport const markedUrl = /* @__PURE__ */ getUrl('marked@5.0.4/marked.min.js');\r\n\r\nexport const mermaidCdnUrl = /* @__PURE__ */ getUrl('mermaid@10.2.2/dist/mermaid.esm.mjs');\r\n\r\nexport const mjmlUrl = /* @__PURE__ */ getUrl('mjml-browser@4.14.1/lib/index.js');\r\n\r\nexport const monacoEmacsUrl = /* @__PURE__ */ getUrl('monaco-emacs@0.3.0/dist/monaco-emacs.js');\r\n\r\nexport const monacoVimUrl = /* @__PURE__ */ getUrl('monaco-vim@0.4.0/dist/monaco-vim.js');\r\n\r\nexport const mustacheUrl = /* @__PURE__ */ getUrl('mustache@4.2.0/mustache.js');\r\n\r\nexport const nomnomlCdnUrl = /* @__PURE__ */ getUrl('nomnoml@1.6.1/dist/nomnoml.js');\r\n\r\nexport const normalizeCssUrl = /* @__PURE__ */ getUrl('normalize.css@8.0.1/normalize.css');\r\n\r\nexport const nunjucksBaseUrl = /* @__PURE__ */ getUrl('nunjucks@3.2.4/browser/');\r\n\r\nexport const opalBaseUrl = /* @__PURE__ */ getUrl('https://cdn.opalrb.com/opal/1.7.3/');\r\n\r\nexport const parinferUrl = /* @__PURE__ */ getUrl('parinfer@3.13.1/parinfer.js');\r\n\r\nexport const pintoraUrl = /* @__PURE__ */ getUrl(\r\n  '@pintora/standalone@0.6.2/lib/pintora-standalone.umd.js',\r\n);\r\n\r\nexport const plotlyCdnUrl = /* @__PURE__ */ getUrl('plotly.js@2.23.2/dist/plotly.js');\r\n\r\nexport const postcssImportUrlUrl = /* @__PURE__ */ getUrl(\r\n  '@live-codes/postcss-import-url@0.1.2/dist/postcss-import-url.js',\r\n);\r\n\r\nexport const prettierBaseUrl = /* @__PURE__ */ getUrl('prettier@2.5.1/');\r\n\r\nexport const prettierPhpUrl = /* @__PURE__ */ getUrl('@prettier/plugin-php@0.18.0/standalone.js');\r\n\r\nexport const prismBaseUrl = /* @__PURE__ */ getUrl('prismjs@1.26.0/components/');\r\n\r\nexport const pyodideBaseUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.jsdelivr.net/pyodide/v0.23.2/full/',\r\n);\r\n\r\nexport const qrcodeUrl = /* @__PURE__ */ getUrl('qrcode-generator@1.4.4/qrcode.js');\r\n\r\nexport const quillEditorCdnBaseUrl = /* @__PURE__ */ getUrl('quill@2.0.0-dev.4/dist/');\r\n\r\nexport const quillHtmlEditUrl = /* @__PURE__ */ getUrl(\r\n  'quill-html-edit-button@2.2.7/dist/quill.htmlEditButton.min.js',\r\n);\r\n\r\nexport const quillBlotFormaterUrl = /* @__PURE__ */ getUrl(\r\n  'quill-blot-formatter@1.0.5/dist/quill-blot-formatter.min.js',\r\n);\r\n\r\nexport const quillBetterTableBaseUrl = /* @__PURE__ */ getUrl('quill-better-table@1.2.10/dist/');\r\n\r\nexport const requireUrl = /* @__PURE__ */ getUrl('requirejs@2.3.6/require.js');\r\n\r\nexport const reasonCompilerUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v9.1.2/compiler.js',\r\n);\r\n\r\nexport const reasonReactUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v9.1.2/%40rescript/react/cmij.js',\r\n);\r\n\r\nexport const reasonStdLibBaseUrl = /* @__PURE__ */ getUrl('@rescript/std@9.1.3/lib/es6/');\r\n\r\nexport const rescriptCompilerUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v10.1.2/compiler.js',\r\n);\r\n\r\nexport const rescriptReactUrl = /* @__PURE__ */ getUrl(\r\n  'https://cdn.rescript-lang.org/v10.1.2/%40rescript/react/cmij.js',\r\n);\r\n\r\nexport const rescriptStdLibBaseUrl = /* @__PURE__ */ getUrl('@rescript/std@10.1.2/lib/es6/');\r\n\r\nexport const resetCssUrl = /* @__PURE__ */ getUrl('reset-css@5.0.1/reset.css');\r\n\r\nexport const riotBaseUrl = /* @__PURE__ */ getUrl('riot@7.1.0/');\r\n\r\nexport const snackbarUrl = /* @__PURE__ */ getUrl('@snackbar/core@1.7.0/dist/snackbar.css');\r\n\r\nexport const spacingJsUrl = /* @__PURE__ */ getUrl('spacingjs@1.0.7/dist/bundle.js');\r\n\r\nexport const sqlFormatterUrl = /* @__PURE__ */ getUrl(\r\n  'sql-formatter@12.2.1/dist/sql-formatter.min.js',\r\n);\r\n\r\nexport const sqljsBaseUrl = /* @__PURE__ */ getUrl('sql.js@1.8.0/dist/');\r\n\r\nexport const stencilUrl = /* @__PURE__ */ getUrl('@stencil/core@3.2.2/compiler/stencil.js');\r\n\r\nexport const stylisUrl = /* @__PURE__ */ getUrl('stylis@4.2.0/dist/umd/stylis.js');\r\n\r\nexport const svgbobWasmCdnUrl = /* @__PURE__ */ getUrl('svgbob-wasm@0.4.1-a0/svgbob_wasm_bg.wasm');\r\n\r\nexport const tagifyBaseUrl = /* @__PURE__ */ getUrl('@yaireo/tagify@4.9.6/dist/');\r\n\r\nexport const tailwindcssUrl = /* @__PURE__ */ getUrl(\r\n  '@mhsdesign/jit-browser-tailwindcss@0.3.0/dist/cdn.min.js',\r\n);\r\n\r\nexport const tauPrologBaseUrl = /* @__PURE__ */ getUrl('tau-prolog@0.3.4/modules/');\r\n\r\nexport const tealUrl = /* @__PURE__ */ getUrl(\r\n  'gh:teal-language/tl@d2fc36b5ff9a52d7265e63eb74cce70fd1cdbcb2/tl.lua',\r\n);\r\n\r\nexport const twigUrl = /* @__PURE__ */ getUrl('twig@1.16.0/twig.min.js');\r\n\r\nexport const typescriptUrl = /* @__PURE__ */ getUrl('typescript@5.1.3/lib/typescript.js');\r\n\r\nexport const uniterUrl = /* @__PURE__ */ getUrl('uniter@2.18.0/dist/uniter.js');\r\n\r\nexport const vegaCdnUrl = /* @__PURE__ */ getUrl('vega@5.25.0/build/vega.js');\r\n\r\nexport const vegaLiteCdnUrl = /* @__PURE__ */ getUrl('vega-lite@5.9.3/build/vega-lite.js');\r\n\r\nexport const vue3CdnUrl = /* @__PURE__ */ getUrl('vue@3');\r\n\r\nexport const vue2CdnUrl = /* @__PURE__ */ getUrl('vue@2');\r\n\r\nexport const vueSfcLoaderCdnBaseUrl = /* @__PURE__ */ getUrl('vue3-sfc-loader@0.8.4/dist/');\r\n\r\nexport const wabtjsUrl = /* @__PURE__ */ getUrl('wabt@1.0.32/index.js');\r\n\r\nexport const waveDromBaseUrl = /* @__PURE__ */ getUrl('wavedrom@3.2.0/');\r\n\r\nexport const webRBaseUrl = /* @__PURE__ */ getUrl('@r-wasm/webr@0.1.1/dist/');\r\n", "import type { ProcessorSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const lightningcss: ProcessorSpecs = {\n  name: 'lightningcss',\n  title: 'Lightning CSS',\n  isPostcssPlugin: false,\n  compiler: {\n    url: vendorsBaseUrl + 'lightningcss/lightningcss.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:processor-lightningcss-compiler.js}}');\n      return (self as any).createLightningcssCompiler();\n    },\n  },\n  editor: 'style',\n};\n", "import type { ProcessorSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const postcss: ProcessorSpecs = {\n  name: 'postcss',\n  title: 'Processors:',\n  isPostcssPlugin: false,\n  compiler: {\n    url: vendorsBaseUrl + 'postcss/postcss.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:processor-postcss-compiler.js}}');\n      return (self as any).createPostcssCompiler();\n    },\n  },\n  editor: 'style',\n  hidden: true,\n};\n", "import type { ProcessorSpecs } from '../../models';\r\nimport { postcssImportUrlUrl, vendorsBaseUrl } from '../../vendors';\r\nimport { getLanguageCustomSettings } from '../../utils';\r\n\r\nexport const autoprefixer: ProcessorSpecs = {\r\n  name: 'autoprefixer',\r\n  title: 'Autoprefixer',\r\n  isPostcssPlugin: true,\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'autoprefixer/autoprefixer.js',\r\n    factory: (config) =>\r\n      (self as any).autoprefixer.autoprefixer({\r\n        ...getLanguageCustomSettings('autoprefixer', config),\r\n      }),\r\n  },\r\n  editor: 'style',\r\n};\r\n\r\nexport const cssnano: ProcessorSpecs = {\r\n  name: 'cssnano',\r\n  title: 'cssnano',\r\n  isPostcssPlugin: true,\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'cssnano/cssnano.js',\r\n    factory: () => {\r\n      const nanoPlugins = (self as any).cssnano.cssnanoPresetDefault().plugins;\r\n      const postcssPlugins = [];\r\n      for (const plugin of nanoPlugins) {\r\n        const [processor, opts] = plugin;\r\n        if (\r\n          typeof opts === 'undefined' ||\r\n          (typeof opts === 'object' && !opts.exclude) ||\r\n          (typeof opts === 'boolean' && opts === true)\r\n        ) {\r\n          postcssPlugins.push(processor(opts));\r\n        }\r\n      }\r\n      return postcssPlugins;\r\n    },\r\n  },\r\n  editor: 'style',\r\n};\r\n\r\nexport const postcssImportUrl: ProcessorSpecs = {\r\n  name: 'postcssImportUrl',\r\n  title: 'Import Url',\r\n  isPostcssPlugin: true,\r\n  compiler: {\r\n    url: postcssImportUrlUrl,\r\n    factory: (config) =>\r\n      (self as any).postcssImportUrl({\r\n        ...getLanguageCustomSettings('postcssImportUrl', config),\r\n      }),\r\n  },\r\n  editor: 'style',\r\n};\r\n\r\nexport const postcssPresetEnv: ProcessorSpecs = {\r\n  name: 'postcssPresetEnv',\r\n  title: 'Preset Env',\r\n  isPostcssPlugin: true,\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'postcss-preset-env/postcss-preset-env.js',\r\n    factory: (config) =>\r\n      (self as any).postcssPresetEnv.postcssPresetEnv({\r\n        autoprefixer: false,\r\n        ...getLanguageCustomSettings('postcssPresetEnv', config),\r\n      }),\r\n  },\r\n  editor: 'style',\r\n};\r\n\r\nexport const purgecss: ProcessorSpecs = {\r\n  name: 'purgecss',\r\n  title: 'PurgeCSS',\r\n  isPostcssPlugin: true,\r\n  needsHTML: true,\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'purgecss/purgecss.js',\r\n    factory: (config, _baseUrl, options) =>\r\n      (self as any).purgecss.purgecss({\r\n        ...getLanguageCustomSettings('purgecss', config),\r\n        content: [\r\n          {\r\n            raw: `<template>${options.html}\\n<script>${config.script.content}</script></template>`,\r\n            extension: 'html',\r\n          },\r\n        ],\r\n      }),\r\n  },\r\n  editor: 'style',\r\n};\r\n\r\nexport const tokencss: ProcessorSpecs = {\r\n  name: 'tokencss',\r\n  title: 'Token CSS',\r\n  isPostcssPlugin: true,\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'tokencss/tokencss.js',\r\n    factory: (config) => {\r\n      const customSettings = getLanguageCustomSettings('tokencss', config);\r\n      if (Object.keys(customSettings).length === 0) {\r\n        customSettings.$schema = 'https://tokencss.com/schema@0.0.1';\r\n        customSettings.extends = '@tokencss/core/preset';\r\n      }\r\n      const extendTokens = (base: any, tokens: any) => {\r\n        const result = JSON.parse(JSON.stringify(base));\r\n        Object.keys(tokens).forEach((key) => {\r\n          result[key] =\r\n            typeof tokens[key] !== 'object' || Array.isArray(tokens[key])\r\n              ? tokens[key]\r\n              : {\r\n                  ...result[key],\r\n                  ...tokens[key],\r\n                };\r\n        });\r\n        return result;\r\n      };\r\n      const tokensConfig = customSettings.extends?.includes('@tokencss/core/preset')\r\n        ? extendTokens((self as any).tokencss.preset, customSettings)\r\n        : customSettings;\r\n\r\n      return (self as any).tokencss.tokencss({ config: tokensConfig });\r\n    },\r\n  },\r\n  editor: 'style',\r\n};\r\n\r\nexport const cssModules: ProcessorSpecs = {\r\n  name: 'cssmodules',\r\n  title: 'CSS Modules',\r\n  isPostcssPlugin: true,\r\n  needsHTML: true,\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'postcss-modules/postcss-modules.js',\r\n    factory: (config, _baseUrl, options) => {\r\n      const customSettings = getLanguageCustomSettings('cssmodules', config);\r\n      return (self as any).postcssModules.postcssModules({\r\n        localsConvention: 'camelCase',\r\n        ...customSettings,\r\n        getJSON(_cssFileName: string, json: Record<string, string>, _outputFileName: string) {\r\n          const addClasses = customSettings.addClassesToHTML !== false;\r\n          const removeClasses = customSettings.removeOriginalClasses === true;\r\n          if (addClasses) {\r\n            options.html = (self as any).postcssModules.addClassesToHtml(\r\n              options.html,\r\n              json,\r\n              removeClasses,\r\n            );\r\n          }\r\n          options.compileInfo = {\r\n            ...options.compileInfo,\r\n            cssModules: json,\r\n            ...(addClasses ? { modifiedHTML: options.html } : {}),\r\n          };\r\n        },\r\n      });\r\n    },\r\n  },\r\n  editor: 'style',\r\n};\r\n", "import type { ProcessorSpecs } from '../../models';\r\nimport { tailwindcssUrl } from '../../vendors';\r\n\r\nexport const tailwindcss: ProcessorSpecs = {\r\n  name: 'tailwindcss',\r\n  title: 'Tailwind CSS',\r\n  isPostcssPlugin: false,\r\n  needsHTML: true,\r\n  compiler: {\r\n    url: tailwindcssUrl,\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:processor-tailwindcss-compiler.js}}');\r\n      return (self as any).createTailwindcssCompiler();\r\n    },\r\n  },\r\n  editor: 'style',\r\n};\r\n", "import type { ProcessorSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const unocss: ProcessorSpecs = {\n  name: 'unocss',\n  title: 'UnoCSS',\n  isPostcssPlugin: false,\n  needsHTML: true,\n  compiler: {\n    url: vendorsBaseUrl + 'unocss/unocss.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:processor-unocss-compiler.js}}');\n      return (self as any).createUnocssCompiler();\n    },\n  },\n  editor: 'style',\n};\n", "import type { ProcessorSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const windicss: ProcessorSpecs = {\n  name: 'windicss',\n  title: 'Windi CSS',\n  isPostcssPlugin: false,\n  needsHTML: true,\n  compiler: {\n    url: vendorsBaseUrl + 'windicss/windicss.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:processor-windicss-compiler.js}}');\n      return (self as any).createWindicssCompiler();\n    },\n  },\n  editor: 'style',\n};\n", "import type { ProcessorSpecs } from '../models';\r\nimport { lightningcss } from './lightningcss';\r\nimport {\r\n  postcss,\r\n  autoprefixer,\r\n  postcssPresetEnv,\r\n  postcssImportUrl,\r\n  tokencss,\r\n  purgecss,\r\n  cssnano,\r\n  cssModules,\r\n} from './postcss';\r\nimport { tailwindcss } from './tailwindcss';\r\nimport { unocss } from './unocss';\r\nimport { windicss } from './windicss';\r\n\r\nexport const processors: ProcessorSpecs[] = [\r\n  ...[\r\n    tailwindcss,\r\n    windicss,\r\n    unocss,\r\n    tokencss,\r\n    purgecss,\r\n    postcssImportUrl,\r\n    autoprefixer,\r\n    postcssPresetEnv,\r\n    lightningcss,\r\n    cssnano,\r\n    cssModules,\r\n  ],\r\n  // keep postcss as last processor\r\n  postcss,\r\n];\r\n", "import type { Compiler, Language, CustomSettings, Config, Processor } from '../models';\r\nimport { getLanguageCustomSettings } from '../utils';\r\nimport { highlightjsUrl } from '../vendors';\r\nimport { languages } from './languages';\r\nimport { processors } from './processors';\r\n\r\nexport const getLanguageByAlias = (alias: string = ''): Language | undefined => {\r\n  if (!alias) return;\r\n  const aliasLowerCase = alias?.toLowerCase();\r\n  return languages.find(\r\n    (language) =>\r\n      language.name === aliasLowerCase ||\r\n      language.title.toLowerCase() === aliasLowerCase ||\r\n      language.extensions.map((ext) => ext.toLowerCase()).includes(aliasLowerCase),\r\n  )?.name;\r\n};\r\n\r\nexport const getLanguageTitle = (language: Language) => {\r\n  const languageSpecs = languages.find((lang) => lang.name === language);\r\n  return languageSpecs?.longTitle || languageSpecs?.title || language.toUpperCase();\r\n};\r\n\r\nexport const getLanguageEditorId = (alias: string = '') =>\r\n  languages.find((lang) => lang.name === getLanguageByAlias(alias))?.editor;\r\n\r\nexport const getLanguageExtension = (alias: string = '') =>\r\n  languages.find((lang) => lang.name === getLanguageByAlias(alias))?.extensions[0];\r\n\r\nexport const getLanguageSpecs = (alias: string = '') =>\r\n  languages.find((lang) => lang.name === getLanguageByAlias(alias));\r\n\r\nexport const getLanguageCompiler = (alias: string = ''): Compiler | undefined => {\r\n  const languageSpecs = getLanguageSpecs(alias);\r\n  let compiler = languageSpecs?.compiler;\r\n  if (typeof compiler === 'string') {\r\n    compiler = getLanguageCompiler(compiler);\r\n  }\r\n  return compiler;\r\n};\r\n\r\nexport const mapLanguage = (language: Language): Language =>\r\n  getLanguageSpecs(language)?.editorLanguage || language;\r\n\r\nexport const languageIsEnabled = (language: Language, config: Config) => {\r\n  const lang = getLanguageByAlias(language);\r\n  if (!lang) return false;\r\n  if (!config.languages) return true;\r\n  return config.languages?.map(getLanguageByAlias).filter(Boolean).includes(lang);\r\n};\r\n\r\nexport const processorIsEnabled = (processor: Processor, config: Config) => {\r\n  if (!processors.map((p) => p.name).includes(processor)) return false;\r\n  if (!config.languages) return true;\r\n  return config.languages.includes(processor);\r\n};\r\n\r\nexport const processorIsActivated = (processor: Processor, config: Config) =>\r\n  config.processors.includes(processor);\r\n\r\n/**\r\n * returns a string with names of enabled processors/postcss plugins\r\n * for the supplied language (separated by hyphens)\r\n */\r\nexport const getActivatedProcessors = (language: Language, config: Config) => {\r\n  const editorId = getLanguageEditorId(language);\r\n  if (!editorId) return '';\r\n  return processors\r\n    .filter((p) => p.editor === editorId)\r\n    .map((p) => p.name)\r\n    .filter((p) => processorIsEnabled(p, config))\r\n    .filter((p) => processorIsActivated(p, config))\r\n    .join('-');\r\n};\r\n\r\nexport const escapeCode = (code: string, slash = true) =>\r\n  code\r\n    .replace(/\\\\/g, slash ? '\\\\\\\\' : '\\\\')\r\n    .replace(/`/g, '\\\\`')\r\n    .replace(/<\\/script>/g, '<\\\\/script>');\r\n\r\nexport const getCustomSettings = (\r\n  language: Language | Processor,\r\n  config: Config,\r\n): CustomSettings => {\r\n  const settings: CustomSettings = {\r\n    ...getLanguageCustomSettings(language, config),\r\n  };\r\n  if (getLanguageEditorId(language) === 'markup') {\r\n    settings.template = config.customSettings.template;\r\n  }\r\n  return settings;\r\n};\r\n\r\nexport const detectLanguage = async (code: string, languages: Language[]) => {\r\n  (window as any).HighlightJS =\r\n    (window as any).HighlightJS || (await import(highlightjsUrl)).default;\r\n  const result = (window as any).HighlightJS.highlightAuto(code, languages);\r\n  return {\r\n    language: result.language as Language,\r\n    secondBest: result.secondBest.language as Language,\r\n  };\r\n};\r\n\r\nexport { getLanguageCustomSettings };\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { asciidocUrl } from '../../vendors';\r\nimport { getLanguageCustomSettings } from '../utils';\r\n\r\nexport const asciidoc: LanguageSpecs = {\r\n  name: 'asciidoc',\r\n  title: 'AsciiDoc',\r\n  compiler: {\r\n    url: asciidocUrl,\r\n    factory: () => {\r\n      const asciidoctor = (window as any).Asciidoctor();\r\n      return async (code, { config }) =>\r\n        asciidoctor.convert(code, {\r\n          ...getLanguageCustomSettings('asciidoc', config),\r\n        });\r\n    },\r\n  },\r\n  extensions: ['adoc', 'asciidoc', 'asc'],\r\n  editor: 'markup',\r\n};\r\n", "import { prettierBaseUrl, prettierPhpUrl, vendorsBaseUrl } from '../vendors';\r\n\r\nexport const prettierUrl = prettierBaseUrl + 'standalone.js';\r\nexport const parserPlugins = {\r\n  babel: prettierBaseUrl + 'parser-babel.js',\r\n  glimmer: prettierBaseUrl + 'parser-glimmer.js',\r\n  html: prettierBaseUrl + 'parser-html.js',\r\n  markdown: prettierBaseUrl + 'parser-markdown.js',\r\n  postcss: prettierBaseUrl + 'parser-postcss.js',\r\n  php: prettierPhpUrl,\r\n  pug: vendorsBaseUrl + 'prettier/parser-pug.js',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { babelUrl } from '../../vendors';\r\nimport { getLanguageCustomSettings } from '../../utils';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const babel: LanguageSpecs = {\r\n  name: 'babel',\r\n  title: 'Babel',\r\n  parser: {\r\n    name: 'babel',\r\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    url: babelUrl,\r\n    factory:\r\n      () =>\r\n      async (code, { config }) =>\r\n        (window as any).Babel.transform(code, {\r\n          filename: 'script.tsx',\r\n          presets: [['env', { modules: false }], 'typescript', 'react'],\r\n          ...getLanguageCustomSettings('babel', config),\r\n        }).code,\r\n  },\r\n  extensions: ['es', 'babel'],\r\n  editor: 'script',\r\n  editorLanguage: 'typescript',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { parserPlugins } from '../prettier';\n\nexport const css: LanguageSpecs = {\n  name: 'css',\n  title: 'CSS',\n  info: false,\n  parser: {\n    name: 'css',\n    pluginUrls: [parserPlugins.postcss],\n  },\n  compiler: {\n    factory: () => async (code) => code,\n  },\n  extensions: ['css'],\n  editor: 'style',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const haml: LanguageSpecs = {\n  name: 'haml',\n  title: 'Haml',\n  compiler: {\n    url: vendorsBaseUrl + 'clientside-haml-js/haml.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-haml-compiler.js}}');\n      return (self as any).createHamlCompiler();\n    },\n  },\n  extensions: ['haml'],\n  editor: 'markup',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { parserPlugins } from '../prettier';\n\nexport const html: LanguageSpecs = {\n  name: 'html',\n  title: 'HTML',\n  info: false,\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html],\n  },\n  compiler: {\n    factory: () => async (code) => code,\n  },\n  extensions: ['html', 'htm'],\n  editor: 'markup',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { parserPlugins } from '../prettier';\n\nexport const javascript: LanguageSpecs = {\n  name: 'javascript',\n  title: 'JS',\n  longTitle: 'JavaScript',\n  info: false,\n  parser: {\n    name: 'babel',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: {\n    factory: () => async (code) => code,\n  },\n  extensions: ['js'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { parserPlugins } from '../prettier';\n\nexport const jsx: LanguageSpecs = {\n  name: 'jsx',\n  title: 'JSX',\n  parser: {\n    name: 'babel',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: 'typescript',\n  extensions: ['jsx'],\n  editor: 'script',\n  editorLanguage: 'javascript',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { parserPlugins } from '../prettier';\n\nexport const tsx: LanguageSpecs = {\n  name: 'tsx',\n  title: 'TSX',\n  parser: {\n    name: 'babel-ts',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: 'typescript',\n  extensions: ['tsx'],\n  editor: 'script',\n  editorLanguage: 'typescript',\n};\n", "import type { LanguageSpecs } from '../../models';\r\nimport { vendorsBaseUrl } from '../../vendors';\r\nimport { getLanguageCustomSettings } from '../../utils';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const less: LanguageSpecs = {\r\n  name: 'less',\r\n  title: 'Less',\r\n  parser: {\r\n    name: 'less',\r\n    pluginUrls: [parserPlugins.postcss],\r\n  },\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'less/less.js',\r\n    factory:\r\n      () =>\r\n      async (code, { config }) =>\r\n        (\r\n          await (window as any).less.render(code, {\r\n            ...getLanguageCustomSettings('less', config),\r\n          })\r\n        ).css,\r\n  },\r\n  extensions: ['less'],\r\n  editor: 'style',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { markedUrl } from '../../vendors';\r\nimport { getLanguageCustomSettings } from '../../utils';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const markdown: LanguageSpecs = {\r\n  name: 'markdown',\r\n  title: 'Markdown',\r\n  parser: {\r\n    name: 'markdown',\r\n    pluginUrls: [parserPlugins.markdown, parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    url: markedUrl,\r\n    factory:\r\n      () =>\r\n      async (code, { config }) =>\r\n        (window as any).marked.parse(code, {\r\n          headerIds: false,\r\n          mangle: false,\r\n          ...getLanguageCustomSettings('markdown', config),\r\n        }),\r\n  },\r\n  extensions: ['md', 'markdown', 'mdown', 'mkdn'],\r\n  editor: 'markup',\r\n};\r\n", "import type { Config, Language, CompileOptions } from '../models';\r\n\r\nexport const compileInCompiler = async (\r\n  content: string,\r\n  language: Language | undefined,\r\n  config: Config,\r\n  options: CompileOptions = {},\r\n  worker: Worker = self as unknown as Worker,\r\n): Promise<string> =>\r\n  new Promise((resolve) => {\r\n    if (!content || !language || !config) {\r\n      return resolve(content || '');\r\n    }\r\n    const handler = async function (ev: MessageEvent) {\r\n      const message = ev.data.payload;\r\n      if (\r\n        ev.data.trigger === 'compileInCompiler' &&\r\n        message?.content === content &&\r\n        message?.language === language\r\n      ) {\r\n        worker.removeEventListener('message', handler);\r\n        resolve(message.compiled);\r\n      }\r\n    };\r\n    worker.addEventListener('message', handler);\r\n    worker.postMessage({\r\n      type: 'compileInCompiler',\r\n      payload: { content, language, config, options },\r\n    });\r\n  });\r\n", "import type { CompilerFunction, LanguageSpecs } from '../../models';\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport { compileInCompiler } from '../../compiler/compile-in-compiler';\r\nimport { escapeCode, getLanguageCustomSettings } from '../../utils';\r\nimport { vendorsBaseUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const runOutsideWorker: CompilerFunction = async (code: string, { config, worker }) =>\r\n  new Promise(async (resolve) => {\r\n    if (!code) return resolve('');\r\n    const [mdx, { default: remarkGfm }] = await Promise.all([\r\n      import(vendorsBaseUrl + 'mdx/mdx.js'),\r\n      import(vendorsBaseUrl + 'remark-gfm/remark-gfm.js'),\r\n    ]);\r\n\r\n    const compiled = (\r\n      await mdx.compile(code, {\r\n        remarkPlugins: [remarkGfm],\r\n        ...getLanguageCustomSettings('mdx', config),\r\n      })\r\n    ).value;\r\n\r\n    // TODO: improve this\r\n    const removeComponentDeclaration = (str: string) =>\r\n      str\r\n        .replace(/, {[^}]*} = _components/g, '')\r\n        .replace(/const {[^:]*} = props.components[^;]*;/g, '');\r\n\r\n    const jsx = removeComponentDeclaration(compiled);\r\n    const result = `import React from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\n${escapeCode(jsx, false)}\r\ncreateRoot(document.querySelector('#__livecodes_mdx_root__')).render(<MDXContent />,);\r\n`;\r\n    const js = await compileInCompiler(result, 'jsx', config, {}, worker);\r\n    resolve(`<div id=\"__livecodes_mdx_root__\"></div><script type=\"module\">${js}</script>`);\r\n  });\r\n\r\nexport const mdx: LanguageSpecs = {\r\n  name: 'mdx',\r\n  title: 'MDX',\r\n  parser: {\r\n    name: 'markdown',\r\n    pluginUrls: [parserPlugins.markdown, parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    factory: () => async (code) => code,\r\n    runOutsideWorker,\r\n    compiledCodeLanguage: 'javascript',\r\n  },\r\n  extensions: ['mdx'],\r\n  editor: 'markup',\r\n  editorLanguage: 'markdown',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { vendorsBaseUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const pug: LanguageSpecs = {\r\n  name: 'pug',\r\n  title: 'Pug',\r\n  parser: {\r\n    name: 'pug',\r\n    pluginUrls: [parserPlugins.pug],\r\n  },\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'pug/pug.min.js',\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-pug-compiler.js}}');\r\n      return (self as any).createPugCompiler();\r\n    },\r\n  },\r\n  extensions: ['pug', 'jade'],\r\n  editor: 'markup',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const scss: LanguageSpecs = {\n  name: 'scss',\n  title: 'SCSS',\n  parser: {\n    name: 'scss',\n    pluginUrls: [parserPlugins.postcss],\n  },\n  compiler: {\n    url: vendorsBaseUrl + 'sass/sass.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-scss-compiler.js}}');\n      return (self as any).createScssCompiler();\n    },\n  },\n  extensions: ['scss'],\n  editor: 'style',\n};\n", "import type { LanguageSpecs } from '../../models';\n\nexport const sass: LanguageSpecs = {\n  name: 'sass',\n  title: 'Sass',\n  compiler: 'scss',\n  extensions: ['sass'],\n  editor: 'style',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const svelte: LanguageSpecs = {\n  name: 'svelte',\n  title: 'Svelte',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html, parserPlugins.babel],\n  },\n  compiler: {\n    url: vendorsBaseUrl + 'svelte/svelte-compiler.min.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-svelte-compiler.js}}');\n      return (self as any).createSvelteCompiler();\n    },\n  },\n  extensions: ['svelte'],\n  editor: 'script',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const stylus: LanguageSpecs = {\n  name: 'stylus',\n  title: 'Stylus',\n  compiler: {\n    url: vendorsBaseUrl + 'stylus/stylus.min.js',\n    factory: () => async (code) => (window as any).stylus.render(code),\n  },\n  extensions: ['styl'],\n  editor: 'style',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { typescriptUrl } from '../../vendors';\nimport { getLanguageCustomSettings } from '../../utils';\nimport { parserPlugins } from '../prettier';\n\nexport const typescriptOptions = {\n  target: 'es2015',\n  jsx: 'react',\n  allowUmdGlobalAccess: true,\n  esModuleInterop: true,\n};\n\nexport const typescript: LanguageSpecs = {\n  name: 'typescript',\n  title: 'TS',\n  longTitle: 'TypeScript',\n  parser: {\n    name: 'babel-ts',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: {\n    url: typescriptUrl,\n    factory:\n      () =>\n      async (code, { config, language }) =>\n        (window as any).ts.transpile(code, {\n          ...typescriptOptions,\n          ...getLanguageCustomSettings('typescript', config),\n          ...getLanguageCustomSettings(language, config),\n        }),\n  },\n  extensions: ['ts', 'typescript'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\r\nimport { vue3CdnUrl, vueSfcLoaderCdnBaseUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nconst loaderCdnUrl = vueSfcLoaderCdnBaseUrl + 'vue3-sfc-loader.js';\r\n\r\nexport const vue: LanguageSpecs = {\r\n  name: 'vue',\r\n  title: 'Vue 3',\r\n  longTitle: 'Vue 3 SFC',\r\n  parser: {\r\n    name: 'html',\r\n    pluginUrls: [parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-vue-compiler.js}}');\r\n      return (self as any).createVueCompiler();\r\n    },\r\n    scripts: [vue3CdnUrl, loaderCdnUrl],\r\n    imports: {\r\n      vue: vue3CdnUrl + '/dist/vue.runtime.esm-browser.prod.js',\r\n    },\r\n  },\r\n  extensions: ['vue', 'vue3'],\r\n  editor: 'script',\r\n  editorLanguage: 'html',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { vue2CdnUrl, vueSfcLoaderCdnBaseUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nconst loaderCdnUrl = vueSfcLoaderCdnBaseUrl + 'vue2-sfc-loader.js';\r\n\r\nexport const vue2: LanguageSpecs = {\r\n  name: 'vue2',\r\n  title: 'Vue 2',\r\n  longTitle: 'Vue 2 SFC',\r\n  parser: {\r\n    name: 'html',\r\n    pluginUrls: [parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-vue-compiler.js}}');\r\n      return (self as any).createVue2Compiler();\r\n    },\r\n    scripts: [vue2CdnUrl, loaderCdnUrl],\r\n    imports: {\r\n      vue: vue2CdnUrl + '/dist/vue.runtime.esm-browser.prod.js',\r\n    },\r\n  },\r\n  extensions: ['vue2'],\r\n  editor: 'script',\r\n  editorLanguage: 'html',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { stencilUrl, vendorsBaseUrl } from '../../vendors';\nimport { getLanguageCustomSettings } from '../../utils';\nimport { parserPlugins } from '../prettier';\n\nexport const stencil: LanguageSpecs = {\n  name: 'stencil',\n  title: 'Stencil',\n  parser: {\n    name: 'babel-ts',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: {\n    url: stencilUrl,\n    factory:\n      () =>\n      async (code, { config }) => {\n        const result = await (window as any).stencil.transpile(code, {\n          // TranspileOptions interface\n          // https://github.com/ionic-team/stencil/blob/1b8b7ec21f2622d05c9aafa417b2abdd4f2597a4/src/declarations/stencil-public-compiler.ts#L2311\n          sourceMap: false,\n          target: 'es2019',\n          ...getLanguageCustomSettings('stencil', config),\n        });\n        return result.code;\n      },\n    types: {\n      '@stencil/core': {\n        url: vendorsBaseUrl + 'types/stencil-core.d.ts',\n        declareAsModule: false,\n      },\n    },\n  },\n  extensions: ['stencil.tsx'],\n  editor: 'script',\n  editorLanguage: 'typescript',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { coffeeScriptUrl } from '../../vendors';\nimport { getLanguageCustomSettings } from '../../utils';\n\nexport const coffeescript: LanguageSpecs = {\n  name: 'coffeescript',\n  title: 'Coffee',\n  longTitle: 'CoffeeScript',\n  compiler: {\n    url: coffeeScriptUrl,\n    factory:\n      () =>\n      async (code, { config }) =>\n        (window as any).CoffeeScript.compile(code, {\n          bare: true,\n          ...getLanguageCustomSettings('coffeescript', config),\n        }),\n  },\n  extensions: ['coffee'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\nimport { getLanguageCustomSettings } from '../../utils';\n\nexport const livescript: LanguageSpecs = {\n  name: 'livescript',\n  title: 'LiveScript',\n  compiler: {\n    url: vendorsBaseUrl + 'livescript/livescript-min.js',\n    factory:\n      () =>\n      async (code, { config }) =>\n        (window as any).require('livescript').compile(code, {\n          bare: true,\n          ...getLanguageCustomSettings('livescript', config),\n        }),\n    scripts: [vendorsBaseUrl + 'livescript/prelude-browser-min.js'],\n  },\n  extensions: ['ls'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\r\nimport { assemblyscriptLoaderUrl, vendorsBaseUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nconst assemblyscriptUrl = vendorsBaseUrl + 'assemblyscript/assemblyscript.js';\r\n\r\nexport const assemblyscript: LanguageSpecs = {\r\n  name: 'assemblyscript',\r\n  title: 'AS',\r\n  longTitle: 'AssemblyScript',\r\n  parser: {\r\n    name: 'babel-ts',\r\n    pluginUrls: [parserPlugins.babel],\r\n  },\r\n  compiler: {\r\n    url: assemblyscriptUrl,\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-assemblyscript-compiler.js}}');\r\n      return (self as any).createAssemblyscriptCompiler();\r\n    },\r\n    scripts: ({ baseUrl }) => [\r\n      assemblyscriptLoaderUrl,\r\n      baseUrl + '{{hash:lang-assemblyscript-script.js}}',\r\n    ],\r\n    scriptType: 'application/wasm-uint8',\r\n    compiledCodeLanguage: 'wat',\r\n    types: {\r\n      assemblyscript: {\r\n        url: vendorsBaseUrl + 'types/assemblyscript.d.ts',\r\n        declareAsModule: false,\r\n        autoload: true,\r\n      },\r\n    },\r\n  },\r\n  extensions: ['as', 'ts'],\r\n  editor: 'script',\r\n  editorLanguage: 'typescript',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { brythonBaseUrl } from '../../vendors';\r\nimport { getLanguageCustomSettings } from '../../utils';\r\n\r\nconst brythonUrl = brythonBaseUrl + 'brython.min.js';\r\nconst stdlibUrl = brythonBaseUrl + 'brython_stdlib.js';\r\n\r\nexport const python: LanguageSpecs = {\r\n  name: 'python',\r\n  title: 'Python',\r\n  compiler: {\r\n    factory: () => async (code) => code,\r\n    scripts: ({ compiled, config }) => {\r\n      const { autoloadStdlib, ...options } = getLanguageCustomSettings('python', config);\r\n      const importsPattern = /^(?:from[ ]+(\\S+)[ ]+)?import[ ]+(\\S+)(?:[ ]+as[ ]+\\S+)?[ ]*$/gm;\r\n      const stdlib = autoloadStdlib !== false && compiled.match(importsPattern) ? [stdlibUrl] : [];\r\n      const loader = `window.addEventListener(\"load\", () => {brython(${JSON.stringify(options)})})`;\r\n      const loaderUrl = 'data:text/plain;base64,' + btoa(loader);\r\n      return [brythonUrl, ...stdlib, loaderUrl];\r\n    },\r\n    scriptType: 'text/python',\r\n    compiledCodeLanguage: 'python',\r\n  },\r\n  extensions: ['py'],\r\n  editor: 'script',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { opalBaseUrl } from '../../vendors';\nimport { getLanguageCustomSettings } from '../../utils';\n\ndeclare const importScripts: (...args: string[]) => void;\n\nconst getImports = (code: string, requireMap: { [mod: string]: string } = {}) =>\n  Array.from(\n    new Set(\n      [...code.matchAll(new RegExp(/^\\s*self\\.\\$require\\(\"(\\S+)\"\\);/gm))]\n        .map((arr) => arr[1])\n        .map((mod) => mod.split('/')[0])\n        .filter((mod) => requireMap.hasOwnProperty(mod) || mod !== 'opal') // already loaded\n        .map((mod) => requireMap[mod] || `${opalBaseUrl + mod}.min.js`),\n    ),\n  );\n\nexport const ruby: LanguageSpecs = {\n  name: 'ruby',\n  title: 'Ruby',\n  compiler: {\n    url: opalBaseUrl + 'opal.min.js',\n    factory: () => {\n      importScripts(opalBaseUrl + 'opal-parser.min.js');\n      // eslint-disable-next-line camelcase\n      (self as any).Opal.config.unsupported_features_severity = 'ignore';\n      (self as any).Opal.load('opal-parser');\n      return async (code, { config }) => {\n        const { autoloadStdlib, requireMap, ...options } = getLanguageCustomSettings(\n          'ruby',\n          config,\n        );\n        return (self as any).Opal.compile(code, options);\n      };\n    },\n    scripts: ({ compiled, config }) => {\n      const { autoloadStdlib, requireMap } = getLanguageCustomSettings('ruby', config);\n      const imports = getImports(compiled, requireMap);\n      const stdlib = autoloadStdlib !== false ? imports : [];\n      return [opalBaseUrl + 'opal.min.js', ...stdlib];\n    },\n  },\n  extensions: ['rb'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { uniterUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const php: LanguageSpecs = {\n  name: 'php',\n  title: 'PHP',\n  parser: {\n    name: 'php',\n    pluginUrls: [parserPlugins.php],\n  },\n  compiler: {\n    factory: () => async (code) => {\n      code = code.trim();\n      if (code.startsWith('<?php')) {\n        code = code.replace('<?php', '/* <?php */');\n        if (code.endsWith('?>')) {\n          code = code.replace('?>', '/* ?> */');\n        }\n      }\n      return code;\n    },\n    scripts: [uniterUrl],\n    deferScripts: true,\n    scriptType: 'text/x-uniter-php',\n    compiledCodeLanguage: 'php',\n  },\n  extensions: ['php'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const perl: LanguageSpecs = {\n  name: 'perl',\n  title: 'Perl',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [\n      vendorsBaseUrl + 'perlito/perlito5.min.js',\n      baseUrl + '{{hash:lang-perl-script.js}}',\n    ],\n    scriptType: 'text/perl',\n  },\n  extensions: ['pl', 'pm'],\n  editor: 'script',\n};\n", "import type { LanguageFormatter, LanguageSpecs } from '../../models';\nimport { luaUrl, vendorsBaseUrl } from '../../vendors';\n\nconst luaFmtUrl = vendorsBaseUrl + 'lua-fmt/lua-fmt.js';\n\nexport const luaFormatter: LanguageFormatter = {\n  factory: () => {\n    (self as any).importScripts(luaFmtUrl);\n    return async (code, cursorOffset) => ({\n      formatted: (self as any).luaFmt.formatText(code),\n      cursorOffset,\n    });\n  },\n};\n\nexport const lua: LanguageSpecs = {\n  name: 'lua',\n  title: 'Lua',\n  formatter: luaFormatter,\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: [luaUrl],\n    scriptType: 'application/lua',\n    compiledCodeLanguage: 'lua',\n  },\n  extensions: ['lua'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { jsclUrl, parinferUrl } from '../../vendors';\n\nexport const parenFormatter = () => {\n  const url = parinferUrl;\n  (self as any).importScripts(url);\n  return async (value: string) => ({\n    formatted: (window as any).parinfer.parenMode(value).text,\n    cursorOffset: 0,\n  });\n};\n\nexport const commonlisp: LanguageSpecs = {\n  name: 'commonlisp',\n  title: 'Lisp',\n  longTitle: 'Common Lisp',\n  formatter: {\n    factory: parenFormatter,\n  },\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [jsclUrl, baseUrl + '{{hash:lang-commonlisp-script.js}}'],\n    scriptType: 'text/commonlisp',\n    compiledCodeLanguage: 'commonlisp',\n    inlineScript: `\n\n    `,\n  },\n  extensions: ['lisp', 'common-lisp'],\n  editor: 'script',\n  editorLanguage: 'scheme',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { biwaschemeUrl } from '../../vendors';\nimport { parenFormatter } from '../commonlisp';\n\nexport const scheme: LanguageSpecs = {\n  name: 'scheme',\n  title: 'Scheme',\n  formatter: {\n    factory: parenFormatter,\n  },\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: [biwaschemeUrl],\n    scriptType: 'text/biwascheme',\n    compiledCodeLanguage: 'scheme',\n  },\n  extensions: ['scm'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const solid: LanguageSpecs = {\n  name: 'solid',\n  title: 'Solid',\n  parser: {\n    name: 'babel',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: {\n    dependencies: ['babel'],\n    url: vendorsBaseUrl + 'babel-preset-solid/babel-preset-solid.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-solid-compiler.js}}');\n      return (self as any).createSolidCompiler();\n    },\n    types: {\n      'solid-js': {\n        url: vendorsBaseUrl + 'types/solid-js.d.ts',\n        declareAsModule: false,\n      },\n    },\n  },\n  extensions: ['solid.jsx'],\n  editor: 'script',\n  editorLanguage: 'javascript',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { parserPlugins } from '../prettier';\n\nexport const solidTsx: LanguageSpecs = {\n  name: 'solid.tsx',\n  title: 'Solid (TS)',\n  parser: {\n    name: 'babel',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: 'solid',\n  extensions: ['solid.tsx'],\n  editor: 'script',\n  editorLanguage: 'typescript',\n};\n", "import type { LanguageSpecs } from '../../models';\n\nexport const pyodide: LanguageSpecs = {\n  name: 'pyodide',\n  title: 'Pyodide',\n  longTitle: 'Python (Pyodide)',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [baseUrl + '{{hash:lang-python-pyodide-script.js}}'],\n    liveReload: true,\n    scriptType: 'text/python',\n    compiledCodeLanguage: 'python',\n  },\n  extensions: ['py3'],\n  editor: 'script',\n  editorLanguage: 'python',\n  largeDownload: true,\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { liquidJsUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const liquid: LanguageSpecs = {\n  name: 'liquid',\n  title: 'Liquid',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html],\n  },\n  compiler: {\n    url: liquidJsUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-liquid-compiler.js}}');\n      return (self as any).createLiquidCompiler();\n    },\n  },\n  extensions: ['liquid', 'liquidjs'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { ejsUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const ejs: LanguageSpecs = {\n  name: 'ejs',\n  title: 'EJS',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html],\n  },\n  compiler: {\n    url: ejsUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-ejs-compiler.js}}');\n      return (self as any).createEjsCompiler();\n    },\n  },\n  extensions: ['ejs'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { handlebarsBaseUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nconst url = handlebarsBaseUrl + 'handlebars.min.js';\nexport const runtimeUrl = handlebarsBaseUrl + 'handlebars.runtime.min.js';\n\nexport const handlebars: LanguageSpecs = {\n  name: 'handlebars',\n  title: 'Handlebars',\n  parser: {\n    name: 'glimmer',\n    pluginUrls: [parserPlugins.glimmer],\n  },\n  compiler: {\n    url,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-handlebars-compiler.js}}');\n      return (self as any).createHandlebarsCompiler();\n    },\n  },\n  extensions: ['hbs', 'handlebars'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { dotUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const dot: LanguageSpecs = {\n  name: 'dot',\n  title: 'doT',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html],\n  },\n  compiler: {\n    url: dotUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-dot-compiler.js}}');\n      return (self as any).createDotCompiler();\n    },\n  },\n  extensions: ['dot'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\r\nimport { nunjucksBaseUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nconst url = nunjucksBaseUrl + 'nunjucks.min.js';\r\nexport const runtimeUrl = nunjucksBaseUrl + 'nunjucks-slim.min.js';\r\n\r\nexport const nunjucks: LanguageSpecs = {\r\n  name: 'nunjucks',\r\n  title: 'Nunjucks',\r\n  parser: {\r\n    name: 'html',\r\n    pluginUrls: [parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    url,\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-nunjucks-compiler.js}}');\r\n      return (self as any).createNunjucksCompiler();\r\n    },\r\n  },\r\n  extensions: ['njk', 'nunjucks'],\r\n  editor: 'markup',\r\n  editorLanguage: 'html',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { go2jsBaseUrl } from '../../vendors';\r\n\r\ndeclare const importScripts: (...args: string[]) => void;\r\n\r\nexport const go: LanguageSpecs = {\r\n  name: 'go',\r\n  title: 'Go',\r\n  formatter: {\r\n    factory: () => {\r\n      importScripts(go2jsBaseUrl + 'go2js-format.js');\r\n      return async (code: string) => {\r\n        if (!code) return { formatted: '', cursorOffset: 0 };\r\n\r\n        const [formatted, err] = (globalThis as any).go2jsFormat(code);\r\n\r\n        if (err) {\r\n          // eslint-disable-next-line no-console\r\n          console.error(err);\r\n          return { formatted: code, cursorOffset: 0 };\r\n        }\r\n\r\n        return { formatted, cursorOffset: 0 };\r\n      };\r\n    },\r\n  },\r\n  compiler: {\r\n    url: go2jsBaseUrl + 'go2js-compile.js',\r\n    factory: () => (code) =>\r\n      new Promise((resolve) => {\r\n        if (!code) {\r\n          resolve('');\r\n          return;\r\n        }\r\n        (globalThis as any).go2jsCompile(code, go2jsBaseUrl, (err: string, jsCode: string) => {\r\n          if (err) {\r\n            // eslint-disable-next-line no-console\r\n            console.error(err);\r\n            resolve('');\r\n          } else {\r\n            resolve(jsCode);\r\n          }\r\n        });\r\n      }),\r\n  },\r\n  extensions: ['go', 'golang'],\r\n  editor: 'script',\r\n};\r\n", "import type { CompilerFunction, LanguageFormatter, LanguageSpecs } from '../../models';\r\n\r\ndeclare const importScripts: (...args: string[]) => void;\r\n\r\nexport const runOutsideWorker: CompilerFunction = async (code: string, { baseUrl, language }) => {\r\n  const { rescriptCompiler } = await import(baseUrl + '{{hash:lang-rescript-compiler-esm.js}}');\r\n  return rescriptCompiler(code, { baseUrl, language });\r\n};\r\n\r\nexport const formatterFactory: LanguageFormatter['factory'] = (baseUrl, language) => {\r\n  importScripts(baseUrl + '{{hash:lang-rescript-formatter.js}}');\r\n  return (self as any).createRescriptFormatter(baseUrl, language);\r\n};\r\n\r\nexport const rescript: LanguageSpecs = {\r\n  name: 'rescript',\r\n  title: 'ReScript',\r\n  formatter: {\r\n    factory: formatterFactory,\r\n  },\r\n  compiler: {\r\n    factory: () => async (code) => code,\r\n    runOutsideWorker,\r\n    scriptType: 'module',\r\n  },\r\n  extensions: ['res', 'resi'],\r\n  editor: 'script',\r\n  editorLanguage: 'javascript',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { formatterFactory as rescriptFormatterFactory } from '../rescript';\n\nexport const reason: LanguageSpecs = {\n  name: 'reason',\n  title: 'Reason',\n  formatter: {\n    factory: rescriptFormatterFactory,\n  },\n  compiler: 'rescript',\n  extensions: ['re', 'rei'],\n  editor: 'script',\n  editorLanguage: 'javascript',\n};\n", "import type { LanguageSpecs } from '../../models';\n\nexport const ocaml: LanguageSpecs = {\n  name: 'ocaml',\n  title: 'OCaml',\n  compiler: 'rescript',\n  extensions: ['ml', 'mli'],\n  editor: 'script',\n  editorLanguage: 'javascript',\n};\n", "/* eslint-disable camelcase */\nimport type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl, wabtjsUrl } from '../../vendors';\n\ndeclare const importScripts: (...args: string[]) => void;\n\nconst formatterUrl = vendorsBaseUrl + 'wast-refmt/wast-refmt.js';\nexport const scriptType = 'application/wasm-uint8';\n\nexport const wat: LanguageSpecs = {\n  name: 'wat',\n  title: 'WAT',\n  longTitle: 'WebAssembly Text',\n  formatter: {\n    factory: () => {\n      importScripts(formatterUrl);\n      return async (value: string) => {\n        let formatted = value;\n        try {\n          formatted = (self as any).wastRefmt.format(value);\n        } catch (error) {\n          // eslint-disable-next-line no-console\n          console.warn('failed parsing WAT', error);\n        }\n        return {\n          formatted,\n          cursorOffset: 0,\n        };\n      };\n    },\n  },\n  compiler: {\n    url: wabtjsUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-wat-compiler.js}}');\n      return (self as any).createWatCompiler();\n    },\n    scripts: ({ baseUrl }) => [baseUrl + '{{hash:lang-wat-script.js}}'],\n    scriptType,\n    compiledCodeLanguage: 'Binary',\n  },\n  extensions: ['wat', 'wast', 'webassembly', 'wasm'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { riotBaseUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nconst compilerCdnUrl = riotBaseUrl + 'riot+compiler.min.js';\nconst cdnUrl = riotBaseUrl + 'riot.min.js';\n\nexport const riot: LanguageSpecs = {\n  name: 'riot',\n  title: 'Riot.js',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html, parserPlugins.babel],\n  },\n  compiler: {\n    url: compilerCdnUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-riot-compiler.js}}');\n      return (self as any).createRiotCompiler();\n    },\n    scripts: [cdnUrl],\n    scriptType: 'module',\n  },\n  extensions: ['riot', 'riotjs'],\n  editor: 'script',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\r\nimport { sqlFormatterUrl, sqljsBaseUrl } from '../../vendors';\r\n\r\ndeclare const importScripts: (...args: string[]) => void;\r\n\r\nexport const scriptType = 'application/json';\r\n\r\nexport const sql: LanguageSpecs = {\r\n  name: 'sql',\r\n  title: 'SQL',\r\n  formatter: {\r\n    factory: () => {\r\n      importScripts(sqlFormatterUrl);\r\n      return async (value: string) => ({\r\n        formatted: await (self as any).sqlFormatter.format(value, { linesBetweenQueries: 2 }),\r\n        cursorOffset: 0,\r\n      });\r\n    },\r\n  },\r\n  compiler: {\r\n    url: sqljsBaseUrl + 'sql-wasm.js',\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-sql-compiler.js}}');\r\n      return (self as any).createSqlCompiler();\r\n    },\r\n    scripts: ({ baseUrl }) => [baseUrl + '{{hash:lang-sql-script.js}}'],\r\n    scriptType,\r\n    compiledCodeLanguage: 'json',\r\n  },\r\n  extensions: ['sql', 'sqlite', 'sqlite3'],\r\n  editor: 'script',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\nimport { typescriptOptions } from '../typescript';\nimport { getLanguageCustomSettings } from '../utils';\nimport { parserPlugins } from '../prettier';\n\nexport const reactNativeWebUrl = vendorsBaseUrl + 'react-native-web/react-native-web.js';\n\nexport const reactNative: LanguageSpecs = {\n  name: 'react-native',\n  title: 'RN',\n  longTitle: 'React Native',\n  parser: {\n    name: 'babel',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: {\n    dependencies: ['typescript'],\n    factory:\n      () =>\n      async (code, { config, language }) =>\n        (window as any).ts.transpile(code, {\n          ...typescriptOptions,\n          ...getLanguageCustomSettings('typescript', config),\n          ...getLanguageCustomSettings(language, config),\n        }),\n    imports: {\n      react: reactNativeWebUrl,\n      'react-native': reactNativeWebUrl,\n    },\n  },\n  extensions: ['react-native.jsx'],\n  editor: 'script',\n  editorLanguage: 'javascript',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { typescriptOptions } from '../typescript';\nimport { getLanguageCustomSettings } from '../utils';\nimport { parserPlugins } from '../prettier';\nimport { reactNativeWebUrl } from './lang-react-native';\n\nexport const reactNativeTsx: LanguageSpecs = {\n  name: 'react-native-tsx',\n  title: 'RN (TSX)',\n  longTitle: 'React Native (TSX)',\n  parser: {\n    name: 'babel',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: {\n    dependencies: ['typescript'],\n    factory:\n      () =>\n      async (code, { config, language }) =>\n        (window as any).ts.transpile(code, {\n          ...typescriptOptions,\n          ...getLanguageCustomSettings('typescript', config),\n          ...getLanguageCustomSettings(language, config),\n        }),\n    imports: {\n      react: reactNativeWebUrl,\n      'react-native': reactNativeWebUrl,\n    },\n  },\n  extensions: ['react-native.tsx'],\n  editor: 'script',\n  editorLanguage: 'typescript',\n};\n", "import type { LanguageSpecs } from '../../models';\r\n\r\nexport const blockly: LanguageSpecs = {\r\n  name: 'blockly',\r\n  title: 'Blockly',\r\n  compiler: {\r\n    factory:\r\n      () =>\r\n      async (_code, { options }) =>\r\n        options?.blockly?.js || '',\r\n  },\r\n  extensions: ['blockly.xml', 'xml'],\r\n  editor: 'script',\r\n  editorLanguage: 'xml',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { twigUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const twig: LanguageSpecs = {\n  name: 'twig',\n  title: 'Twig',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html],\n  },\n  compiler: {\n    url: twigUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-twig-compiler.js}}');\n      return (self as any).createTwigCompiler();\n    },\n  },\n  extensions: ['twig'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { astroBaseUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nconst compilerURL = astroBaseUrl + 'compiler.min.js';\n\nexport const astro: LanguageSpecs = {\n  name: 'astro',\n  title: 'Astro',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html, parserPlugins.babel],\n  },\n  compiler: {\n    url: compilerURL,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-astro-compiler.js}}');\n      return (self as any).createAstroCompiler();\n    },\n  },\n  extensions: ['astro'],\n  editor: 'markup',\n};\n", "import type { LanguageSpecs } from '../../models';\r\nimport { malinaVersion } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const malina: LanguageSpecs = {\r\n  name: 'malina',\r\n  title: 'Malina.js',\r\n  parser: {\r\n    name: 'html',\r\n    pluginUrls: [parserPlugins.html, parserPlugins.babel],\r\n  },\r\n  compiler: {\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-malina-compiler.js}}');\r\n      return (self as any).createMalinaCompiler();\r\n    },\r\n    imports: {\r\n      'malinajs/runtime.js': `https://jspm.dev/malinajs@${malinaVersion}/runtime.js`,\r\n    },\r\n  },\r\n  extensions: ['xht'],\r\n  editor: 'script',\r\n  editorLanguage: 'html',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nexport const cdnUrl = vendorsBaseUrl + 'jscpp/JSCPP.es5.min.js';\n\nexport const cpp: LanguageSpecs = {\n  name: 'cpp',\n  title: 'C++',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [cdnUrl, baseUrl + '{{hash:lang-cpp-script.js}}'],\n    scriptType: 'text/cpp',\n    compiledCodeLanguage: 'cpp',\n  },\n  extensions: ['cpp', 'c', 'C', 'cp', 'cxx', 'c++', 'cppm', 'ixx', 'ii', 'hpp', 'h'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\n\nexport const julia: LanguageSpecs = {\n  name: 'julia',\n  title: 'Julia',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [baseUrl + '{{hash:lang-julia-script.js}}'],\n    liveReload: true,\n    scriptType: 'text/julia',\n    compiledCodeLanguage: 'julia',\n  },\n  extensions: ['jl'],\n  editor: 'script',\n  largeDownload: true,\n};\n", "import type { LanguageSpecs } from '../../models';\n\nexport const clang: LanguageSpecs = {\n  name: 'clang',\n  title: 'Clang',\n  longTitle: 'C/C++ (Clang)',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [baseUrl + '{{hash:lang-cpp-clang-script.js}}'],\n    scriptType: 'text/cpp',\n    compiledCodeLanguage: 'cpp',\n    liveReload: true,\n  },\n  extensions: [\n    'clang.cpp',\n    'clang',\n    'cpp',\n    'c',\n    'C',\n    'cp',\n    'cxx',\n    'c++',\n    'cppm',\n    'ixx',\n    'ii',\n    'hpp',\n    'h',\n  ],\n  editor: 'script',\n  editorLanguage: 'cpp',\n  largeDownload: true,\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { requireUrl } from '../../vendors';\n\nexport const tcl: LanguageSpecs = {\n  name: 'tcl',\n  title: 'Tcl',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [requireUrl, baseUrl + '{{hash:lang-tcl-script.js}}'],\n    scriptType: 'text/tcl',\n    compiledCodeLanguage: 'tcl',\n  },\n  extensions: ['tcl'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { tauPrologBaseUrl } from '../../vendors';\n\nexport const prolog: LanguageSpecs = {\n  name: 'prolog',\n  title: 'Prolog',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [\n      tauPrologBaseUrl + 'core.js',\n      tauPrologBaseUrl + 'charsio.js',\n      tauPrologBaseUrl + 'dom.js',\n      tauPrologBaseUrl + 'format.js',\n      tauPrologBaseUrl + 'js.js',\n      tauPrologBaseUrl + 'lists.js',\n      tauPrologBaseUrl + 'os.js',\n      tauPrologBaseUrl + 'promises.js',\n      tauPrologBaseUrl + 'random.js',\n      tauPrologBaseUrl + 'statistics.js',\n      baseUrl + '{{hash:lang-prolog-script.js}}',\n    ],\n    scriptType: 'text/prolog',\n    compiledCodeLanguage: 'prolog',\n  },\n  extensions: ['prolog.pl', 'prolog'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { clioBaseUrl } from '../../vendors';\n\nexport const clio: LanguageSpecs = {\n  name: 'clio',\n  title: 'Clio',\n  compiler: {\n    url: clioBaseUrl + 'compile.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-clio-compiler.js}}');\n      return (self as any).createClioCompiler();\n    },\n    scripts: [clioBaseUrl + 'exec.js'],\n  },\n  extensions: ['clio'],\n  editor: 'script',\n  editorLanguage: 'coffeescript',\n};\n", "import type { LanguageSpecs } from '../../models';\n\nexport const richtext: LanguageSpecs = {\n  name: 'richtext',\n  title: 'Rich Text',\n  longTitle: 'Rich Text Editor',\n  compiler: {\n    factory:\n      () =>\n      async (_code, { config }) =>\n        config.markup.content || '',\n    styles: ['{{hash:quill.css}}'],\n  },\n  extensions: ['rte', 'rte.html', 'rich'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { CompilerFunction, LanguageSpecs } from '../../models';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const runOutsideWorker: CompilerFunction = async (code: string, { baseUrl, config }) => {\r\n  const { diagramsCompiler } = await import(baseUrl + '{{hash:lang-diagrams-compiler-esm.js}}');\r\n  return diagramsCompiler(code, { config });\r\n};\r\n\r\nexport const diagrams: LanguageSpecs = {\r\n  name: 'diagrams',\r\n  title: 'Diagrams',\r\n  parser: {\r\n    name: 'html',\r\n    pluginUrls: [parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    factory: () => async (code) => code || '',\r\n    runOutsideWorker,\r\n  },\r\n  extensions: ['diagrams', 'diagram', 'graph', 'plt'],\r\n  editor: 'markup',\r\n  editorLanguage: 'html',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\nimport { imbaBaseUrl } from '../../vendors';\n\nexport const imba: LanguageSpecs = {\n  name: 'imba',\n  title: 'Imba',\n  compiler: {\n    url: imbaBaseUrl + 'compiler.js',\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-imba-compiler.js}}');\n      return (self as any).createImbaCompiler();\n    },\n    imports: {\n      imba: imbaBaseUrl + 'imba.mjs',\n    },\n  },\n  extensions: ['imba'],\n  editor: 'script',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { mustacheUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const mustache: LanguageSpecs = {\n  name: 'mustache',\n  title: 'Mustache',\n  parser: {\n    name: 'glimmer',\n    pluginUrls: [parserPlugins.glimmer],\n  },\n  compiler: {\n    url: mustacheUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-mustache-compiler.js}}');\n      return (self as any).createMustacheCompiler();\n    },\n  },\n  extensions: ['mustache'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { artTemplateUrl } from '../../vendors';\nimport { parserPlugins } from '../prettier';\n\nexport const artTemplate: LanguageSpecs = {\n  name: 'art-template',\n  title: 'art',\n  longTitle: 'art-template',\n  parser: {\n    name: 'html',\n    pluginUrls: [parserPlugins.html],\n  },\n  compiler: {\n    url: artTemplateUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-art-template-compiler.js}}');\n      return (self as any).createArtTemplateCompiler();\n    },\n  },\n  extensions: ['art', 'art-template'],\n  editor: 'markup',\n  editorLanguage: 'html',\n};\n", "import type { LanguageSpecs } from '../../models';\n\nexport const r: LanguageSpecs = {\n  name: 'r',\n  title: 'R',\n  compiler: {\n    factory: () => async (code) => code,\n    scripts: ({ baseUrl }) => [baseUrl + '{{hash:lang-r-script-esm.js}}'],\n    inlineScript: `\n    livecodes.r = livecodes.r || {config: {}};\n    addEventListener('load', async () => {\n      await livecodes.r.loaded;\n      if (livecodes.r.config?.autoEvaluate !== false) {\n        await livecodes.r.run();\n      }\n      // reset config before next load\n      livecodes.r.config = {};\n    });\n    `,\n    liveReload: true,\n    scriptType: 'text/r',\n    compiledCodeLanguage: 'r',\n  },\n  extensions: ['r', 'rlang', 'rstats'],\n  editor: 'script',\n  largeDownload: true,\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\n\nconst civetUrl = vendorsBaseUrl + 'civet/civet.js';\n\nexport const civet: LanguageSpecs = {\n  name: 'civet',\n  title: 'Civet',\n  compiler: {\n    url: civetUrl,\n    factory: () => async (code) => (window as any).civet.compile(code, { js: true }),\n  },\n  extensions: ['civet'],\n  editor: 'script',\n  editorLanguage: 'coffeescript',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { parenFormatter } from '../commonlisp';\nimport { luaUrl } from '../../vendors';\n\nexport const fennel: LanguageSpecs = {\n  name: 'fennel',\n  title: 'Fennel',\n  formatter: {\n    factory: parenFormatter,\n  },\n  compiler: {\n    url: luaUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-fennel-compiler.js}}');\n      return (self as any).createFennelCompiler();\n    },\n    scripts: [luaUrl],\n    scriptType: 'application/lua',\n    compiledCodeLanguage: 'lua',\n  },\n  extensions: ['fnl'],\n  editor: 'script',\n  editorLanguage: 'scheme',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { luaUrl } from '../../vendors';\nimport { luaFormatter } from '../lua';\n\nexport const teal: LanguageSpecs = {\n  name: 'teal',\n  title: 'Teal',\n  formatter: luaFormatter,\n  compiler: {\n    url: luaUrl,\n    factory: (_config, baseUrl) => {\n      (self as any).importScripts(baseUrl + '{{hash:lang-teal-compiler.js}}');\n      return (self as any).createTealCompiler();\n    },\n    scripts: [luaUrl],\n    scriptType: 'application/lua',\n    compiledCodeLanguage: 'lua',\n  },\n  extensions: ['tl'],\n  editor: 'script',\n  editorLanguage: 'lua',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { stylisUrl } from '../../vendors';\n\nexport const stylis: LanguageSpecs = {\n  name: 'stylis',\n  title: 'Stylis',\n  compiler: {\n    url: stylisUrl,\n    factory: () => async (code) => {\n      const { compile, serialize, stringify, middleware, prefixer } = (window as any).stylis;\n      return serialize(compile(code), middleware([prefixer, stringify]));\n    },\n  },\n  extensions: ['stylis'],\n  editor: 'style',\n  editorLanguage: 'scss',\n};\n", "import type { LanguageSpecs } from '../../models';\nimport { vendorsBaseUrl } from '../../vendors';\nimport { getLanguageCustomSettings } from '../../utils';\nimport { parserPlugins } from '../prettier';\n\nexport const flow: LanguageSpecs = {\n  name: 'flow',\n  title: 'Flow',\n  parser: {\n    name: 'babel-flow',\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\n  },\n  compiler: {\n    url: vendorsBaseUrl + 'flow-remove-types/flow-remove-types.js',\n    factory:\n      () =>\n      async (code, { config }) =>\n        (window as any).flowRemoveTypes\n          .transpile(code, {\n            all: true,\n            ...getLanguageCustomSettings('flow', config),\n          })\n          .toString(),\n  },\n  extensions: ['flow'],\n  editor: 'script',\n  editorLanguage: 'typescript',\n};\n", "import type { LanguageSpecs } from '../../models';\r\nimport { getLanguageCustomSettings } from '../../utils';\r\nimport { mjmlUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const mjml: LanguageSpecs = {\r\n  name: 'mjml',\r\n  title: 'MJML',\r\n  parser: {\r\n    name: 'html',\r\n    pluginUrls: [parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    url: mjmlUrl,\r\n    factory:\r\n      () =>\r\n      async (code, { config }) => {\r\n        if (!code.trim()) return '';\r\n        const { html, errors } = (self as any).mjml(\r\n          code,\r\n          getLanguageCustomSettings('mjml', config),\r\n        );\r\n        errors?.forEach(\r\n          (err: { line: number; tagName: string; message: string; formattedMessage: string }) => {\r\n            // eslint-disable-next-line no-console\r\n            console.warn(err.formattedMessage);\r\n          },\r\n        );\r\n        return html;\r\n      },\r\n  },\r\n  extensions: ['mjml'],\r\n  editor: 'markup',\r\n  editorLanguage: 'xml',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { vendorsBaseUrl } from '../../vendors';\r\nimport { getLanguageCustomSettings } from '../../utils';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const sucrase: LanguageSpecs = {\r\n  name: 'sucrase',\r\n  title: 'Sucrase',\r\n  parser: {\r\n    name: 'babel',\r\n    pluginUrls: [parserPlugins.babel, parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    url: vendorsBaseUrl + 'sucrase/sucrase.js',\r\n    factory:\r\n      () =>\r\n      async (code, { config }) =>\r\n        (window as any).sucrase.transform(code, {\r\n          transforms: ['jsx', 'typescript'],\r\n          ...getLanguageCustomSettings('sucrase', config),\r\n        }).code,\r\n  },\r\n  extensions: ['sucrase'],\r\n  editor: 'script',\r\n  editorLanguage: 'typescript',\r\n};\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { etaUrl } from '../../vendors';\r\nimport { parserPlugins } from '../prettier';\r\n\r\nexport const eta: LanguageSpecs = {\r\n  name: 'eta',\r\n  title: 'Eta',\r\n  parser: {\r\n    name: 'html',\r\n    pluginUrls: [parserPlugins.html],\r\n  },\r\n  compiler: {\r\n    url: etaUrl,\r\n    factory: (_config, baseUrl) => {\r\n      (self as any).importScripts(baseUrl + '{{hash:lang-eta-compiler.js}}');\r\n      return (self as any).createEtaCompiler();\r\n    },\r\n  },\r\n  extensions: ['eta'],\r\n  editor: 'markup',\r\n  editorLanguage: 'html',\r\n};\r\n", "import { languageIsEnabled, processors } from '../languages';\nimport type {\n  Language,\n  LanguageSpecs,\n  Config,\n  Compiler,\n  Compilers,\n  ProcessorSpecs,\n} from '../models';\nimport { isRelativeUrl } from '../utils';\n\nexport const getAllCompilers = (\n  languages: Array<LanguageSpecs | ProcessorSpecs>,\n  config: Config,\n  baseUrl: string,\n) =>\n  languages\n    .filter(\n      (language) =>\n        processors.includes(language as ProcessorSpecs) ||\n        languageIsEnabled((language as LanguageSpecs).name, config),\n    )\n    .reduce((compilers, language) => {\n      if (language.compiler && !compilers[language.name]) {\n        if (typeof language.compiler === 'string') {\n          const compiler = languages.find((lang) => lang.name === (language.compiler as Language))\n            ?.compiler as Compiler;\n          compilers[language.name] = {\n            ...compiler,\n            url: getCompilerUrl(compiler.url, baseUrl),\n            aliasTo: language.compiler,\n          } as Compiler;\n        } else {\n          compilers[language.name] = {\n            ...language.compiler,\n            url: getCompilerUrl(language.compiler.url, baseUrl),\n          } as Compiler;\n        }\n      }\n      return compilers;\n    }, {} as Compilers);\n\nconst getCompilerUrl = (url: string | undefined, baseUrl: string) =>\n  !url ? '' : isRelativeUrl(url) ? baseUrl + url : url;\n", "export const allowedOrigin = (origin = location.origin) =>\n  Boolean(\n    origin &&\n      (origin.endsWith('livecodes.io') ||\n        origin.endsWith('livecodes.pages.dev') ||\n        origin.endsWith('localpen.io') ||\n        origin.endsWith('localpen.pages.dev') ||\n        origin.startsWith('http://127.0.0.1') ||\n        origin.startsWith('http://localhost')),\n  );\n\nexport const whitelistTarget = (url: string) =>\n  new RegExp(/^(?:(?:http|https):\\/\\/(?:\\w+.)?)(githubusercontent.com|jsbin.com|)\\/(?:.*)/g).test(\n    url,\n  );\n", "export const createEventsManager = () => {\n  const events: Array<{\n    element: HTMLElement | Document | Window | FileReader;\n    eventType: string;\n    fn: (event: Event | KeyboardEvent) => void;\n  }> = [];\n\n  const addEventListener = (\n    element: HTMLElement | Document | Window | FileReader | null,\n    eventType: string,\n    fn: (event: Event | KeyboardEvent | MouseEvent | MessageEvent | CustomEvent) => void,\n    options?: any,\n  ) => {\n    if (!element) return;\n    element.addEventListener(eventType, fn, options || false);\n    events.push({\n      element,\n      eventType,\n      fn,\n    });\n  };\n\n  const removeEventListener = (\n    element: HTMLElement | Document | Window | FileReader | null,\n    eventType: string,\n    fn: (event: Event | KeyboardEvent | MouseEvent | MessageEvent) => void,\n  ) => {\n    if (!element) return;\n    element.removeEventListener(eventType, fn);\n    const event = events.find(\n      (ev) => ev.element === element && ev.eventType === eventType && ev.fn === fn,\n    );\n    if (!event) return;\n    events.splice(events.indexOf(event));\n  };\n\n  const removeEventListeners = () => {\n    events.forEach((event) => {\n      event.element.removeEventListener(event.eventType, event.fn);\n      events.splice(events.indexOf(event));\n    });\n  };\n\n  return {\n    addEventListener,\n    removeEventListener,\n    removeEventListeners,\n  };\n};\n", "import type { CustomEvents } from '../models';\r\n\r\nexport const customEvents: CustomEvents = {\r\n  getConfig: 'livecodes-get-config',\r\n  config: 'livecodes-config',\r\n  load: 'livecodes-load',\r\n  appLoaded: 'livecodes-app-loaded',\r\n  ready: 'livecodes-ready',\r\n  change: 'livecodes-change',\r\n  testResults: 'livecodes-test-results',\r\n  destroy: 'livecodes-destroy',\r\n  resizeEditor: 'livecodes-resize-editor',\r\n  apiResponse: 'livecodes-api-response',\r\n};\r\n", "export const createPub = <T>() => {\n  type Subscriber = (data: T) => void;\n  const subscribers: Subscriber[] = [];\n\n  const subscribe = (fn: Subscriber) => {\n    subscribers.push(fn);\n    return {\n      unsubscribe: () => {\n        subscribers.splice(subscribers.indexOf(fn), 1);\n      },\n    };\n  };\n\n  const notify = (data: T) => {\n    subscribers.forEach((fn: Subscriber) => {\n      fn(data);\n    });\n  };\n\n  const unsubscribeAll = () => {\n    subscribers.length = 0;\n  };\n\n  const hasSubscribers = () => subscribers.length > 0;\n\n  return {\n    subscribe,\n    notify,\n    hasSubscribers,\n    unsubscribeAll,\n  };\n};\n", "import type { SimpleStorage, Storage } from './models';\r\n\r\nexport const fakeStorage: Omit<Storage<any>, 'getList'> & { getList: () => Promise<[]> } = {\r\n  getList: async () => [],\r\n  getAllData: async () => [],\r\n  getItem: async () => null,\r\n  addItem: async () => '',\r\n  updateItem: async () => '',\r\n  deleteItem: async () => undefined,\r\n  bulkInsert: async () => undefined,\r\n  restore: async () => undefined,\r\n  clear: async () => undefined,\r\n  subscribe: () => ({ unsubscribe: () => undefined }),\r\n  unsubscribeAll: () => undefined,\r\n};\r\n\r\nexport const fakeSimpleStorage: SimpleStorage<any> = {\r\n  getValue: () => null,\r\n  setValue: () => undefined,\r\n  clear: () => undefined,\r\n  subscribe: () => ({ unsubscribe: () => undefined }),\r\n  unsubscribeAll: () => undefined,\r\n};\r\n", "import { loadScript } from '../utils';\nimport { localforageUrl } from '../vendors';\nimport { createPub } from '../events';\nimport type { Storage, StoreName } from './models';\nimport { fakeStorage } from './fake-storage';\n\ntype LocalForage = typeof import('localforage');\nlet localforage: LocalForage;\nconst dbName = 'livecodes';\nconst stores: Record<string, LocalForage> = {};\n\nexport const generateId = () =>\n  (Date.now() + '' + Math.floor(Math.floor(Math.random() * Date.now()))).substring(0, 24);\n\nconst loadLocalforage = async (store: string) => {\n  if (!localforage) {\n    localforage = (await loadScript(localforageUrl, 'localforage')) as LocalForage;\n    localforage.config({\n      name: dbName,\n    });\n  }\n  if (!stores[store]) {\n    stores[store] = localforage.createInstance({\n      name: dbName,\n      storeName: store,\n    });\n  }\n};\n\n/**\n * Creates asynchronous data store using localforage\n */\nexport const createStorage = async <T>(name: StoreName, isEmbed: boolean): Promise<Storage<T>> => {\n  // do not allow access to storage in embeds\n  if (isEmbed) return fakeStorage;\n\n  let store: LocalForage;\n  const pub = createPub<T[]>();\n\n  const subscribe = (fn: (data: T[]) => void) => pub.subscribe(fn);\n\n  const unsubscribeAll = () => {\n    pub.unsubscribeAll();\n  };\n\n  const notifyPub = () => {\n    if (pub.hasSubscribers()) {\n      getAllData().then((data) => {\n        pub.notify(data);\n      });\n    }\n  };\n\n  const load = async () => {\n    await loadLocalforage(name);\n    store = stores[name];\n  };\n\n  const getList = async (): Promise<string[]> => {\n    await load();\n    return store.keys();\n  };\n\n  const getAllData = async (): Promise<T[]> => {\n    await load();\n    const list: T[] = [];\n    await store.iterate((item: T) => {\n      list.push(item);\n    });\n    return list.sort((a: any, b: any) =>\n      b.lastModified && a.lastModified ? b.lastModified - a.lastModified : 0,\n    );\n  };\n\n  const getItem = async (id: string): Promise<T | null> => {\n    await load();\n    return store.getItem(id);\n  };\n\n  const updateItem = async (id: string, value: T, notify = true) => {\n    await load();\n    await store.setItem(id, value);\n    if (notify) {\n      notifyPub();\n    }\n    return id;\n  };\n\n  const addItem = async (value: T, notify = true) => {\n    const id = generateId();\n    await updateItem(id, value, notify);\n    return id;\n  };\n\n  const deleteItem = async (id: string) => {\n    await load();\n    await store.removeItem(id);\n    notifyPub();\n  };\n\n  const bulkInsert = async (data: T[]) => {\n    for (const item of data) {\n      await addItem(item, false);\n    }\n    notifyPub();\n  };\n\n  // like bulkInsert, with same ids\n  const restore = async (data: T[]) => {\n    for (const item of data as any) {\n      if (item.id) {\n        await updateItem(item.id, item, false);\n      } else {\n        await addItem(item, false);\n      }\n    }\n    notifyPub();\n  };\n\n  const clear = async () => {\n    await load();\n    await store.clear();\n    notifyPub();\n  };\n\n  return {\n    getList,\n    getAllData,\n    getItem,\n    addItem: (value) => addItem(value),\n    updateItem: (id, value) => updateItem(id, value),\n    deleteItem,\n    bulkInsert,\n    restore,\n    clear,\n    subscribe,\n    unsubscribeAll,\n  };\n};\n", "import type { ContentConfig } from '../models';\nimport type { ProjectStorage, SavedProject, StorageItem, StoreName } from './models';\nimport { createStorage, generateId } from './storage';\n\nexport const createProjectStorage = async (\n  name: StoreName,\n  isEmbed: boolean,\n): Promise<ProjectStorage> => {\n  const storage = await createStorage<StorageItem>(name, isEmbed);\n\n  const getList = async (): Promise<SavedProject[]> =>\n    (await storage.getAllData())\n      .map((item: StorageItem) => ({\n        id: item.id,\n        title: item.config?.title || '',\n        description: item.config?.description || '',\n        tags: item.config?.tags || [],\n        languages: item.config\n          ? [item.config.markup.language, item.config.style.language, item.config.script.language]\n          : [],\n        lastModified: item.lastModified,\n      }))\n      .sort((a, b) => b.lastModified - a.lastModified);\n\n  const updateItem = (id: string, config: ContentConfig) => {\n    const newItem: StorageItem = {\n      id,\n      config,\n      lastModified: Date.now(),\n    };\n    return storage.updateItem(id, newItem);\n  };\n\n  const addItem = async (config: ContentConfig) => {\n    const id = generateId();\n    return updateItem(id, config);\n  };\n\n  const bulkInsert = async (newProjects: ContentConfig[]) => {\n    for (const config of newProjects) {\n      await addItem(config);\n    }\n  };\n\n  return {\n    ...storage,\n    getList,\n    addItem,\n    updateItem,\n    bulkInsert,\n  };\n};\n", "import { createPub } from '../events';\nimport type { SimpleStorage, StoreName } from './models';\nimport { fakeSimpleStorage } from './fake-storage';\n\n/**\n * Creates a simple synchronous key/value data store using localstorage\n */\nexport const createSimpleStorage = <T>(name: StoreName, isEmbed: boolean): SimpleStorage<T> => {\n  // do not allow access to storage in embeds\n  if (isEmbed) return fakeSimpleStorage;\n\n  const pub = createPub<T | null>();\n\n  const subscribe = (fn: (data: T | null) => void) => pub.subscribe(fn);\n\n  const unsubscribeAll = () => {\n    pub.unsubscribeAll();\n  };\n\n  const notifyPub = () => {\n    pub.notify(getValue());\n  };\n\n  const setValue = (value: T | null) => {\n    window.localStorage.setItem(name, JSON.stringify(value));\n    notifyPub();\n  };\n\n  const getValue = (): T | null => {\n    const value = window.localStorage.getItem(name);\n    if (!value) return null;\n    try {\n      return JSON.parse(value);\n    } catch {\n      return null;\n    }\n  };\n\n  const clear = () => {\n    setValue(null);\n    notifyPub();\n  };\n\n  return {\n    getValue,\n    setValue,\n    clear,\n    subscribe,\n    unsubscribeAll,\n  };\n};\n", "// eslint-disable-next-line import/no-internal-modules\nimport { cloneObject } from '../utils/utils';\nimport { createProjectStorage } from './project-storage';\nimport { createSimpleStorage } from './simple-storage';\nimport { createStorage } from './storage';\nimport type { Storage, ProjectStorage, SimpleStorage, Stores } from './models';\n\nexport const createStores = (): Stores =>\n  cloneObject({\n    projects: null,\n    templates: null,\n    assets: null,\n    snippets: null,\n    recover: null,\n    userConfig: null,\n    userData: null,\n    appData: null,\n    sync: null,\n  });\n\nexport const initializeStores = async (stores: Stores, isEmbed: boolean) => {\n  if (isEmbed) return;\n  stores.projects = await createProjectStorage('__livecodes_data__', isEmbed);\n  stores.templates = await createProjectStorage('__livecodes_templates__', isEmbed);\n  stores.assets = await createStorage('__livecodes_assets__', isEmbed);\n  stores.snippets = await createStorage('__livecodes_snippets__', isEmbed);\n  stores.recover = createSimpleStorage('__livecodes_project_recover__', isEmbed);\n  stores.userConfig = createSimpleStorage('__livecodes_user_config__', isEmbed);\n  stores.userData = await createStorage('__livecodes_user_data__', isEmbed);\n  stores.appData = createSimpleStorage('__livecodes_app_data__', isEmbed);\n  stores.sync = await createStorage('__livecodes_sync_data__', isEmbed);\n};\n\nexport const initializeSimpleStores = async (stores: Stores, isEmbed: boolean) => {\n  if (isEmbed) return;\n  stores.recover = createSimpleStorage('__livecodes_project_recover__', isEmbed);\n  stores.userConfig = createSimpleStorage('__livecodes_user_config__', isEmbed);\n  stores.appData = createSimpleStorage('__livecodes_app_data__', isEmbed);\n};\n\nexport const getStoreKey = (\n  store: SimpleStorage<any> | Storage<any> | ProjectStorage,\n  stores: Stores,\n) => {\n  for (const key of Object.keys(stores)) {\n    if (stores[key as keyof Stores] === store) {\n      return key;\n    }\n  }\n  return null;\n};\n", "import {\n  compressToEncodedURIComponent,\n  decompressFromEncodedURIComponent,\n  decompressFromBase64,\n} from 'lz-string';\n\nexport const compress = compressToEncodedURIComponent;\nexport const decompress = (compressed: string, isJSON = true) => {\n  const decoded = decompressFromEncodedURIComponent(compressed);\n  if (decoded) {\n    if (!isJSON) return decoded;\n    try {\n      if (JSON.parse(decoded)) {\n        return decoded;\n      }\n    } catch {\n      //\n    }\n  }\n  // for backward compatibility\n  return decompressFromBase64(compressed);\n};\n", "// eslint-disable-next-line import/no-internal-modules\nimport { compress, decompress } from '../utils/compression';\nimport type { Storage } from './models';\nimport { createStorage } from './storage';\n\nlet keyStorage: Storage<string>;\nconst loadStorage = async () => {\n  keyStorage = keyStorage || (await createStorage('__livecodes_key__', false));\n};\n\nconst encode = (text: string) => {\n  const enc = new TextEncoder();\n  return enc.encode(text);\n};\n\nconst decode = (encoded: BufferSource) => {\n  const dec = new TextDecoder();\n  return dec.decode(encoded);\n};\n\nconst saveKey = async (key: string) => {\n  await loadStorage();\n  await keyStorage.updateItem('__livecodes_key_id__', compress(key));\n};\n\nconst loadKey = async () => {\n  await loadStorage();\n  const key = await keyStorage.getItem('__livecodes_key_id__');\n  return key ? decompress(key) : null;\n};\n\nconst generateKey = async () => {\n  const keyPair = await window.crypto.subtle.generateKey(\n    {\n      name: 'RSA-OAEP',\n      modulusLength: 2048,\n      publicExponent: new Uint8Array([1, 0, 1]),\n      hash: 'SHA-256',\n    },\n    true,\n    ['encrypt', 'decrypt'],\n  );\n  const publicKey = await crypto.subtle.exportKey('jwk', keyPair.publicKey as CryptoKey);\n  const privateKey = await crypto.subtle.exportKey('jwk', keyPair.privateKey as CryptoKey);\n  const keyString = JSON.stringify({ public: publicKey, private: privateKey });\n  await saveKey(keyString);\n  return keyString;\n};\n\nconst importKey = async (key: string) =>\n  crypto.subtle.importKey(\n    'jwk',\n    JSON.parse((await loadKey()) || (await generateKey()))[key],\n    {\n      name: 'RSA-OAEP',\n      hash: 'SHA-256',\n    },\n    true,\n    key === 'public' ? ['encrypt'] : ['decrypt'],\n  );\n\nexport const encrypt = async (text: string): Promise<string> => {\n  const encoded = encode(text);\n  const importedKey = await importKey('public');\n  const encrypted = await window.crypto.subtle.encrypt(\n    {\n      name: 'RSA-OAEP',\n    },\n    importedKey,\n    encoded,\n  );\n  return JSON.stringify(Array.from(new Uint8Array(encrypted)));\n};\n\nexport const decrypt = async (encrypted: string): Promise<string | null> => {\n  try {\n    const decrypted = await window.crypto.subtle.decrypt(\n      {\n        name: 'RSA-OAEP',\n      },\n      await importKey('private'),\n      new Uint8Array(JSON.parse(encrypted)),\n    );\n    return decode(decrypted);\n  } catch {\n    return null;\n  }\n};\n", "/* eslint-disable @typescript-eslint/no-empty-function */\r\nimport type { GithubScope, User } from '../models';\r\nimport { decrypt, encrypt } from '../storage';\r\nimport { getImportInstance } from '../utils';\r\n\r\ntype FirebaseUser = import('firebase/auth').User;\r\ninterface AuthService {\r\n  load(): Promise<void>;\r\n  getUser(): Promise<User | void>;\r\n  signIn(scopes?: GithubScope[]): Promise<User | void>;\r\n  signOut(): Promise<void>;\r\n  isLoggedIn(): boolean;\r\n}\r\n\r\nconst fakeAuthService: AuthService = {\r\n  load: async () => {},\r\n  getUser: async () => {},\r\n  signIn: async () => {},\r\n  signOut: async () => {},\r\n  isLoggedIn: () => false,\r\n};\r\n\r\nexport const createAuthService = (isEmbed: boolean): AuthService => {\r\n  // do not allow access to auth in embeds\r\n  if (isEmbed) return fakeAuthService;\r\n\r\n  let initializeApp: typeof import('firebase/app').initializeApp;\r\n  let getApp: typeof import('firebase/app').getApp;\r\n  let getAuth: typeof import('firebase/auth').getAuth;\r\n  let signInWithPopup: typeof import('firebase/auth').signInWithPopup;\r\n  let signOut: typeof import('firebase/auth').signOut;\r\n  let GithubAuthProvider: typeof import('firebase/auth').GithubAuthProvider;\r\n  let firebaseConfig: import('firebase/app').FirebaseOptions;\r\n  let firebaseApp: import('firebase/app').FirebaseApp;\r\n  let auth: import('firebase/auth').Auth;\r\n  let currentUser: FirebaseUser | null;\r\n\r\n  return {\r\n    async load() {\r\n      const firebase = await getImportInstance('./{{hash:firebase.js}}');\r\n\r\n      initializeApp = firebase.initializeApp;\r\n      getApp = firebase.getApp;\r\n      getAuth = firebase.getAuth;\r\n      signInWithPopup = firebase.signInWithPopup;\r\n      signOut = firebase.signOut;\r\n      GithubAuthProvider = firebase.GithubAuthProvider;\r\n      firebaseConfig = firebase.firebaseConfig;\r\n\r\n      try {\r\n        firebaseApp = getApp();\r\n      } catch {\r\n        firebaseApp = initializeApp(firebaseConfig);\r\n      }\r\n      auth = getAuth(firebaseApp);\r\n      currentUser = auth.currentUser;\r\n    },\r\n    async getUser(): Promise<User | void> {\r\n      if (!auth) {\r\n        await this.load();\r\n      }\r\n      if (currentUser) {\r\n        if (!(await getToken(currentUser.uid))) {\r\n          return;\r\n        }\r\n        return Promise.resolve(await getUserInfo(currentUser));\r\n      }\r\n      return new Promise((resolve) => {\r\n        const unsubscribe = auth.onAuthStateChanged(async (user: FirebaseUser | null) => {\r\n          if (!user) {\r\n            resolve(undefined);\r\n          } else {\r\n            currentUser = user;\r\n            unsubscribe();\r\n            resolve(await getUserInfo(currentUser));\r\n          }\r\n        });\r\n      });\r\n    },\r\n    async signIn(scopes: GithubScope[] = ['gist', 'repo']): Promise<User | void> {\r\n      if (!auth) {\r\n        await this.load();\r\n      }\r\n      const provider = new GithubAuthProvider();\r\n      scopes.forEach((scope) => provider.addScope(scope));\r\n      const result = await signInWithPopup(auth, provider);\r\n      const token = GithubAuthProvider.credentialFromResult(result)?.accessToken;\r\n      if (!token) return;\r\n      currentUser = result.user;\r\n      await saveToken(currentUser.uid, token);\r\n      await fetchUserName(currentUser);\r\n      return getUserInfo(result.user);\r\n    },\r\n    async signOut() {\r\n      if (!auth) {\r\n        await this.load();\r\n      }\r\n      await signOut(auth);\r\n      deleteUserData(currentUser?.uid);\r\n      currentUser = null;\r\n    },\r\n    isLoggedIn() {\r\n      return currentUser != null;\r\n    },\r\n  };\r\n};\r\n\r\nconst saveToken = async (uid: string, token: string) => {\r\n  localStorage.setItem('token_' + uid, await encrypt(token));\r\n};\r\n\r\nconst getToken = async (uid?: string) => {\r\n  if (!uid) return null;\r\n  const token = localStorage.getItem('token_' + uid);\r\n  if (!token) return null;\r\n  return decrypt(token);\r\n};\r\n\r\nconst saveUsername = (uid: string, username: string) => {\r\n  localStorage.setItem('username_' + uid, username);\r\n};\r\n\r\nconst deleteUserData = (uid?: string) => {\r\n  if (!uid) return;\r\n  localStorage.removeItem('token_' + uid);\r\n  localStorage.removeItem('username_' + uid);\r\n};\r\n\r\nconst getUserInfo = async (user: FirebaseUser): Promise<User> => ({\r\n  uid: user.uid,\r\n  displayName: user.displayName,\r\n  username: await fetchUserName(user),\r\n  email: user.email,\r\n  photoURL: user.photoURL,\r\n  token: await getToken(user.uid),\r\n});\r\n\r\nconst fetchUserName = async (user: FirebaseUser) => {\r\n  const uid = user.uid;\r\n\r\n  const fromLocalStorage = localStorage.getItem('username_' + uid);\r\n  if (fromLocalStorage) {\r\n    return fromLocalStorage;\r\n  }\r\n\r\n  const fromUserInfo = (user as any).reloadUserInfo?.screenName;\r\n  if (fromUserInfo) {\r\n    saveUsername(uid, fromUserInfo);\r\n    return fromUserInfo;\r\n  }\r\n\r\n  const response = await fetch('https://api.github.com/user', {\r\n    headers: {\r\n      Accept: 'application/vnd.github.v3+json',\r\n      Authorization: 'token ' + (await getToken(uid)),\r\n    },\r\n  });\r\n  const userInfo = await response.json();\r\n  const login = userInfo.login;\r\n  saveUsername(uid, login);\r\n  return login;\r\n};\r\n", "const cfPagesBaseUrl = 'https://livecodes-sandbox.pages.dev';\nconst ghPagesBaseUrl = 'https://live-codes.github.io/livecodes-sandbox/dist';\n\nconst serviceBaseUrl = process.env.CI ? ghPagesBaseUrl : cfPagesBaseUrl;\nconst version = 'v6';\n\nexport const sandboxService = {\n  getResultUrl: () => `${serviceBaseUrl}/${version}/result`,\n  getCompilerUrl: () => `${serviceBaseUrl}/${version}/compiler`,\n  getOrigin: () => new URL(serviceBaseUrl).origin,\n};\n", "import type { Config } from '../models';\r\nimport { allowedOrigin } from './allowed-origin';\r\n\r\nconst dpasteGetUrl = 'https://dpaste.com/';\r\nconst dpastePostUrl = 'https://dpaste.com/api/v2/';\r\nconst apiUrl = 'https://api2.livecodes.io/share';\r\n\r\ntype ConfigWithResult = Partial<Config & { result: string }>;\r\ninterface ShareService {\r\n  getProject: (id: string) => Promise<ConfigWithResult>;\r\n  shareProject: (config: ConfigWithResult) => Promise<string>;\r\n}\r\n\r\nconst dpasteService = {\r\n  getProject: async (id: string): Promise<ConfigWithResult> => {\r\n    try {\r\n      const res = await fetch(dpasteGetUrl + id + '.txt');\r\n      if (!res.ok) return {};\r\n      return JSON.parse(await res.text());\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  },\r\n  shareProject: async (config: ConfigWithResult): Promise<string> => {\r\n    try {\r\n      const res = await fetch(dpastePostUrl, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'User-Agent': 'LiveCodes / https://livecodes.io/',\r\n        },\r\n        body: `content=${encodeURIComponent(JSON.stringify(config))}&title=${encodeURIComponent(\r\n          config.title || '',\r\n        )}&syntax=json&expiry_days=365`,\r\n      });\r\n      if (!res.ok) return '';\r\n      const url = await res.text();\r\n      return url.replace(dpasteGetUrl, '');\r\n    } catch (error) {\r\n      return '';\r\n    }\r\n  },\r\n};\r\n\r\nconst apiService = {\r\n  getProject: async (id: string): Promise<ConfigWithResult> => {\r\n    // for backward compatibility\r\n    if (id.length < 11) return dpasteService.getProject(id);\r\n\r\n    if (!allowedOrigin()) return {};\r\n    try {\r\n      const res = await fetch(apiUrl + '?id=' + id);\r\n      if (!res.ok) return {};\r\n      return JSON.parse(await res.text());\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  },\r\n  shareProject: async (config: ConfigWithResult): Promise<string> => {\r\n    if (!allowedOrigin()) return '';\r\n    try {\r\n      const res = await fetch(apiUrl, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        body: JSON.stringify(config),\r\n      });\r\n      if (!res.ok) return '';\r\n      return res.text();\r\n    } catch (error) {\r\n      return '';\r\n    }\r\n  },\r\n};\r\n\r\nexport const shareService: ShareService = allowedOrigin() ? apiService : dpasteService;\r\n", "import type { Types } from '../models';\r\nimport { allowedOrigin } from './allowed-origin';\r\n\r\nexport const typesService = {\r\n  getTypeUrls: async (types: string[]) => {\r\n    let fetchedTypes: Types = {};\r\n    if (types.length > 0 && allowedOrigin()) {\r\n      try {\r\n        const api = 'https://api.livecodes.io/types';\r\n        const res = await fetch(api, {\r\n          method: 'POST',\r\n          mode: 'cors',\r\n          headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({ types }),\r\n        });\r\n        fetchedTypes = await res.json();\r\n      } catch {\r\n        //\r\n      }\r\n    }\r\n    return fetchedTypes;\r\n  },\r\n};\r\n", "export const createCompilerSandbox = (sandboxUrl: string): Promise<Window> =>\n  new Promise((resolve) => {\n    const frameId = 'compiler-frame';\n\n    const previousFrame = document.getElementById(frameId);\n    previousFrame?.remove();\n\n    const iframe = document.createElement('iframe');\n    iframe.name = 'compiler';\n    iframe.id = frameId;\n    // display: 'none' causes problems with mermaid.js renedering\n    iframe.style.width = '0';\n    iframe.style.height = '0';\n    iframe.style.visibility = 'hidden';\n    iframe.style.position = 'absolute';\n    iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts');\n    iframe.src = sandboxUrl;\n    document.body.appendChild(iframe);\n    iframe.onload = () => {\n      resolve(iframe.contentWindow as Window);\n    };\n  });\n", "import type { CompileInfo, Config, Language } from '../models';\r\nimport { modulesService } from '../services';\r\nimport { escapeCode, removeComments, removeCommentsAndStrings, toCamelCase } from '../utils';\r\n\r\nexport const importsPattern =\r\n  /(import\\s+?(?:(?:(?:[\\w*\\s{},\\$]*)\\s+from\\s+?)|))((?:\".*?\")|(?:'.*?'))([\\s]*?(?:;|$|))/g;\r\n\r\nexport const dynamicImportsPattern = /(import\\s*?\\(\\s*?((?:\".*?\")|(?:'.*?'))\\s*?\\))/g;\r\n\r\nexport const getImports = (code: string) =>\r\n  [\r\n    ...[...removeComments(code).matchAll(new RegExp(importsPattern))],\r\n    ...[...removeComments(code).matchAll(new RegExp(dynamicImportsPattern))],\r\n  ].map((arr) => arr[2].replace(/\"/g, '').replace(/'/g, ''));\r\n\r\nconst needsBundler = (mod: string) =>\r\n  !mod.startsWith('https://deno.bundlejs.com/') &&\r\n  !mod.startsWith('https://edge.bundlejs.com/') &&\r\n  !mod.endsWith('#nobundle') &&\r\n  (mod.startsWith('https://deno.land/') ||\r\n    mod.startsWith('https://github.com/') ||\r\n    mod.startsWith('https://raw.githubusercontent.com/') ||\r\n    mod.startsWith('https://gitlab.com/') ||\r\n    mod.startsWith('https://bitbucket.org') ||\r\n    mod.endsWith('.ts') ||\r\n    mod.endsWith('.jsx') ||\r\n    mod.endsWith('.tsx'));\r\n\r\nconst isBare = (mod: string) =>\r\n  !mod.startsWith('https://') &&\r\n  !mod.startsWith('http://') &&\r\n  !mod.startsWith('.') &&\r\n  !mod.startsWith('/') &&\r\n  !mod.startsWith('data:') &&\r\n  !mod.startsWith('blob:');\r\n\r\nexport const createImportMap = (code: string, config: Config) =>\r\n  getImports(code)\r\n    .map((libName) => {\r\n      if (!needsBundler(libName) && !isBare(libName)) {\r\n        return {};\r\n      } else {\r\n        const key = Object.keys(config.imports).find(\r\n          (mod) => mod === libName || libName.startsWith(mod + '/'),\r\n        );\r\n        if (key) {\r\n          return { [key]: config.imports[key] };\r\n        }\r\n        return {\r\n          [libName]: modulesService.getModuleUrl(libName, {\r\n            defaultCDN: config?.customSettings?.defaultCDN,\r\n          }),\r\n        };\r\n      }\r\n    })\r\n    .reduce((acc, curr) => ({ ...acc, ...curr }), {} as Record<string, string>);\r\n\r\nexport const hasImports = (code: string) => getImports(code).length > 0;\r\n\r\nexport const hasExports = (code: string) =>\r\n  new RegExp(/(^export\\s)|([\\s|;]export\\s)/).test(removeCommentsAndStrings(code));\r\n\r\nexport const hasAwait = (code: string) =>\r\n  new RegExp(/(^await\\s)|([\\s|;]await\\s)/).test(removeCommentsAndStrings(code));\r\n\r\nexport const isModuleScript = (code: string) =>\r\n  hasImports(code) || hasExports(code) || hasAwait(code);\r\n\r\nexport const replaceImports = (code: string, config: Config) => {\r\n  const importMap = createImportMap(code, config);\r\n  return code.replace(new RegExp(importsPattern), (statement) => {\r\n    const libName = statement\r\n      .replace(new RegExp(importsPattern), '$2')\r\n      .replace(/\"/g, '')\r\n      .replace(/'/g, '');\r\n\r\n    const key = Object.keys(importMap).find(\r\n      (mod) => mod === libName || libName.startsWith(mod + '/'),\r\n    );\r\n    if (!key) {\r\n      return statement;\r\n    }\r\n    return statement.replace(key, importMap[key]);\r\n  });\r\n};\r\n\r\nexport const styleimportsPattern =\r\n  /(?:@import\\s+?)((?:\".*?\")|(?:'.*?')|(?:url\\('.*?'\\))|(?:url\\(\".*?\"\\)))(.*)?;/g;\r\n\r\nexport const hasStyleImports = (code: string) => new RegExp(styleimportsPattern).test(code);\r\n\r\nexport const replaceStyleImports = (code: string) =>\r\n  code.replace(new RegExp(styleimportsPattern), (statement, match, media) => {\r\n    const url: string = match\r\n      .replace(/\"/g, '')\r\n      .replace(/'/g, '')\r\n      .replace(/url\\(/g, '')\r\n      .replace(/\\)/g, '');\r\n    const modified =\r\n      '@import \"' +\r\n      modulesService.getModuleUrl(url, { isModule: false, defaultCDN: 'jsdelivr' }) +\r\n      '\";';\r\n    const mediaQuery = media?.trim();\r\n    return !isBare(url)\r\n      ? statement\r\n      : mediaQuery\r\n      ? `@media ${mediaQuery} {\\n${modified}\\n}`\r\n      : modified;\r\n  });\r\n\r\n// based on https://github.com/sveltejs/svelte-repl/blob/master/src/workers/bundler/plugins/commonjs.js\r\nexport const cjs2esm = (code: string) => {\r\n  const strippedCode = removeComments(code);\r\n  if (!/\\b(require|module|exports)\\b/.test(strippedCode)) return code;\r\n  const requirePattern = /(?:^|\\s)require(?:\\s*)\\((?:\\s*)('(.*?)'|\"(.*?)\")(?:\\s*)\\)/g;\r\n\r\n  const getRequires = (str: string) =>\r\n    [...str.matchAll(new RegExp(requirePattern))].map((arr) =>\r\n      arr[1].replace(/\"/g, '').replace(/'/g, ''),\r\n    );\r\n\r\n  const requires = getRequires(strippedCode);\r\n\r\n  if (requires.length === 0) return code;\r\n\r\n  const imports = requires\r\n    .map((id, i) =>\r\n      [\r\n        `import * as __requires_${i} from '${id}';`,\r\n        `const __requires_${i}_default = __requires_${i}.default;`,\r\n      ].join('\\n'),\r\n    )\r\n    .join('\\n');\r\n  const lookup = `const __requires_lookup = { ${requires\r\n    .map((id, i) => `'${id}': __requires_${i}_default || __requires_${i}`)\r\n    .join(', ')} };`;\r\n\r\n  const require = `window.require = window.require || ((id) => {\r\n\tif (id in __requires_lookup) return __requires_lookup[id];\r\n\tthrow new Error(\\`Cannot require modules dynamically (\\${id})\\`);\r\n});`;\r\n\r\n  return [\r\n    imports,\r\n    lookup,\r\n    require,\r\n    `const exports = {}; const module = { exports };`,\r\n    code,\r\n    `export default module.exports;`,\r\n  ].join('\\n\\n');\r\n};\r\n\r\nexport const createCSSModulesImportMap = (\r\n  compiledScript: string,\r\n  compiledStyle: string,\r\n  cssTokens: CompileInfo['cssModules'] = {},\r\n  extension: Language = 'css',\r\n) => {\r\n  const scriptImports = getImports(compiledScript);\r\n  const extensions = extension === 'css' ? [extension] : ['css', extension];\r\n  const filenames = [\r\n    ...extensions.map((ext) => './style.' + ext),\r\n    ...extensions.map((ext) => './styles.' + ext),\r\n    ...extensions.map((ext) => './style.module.' + ext),\r\n    ...extensions.map((ext) => './styles.module.' + ext),\r\n  ];\r\n\r\n  return filenames\r\n    .map((filename) => {\r\n      if (!scriptImports.includes(filename)) {\r\n        return {};\r\n      }\r\n\r\n      if (!filename.includes('.module.')) {\r\n        return {\r\n          [filename]:\r\n            'data:text/javascript;base64,' +\r\n            btoa(`export default \\`${escapeCode(compiledStyle)}\\`;`),\r\n        };\r\n      }\r\n\r\n      const cssModule =\r\n        `export default ${escapeCode(JSON.stringify(cssTokens))};\\n` +\r\n        Object.keys(cssTokens)\r\n          .filter((key) => key === toCamelCase(key))\r\n          .map((key) => `export const ${escapeCode(key)} = \"${escapeCode(cssTokens[key])}\";`)\r\n          .join('\\n');\r\n\r\n      return { [filename]: 'data:text/javascript;base64,' + btoa(cssModule) };\r\n    })\r\n    .reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n};\r\n", "import type { CompileResult, CompilerFunction } from '../models';\r\n\r\nexport const getCompileResult = (result: Awaited<ReturnType<CompilerFunction>>): CompileResult => {\r\n  if (typeof result === 'string') {\r\n    return { code: result, info: {} };\r\n  }\r\n  return result;\r\n};\r\n", "import {\r\n  getActivatedProcessors,\r\n  getLanguageEditorId,\r\n  getCustomSettings,\r\n  languages,\r\n  processorIsActivated,\r\n  processorIsEnabled,\r\n  processors,\r\n} from '../languages';\r\nimport type {\r\n  Language,\r\n  Config,\r\n  Compilers,\r\n  CompilerFunction,\r\n  CompileOptions,\r\n  CompileResult,\r\n  CompileInfo,\r\n} from '../models';\r\nimport { getAppCDN, sandboxService } from '../services';\r\nimport { stringify } from '../utils';\r\nimport { createCompilerSandbox } from './compiler-sandbox';\r\nimport { getAllCompilers } from './get-all-compilers';\r\nimport { hasStyleImports } from './import-map';\r\nimport type {\r\n  LanguageOrProcessor,\r\n  CompilerMessage,\r\n  CompilerMessageEvent,\r\n  Compiler,\r\n} from './models';\r\nimport { getCompileResult } from './utils';\r\n\r\nexport const createCompiler = async ({\r\n  config,\r\n  baseUrl,\r\n  eventsManager,\r\n}: {\r\n  config: Config;\r\n  baseUrl: string;\r\n  eventsManager: any;\r\n}): Promise<Compiler> => {\r\n  let compilers: Compilers;\r\n  let compilerSandbox: Window;\r\n  const compilerOrigin = sandboxService.getOrigin();\r\n\r\n  // number of tries to reload the compilers if loading fails\r\n  let reloads = 3;\r\n\r\n  const initialize = async () =>\r\n    new Promise(async (resolve) => {\r\n      compilers = getAllCompilers([...languages, ...processors], config, baseUrl);\r\n      const compilerUrl = sandboxService.getCompilerUrl();\r\n      compilerSandbox = await createCompilerSandbox(compilerUrl + '?appCDN=' + getAppCDN());\r\n\r\n      eventsManager.addEventListener(window, 'message', async (event: CompilerMessageEvent) => {\r\n        if (event.origin === compilerOrigin && event.data.type === 'init-success') {\r\n          resolve('done');\r\n        }\r\n      });\r\n\r\n      const configMessage: CompilerMessage = {\r\n        type: 'init',\r\n        payload: config,\r\n        baseUrl,\r\n        scriptUrl: baseUrl + '{{hash:compiler-utils.js}}',\r\n      };\r\n      compilerSandbox.postMessage(configMessage, compilerOrigin);\r\n    });\r\n\r\n  const createLanguageCompiler =\r\n    (language: LanguageOrProcessor): CompilerFunction =>\r\n    (content, { config, options }): Promise<string | CompileResult> =>\r\n      new Promise((resolve, reject) => {\r\n        const handler = (event: CompilerMessageEvent) => {\r\n          const message = event.data;\r\n\r\n          if (\r\n            event.origin === compilerOrigin &&\r\n            message.from === 'compiler' &&\r\n            (message.type === 'compiled' || message.type === 'compile-failed') &&\r\n            message.payload.language === language &&\r\n            message.payload.content === content\r\n          ) {\r\n            window.removeEventListener('message', handler);\r\n\r\n            if (message.type === 'compiled') {\r\n              resolve(message.payload.compiled);\r\n            } else if (message.type === 'compile-failed') {\r\n              reject(language + ' compile failed.\\n' + message.payload.error);\r\n            }\r\n          }\r\n        };\r\n        window.addEventListener('message', handler);\r\n\r\n        const compileMessage: CompilerMessage = {\r\n          type: 'compile',\r\n          payload: { content, language, config, options },\r\n        };\r\n        compilerSandbox.postMessage(compileMessage, compilerOrigin);\r\n      });\r\n\r\n  const load = (languages: LanguageOrProcessor[], config: Config) =>\r\n    Promise.allSettled(\r\n      languages.map(\r\n        (language) =>\r\n          new Promise(async (resolve, reject) => {\r\n            if (['jsx', 'tsx'].includes(language)) {\r\n              language = 'typescript';\r\n            }\r\n            const languageCompiler = compilers[language as keyof Compilers];\r\n            if (languageCompiler && !languageCompiler.fn) {\r\n              eventsManager.addEventListener(\r\n                window,\r\n                'message',\r\n                async (event: CompilerMessageEvent) => {\r\n                  if (\r\n                    event.origin === compilerOrigin &&\r\n                    event.data.from === 'compiler' &&\r\n                    event.data.type === 'loaded' &&\r\n                    event.data.payload === language\r\n                  ) {\r\n                    languageCompiler.fn = createLanguageCompiler(language);\r\n                    resolve('done');\r\n                  } else if (\r\n                    event.origin === compilerOrigin &&\r\n                    event.data.from === 'compiler' &&\r\n                    event.data.type === 'load-failed' &&\r\n                    event.data.payload === language\r\n                  ) {\r\n                    if (reloads === 0) {\r\n                      reject(`Failed to load compiler for: ${language}.`);\r\n                    } else {\r\n                      reloads -= 1;\r\n                      await initialize();\r\n                      await load(\r\n                        Array.from(\r\n                          new Set([\r\n                            ...languages,\r\n                            config.markup.language,\r\n                            config.style.language,\r\n                            config.script.language,\r\n                          ]),\r\n                        ),\r\n                        config,\r\n                      );\r\n                      resolve('done');\r\n                    }\r\n                  }\r\n                },\r\n              );\r\n              const loadMessage: CompilerMessage = { type: 'load', payload: { language, config } };\r\n              compilerSandbox.postMessage(loadMessage, compilerOrigin);\r\n            } else {\r\n              resolve('done');\r\n            }\r\n          }),\r\n      ),\r\n    );\r\n\r\n  const cache: {\r\n    [key in Language]?: {\r\n      content: string;\r\n      compiled: string;\r\n      info: string;\r\n      processors: string;\r\n      languageSettings: string;\r\n    };\r\n  } = {};\r\n\r\n  const compile = async (\r\n    content: string,\r\n    language: Language,\r\n    config: Config,\r\n    options: CompileOptions,\r\n  ): Promise<CompileResult> => {\r\n    if (['jsx', 'tsx'].includes(language)) {\r\n      language = 'typescript';\r\n    }\r\n\r\n    const enabledProcessors = getActivatedProcessors(language, config);\r\n    const languageSettings = stringify(getCustomSettings(language, config));\r\n\r\n    if (\r\n      !options?.forceCompile &&\r\n      cache[language]?.content === content &&\r\n      cache[language]?.processors === enabledProcessors &&\r\n      cache[language]?.languageSettings === languageSettings &&\r\n      cache[language]?.compiled\r\n    ) {\r\n      return {\r\n        code: cache[language]?.compiled || '',\r\n        info: JSON.parse(cache[language]?.info || '{}'),\r\n      } as CompileResult;\r\n    }\r\n    if (compilers[language] && !compilers[language].fn) {\r\n      await load([language], config);\r\n    }\r\n\r\n    const compiler = compilers[language]?.fn;\r\n    if (typeof compiler !== 'function') {\r\n      return new Promise<CompileResult>((res) => {\r\n        if (language !== 'html' && language !== 'css' && language !== 'javascript') {\r\n          // eslint-disable-next-line no-console\r\n          console.error('Failed to load compiler for: ' + language);\r\n        }\r\n        res({ code: '', info: {} });\r\n      });\r\n    }\r\n\r\n    const compiled =\r\n      getCompileResult(await compiler(content, { config, language, baseUrl, options })) || '';\r\n    const processed =\r\n      getCompileResult(await postProcess(compiled.code, { config, language, baseUrl, options })) ||\r\n      '';\r\n    const info: CompileInfo = {\r\n      ...compiled.info,\r\n      ...processed.info,\r\n    };\r\n\r\n    cache[language] = {\r\n      content,\r\n      compiled: processed.code,\r\n      info: JSON.stringify(info),\r\n      processors: enabledProcessors,\r\n      languageSettings: stringify(getCustomSettings(language, config)),\r\n    };\r\n\r\n    return { code: processed.code, info };\r\n  };\r\n\r\n  const postProcess: CompilerFunction = async (content, { config, language, baseUrl, options }) => {\r\n    let code = content;\r\n    let info: CompileInfo = {};\r\n    let postcssRequired = false;\r\n\r\n    const editorId = getLanguageEditorId(language) || 'markup';\r\n    if (editorId === 'style' && hasStyleImports(code)) {\r\n      postcssRequired = true;\r\n    }\r\n\r\n    for (const processor of processors) {\r\n      if (\r\n        (processorIsEnabled(processor.name, config) &&\r\n          processorIsActivated(processor.name, config) &&\r\n          processor.editor === editorId) ||\r\n        (editorId === 'style' && processor.name === 'postcss')\r\n      ) {\r\n        if (processor.isPostcssPlugin) {\r\n          postcssRequired = true;\r\n        } else {\r\n          if (processor.name === 'postcss' && !postcssRequired) continue;\r\n          if (compilers[processor.name] && !compilers[processor.name].fn) {\r\n            await load([processor.name], config);\r\n          }\r\n          const process = compilers[processor.name].fn || (async (code: string) => code);\r\n          if (typeof process !== 'function') {\r\n            // eslint-disable-next-line no-console\r\n            console.error('Failed to load processor: ' + processor.name);\r\n            return { code, info };\r\n          }\r\n          const processResult = await process(code, { config, language, baseUrl, options });\r\n          const result = getCompileResult(processResult);\r\n          code = result.code;\r\n          info = {\r\n            ...info,\r\n            ...result.info,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return { code, info };\r\n  };\r\n\r\n  const clearCache = () => {\r\n    (Object.keys(cache) as Array<keyof typeof cache>).forEach((key) => delete cache[key]);\r\n  };\r\n\r\n  await initialize();\r\n\r\n  return {\r\n    load,\r\n    compile,\r\n    clearCache,\r\n  };\r\n};\r\n", "import type { Language, Config, EventsManager } from '../models';\r\nimport { createCompiler } from './create-compiler';\r\nimport type { Compiler, LanguageOrProcessor } from './models';\r\nimport { getCompileResult } from './utils';\r\n\r\nexport const getCompiler = (options: {\r\n  config: Config;\r\n  baseUrl: string;\r\n  eventsManager: EventsManager;\r\n}): Promise<Compiler> => {\r\n  const mode = options.config.mode;\r\n  if (mode === 'codeblock' || mode === 'editor') {\r\n    return createFakeCompiler();\r\n  } else {\r\n    return createCompiler(options);\r\n  }\r\n};\r\n\r\nasync function createFakeCompiler(): Promise<Compiler> {\r\n  return {\r\n    load: (_languages: LanguageOrProcessor[], _config: Config) => Promise.resolve(['do nothing']),\r\n    compile: (content: string, _language: Language, _config: Config) =>\r\n      Promise.resolve(getCompileResult(content)),\r\n    clearCache: () => undefined,\r\n  };\r\n}\r\n", "import type { LanguageSpecs } from '../../models';\r\nimport { compileInCompiler } from '../../compiler';\r\nimport { cherryCljsBaseUrl } from '../../vendors';\r\nimport { parenFormatter } from '../commonlisp';\r\n\r\nexport const clojurescript: LanguageSpecs = {\r\n  name: 'clojurescript',\r\n  title: 'CLJS (cherry)',\r\n  longTitle: 'ClojureScript (cherry)',\r\n  formatter: {\r\n    factory: parenFormatter,\r\n  },\r\n  compiler: {\r\n    url: cherryCljsBaseUrl + 'lib/cherry.umd.js',\r\n    factory:\r\n      () =>\r\n      async (code, { config, options }) => {\r\n        const compiled = (self as any).CherryCljs.compileString(code);\r\n        return code.includes('#jsx')\r\n          ? compileInCompiler(compiled, 'jsx', config, options)\r\n          : compiled;\r\n      },\r\n    imports: {\r\n      'cherry-cljs': cherryCljsBaseUrl + 'index.js',\r\n      'cherry-cljs/cljs.core.js': cherryCljsBaseUrl + 'cljs.core.js',\r\n    },\r\n  },\r\n  extensions: ['cljs', 'clj', 'cljc', 'edn', 'clojure'],\r\n  editor: 'script',\r\n  editorLanguage: 'clojure',\r\n};\r\n", "import type { LanguageSpecs } from '../models';\r\nimport { asciidoc } from './asciidoc';\r\nimport { babel } from './babel';\r\nimport { css } from './css';\r\nimport { haml } from './haml';\r\nimport { html } from './html';\r\nimport { javascript } from './javascript';\r\nimport { jsx, tsx } from './jsx';\r\nimport { less } from './less';\r\nimport { markdown } from './markdown';\r\nimport { mdx } from './mdx';\r\nimport { pug } from './pug';\r\nimport { scss, sass } from './scss';\r\nimport { svelte } from './svelte';\r\nimport { stylus } from './stylus';\r\nimport { typescript } from './typescript';\r\nimport { vue, vue2 } from './vue';\r\nimport { stencil } from './stencil';\r\nimport { coffeescript } from './coffeescript';\r\nimport { livescript } from './livescript';\r\nimport { assemblyscript } from './assemblyscript';\r\nimport { python } from './python';\r\nimport { ruby } from './ruby';\r\nimport { php } from './php';\r\nimport { perl } from './perl';\r\nimport { lua } from './lua';\r\nimport { scheme } from './scheme';\r\nimport { solid, solidTsx } from './solid';\r\nimport { pyodide } from './python-pyodide';\r\nimport { liquid } from './liquid';\r\nimport { ejs } from './ejs';\r\nimport { handlebars } from './handlebars';\r\nimport { dot } from './dot';\r\nimport { nunjucks } from './nunjucks';\r\nimport { go } from './go';\r\nimport { rescript } from './rescript';\r\nimport { reason } from './reason';\r\nimport { ocaml } from './ocaml';\r\nimport { wat } from './wat';\r\nimport { riot } from './riot';\r\nimport { sql } from './sql';\r\nimport { reactNative, reactNativeTsx } from './react-native';\r\nimport { blockly } from './blockly';\r\nimport { twig } from './twig';\r\nimport { astro } from './astro';\r\nimport { malina } from './malina';\r\nimport { commonlisp } from './commonlisp';\r\nimport { cpp } from './cpp';\r\nimport { julia } from './julia';\r\nimport { clang } from './cpp-clang';\r\nimport { tcl } from './tcl';\r\nimport { prolog } from './prolog';\r\nimport { clio } from './clio';\r\nimport { richtext } from './richtext';\r\nimport { diagrams } from './diagrams';\r\nimport { imba } from './imba';\r\nimport { mustache } from './mustache';\r\nimport { artTemplate } from './art-template';\r\nimport { r } from './r';\r\nimport { civet } from './civet';\r\nimport { fennel } from './fennel';\r\nimport { teal } from './teal';\r\nimport { stylis } from './stylis';\r\nimport { flow } from './flow';\r\nimport { mjml } from './mjml';\r\nimport { sucrase } from './sucrase';\r\nimport { eta } from './eta';\r\nimport { clojurescript } from './clojurescript';\r\n\r\nexport const languages: LanguageSpecs[] = [\r\n  html,\r\n  markdown,\r\n  mdx,\r\n  astro,\r\n  pug,\r\n  asciidoc,\r\n  haml,\r\n  mustache,\r\n  handlebars,\r\n  ejs,\r\n  eta,\r\n  nunjucks,\r\n  liquid,\r\n  dot,\r\n  twig,\r\n  artTemplate,\r\n  mjml,\r\n  diagrams,\r\n  richtext,\r\n  css,\r\n  scss,\r\n  sass,\r\n  less,\r\n  stylus,\r\n  stylis,\r\n  javascript,\r\n  typescript,\r\n  flow,\r\n  babel,\r\n  sucrase,\r\n  jsx,\r\n  tsx,\r\n  reactNative,\r\n  reactNativeTsx,\r\n  vue,\r\n  vue2,\r\n  svelte,\r\n  stencil,\r\n  solid,\r\n  solidTsx,\r\n  riot,\r\n  malina,\r\n  coffeescript,\r\n  livescript,\r\n  civet,\r\n  clio,\r\n  imba,\r\n  rescript,\r\n  reason,\r\n  ocaml,\r\n  python,\r\n  pyodide,\r\n  r,\r\n  ruby,\r\n  go,\r\n  php,\r\n  cpp,\r\n  clang,\r\n  perl,\r\n  lua,\r\n  teal,\r\n  fennel,\r\n  julia,\r\n  scheme,\r\n  commonlisp,\r\n  clojurescript,\r\n  tcl,\r\n  assemblyscript,\r\n  wat,\r\n  sql,\r\n  prolog,\r\n  blockly,\r\n];\r\n", "import type { createEventsManager } from '../events';\r\nimport type { EditorId, Config, Language, Processor, LanguageSpecs, Template } from '../models';\r\nimport { languages } from './languages';\r\nimport { processors } from './processors';\r\nimport { languageIsEnabled, processorIsEnabled } from './utils';\r\n\r\nexport const createLanguageMenus = (\r\n  config: Config,\r\n  baseUrl: string,\r\n  eventsManager: ReturnType<typeof createEventsManager>,\r\n  showLanguageInfo: (languageInfo: HTMLElement) => void,\r\n  loadStarterTemplate: (templateName: Template['name']) => void,\r\n  importCode: (options: { url: string }) => Promise<boolean>,\r\n) => {\r\n  const editorIds: EditorId[] = ['markup', 'style', 'script'];\r\n  const rootList = document.createElement('ul');\r\n  document.querySelector('#select-editor')?.appendChild(rootList);\r\n\r\n  let editorsNumber = editorIds.length;\r\n\r\n  editorIds.forEach((editorId) => {\r\n    const editorSelector = document.createElement('li');\r\n    editorSelector.id = editorId + '-selector';\r\n    editorSelector.classList.add('editor-title', 'noselect');\r\n    editorSelector.dataset.editor = editorId;\r\n    editorSelector.tabIndex = 1;\r\n    editorSelector.innerHTML = `\r\n      <span></span>\r\n      <a\r\n        href=\"javascript:void(0)\"\r\n        onclick=\"event.stopPropagation();\"\r\n        tabIndex=\"1\"\r\n        class=\"language-menu-button hint--bottom\"\r\n        data-hint=\"Change Language\"\r\n      >\r\n        <img\r\n          width=\"20\"\r\n          height=\"20\"\r\n          src=\"${baseUrl}assets/images/down_arrow.svg\"\r\n        />\r\n      </a>\r\n    `;\r\n    rootList.appendChild(editorSelector);\r\n\r\n    const menuScroller = document.createElement('div');\r\n    menuScroller.classList.add('menu-scroller');\r\n    menuScroller.classList.add('menu-scroller-' + editorId);\r\n    editorSelector.appendChild(menuScroller);\r\n\r\n    const languageMenu = document.createElement('ul');\r\n    languageMenu.classList.add('dropdown-menu');\r\n    languageMenu.classList.add('dropdown-menu-' + editorId);\r\n    menuScroller.appendChild(languageMenu);\r\n\r\n    const editorLanguages = [...languages]\r\n      .filter((language) => language.editor === editorId)\r\n      .filter((language) => languageIsEnabled(language.name, config));\r\n\r\n    if (editorLanguages.length === 0) {\r\n      editorSelector.classList.add('hidden');\r\n      editorsNumber -= 1;\r\n    } else if (editorLanguages.length === 1) {\r\n      const changeLanguageButton =\r\n        editorSelector.querySelector<HTMLElement>('.language-menu-button');\r\n      if (changeLanguageButton) {\r\n        changeLanguageButton.style.display = 'none';\r\n      }\r\n    }\r\n\r\n    const enabledProcessors = processors.filter(\r\n      (p) => p.editor === editorId && processorIsEnabled(p.name, config),\r\n    );\r\n    const processorsHeader =\r\n      enabledProcessors.length > 0\r\n        ? {\r\n            name: editorId + '-processors',\r\n            title: 'Processors:',\r\n            longTitle: 'Processors:',\r\n            editor: editorId,\r\n          }\r\n        : undefined;\r\n\r\n    if (processorsHeader) {\r\n      editorLanguages.push(processorsHeader as LanguageSpecs);\r\n    }\r\n\r\n    editorLanguages.forEach((language) => {\r\n      const languageItem = document.createElement('li');\r\n      languageItem.classList.add('language-item');\r\n      languageMenu.appendChild(languageItem);\r\n\r\n      const languageLink = document.createElement('a');\r\n      languageLink.href = '#';\r\n      languageLink.dataset.editor = editorId;\r\n      languageLink.dataset.lang = language.name;\r\n      languageLink.title = language.longTitle || language.title;\r\n      languageLink.innerHTML = language.longTitle || language.title;\r\n\r\n      if (!('extensions' in language)) {\r\n        languageLink.classList.add('subtitle');\r\n      }\r\n      if (language.name === ('style-processors' as any)) {\r\n        languageItem.classList.add('column-break');\r\n      }\r\n      languageItem.appendChild(languageLink);\r\n\r\n      if (language.info !== false) {\r\n        const tooltip = document.createElement('span');\r\n        tooltip.classList.add('tooltip', 'hint--bottom-left');\r\n        tooltip.dataset.hint = 'Click for info...';\r\n        tooltip.innerHTML = infoIcon;\r\n        eventsManager.addEventListener(\r\n          tooltip,\r\n          'mousedown',\r\n          async () => {\r\n            const languageInfo = document.createElement('div');\r\n            languageInfo.classList.add('language-info');\r\n            languageInfo.innerHTML = await getLanguageInfo(language.name, baseUrl);\r\n            showLanguageInfo(languageInfo);\r\n            const templateLink: HTMLElement | null = languageInfo.querySelector('a[data-template]');\r\n            const templateName = templateLink?.dataset.template as Template['name'];\r\n            if (templateLink && templateName) {\r\n              eventsManager.addEventListener(\r\n                templateLink,\r\n                'click',\r\n                async (event) => {\r\n                  event.preventDefault();\r\n                  loadStarterTemplate(templateName);\r\n                },\r\n                false,\r\n              );\r\n            }\r\n            const codeLink: HTMLElement | null = languageInfo.querySelector('a[data-code]');\r\n            const codeUrl = codeLink?.dataset.code;\r\n            if (codeLink && codeUrl) {\r\n              eventsManager.addEventListener(\r\n                codeLink,\r\n                'click',\r\n                async (event) => {\r\n                  event.preventDefault();\r\n                  importCode({ url: codeUrl });\r\n                },\r\n                false,\r\n              );\r\n            }\r\n          },\r\n          false,\r\n        );\r\n        languageItem.appendChild(tooltip);\r\n      }\r\n    });\r\n  });\r\n\r\n  if (editorsNumber < 3) {\r\n    document.querySelectorAll('.editor-title').forEach((editorSelector) => {\r\n      editorSelector.classList.add('half-width');\r\n    });\r\n  }\r\n};\r\n\r\nexport const createProcessorItem = (processor: { name: string; title: string }) => {\r\n  const processorItem = document.createElement('li');\r\n  processorItem.classList.add('language-item', 'processor-item');\r\n  processorItem.innerHTML = `\r\n        <label class=\"switch\">\r\n          <span>${processor.title}</span>\r\n          <div>\r\n            <input id=\"${processor.name}\" type=\"checkbox\" data-processor=\"${processor.name}\" />\r\n            <span class=\"slider round\"></span>\r\n          </div>\r\n        </label>\r\n        `;\r\n  return processorItem;\r\n};\r\n\r\nconst getLanguageInfo = async (language: Language | Processor, baseUrl: string) => {\r\n  const languageInfoHTML = await import(baseUrl + '{{hash:language-info.js}}').then(\r\n    (mod) => mod.languageInfo,\r\n  );\r\n  const domParser = new DOMParser();\r\n  const dom = domParser.parseFromString(languageInfoHTML, 'text/html');\r\n  const info = dom.querySelector(`[data-lang=\"${language}\"]`);\r\n  return info?.innerHTML || '';\r\n};\r\n\r\nconst infoIcon = `<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\r\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t viewBox=\"0 0 496.158 496.158\" style=\"enable-background:new 0 0 496.158 496.158;\" xml:space=\"preserve\">\r\n<path style=\"fill:#5a6074da;\" d=\"M496.158,248.085c0-137.022-111.069-248.082-248.075-248.082C111.07,0.003,0,111.063,0,248.085\r\n\tc0,137.001,111.07,248.07,248.083,248.07C385.089,496.155,496.158,385.086,496.158,248.085z\"/>\r\n<g>\r\n\t<path style=\"fill:#FFFFFF;\" d=\"M315.249,359.555c-1.387-2.032-4.048-2.755-6.27-1.702c-24.582,11.637-52.482,23.94-57.958,25.015\r\n\t\tc-0.138-0.123-0.357-0.348-0.644-0.737c-0.742-1.005-1.103-2.318-1.103-4.015c0-13.905,10.495-56.205,31.192-125.719\r\n\t\tc17.451-58.406,19.469-70.499,19.469-74.514c0-6.198-2.373-11.435-6.865-15.146c-4.267-3.519-10.229-5.302-17.719-5.302\r\n\t\tc-12.459,0-26.899,4.73-44.146,14.461c-16.713,9.433-35.352,25.41-55.396,47.487c-1.569,1.729-1.733,4.314-0.395,6.228\r\n\t\tc1.34,1.915,3.825,2.644,5.986,1.764c7.037-2.872,42.402-17.359,47.557-20.597c4.221-2.646,7.875-3.989,10.861-3.989\r\n\t\tc0.107,0,0.199,0.004,0.276,0.01c0.036,0.198,0.07,0.5,0.07,0.933c0,3.047-0.627,6.654-1.856,10.703\r\n\t\tc-30.136,97.641-44.785,157.498-44.785,182.994c0,8.998,2.501,16.242,7.432,21.528c5.025,5.393,11.803,8.127,20.146,8.127\r\n\t\tc8.891,0,19.712-3.714,33.08-11.354c12.936-7.392,32.68-23.653,60.363-49.717C316.337,364.326,316.636,361.587,315.249,359.555z\"/>\r\n\t<path style=\"fill:#FFFFFF;\" d=\"M314.282,76.672c-4.925-5.041-11.227-7.597-18.729-7.597c-9.34,0-17.475,3.691-24.176,10.971\r\n\t\tc-6.594,7.16-9.938,15.946-9.938,26.113c0,8.033,2.463,14.69,7.32,19.785c4.922,5.172,11.139,7.794,18.476,7.794\r\n\t\tc8.958,0,17.049-3.898,24.047-11.586c6.876-7.553,10.363-16.433,10.363-26.393C321.646,88.105,319.169,81.684,314.282,76.672z\"/>\r\n</g>\r\n</svg>`;\r\n", "import type { CssPreset } from '../models';\r\nimport { normalizeCssUrl, resetCssUrl } from '../vendors';\r\n\r\nexport const cssPresets: CssPreset[] = [\r\n  {\r\n    id: 'normalize.css',\r\n    name: 'Normalize.css',\r\n    url: normalizeCssUrl,\r\n  },\r\n  {\r\n    id: 'reset-css',\r\n    name: 'CSS reset',\r\n    url: resetCssUrl,\r\n  },\r\n];\r\n", "import { getLanguageEditorId } from '../languages';\r\nimport type { CodeEditor, EditorOptions } from '../models';\r\n\r\nexport const createFakeEditor = (options: EditorOptions): CodeEditor => {\r\n  let value = options.value;\r\n  let language = options.language;\r\n  return {\r\n    getValue: () => value,\r\n    setValue: (v = '') => {\r\n      value = v;\r\n    },\r\n    getLanguage: () => language,\r\n    setLanguage: (lang, v) => {\r\n      language = lang;\r\n      if (v) {\r\n        value = v;\r\n      }\r\n    },\r\n    getEditorId: () => getLanguageEditorId(language) || 'markup',\r\n    focus: () => undefined,\r\n    getPosition: () => ({ lineNumber: 1, column: 1 }),\r\n    setPosition: () => undefined,\r\n    onContentChanged: () => undefined,\r\n    addKeyBinding: () => undefined,\r\n    keyCodes: {\r\n      CtrlEnter: '',\r\n      ShiftEnter: '',\r\n      Enter: '',\r\n      UpArrow: '',\r\n      DownArrow: '',\r\n      ShiftAltF: '',\r\n    },\r\n    changeSettings: () => undefined,\r\n    registerFormatter: () => undefined,\r\n    format: async () => undefined,\r\n    isReadonly: true,\r\n    setTheme: () => undefined,\r\n    undo: () => undefined,\r\n    redo: () => undefined,\r\n    destroy: () => undefined,\r\n    isFake: true,\r\n  };\r\n};\r\n", "import {\n  fontAnonymousProUrl,\n  fontCascadiaCodeUrl,\n  fontCodeNewRomanUrl,\n  fontComicMonoUrl,\n  fontCourierPrimeUrl,\n  fontDECTerminalModernUrl,\n  fontDejaVuMonoUrl,\n  fontFantasqueUrl,\n  fontFiraCodeUrl,\n  fontFixedsysUrl,\n  fontHackUrl,\n  fontHermitUrl,\n  fontIBMPlexMonoUrl,\n  fontInconsolataUrl,\n  fontIosevkaUrl,\n  fontJetbrainsMonoUrl,\n  fontMenloUrl,\n  fontMonofurUrl,\n  fontMonoidUrl,\n  fontNotoUrl,\n  fontNovaMonoUrl,\n  fontOpenDyslexicUrl,\n  fontProFontWindowsUrl,\n  fontRobotoMonoUrl,\n  fontSFMonoUrl,\n  fontSourceCodeProUrl,\n  fontSpaceMonoUrl,\n  fontSudoVarUrl,\n  fontUbuntuMonoUrl,\n  fontVictorMonoUrl,\n} from '../vendors';\n\nexport interface Font {\n  id: string;\n  name: string;\n  label?: string;\n  url: string;\n}\n\nexport const fonts: Font[] = [\n  {\n    id: 'anonymous-pro',\n    name: 'Anonymous Pro',\n    url: fontAnonymousProUrl,\n  },\n  {\n    id: 'cascadia-code',\n    name: 'Cascadia Code',\n    url: fontCascadiaCodeUrl,\n  },\n  {\n    id: 'comic-mono',\n    name: 'Code New Roman',\n    url: fontCodeNewRomanUrl,\n  },\n  {\n    id: 'comic-mono',\n    name: 'Comic Mono',\n    url: fontComicMonoUrl,\n  },\n  {\n    id: 'courier-prime',\n    name: 'Courier Prime',\n    url: fontCourierPrimeUrl,\n  },\n  {\n    id: 'dec-terminal-modern',\n    name: 'DEC Terminal Modern',\n    url: fontDECTerminalModernUrl,\n  },\n  {\n    id: 'dejavu-mono',\n    name: 'DejaVu Mono',\n    url: fontDejaVuMonoUrl,\n  },\n  {\n    id: 'fantasque-sans-mono',\n    name: 'TypoPRO Fantasque Sans Mono',\n    label: 'Fantasque Sans Mono',\n    url: fontFantasqueUrl,\n  },\n  {\n    id: 'fira-code',\n    name: 'Fira Code',\n    url: fontFiraCodeUrl,\n  },\n  {\n    id: 'fixedsys',\n    name: 'Fixedsys 62',\n    label: 'Fixedsys',\n    url: fontFixedsysUrl,\n  },\n  {\n    id: 'hack',\n    name: 'Hack',\n    url: fontHackUrl,\n  },\n  {\n    id: 'hermit',\n    name: 'Hermit',\n    url: fontHermitUrl,\n  },\n  {\n    id: 'ibm-plex-mono',\n    name: 'IBM Plex Mono',\n    url: fontIBMPlexMonoUrl,\n  },\n  {\n    id: 'inconsolata',\n    name: 'Inconsolata',\n    url: fontInconsolataUrl,\n  },\n  {\n    id: 'iosevka',\n    name: 'Iosevka',\n    url: fontIosevkaUrl,\n  },\n  {\n    id: 'jetbrains-mono',\n    name: 'JetBrains Mono',\n    url: fontJetbrainsMonoUrl,\n  },\n  {\n    id: 'menlo',\n    name: 'Menlo',\n    url: fontMenloUrl,\n  },\n  {\n    id: 'monofur',\n    name: 'Monofur',\n    url: fontMonofurUrl,\n  },\n  {\n    id: 'monoid',\n    name: 'TypoPRO Monoid',\n    label: 'Monoid',\n    url: fontMonoidUrl,\n  },\n  {\n    id: 'noto-sans-mono',\n    name: 'Noto Sans Mono',\n    url: fontNotoUrl,\n  },\n  {\n    id: 'nova-mono',\n    name: 'Nova Mono',\n    url: fontNovaMonoUrl,\n  },\n  {\n    id: 'opendyslexic',\n    name: 'OpenDyslexic',\n    url: fontOpenDyslexicUrl,\n  },\n  {\n    id: 'profontwindows',\n    name: 'ProFontWindows',\n    label: 'ProFont',\n    url: fontProFontWindowsUrl,\n  },\n  {\n    id: 'roboto-mono',\n    name: 'Roboto Mono',\n    url: fontRobotoMonoUrl,\n  },\n  {\n    id: 'sf-mono',\n    name: 'SF Mono',\n    url: fontSFMonoUrl,\n  },\n  {\n    id: 'source-code-pro',\n    name: 'Source Code Pro',\n    url: fontSourceCodeProUrl,\n  },\n  {\n    id: 'space-mono',\n    name: 'Space Mono',\n    url: fontSpaceMonoUrl,\n  },\n  {\n    id: 'sudo-var',\n    name: 'Sudo Var',\n    url: fontSudoVarUrl,\n  },\n  {\n    id: 'ubuntu-mono',\n    name: 'Ubuntu Mono',\n    url: fontUbuntuMonoUrl,\n  },\n  {\n    id: 'victor-mono',\n    name: 'Victor Mono',\n    url: fontVictorMonoUrl,\n  },\n];\n\nexport const getFontFamily = (font: string | undefined) => {\n  const defaultFonts =\n    'Consolas, ' + // windows\n    '\"Roboto Mono\", ' + // android\n    '\"Ubuntu Mono\", ' + // ubuntu\n    'ui-monospace, ' + // SF Mono on mac & ios\n    'monospace';\n  if (!font) return defaultFonts;\n  const fontName = fonts.find((f) => [f.id, f.name, f.label].includes(font))?.name;\n  return fontName ? `\"${fontName}\", ${defaultFonts}` : defaultFonts;\n};\n", "import type { CodeEditor, Config, EditorOptions } from '../models';\nimport { isMobile, loadStylesheet } from '../utils';\nimport { createFakeEditor } from './fake-editor';\nimport { fonts } from './fonts';\n\nconst getEditorFileName = (editorName: Exclude<Config['editor'], ''>) =>\n  editorName === 'codemirror'\n    ? `{{hash:codemirror.js}}`\n    : editorName === 'codejar'\n    ? '{{hash:codejar.js}}'\n    : '{{hash:monaco.js}}';\n\nconst loadEditor = async (editorName: Exclude<Config['editor'], ''>, options: EditorOptions) => {\n  const { baseUrl } = options;\n  const fileName = getEditorFileName(editorName);\n  const editorUrl = baseUrl + fileName;\n\n  let editorModule = (window as any)[editorUrl];\n  if (!editorModule) {\n    editorModule = await import(editorUrl);\n    (window as any)[editorUrl] = editorModule;\n  }\n  const createCodeEditor: (options: EditorOptions) => Promise<CodeEditor> =\n    editorModule.createEditor;\n  const codeEditor = await createCodeEditor(options);\n  return codeEditor;\n};\n\nconst selectEditor = (options: Partial<Pick<EditorOptions, 'editor' | 'mode' | 'editorId'>>) => {\n  const { editor, mode, editorId } = options;\n  return (\n    (mode === 'result' && editorId !== 'console' && editorId !== 'compiled'\n      ? 'fake'\n      : ['codemirror', 'monaco', 'codejar'].includes(editor || '')\n      ? editor\n      : mode === 'codeblock'\n      ? 'codejar'\n      : isMobile()\n      ? 'codemirror'\n      : 'monaco') || 'monaco'\n  );\n};\n\nconst getEditorOptions = (options: EditorOptions): EditorOptions => {\n  const codeblockOptions = {\n    ...options,\n    readOnly: true,\n  };\n  const compiledCodeOptions = {\n    ...options,\n    readOnly: true,\n  };\n  const consoleOptions = {\n    ...options,\n    lineNumbers: false,\n  };\n  const embedOptions = {\n    ...options,\n    lineNumbers: false,\n    readOnly: true,\n  };\n  const editorId = options.editorId;\n  return editorId === 'console'\n    ? consoleOptions\n    : editorId === 'compiled'\n    ? compiledCodeOptions\n    : editorId === 'embed'\n    ? embedOptions\n    : options.mode === 'codeblock'\n    ? codeblockOptions\n    : options;\n};\n\nconst loadFont = (fontName: string) => {\n  if (!fontName) return;\n  const font = fonts.find((f) => [f.id, f.name, f.label].includes(fontName));\n  if (!font) return;\n  loadStylesheet(font.url, 'font-' + font.id);\n};\n\nexport const createEditor = async (options: EditorOptions) => {\n  if (!options) throw new Error();\n\n  const editorOptions = getEditorOptions(options);\n\n  const editorName = selectEditor(editorOptions);\n  if (editorName === 'fake') return createFakeEditor(editorOptions);\n\n  if (editorOptions.fontFamily) {\n    loadFont(editorOptions.fontFamily);\n  }\n  const codeEditor = await loadEditor(editorName, editorOptions);\n\n  const changeSettings = codeEditor.changeSettings;\n  codeEditor.changeSettings = (settings) => {\n    if (settings.fontFamily) {\n      loadFont(settings.fontFamily);\n    }\n    return changeSettings(settings);\n  };\n\n  return codeEditor;\n};\n", "import type { EventsManager } from '../models';\r\n\r\nconst handler = (event: MessageEvent) => {\r\n  if (event.data.type === 'customEditorCommand') {\r\n    if (event.data.payload === 'fork') {\r\n      window.dispatchEvent(\r\n        new KeyboardEvent('keydown', {\r\n          keyCode: 83,\r\n          shiftKey: true,\r\n          ctrlKey: !navigator.platform.match('Mac'),\r\n          metaKey: !!navigator.platform.match('Mac'),\r\n        }),\r\n      );\r\n    }\r\n    if (event.data.payload === 'save') {\r\n      window.dispatchEvent(\r\n        new KeyboardEvent('keydown', {\r\n          keyCode: 83,\r\n          ctrlKey: !navigator.platform.match('Mac'),\r\n          metaKey: !!navigator.platform.match('Mac'),\r\n        }),\r\n      );\r\n    }\r\n  }\r\n};\r\n\r\nexport const registerEditorCommands = (enable: boolean, eventsManager: EventsManager) => {\r\n  if (enable) {\r\n    eventsManager.addEventListener(window, 'message', handler as any);\r\n  } else {\r\n    eventsManager.removeEventListener(window, 'message', handler as any);\r\n  }\r\n};\r\n", "import type { CustomEditor, EventsManager } from '../../models';\r\nimport { registerEditorCommands } from '../custom-editor-commands';\r\n\r\nexport const createBlocklyEditor = ({\r\n  baseUrl,\r\n  eventsManager,\r\n}: {\r\n  baseUrl: string;\r\n  eventsManager: EventsManager;\r\n}): CustomEditor => {\r\n  let blockly: typeof import('./blockly');\r\n\r\n  const loadBlockly = async () => {\r\n    if (blockly) return;\r\n\r\n    const editorContainer = document.querySelector('#script') as HTMLElement;\r\n    const blocklyElement = document.createElement('div');\r\n    blocklyElement.id = 'blockly';\r\n    blocklyElement.classList.add('custom-editor');\r\n    blocklyElement.innerHTML = `<span class=\"loading-custom-editor\">Loading blockly editor...</span>`;\r\n    editorContainer.appendChild(blocklyElement);\r\n\r\n    blockly = await import(baseUrl + '{{hash:blockly.js}}');\r\n  };\r\n\r\n  return {\r\n    language: 'blockly',\r\n    show: async (show, options) => {\r\n      if (!blockly && show) {\r\n        await loadBlockly();\r\n      }\r\n\r\n      const blocklyEditor = document.querySelector<HTMLElement>('#blockly');\r\n      if (!show || options.editors.script.getLanguage() !== 'blockly') {\r\n        if (blocklyEditor) blocklyEditor.style.display = 'none';\r\n        return;\r\n      }\r\n      if (blocklyEditor) blocklyEditor.style.display = 'unset';\r\n\r\n      await blockly.showBlockly(options);\r\n      registerEditorCommands(show, eventsManager);\r\n    },\r\n    getContent: async (options) => {\r\n      await loadBlockly();\r\n      return blockly.getBlocklyContent(options);\r\n    },\r\n    setTheme: (theme) => {\r\n      blockly?.setBlocklyTheme(theme);\r\n    },\r\n  };\r\n};\r\n", "import type { CustomEditor, EventsManager } from '../../models';\r\nimport { registerEditorCommands } from '../custom-editor-commands';\r\n\r\nexport const createQuillEditor = ({\r\n  baseUrl,\r\n  eventsManager,\r\n}: {\r\n  baseUrl: string;\r\n  eventsManager: EventsManager;\r\n}): CustomEditor => {\r\n  let quillEditor: typeof import('./quill');\r\n\r\n  const loadEditor = async () => {\r\n    if (quillEditor) return;\r\n\r\n    const editorContainer = document.querySelector('#markup') as HTMLElement;\r\n    const editorElement = document.createElement('div');\r\n    editorElement.id = 'quillEditor';\r\n    editorElement.classList.add('custom-editor');\r\n    editorElement.innerHTML = `<span class=\"loading-custom-editor\">Loading rich text editor...</span>`;\r\n    editorContainer.appendChild(editorElement);\r\n\r\n    quillEditor = await import(baseUrl + '{{hash:quill.js}}');\r\n  };\r\n\r\n  return {\r\n    language: 'richtext',\r\n    show: async (show, options) => {\r\n      if (!quillEditor && show) {\r\n        await loadEditor();\r\n      }\r\n      const editorContainer = document.querySelector<HTMLElement>('#quillEditor');\r\n      if (!show || options.editors.markup.getLanguage() !== 'richtext') {\r\n        if (editorContainer) editorContainer.style.display = 'none';\r\n        return;\r\n      }\r\n      if (editorContainer) editorContainer.style.display = 'unset';\r\n\r\n      await quillEditor.showQuillEditor(options);\r\n      registerEditorCommands(show, eventsManager);\r\n    },\r\n    getContent: async (options) => {\r\n      await loadEditor();\r\n      return quillEditor.getQuillEditorContent(options);\r\n    },\r\n    setTheme: (theme) => {\r\n      quillEditor?.setQuillEditorTheme(theme);\r\n    },\r\n  };\r\n};\r\n", "import type { CustomEditors, EventsManager } from '../models';\r\nimport { createBlocklyEditor } from './blockly';\r\nimport { createQuillEditor } from './quill';\r\n\r\nexport const createCustomEditors = (options: {\r\n  baseUrl: string;\r\n  eventsManager: EventsManager;\r\n}): CustomEditors => ({\r\n  blockly: createBlocklyEditor(options),\r\n  richtext: createQuillEditor(options),\r\n});\r\n", "import type { FormatFn, Language } from '../models';\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport { getAppCDN } from '../services/modules';\r\nimport type { Formatter, FormatterMessage, FormatterMessageEvent } from './models';\r\n\r\nexport const createFormatter = (baseUrl: string): Formatter => {\r\n  const worker = new Worker(baseUrl + '{{hash:format.worker.js}}' + '?appCDN=' + getAppCDN());\r\n  const configMessage: FormatterMessage = { type: 'init', baseUrl };\r\n  worker.postMessage(configMessage);\r\n\r\n  const load = async (languages: Language[]): Promise<string> =>\r\n    new Promise((resolve, reject) => {\r\n      const handler = (event: FormatterMessageEvent) => {\r\n        const message = event.data;\r\n\r\n        if (\r\n          (message.type === 'loaded' || message.type === 'load-failed') &&\r\n          message.payload === languages\r\n        ) {\r\n          worker.removeEventListener('message', handler);\r\n\r\n          if (message.type === 'loaded') {\r\n            resolve('loaded formatter for: ' + languages.join(', '));\r\n          } else if (message.type === 'load-failed') {\r\n            reject('failed loading formatter for: ' + languages.join(', '));\r\n          }\r\n        }\r\n      };\r\n      worker.addEventListener('message', handler);\r\n\r\n      const loadMessage: FormatterMessage = {\r\n        type: 'load',\r\n        payload: languages,\r\n      };\r\n      worker.postMessage(loadMessage);\r\n    });\r\n\r\n  const getFormatFn = async (language: Language) => {\r\n    const formatFn: FormatFn = (value: string, cursorOffset: number, formatterConfig = {}) =>\r\n      new Promise((resolve, reject) => {\r\n        const handler = (event: FormatterMessageEvent) => {\r\n          const message = event.data;\r\n\r\n          if (\r\n            (message.type === 'formatted' || message.type === 'format-failed') &&\r\n            message.payload.language === language &&\r\n            message.payload.value === value &&\r\n            message.payload.cursorOffset === cursorOffset\r\n          ) {\r\n            worker.removeEventListener('message', handler);\r\n\r\n            if (message.type === 'formatted') {\r\n              resolve({\r\n                formatted: message.payload.formatted,\r\n                cursorOffset: message.payload.formattedCursorOffset,\r\n              });\r\n            } else if (message.type === 'format-failed') {\r\n              reject({\r\n                language,\r\n                formatted: value,\r\n                cursorOffset,\r\n              });\r\n            }\r\n          }\r\n        };\r\n        worker.addEventListener('message', handler);\r\n\r\n        const formatMessage: FormatterMessage = {\r\n          type: 'format',\r\n          payload: {\r\n            language,\r\n            value,\r\n            cursorOffset,\r\n            formatterConfig,\r\n          },\r\n        };\r\n        worker.postMessage(formatMessage);\r\n      });\r\n\r\n    return formatFn;\r\n  };\r\n\r\n  const destroy = () => {\r\n    worker.terminate();\r\n  };\r\n\r\n  return {\r\n    load,\r\n    getFormatFn,\r\n    destroy,\r\n  };\r\n};\r\n", "import type { Language, Config } from '../models';\r\nimport { createFormatter } from './formatter';\r\nimport type { Formatter } from './models';\r\n\r\nexport const getFormatter = (config: Config, baseUrl: string, isLite: boolean): Formatter => {\r\n  const { readonly, mode } = config;\r\n\r\n  if (readonly || mode === 'codeblock' || mode === 'result' || isLite) {\r\n    return createFakeFormatter();\r\n  } else {\r\n    return createFormatter(baseUrl);\r\n  }\r\n};\r\n\r\n/**\r\n * create a fake formatter with same API\r\n * to avoid loading the formatter if read only\r\n */\r\nfunction createFakeFormatter(): Formatter {\r\n  return {\r\n    load: (_languages: Language[]) => Promise.resolve('do nothing'),\r\n    getFormatFn: (_language: Language) =>\r\n      Promise.resolve((value: string, cursorOffset: number) =>\r\n        Promise.resolve({ formatted: value, cursorOffset }),\r\n      ),\r\n    destroy: () => undefined,\r\n  };\r\n}\r\n", "function _call(body, then, direct) {\n  if (direct) {\n    return then ? then(body()) : body();\n  }\n\n  try {\n    var result = Promise.resolve(body());\n    return then ? result.then(then) : result;\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}\n\nfunction _invokeIgnored(body) {\n  var result = body();\n\n  if (result && result.then) {\n    return result.then(_empty);\n  }\n}\n\nfunction _empty() {}\n\nfunction _await(value, then, direct) {\n  if (direct) {\n    return then ? then(value) : value;\n  }\n\n  if (!value || !value.then) {\n    value = Promise.resolve(value);\n  }\n\n  return then ? value.then(then) : value;\n}\nvar instances = {\n  left: [],\n  center: [],\n  right: []\n};\nvar instanceStackStatus = {\n  left: true,\n  center: true,\n  right: true\n};\nvar themes = {\n  light: {\n    backgroundColor: '#fff',\n    textColor: '#000',\n    actionColor: '#008000'\n  },\n  dark: {}\n};\nvar Snackbar = function Snackbar(message, options) {\n  var this$1 = this;\n  if ( options === void 0 ) options = {};\n\n  var timeout = options.timeout; if ( timeout === void 0 ) timeout = 0;\n  var actions = options.actions; if ( actions === void 0 ) actions = [{\n      text: 'dismiss',\n      callback: function () { return this$1.destroy(); }\n    }];\n  var position = options.position; if ( position === void 0 ) position = 'center';\n  var theme = options.theme; if ( theme === void 0 ) theme = 'dark';\n  var maxStack = options.maxStack; if ( maxStack === void 0 ) maxStack = 3;\n  this.message = message;\n  this.options = {\n    timeout: timeout,\n    actions: actions,\n    position: position,\n    maxStack: maxStack,\n    theme: typeof theme === 'string' ? themes[theme] : theme\n  };\n  this.wrapper = this.getWrapper(this.options.position);\n  this.insert();\n  instances[this.options.position].push(this);\n  this.stack();\n};\n\nvar prototypeAccessors = { theme: { configurable: true } };\n\nprototypeAccessors.theme.get = function () {\n  return this.options.theme;\n};\n\nSnackbar.prototype.getWrapper = function getWrapper (position) {\n  var wrapper = document.querySelector((\".snackbars-\" + position));\n\n  if (!wrapper) {\n    wrapper = document.createElement('div');\n    wrapper.className = \"snackbars snackbars-\" + position;\n    document.body.appendChild(wrapper);\n  }\n\n  return wrapper;\n};\n\nSnackbar.prototype.insert = function insert () {\n    var this$1 = this;\n\n  var el = document.createElement('div');\n  el.className = 'snackbar';\n  el.setAttribute('aria-live', 'assertive');\n  el.setAttribute('aria-atomic', 'true');\n  el.setAttribute('aria-hidden', 'false');\n  var ref = this.theme;\n    var backgroundColor = ref.backgroundColor;\n    var textColor = ref.textColor;\n    var boxShadow = ref.boxShadow;\n    var actionColor = ref.actionColor;\n  var container = document.createElement('div');\n  container.className = 'snackbar--container';\n\n  if (backgroundColor) {\n    container.style.backgroundColor = backgroundColor;\n  }\n\n  if (textColor) {\n    container.style.color = textColor;\n  }\n\n  if (boxShadow) {\n    container.style.boxShadow = boxShadow;\n  }\n\n  el.appendChild(container); // Append message\n\n  var text = document.createElement('div');\n  text.className = 'snackbar--text';\n\n  if (typeof this.message === 'string') {\n    text.textContent = this.message;\n  } else {\n    text.appendChild(this.message);\n  }\n\n  container.appendChild(text); // Add action buttons\n\n  if (this.options.actions) {\n    var loop = function () {\n      var action = list[i];\n\n        var style = action.style;\n        var text$1 = action.text;\n        var callback = action.callback;\n      var button = document.createElement('button');\n      button.className = 'snackbar--button';\n      button.innerHTML = text$1;\n\n      if (actionColor) {\n        button.style.color = actionColor;\n      }\n\n      if (style) {\n        Object.keys(style).forEach(function (key) {\n          button.style[key] = style[key];\n        });\n      }\n\n      button.addEventListener('click', function () {\n        this$1.stopTimer();\n\n        if (callback) {\n          callback(button, this$1);\n        } else {\n          this$1.destroy();\n        }\n      });\n      container.appendChild(button);\n    };\n\n      for (var i = 0, list = this$1.options.actions; i < list.length; i += 1) loop();\n  }\n\n  this.startTimer();\n  el.addEventListener('mouseenter', function () {\n    this$1.expand();\n  });\n  el.addEventListener('mouseleave', function () {\n    this$1.stack();\n  });\n  this.el = el;\n  this.wrapper.appendChild(el);\n};\n\nSnackbar.prototype.stack = function stack () {\n    var this$1 = this;\n\n  instanceStackStatus[this.options.position] = true;\n  var positionInstances = instances[this.options.position];\n  var l = positionInstances.length - 1;\n  positionInstances.forEach(function (instance, i) {\n    // Resume all instances' timers if applicable\n    instance.startTimer();\n    var el = instance.el;\n\n    if (el) {\n      el.style.transform = \"translate3d(0, -\" + ((l - i) * 15) + \"px, -\" + (l - i) + \"px) scale(\" + (1 - 0.05 * (l - i)) + \")\";\n      var hidden = l - i >= this$1.options.maxStack;\n      this$1.toggleVisibility(el, hidden);\n    }\n  });\n};\n\nSnackbar.prototype.expand = function expand () {\n    var this$1 = this;\n\n  instanceStackStatus[this.options.position] = false;\n  var positionInstances = instances[this.options.position];\n  var l = positionInstances.length - 1;\n  positionInstances.forEach(function (instance, i) {\n    // Stop all instances' timers to prevent destroy\n    instance.stopTimer();\n    var el = instance.el;\n\n    if (el) {\n      el.style.transform = \"translate3d(0, -\" + ((l - i) * el.clientHeight) + \"px, 0) scale(1)\";\n      var hidden = l - i >= this$1.options.maxStack;\n      this$1.toggleVisibility(el, hidden);\n    }\n  });\n};\n\nSnackbar.prototype.toggleVisibility = function toggleVisibility (el, hidden) {\n  if (hidden) {\n    this.visibilityTimeoutId = window.setTimeout(function () {\n      el.style.visibility = 'hidden';\n    }, 300);\n    el.style.opacity = '0';\n  } else {\n    if (this.visibilityTimeoutId) {\n      clearTimeout(this.visibilityTimeoutId);\n      this.visibilityTimeoutId = undefined;\n    }\n\n    el.style.opacity = '1';\n    el.style.visibility = 'visible';\n  }\n};\n/**\r\n * Destory the snackbar\r\n */\n\n\nSnackbar.prototype.destroy = function destroy () {\n  var _this = this;\n\n  return _call(function () {\n    var el = _this.el;\n      var wrapper = _this.wrapper;\n    return _invokeIgnored(function () {\n      if (el) {\n        // Animate the snack away.\n        el.setAttribute('aria-hidden', 'true');\n        return _await(new Promise(function (resolve) {\n          var eventName = getAnimationEvent(el);\n\n          if (eventName) {\n            el.addEventListener(eventName, function () { return resolve(); });\n          } else {\n            resolve();\n          }\n        }), function () {\n          wrapper.removeChild(el); // Remove instance from the instances array\n\n          var positionInstances = instances[_this.options.position];\n          var index = undefined;\n\n          for (var i = 0; i < positionInstances.length; i++) {\n            if (positionInstances[i].el === el) {\n              index = i;\n              break;\n            }\n          }\n\n          if (index !== undefined) {\n            positionInstances.splice(index, 1);\n          } // Based on current status, refresh stack or expand style\n\n\n          if (instanceStackStatus[_this.options.position]) {\n            _this.stack();\n          } else {\n            _this.expand();\n          }\n        });\n      }\n    });\n  });\n};\n\nSnackbar.prototype.startTimer = function startTimer () {\n    var this$1 = this;\n\n  if (this.options.timeout && !this.timeoutId) {\n    this.timeoutId = self.setTimeout(function () { return this$1.destroy(); }, this.options.timeout);\n  }\n};\n\nSnackbar.prototype.stopTimer = function stopTimer () {\n  if (this.timeoutId) {\n    clearTimeout(this.timeoutId);\n    this.timeoutId = undefined;\n  }\n};\n\nObject.defineProperties( Snackbar.prototype, prototypeAccessors );\n\nfunction getAnimationEvent(el) {\n  var animations = {\n    animation: 'animationend',\n    OAnimation: 'oAnimationEnd',\n    MozAnimation: 'Animationend',\n    WebkitAnimation: 'webkitAnimationEnd'\n  };\n\n  for (var i = 0, list = Object.keys(animations); i < list.length; i += 1) {\n    var key = list[i];\n\n    if (el.style[key] !== undefined) {\n      return animations[key];\n    }\n  }\n\n  return;\n}\n\nfunction createSnackbar(message, options) {\n  return new Snackbar(message, options);\n}\nfunction destroyAllSnackbars() {\n  var instancesArray = [];\n  Object.keys(instances).map(function (position) { return instances[position]; }).forEach(function (positionInstances) { return instancesArray.push.apply(instancesArray, positionInstances); });\n  return Promise.all(instancesArray.map(function (instance) { return instance.destroy(); }));\n}\n\nexport { Snackbar, createSnackbar, destroyAllSnackbars };\n", "import type { Action } from '@snackbar/core';\r\n\r\nconst actionStyle = {\r\n  minWidth: '2em',\r\n  padding: '3px',\r\n};\r\nexport const darkTheme = {\r\n  textColor: '#eee',\r\n  actionColor: '#eee',\r\n  backgroundColor: '#2A2A2A',\r\n};\r\nexport const lightTheme = {\r\n  textColor: '#343A40',\r\n  actionColor: '#343A40',\r\n  backgroundColor: '#fff',\r\n};\r\nexport const infoTheme = {\r\n  textColor: '#055160',\r\n  actionColor: '#055160',\r\n  backgroundColor: '#CFF4FC',\r\n};\r\nexport const successTheme = {\r\n  textColor: '#0F5132',\r\n  actionColor: '#0F5132',\r\n  backgroundColor: '#D1E7DD',\r\n};\r\nexport const warningTheme = {\r\n  textColor: '#664D16',\r\n  actionColor: '#664D16',\r\n  backgroundColor: '#FFF3CD',\r\n};\r\nexport const dangerTheme = {\r\n  textColor: '#842040',\r\n  actionColor: '#842040',\r\n  backgroundColor: '#F8D7DA',\r\n};\r\nexport const closeButton: Action = {\r\n  text: '<span title=\"Dismiss\">\u2716</span>',\r\n  style: actionStyle,\r\n  callback(_button, snackbar) {\r\n    snackbar.destroy();\r\n  },\r\n};\r\nexport const acceptButton: Action = {\r\n  text: '<span title=\"Confirm\">\u2713</span>',\r\n  style: actionStyle,\r\n  callback(_button, snackbar) {\r\n    snackbar.destroy();\r\n  },\r\n};\r\n", "import { createSnackbar, type Action } from '@snackbar/core';\r\nimport {\r\n  infoTheme,\r\n  successTheme,\r\n  warningTheme,\r\n  dangerTheme,\r\n  closeButton,\r\n  acceptButton,\r\n  lightTheme,\r\n} from './snackbar';\r\n\r\nexport const createNotifications = () => {\r\n  const timeout = 2000;\r\n\r\n  const info = (message: string, dismissable = true) =>\r\n    createSnackbar(message, {\r\n      theme: infoTheme,\r\n      actions: dismissable ? [closeButton] : [],\r\n      timeout,\r\n    });\r\n\r\n  const success = (message: string, dismissable = true) =>\r\n    createSnackbar('\u2713 ' + message, {\r\n      theme: successTheme,\r\n      actions: dismissable ? [closeButton] : [],\r\n      timeout,\r\n    });\r\n\r\n  const warning = (message: string, dismissable = true) =>\r\n    createSnackbar(message, {\r\n      theme: warningTheme,\r\n      actions: dismissable ? [closeButton] : [],\r\n      timeout,\r\n    });\r\n\r\n  const error = (message: string, dismissable = true) =>\r\n    createSnackbar('\u2716 ' + message, {\r\n      theme: dangerTheme,\r\n      actions: dismissable ? [closeButton] : [],\r\n      timeout,\r\n    });\r\n\r\n  const confirm = (message: string, confirmCallback: () => void, cancelCallback?: () => void) => {\r\n    const confirmAction: Action = {\r\n      ...acceptButton,\r\n      callback(_button, snackbar) {\r\n        confirmCallback();\r\n        snackbar.destroy();\r\n      },\r\n    };\r\n    const cancelAction: Action = {\r\n      ...closeButton,\r\n      callback(_button, snackbar) {\r\n        cancelCallback?.();\r\n        snackbar.destroy();\r\n      },\r\n    };\r\n    return createSnackbar(message, {\r\n      theme: lightTheme,\r\n      actions: [confirmAction, cancelAction],\r\n    });\r\n  };\r\n\r\n  return {\r\n    info,\r\n    success,\r\n    warning,\r\n    error,\r\n    confirm,\r\n  };\r\n};\r\n", "interface ModalOptions {\n  size?: 'large' | 'small';\n  closeButton?: boolean;\n  isAsync?: boolean;\n  onClose?: () => void;\n  scrollToSelector?: string;\n}\n\nexport const createModal = () => {\n  const overlay = document.querySelector('#overlay') as HTMLElement;\n  const modalContainer = document.querySelector('#modal-container') as HTMLElement;\n  const modal = document.querySelector('#modal') as HTMLElement;\n  let isOpening: boolean;\n  let onCloseFn: () => void = () => undefined;\n\n  const show = (\n    container: HTMLElement,\n    {\n      size = 'large',\n      closeButton = false,\n      isAsync = false,\n      onClose = () => undefined,\n      scrollToSelector = '',\n    }: ModalOptions = {},\n  ) => {\n    modal.innerHTML = '';\n    modal.className = size;\n    modal.appendChild(container);\n    onCloseFn = onClose;\n\n    if (scrollToSelector) {\n      setTimeout(() => {\n        const target = container.querySelector<HTMLElement>(scrollToSelector);\n        container.style.scrollBehavior = 'smooth';\n        if (target) {\n          target.scrollIntoView();\n        }\n      }, 500);\n    }\n\n    if (closeButton) {\n      const closeContainer = document.createElement('div');\n      closeContainer.className = 'close-container';\n      const closeBtn = document.createElement('button');\n      closeBtn.classList.add('button');\n      closeBtn.innerHTML = 'Close';\n      closeBtn.onclick = close;\n      closeContainer.appendChild(closeBtn);\n      modal.appendChild(closeContainer);\n    }\n\n    const cornerCloseBtn = document.createElement('div');\n    cornerCloseBtn.classList.add('close-button');\n    cornerCloseBtn.title = 'Esc';\n    cornerCloseBtn.onclick = close;\n    modal.appendChild(cornerCloseBtn);\n\n    overlay.style.display = 'flex';\n    modalContainer.style.display = 'flex';\n    modal.style.display = 'flex';\n    overlay.classList.remove('hidden');\n    modalContainer.classList.remove('hidden');\n    isOpening = true;\n    // remove previous event listener if it was not cleared\n    document.removeEventListener('click', onClickOutside);\n    document.removeEventListener('keydown', escapeListener);\n    document.addEventListener('click', onClickOutside, false);\n    document.addEventListener('keydown', escapeListener, false);\n    if (isAsync) {\n      container.click();\n    }\n  };\n\n  const close = () => {\n    if (typeof onCloseFn === 'function') {\n      onCloseFn();\n    }\n    document.removeEventListener('click', onClickOutside);\n    document.removeEventListener('keydown', escapeListener);\n\n    modal.innerHTML = '';\n    modal.className = '';\n    overlay.classList.add('hidden');\n    modalContainer.classList.add('hidden');\n    modal.style.display = 'none';\n    setTimeout(() => {\n      overlay.style.display = 'none';\n      modalContainer.style.display = 'none';\n      isOpening = false;\n    }, 400);\n  };\n\n  function onClickOutside(ev: Event) {\n    const notificationBar = document.querySelector('.snackbar');\n    if (\n      !modal?.contains(ev.target as Node) &&\n      !notificationBar?.contains(ev.target as Node) &&\n      !isOpening\n    ) {\n      close();\n    }\n    isOpening = false;\n  }\n\n  const escapeListener = (event: KeyboardEvent) => {\n    if (event.key === 'Escape' && !(window as any).watchingEscape) {\n      close();\n      event.preventDefault();\n    }\n  };\n\n  return {\n    show,\n    close,\n  };\n};\n", "// @ts-ignore\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport resultTemplateRaw from './sandbox/v6/result.html';\r\n// @ts-ignore\r\nimport appHTMLRaw from './app.html';\r\n// @ts-ignore\r\nimport settingsMenuHTMLRaw from './settings-menu.html';\r\n// @ts-ignore\r\nimport languageInfoRaw from './language-info.html';\r\n// @ts-ignore\r\nimport customSettingsScreenRaw from './custom-settings.html';\r\n// @ts-ignore\r\nimport testEditorScreenRaw from './test-editor.html';\r\n// @ts-ignore\r\nimport importScreenRaw from './import.html';\r\n// @ts-ignore\r\nimport deployScreenRaw from './deploy.html';\r\n// @ts-ignore\r\nimport syncScreenRaw from './sync.html';\r\n// @ts-ignore\r\nimport backupScreenRaw from './backup.html';\r\n// @ts-ignore\r\nimport broadcastScreenRaw from './broadcast.html';\r\n// @ts-ignore\r\nimport welcomeScreenRaw from './welcome.html';\r\n// @ts-ignore\r\nimport aboutScreenRaw from './about.html';\r\n// @ts-ignore\r\nimport infoScreenRaw from './project-info.html';\r\n// @ts-ignore\r\nimport resourcesScreenRaw from './external-resources.html';\r\n// @ts-ignore\r\nimport loginScreenRaw from './login.html';\r\n// @ts-ignore\r\nimport savePromptScreenRaw from './save-prompt.html';\r\n// @ts-ignore\r\nimport recoverPromptScreenRaw from './recover-prompt.html';\r\n// @ts-ignore\r\nimport templatesScreenRaw from './templates.html';\r\n// @ts-ignore\r\nimport openScreenRaw from './open.html';\r\n// @ts-ignore\r\nimport assetsScreenRaw from './assets.html';\r\n// @ts-ignore\r\nimport addAssetScreenRaw from './add-asset.html';\r\n// @ts-ignore\r\nimport snippetsScreenRaw from './snippets.html';\r\n// @ts-ignore\r\nimport addSnippetScreenRaw from './add-snippet.html';\r\n// @ts-ignore\r\nimport shareScreenRaw from './share.html';\r\n// @ts-ignore\r\nimport embedScreenRaw from './embed.html';\r\n// @ts-ignore\r\nimport editorSettingsScreenRaw from './editor-settings.html';\r\n// @ts-ignore\r\nimport resultPopupHTMLRaw from './result-popup.html';\r\n\r\nconst replaceValues = (str: string) =>\r\n  str\r\n    .replace(/{{APP_VERSION}}/g, process.env.VERSION || '')\r\n    .replace(/{{SDK_VERSION}}/g, process.env.SDK_VERSION || '')\r\n    .replace(/{{COMMIT_SHA}}/g, process.env.GIT_COMMIT || '')\r\n    .replace(/{{REPO_URL}}/g, process.env.REPO_URL || '')\r\n    .replace(/{{DOCS_BASE_URL}}/g, process.env.DOCS_BASE_URL || '');\r\n\r\nconst resultTemplate = replaceValues(resultTemplateRaw);\r\nconst appHTML = replaceValues(appHTMLRaw);\r\nconst settingsMenuHTML = replaceValues(settingsMenuHTMLRaw);\r\nconst languageInfo = replaceValues(languageInfoRaw);\r\nconst customSettingsScreen = replaceValues(customSettingsScreenRaw);\r\nconst testEditorScreen = replaceValues(testEditorScreenRaw);\r\nconst importScreen = replaceValues(importScreenRaw);\r\nconst deployScreen = replaceValues(deployScreenRaw);\r\nconst syncScreen = replaceValues(syncScreenRaw);\r\nconst backupScreen = replaceValues(backupScreenRaw);\r\nconst broadcastScreen = replaceValues(broadcastScreenRaw);\r\nconst welcomeScreen = replaceValues(welcomeScreenRaw);\r\nconst aboutScreen = replaceValues(aboutScreenRaw);\r\nconst infoScreen = replaceValues(infoScreenRaw);\r\nconst resourcesScreen = replaceValues(resourcesScreenRaw);\r\nconst loginScreen = replaceValues(loginScreenRaw);\r\nconst savePromptScreen = replaceValues(savePromptScreenRaw);\r\nconst recoverPromptScreen = replaceValues(recoverPromptScreenRaw);\r\nconst templatesScreen = replaceValues(templatesScreenRaw);\r\nconst openScreen = replaceValues(openScreenRaw);\r\nconst assetsScreen = replaceValues(assetsScreenRaw);\r\nconst addAssetScreen = replaceValues(addAssetScreenRaw);\r\nconst snippetsScreen = replaceValues(snippetsScreenRaw);\r\nconst addSnippetScreen = replaceValues(addSnippetScreenRaw);\r\nconst shareScreen = replaceValues(shareScreenRaw);\r\nconst embedScreen = replaceValues(embedScreenRaw);\r\nconst editorSettingsScreen = replaceValues(editorSettingsScreenRaw);\r\nconst resultPopupHTML = replaceValues(resultPopupHTMLRaw);\r\n\r\nexport {\r\n  resultTemplate,\r\n  appHTML,\r\n  settingsMenuHTML,\r\n  languageInfo,\r\n  customSettingsScreen,\r\n  testEditorScreen,\r\n  importScreen,\r\n  deployScreen,\r\n  syncScreen,\r\n  backupScreen,\r\n  broadcastScreen,\r\n  welcomeScreen,\r\n  aboutScreen,\r\n  infoScreen,\r\n  resourcesScreen,\r\n  loginScreen,\r\n  savePromptScreen,\r\n  recoverPromptScreen,\r\n  templatesScreen,\r\n  openScreen,\r\n  assetsScreen,\r\n  addAssetScreen,\r\n  snippetsScreen,\r\n  addSnippetScreen,\r\n  shareScreen,\r\n  embedScreen,\r\n  editorSettingsScreen,\r\n  resultPopupHTML,\r\n};\r\n", "import type { Config } from '../models';\r\nimport { downloadFile } from '../utils';\r\n\r\nexport const exportJSON = (config: Config) => {\r\n  const filename = config.title;\r\n  const extension = 'json';\r\n  const content =\r\n    'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(config, null, 2));\r\n  downloadFile(filename, extension, content);\r\n};\r\n", "import { getLanguageByAlias } from '../languages';\r\nimport type { Config, Template } from '../models';\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport { modulesService } from '../services/modules';\r\nimport { getAbsoluteUrl, objectMap } from '../utils';\r\n\r\nconst mapBaseUrl = (content: any, baseUrl: string) => {\r\n  const replaceUrl = (url: any) =>\r\n    url\r\n      .replace(/{{ __livecodes_baseUrl__ }}/g, getAbsoluteUrl(baseUrl))\r\n      .replace(/{{ __CDN_URL__ }}/g, modulesService.getUrl('~').replace('~', ''));\r\n\r\n  if (typeof content === 'string') {\r\n    return replaceUrl(content);\r\n  } else {\r\n    return {\r\n      ...content,\r\n      url: replaceUrl(content.url),\r\n    };\r\n  }\r\n};\r\n\r\nconst loadTemplates = async (baseUrl: string): Promise<Template[]> =>\r\n  (await import(baseUrl + '{{hash:templates.js}}')).starterTemplates;\r\n\r\n/**\r\n * get starter templates with languages that are enabled in the current config\r\n */\r\nexport const getStarterTemplates = async (config: Config, baseUrl: string): Promise<Template[]> =>\r\n  (await loadTemplates(baseUrl))\r\n    .filter((template) => {\r\n      const enabledLanguages = config.languages?.map(getLanguageByAlias).filter(Boolean);\r\n      if (!enabledLanguages) return true;\r\n      if (template.title === 'Blank Project') return true;\r\n\r\n      const templateLanguages = [\r\n        template.markup?.language,\r\n        template.style?.language,\r\n        template.script?.language,\r\n      ];\r\n      for (const language of templateLanguages) {\r\n        const lang = getLanguageByAlias(language);\r\n        if (!lang || !enabledLanguages.includes(lang)) return false;\r\n      }\r\n      return true;\r\n    })\r\n    .map((template) => ({\r\n      ...template,\r\n      markup: {\r\n        ...template.markup,\r\n        language: template.markup?.language || 'html',\r\n        content: mapBaseUrl(template.markup?.content || '', baseUrl),\r\n        ...(template.markup?.contentUrl\r\n          ? { contentUrl: mapBaseUrl(template.markup?.contentUrl || '', baseUrl) }\r\n          : {}),\r\n      },\r\n      style: {\r\n        ...template.style,\r\n        language: template.style?.language || 'css',\r\n        content: mapBaseUrl(template.style?.content || '', baseUrl),\r\n        ...(template.style?.contentUrl\r\n          ? { contentUrl: mapBaseUrl(template.style?.contentUrl || '', baseUrl) }\r\n          : {}),\r\n      },\r\n      script: {\r\n        ...template.script,\r\n        language: template.script?.language || 'javascript',\r\n        content: mapBaseUrl(template.script?.content || '', baseUrl),\r\n        ...(template.script?.contentUrl\r\n          ? { contentUrl: mapBaseUrl(template.script?.contentUrl || '', baseUrl) }\r\n          : {}),\r\n      },\r\n      imports: objectMap(template.imports || {}, (url) => mapBaseUrl(url || '', baseUrl)),\r\n      types: objectMap(template.types || {}, (url) => mapBaseUrl(url || '', baseUrl)),\r\n      stylesheets: template.stylesheets?.map((url) => mapBaseUrl(url || '', baseUrl)),\r\n      scripts: template.scripts?.map((url) => mapBaseUrl(url || '', baseUrl)),\r\n    }));\r\n\r\nexport const getTemplate = async (name: string, config: Config, baseUrl: string) =>\r\n  (await getStarterTemplates(config, baseUrl)).filter(\r\n    (template) => template.name.toLowerCase() === name.toLowerCase(),\r\n  )[0];\r\n", "import type { Config } from '../models';\r\n\r\nexport const defaultConfig: Config = {\r\n  title: 'Untitled Project',\r\n  description: '',\r\n  tags: [],\r\n  autoupdate: true,\r\n  autosave: false,\r\n  delay: 1500,\r\n  formatOnsave: false,\r\n  mode: 'full',\r\n  theme: 'dark',\r\n  recoverUnsaved: true,\r\n  showSpacing: false,\r\n  welcome: true,\r\n  readonly: false,\r\n  allowLangChange: true,\r\n  activeEditor: undefined,\r\n  languages: undefined,\r\n  markup: {\r\n    language: 'html',\r\n    content: '',\r\n  },\r\n  style: {\r\n    language: 'css',\r\n    content: '',\r\n  },\r\n  script: {\r\n    language: 'javascript',\r\n    content: '',\r\n  },\r\n  stylesheets: [],\r\n  scripts: [],\r\n  cssPreset: '',\r\n  imports: {},\r\n  types: {},\r\n  tests: {\r\n    language: 'typescript',\r\n    content: '',\r\n  },\r\n  tools: {\r\n    enabled: 'all',\r\n    active: '',\r\n    status: '',\r\n  },\r\n  zoom: 1,\r\n  processors: [],\r\n  customSettings: {},\r\n  editor: undefined,\r\n  fontFamily: undefined,\r\n  fontSize: undefined,\r\n  useTabs: false,\r\n  tabSize: 2,\r\n  lineNumbers: true,\r\n  wordWrap: false,\r\n  closeBrackets: true,\r\n  semicolons: true,\r\n  singleQuote: false,\r\n  trailingComma: true,\r\n  emmet: true,\r\n  editorMode: undefined,\r\n  version: process.env.VERSION as string,\r\n};\r\n", "import type {\r\n  EditorId,\r\n  Language,\r\n  Config,\r\n  Tool,\r\n  ToolsPaneStatus,\r\n  UrlQueryParams,\r\n  Processor,\r\n} from '../models';\r\nimport { getLanguageByAlias, getLanguageEditorId } from '../languages';\r\nimport { cloneObject, decodeHTML } from '../utils';\r\nimport { defaultConfig } from './default-config';\r\nimport { upgradeAndValidate } from '.';\r\n\r\nexport const buildConfig = (appConfig: Partial<Config>) => {\r\n  if (!appConfig) return { ...defaultConfig };\r\n\r\n  const userConfig = upgradeAndValidate(appConfig);\r\n\r\n  let config: Config = {\r\n    ...defaultConfig,\r\n    ...userConfig,\r\n    ...(userConfig.mode === 'result' && userConfig.tools == null\r\n      ? { tools: { enabled: [], active: '', status: 'none' } }\r\n      : {}),\r\n  };\r\n\r\n  // get query string params\r\n  const params = getParams();\r\n\r\n  const { version, ...paramsConfig } = upgradeAndValidate(loadParamConfig(config, params));\r\n\r\n  config = {\r\n    ...config,\r\n    ...paramsConfig,\r\n  };\r\n\r\n  const activeEditor = config.activeEditor || 'markup';\r\n\r\n  config = fixLanguageNames({\r\n    ...config,\r\n    activeEditor,\r\n  });\r\n\r\n  return config;\r\n};\r\n\r\nconst fixLanguageNames = (config: Config): Config => ({\r\n  ...config,\r\n  markup: {\r\n    ...config.markup,\r\n    language: getLanguageByAlias(config.markup.language) || defaultConfig.markup.language,\r\n  },\r\n  style: {\r\n    ...config.style,\r\n    language: getLanguageByAlias(config.style.language) || defaultConfig.style.language,\r\n  },\r\n  script: {\r\n    ...config.script,\r\n    language: getLanguageByAlias(config.script.language) || defaultConfig.script.language,\r\n  },\r\n  ...(config.tests?.language\r\n    ? {\r\n        tests: {\r\n          ...config.tests,\r\n          language:\r\n            getLanguageByAlias(config.tests.language) ||\r\n            defaultConfig.tests?.language ||\r\n            'typescript',\r\n        },\r\n      }\r\n    : {}),\r\n});\r\n\r\nexport const getParams = (queryParams = parent.location.search): UrlQueryParams => {\r\n  const params = Object.fromEntries(new URLSearchParams(queryParams) as unknown as Iterable<any>);\r\n  Object.keys(params).forEach((key) => {\r\n    try {\r\n      params[key] = decodeURIComponent(params[key]);\r\n    } catch {\r\n      //\r\n    }\r\n    if (params[key] === '') params[key] = true;\r\n    if (params[key] === 'true') params[key] = true;\r\n    if (params[key] === 'false') params[key] = false;\r\n  });\r\n  return params;\r\n};\r\n\r\nexport const loadParamConfig = (config: Config, params: UrlQueryParams): Partial<Config> => {\r\n  // ?js\r\n  // ?lang=js\r\n  // ?language=js\r\n  // ?css&js&md\r\n  // ?html=hi&scss&ls\r\n  // ?html=hi&scss=body{}&ts=//hi&lang=scss\r\n  // ?languages=html,md,css,scss,ts\r\n  // ?console\r\n  // ?tests=full\r\n\r\n  // initialize paramsConfig with defaultConfig keys and params values\r\n  const paramsConfig = ([...Object.keys(defaultConfig), ...[]] as Array<keyof Config>)\r\n    .filter((key) => key !== 'version')\r\n    .reduce(\r\n      (acc, key) => ({\r\n        ...acc,\r\n        [key]: params[key],\r\n      }),\r\n      {} as Partial<Config>,\r\n    );\r\n\r\n  // populate params config from query string params\r\n\r\n  // ?html=hi&scss&ts\r\n  (Object.keys(params) as Array<keyof UrlQueryParams>).forEach((key) => {\r\n    const language = getLanguageByAlias(key);\r\n    if (!language) return;\r\n    const editorId = getLanguageEditorId(language);\r\n    if (editorId && !paramsConfig[editorId]) {\r\n      const value = params[key];\r\n      const content = typeof value === 'string' ? decodeHTML(decodeURIComponent(value)) : '';\r\n      paramsConfig[editorId] = { language, content };\r\n      if (!paramsConfig.activeEditor) {\r\n        paramsConfig.activeEditor = editorId;\r\n      }\r\n    }\r\n  });\r\n\r\n  // ?lang=js\r\n  const lang: any = getLanguageByAlias(params.language || params.lang);\r\n  const editorId = getLanguageEditorId(lang);\r\n  if (editorId) {\r\n    if (paramsConfig[editorId]?.language === lang) {\r\n      paramsConfig.activeEditor = editorId;\r\n    } else if (!paramsConfig[editorId]?.content && config[editorId]?.language === lang) {\r\n      paramsConfig[editorId] = {\r\n        ...config[editorId],\r\n      };\r\n      paramsConfig.activeEditor = editorId;\r\n    } else if (!config[editorId]?.content) {\r\n      paramsConfig[editorId] = {\r\n        language: lang,\r\n        content: '',\r\n      };\r\n      paramsConfig.activeEditor = editorId;\r\n    }\r\n  }\r\n\r\n  const editorIds: EditorId[] = ['markup', 'style', 'script'];\r\n\r\n  // ?activeEditor=style\r\n  // ?active=1  (same as: ?activeEditor=style)\r\n  const paramsActiveEditor: any = params.activeEditor;\r\n  const paramsActive: any = params.active;\r\n  paramsConfig.activeEditor = editorIds.includes(paramsActiveEditor) // ?activeEditor=style\r\n    ? paramsActiveEditor\r\n    : paramsActiveEditor in editorIds // ?activeEditor=1\r\n    ? editorIds[paramsActiveEditor]\r\n    : editorIds.includes(paramsActive) // ?active=style\r\n    ? paramsActive\r\n    : paramsActive in editorIds // ?active=1\r\n    ? editorIds[paramsActive]\r\n    : paramsConfig.activeEditor;\r\n\r\n  // ?languages=html,md,css,ts\r\n  if (typeof params.languages === 'string') {\r\n    paramsConfig.languages = params.languages\r\n      .split(',')\r\n      .map((lang) => lang.trim())\r\n      .map(getLanguageByAlias)\r\n      .filter(Boolean) as Language[];\r\n  }\r\n\r\n  // ?processors=tailwindcss,autoprefixer\r\n  if (typeof params.processors === 'string') {\r\n    paramsConfig.processors = params.processors\r\n      .split(',')\r\n      .map((processor) => processor.trim())\r\n      .filter(Boolean) as Processor[];\r\n  }\r\n\r\n  // ?tags=js,advanced,proof-of-concept\r\n  if (typeof params.tags === 'string') {\r\n    paramsConfig.tags = params.tags\r\n      .split(',')\r\n      .map((tag) => tag.trim())\r\n      .filter(Boolean);\r\n  }\r\n\r\n  // ?stylesheets\r\n  if (typeof params.stylesheets === 'string') {\r\n    paramsConfig.stylesheets = params.stylesheets\r\n      .split(',')\r\n      .map((url) => url.trim())\r\n      .filter(Boolean);\r\n  }\r\n\r\n  // ?scripts\r\n  if (typeof params.scripts === 'string') {\r\n    paramsConfig.scripts = params.scripts\r\n      .split(',')\r\n      .map((url) => url.trim())\r\n      .filter(Boolean);\r\n  }\r\n\r\n  // ?tools=none\r\n  // ?tools=open\r\n  // ?console=open\r\n  // ?console (same as ?console=open)\r\n  // ?compiled=open&console=open\r\n  // ?console=none&compiled=open\r\n  // ?tools=tests,console|open\r\n  const allTools: Array<Tool['name']> = ['console', 'compiled', 'tests'];\r\n  const toolsNotSpecified =\r\n    !params.tools && allTools.map((t) => params[t]).filter(Boolean).length === 0;\r\n  const isToolsDisabled =\r\n    params.tools === 'none' ||\r\n    (params.tools as any) === false ||\r\n    params.mode === 'editor' ||\r\n    params.mode === 'codeblock' ||\r\n    (params.mode === 'result' && toolsNotSpecified);\r\n  if (isToolsDisabled) {\r\n    paramsConfig.tools = { enabled: [], active: '', status: 'none' };\r\n  } else if (toolsNotSpecified) {\r\n    // do not add\r\n  } else {\r\n    paramsConfig.tools = cloneObject(defaultConfig.tools);\r\n    let status: ToolsPaneStatus | undefined;\r\n\r\n    const [paramToolsList, paramToolsStatus] = params.tools?.split('|') || ['', ''];\r\n    const paramTools = paramToolsList\r\n      .split(',')\r\n      .map((t) => t.trim())\r\n      .filter((t) => allTools.includes(t as Tool['name'])) as Array<Tool['name']>;\r\n\r\n    if (paramTools.length > 0) {\r\n      paramsConfig.tools!.enabled = paramTools;\r\n      paramsConfig.tools!.active = paramTools[0];\r\n    }\r\n\r\n    const tools = Object.keys(params).filter((k) => allTools.includes(k as Tool['name'])) as Array<\r\n      Tool['name']\r\n    >;\r\n\r\n    tools.forEach((tool) => {\r\n      if (!paramsConfig.tools) return;\r\n\r\n      if ((params[tool] as any) === true) {\r\n        params[tool] = 'open';\r\n      }\r\n\r\n      if ((params[tool] as any) === false) {\r\n        params[tool] = 'none';\r\n      }\r\n\r\n      if (!status && ['open', 'full', 'closed'].includes(params[tool]!)) {\r\n        if (paramsConfig.tools.enabled !== 'all' && !paramsConfig.tools.enabled.includes(tool)) {\r\n          paramsConfig.tools.enabled.push(tool);\r\n        }\r\n        paramsConfig.tools.active = tool;\r\n        paramsConfig.tools.status = params[tool] as ToolsPaneStatus;\r\n        status = paramsConfig.tools.status;\r\n      }\r\n\r\n      if (params[tool] === 'none') {\r\n        if (paramsConfig.tools.enabled === 'all') {\r\n          paramsConfig.tools.enabled = [...allTools];\r\n        }\r\n        paramsConfig.tools.enabled = paramsConfig.tools.enabled.filter((t) => t !== tool);\r\n        if (paramsConfig.tools.active === tool) {\r\n          paramsConfig.tools.active = paramsConfig.tools.enabled[0];\r\n        }\r\n      }\r\n    });\r\n\r\n    if (['open', 'full', 'closed'].includes(params.tools!)) {\r\n      paramsConfig.tools!.status = params.tools as ToolsPaneStatus;\r\n    } else if (['open', 'full', 'closed'].includes(paramToolsStatus)) {\r\n      paramsConfig.tools!.status = paramToolsStatus as ToolsPaneStatus;\r\n    } else if (\r\n      !paramsConfig.tools?.status &&\r\n      ['editor', 'codeblock', 'result'].includes(paramsConfig.mode || '')\r\n    ) {\r\n      paramsConfig.tools = { enabled: [], active: '', status: 'none' };\r\n    } else if (!paramsConfig.tools!.status) {\r\n      paramsConfig.tools!.status = 'closed';\r\n    }\r\n  }\r\n\r\n  return paramsConfig;\r\n};\r\n", "import { getLanguageEditorId } from '../languages';\r\nimport type { Config, Processor } from '../models';\r\nimport { defaultConfig } from './default-config';\r\n\r\ninterface genericConfig extends Config {\r\n  [x: string]: any;\r\n}\r\n\r\nconst upgradeSteps = [\r\n  {\r\n    to: '0.6.0',\r\n    upgrade: (oldConfig: genericConfig, version: string): genericConfig => {\r\n      const config: genericConfig = clone(oldConfig);\r\n      if (config.processors && 'postcss' in config.processors) {\r\n        config.processors = Object.keys((config.processors as any).postcss).filter(\r\n          (p) => (config.processors as any).postcss[p],\r\n        ) as Processor[];\r\n      }\r\n      return {\r\n        ...config,\r\n        version,\r\n      };\r\n    },\r\n  },\r\n  {\r\n    to: '0.5.0',\r\n    upgrade: (oldConfig: genericConfig, version: string): genericConfig => {\r\n      const config: genericConfig = clone(oldConfig);\r\n      if ('editor' in config && config.editor === ('prism' as any)) {\r\n        config.editor = 'codejar';\r\n      }\r\n      if ('compiled' in config) {\r\n        config.tools = config.tools || clone(defaultConfig.tools);\r\n        config.tools.active = 'compiled';\r\n        config.tools.status = config.compiled;\r\n        delete config.compiled;\r\n      }\r\n      if ('console' in config) {\r\n        config.tools = config.tools || clone(defaultConfig.tools);\r\n        config.tools.active = 'console';\r\n        config.tools.status = config.console;\r\n        delete config.console;\r\n      }\r\n      if (config.script?.language === 'graph') {\r\n        config.script.language = 'diagrams';\r\n      }\r\n      if (config.languages?.includes('graph')) {\r\n        config.languages = config.languages.map((l) => (l === 'graph' ? 'diagrams' : l));\r\n      }\r\n      if ('enableRestore' in config) {\r\n        config.recoverUnsaved = config.enableRestore;\r\n        delete config.enableRestore;\r\n      }\r\n      return {\r\n        ...config,\r\n        version,\r\n      };\r\n    },\r\n  },\r\n  {\r\n    to: '0.4.0',\r\n    upgrade: (oldConfig: genericConfig, version: string): genericConfig => {\r\n      let config: genericConfig = clone(oldConfig);\r\n      config = renameProperty(config, 'update_delay', 'delay');\r\n      config = renameProperty(config, 'allow_lang_change', 'allowLangChange');\r\n      if ('autoprefixer' in config) {\r\n        config.processors = clone(defaultConfig.processors);\r\n        (config.processors as any).postcss = (config.processors as any).postcss || {};\r\n        (config.processors as any).postcss.autoprefixer = config.autoprefixer;\r\n        delete config.autoprefixer;\r\n      }\r\n      if ('baseUrl' in config) {\r\n        delete config.baseUrl;\r\n      }\r\n      if ('cssPreset' in config && config.cssPreset === null) {\r\n        config.cssPreset = '';\r\n      }\r\n      if ('editor' in config && typeof config.editor !== 'string') {\r\n        config.editor = undefined;\r\n      }\r\n      if ('language' in config) {\r\n        config.activeEditor = getLanguageEditorId(config.language);\r\n        delete config.language;\r\n      }\r\n\r\n      interface Module {\r\n        name: string;\r\n        url?: string;\r\n        typesUrl?: string;\r\n      }\r\n      if ('modules' in config) {\r\n        const imports = {\r\n          ...config.modules.reduce(\r\n            (acc: Record<string, string>, mod: Module) => ({\r\n              ...acc,\r\n              ...(mod.url ? { [mod.name]: mod.url } : {}),\r\n            }),\r\n            {} as Record<string, string>,\r\n          ),\r\n        };\r\n        if (Object.keys(imports).length > 0) {\r\n          config.imports = imports;\r\n        }\r\n\r\n        const types = {\r\n          ...config.modules.reduce(\r\n            (acc: Record<string, string>, mod: Module) => ({\r\n              ...acc,\r\n              ...(mod.typesUrl ? { [mod.name]: mod.typesUrl } : {}),\r\n            }),\r\n            {} as Record<string, string>,\r\n          ),\r\n        };\r\n        if (Object.keys(types).length > 0) {\r\n          config.types = types;\r\n        }\r\n        delete config.modules;\r\n      }\r\n      return {\r\n        ...config,\r\n        version,\r\n      };\r\n    },\r\n  },\r\n];\r\n\r\nexport const upgradeConfig = (oldConfig: genericConfig) => {\r\n  const oldVersion = isValidVersion(oldConfig.version) ? oldConfig.version : '0.0.0';\r\n  const currentVersion = defaultConfig.version;\r\n\r\n  if (isEarlier({ version: currentVersion, comparedTo: oldVersion })) {\r\n    // eslint-disable-next-line no-console\r\n    console.warn(\r\n      `Unsupported config version '${oldVersion}'. Current LiveCodes version is '${currentVersion}'`,\r\n    );\r\n    return oldConfig;\r\n  }\r\n  if (oldVersion === currentVersion) return oldConfig;\r\n\r\n  return {\r\n    ...upgradeSteps\r\n      .sort((a, b) => (isEarlier({ version: a.to, comparedTo: b.to }) ? -1 : 1))\r\n      .reduce(\r\n        (config, step) =>\r\n          isEarlier({ version: config.version, comparedTo: step.to })\r\n            ? step.upgrade(config, step.to)\r\n            : config,\r\n        oldConfig,\r\n      ),\r\n    version: currentVersion,\r\n  };\r\n};\r\n\r\nconst isValidVersion = (version: any) => {\r\n  if (typeof version !== 'string') return false;\r\n  const numbers = version.split('.');\r\n  if (numbers.length !== 3) return false;\r\n  if (numbers.map((n) => Number(n)).filter(isNaN).length !== 0) return false;\r\n  return true;\r\n};\r\n\r\nexport const isEarlier = ({ version, comparedTo }: { version: string; comparedTo: string }) => {\r\n  if (!version) return true;\r\n  const versionNumbers = version.split('.').map((n) => Number(n));\r\n  const comparedToNumbers = comparedTo.split('.').map((n) => Number(n));\r\n  for (const i in versionNumbers) {\r\n    if (versionNumbers[i] < comparedToNumbers[i]) return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nconst clone = (obj: any) => JSON.parse(JSON.stringify(obj));\r\n\r\nconst renameProperty = (obj: any, oldProp: string, newProp: string) => {\r\n  const { [oldProp]: _, ...newObj } = {\r\n    ...obj,\r\n    ...(oldProp in obj ? { [newProp]: obj[oldProp] } : {}),\r\n  };\r\n  return newObj;\r\n};\r\n", "import { getLanguageByAlias, getLanguageEditorId } from '../languages';\r\nimport type { Editor, Config, ToolsPaneStatus, EditorId, Tool } from '../models';\r\nimport { removeDuplicates } from '../utils';\r\nimport { defaultConfig } from './default-config';\r\n\r\nexport const validateConfig = (config: Partial<Config>): Partial<Config> => {\r\n  type types = 'array' | 'boolean' | 'object' | 'number' | 'string' | 'undefined';\r\n  const is = (x: any, type: types, arrayType?: types): boolean => {\r\n    if (type === 'array') {\r\n      if (!Array.isArray(x)) return false;\r\n      if (arrayType) {\r\n        return x.filter((l) => is(l, arrayType)).length > 0;\r\n      }\r\n      return true;\r\n    }\r\n    if (type === 'object') {\r\n      return x && typeof x === type;\r\n    }\r\n    if (type === 'number' && !isNaN(Number(x))) {\r\n      return true;\r\n    }\r\n    return typeof x === type;\r\n  };\r\n\r\n  const includes = (arr: any[], x: any) => x != null && arr.includes(x);\r\n\r\n  const modes: Array<Config['mode']> = ['full', 'editor', 'codeblock', 'result'];\r\n  const themes: Array<Config['theme']> = ['light', 'dark'];\r\n  const editorModes: Array<Config['editorMode']> = ['vim', 'emacs'];\r\n  const tools: Array<Tool['name']> = ['console', 'compiled', 'tests'];\r\n  const toolsPaneStatus: ToolsPaneStatus[] = ['', 'full', 'closed', 'open', 'none'];\r\n  const editors: Array<Config['editor']> = ['monaco', 'codemirror', 'codejar'];\r\n  const editorIds: EditorId[] = ['markup', 'style', 'script'];\r\n  const zoomLevels: Array<Config['zoom']> = [1, 0.5, 0.25];\r\n\r\n  const isEditor = (x: any) =>\r\n    is(x, 'object') &&\r\n    (is(x.language, 'string') || is(x.content, 'string') || is(x.contentUrl, 'string'));\r\n\r\n  const validateEditorProps = (x: Editor, editorId: EditorId): Editor => ({\r\n    language:\r\n      getLanguageEditorId(x.language) === editorId\r\n        ? getLanguageByAlias(x.language) || defaultConfig[editorId].language\r\n        : defaultConfig[editorId].language,\r\n    ...(is(x.content, 'string') ? { content: x.content } : {}),\r\n    ...(is(x.contentUrl, 'string') ? { contentUrl: x.contentUrl } : {}),\r\n    ...(is(x.selector, 'string') ? { selector: x.selector } : {}),\r\n  });\r\n\r\n  const validateTestsProps = (x: Partial<Config['tests']>): Partial<Config['tests']> => ({\r\n    ...(x && is(x.language, 'string') ? { language: x.language } : {}),\r\n    ...(x && is(x.content, 'string') ? { content: x.content } : {}),\r\n    ...(x && is(x.contentUrl, 'string') ? { contentUrl: x.contentUrl } : {}),\r\n    ...(x && is(x.selector, 'string') ? { selector: x.selector } : {}),\r\n  });\r\n\r\n  const validateToolsProps = (x: Partial<Config['tools']>): Config['tools'] => ({\r\n    ...defaultConfig.tools,\r\n    ...(x && Array.isArray(x.enabled)\r\n      ? { enabled: x.enabled.filter((t) => tools.includes(t)) }\r\n      : {\r\n          ...(x && x.enabled == null && x.status === 'none'\r\n            ? { enabled: [] }\r\n            : { enabled: defaultConfig.tools.enabled }),\r\n        }),\r\n    ...(x &&\r\n    x.active != null &&\r\n    includes(tools, x.active) &&\r\n    (typeof x.enabled === 'string' ||\r\n      x.enabled == null ||\r\n      (Array.isArray(x.enabled) && includes(x.enabled, x.active)))\r\n      ? { active: x.active }\r\n      : { active: defaultConfig.tools.active }),\r\n    ...(x && x.status != null && includes(toolsPaneStatus, x.status)\r\n      ? { status: x.status }\r\n      : { status: defaultConfig.tools.status }),\r\n  });\r\n\r\n  return {\r\n    ...(is(config.title, 'string') ? { title: config.title } : {}),\r\n    ...(is(config.description, 'string') ? { description: config.description } : {}),\r\n    ...(is(config.tags, 'array', 'string') ? { tags: removeDuplicates(config.tags) } : {}),\r\n    ...(is(config.autoupdate, 'boolean') ? { autoupdate: config.autoupdate } : {}),\r\n    ...(is(config.autosave, 'boolean') ? { autosave: config.autosave } : {}),\r\n    ...(is(config.delay, 'number') ? { delay: Number(config.delay) } : {}),\r\n    ...(is(config.formatOnsave, 'boolean') ? { formatOnsave: config.formatOnsave } : {}),\r\n    ...(includes(modes, config.mode) ? { mode: config.mode } : {}),\r\n    ...(includes(themes, config.theme) ? { theme: config.theme } : {}),\r\n    ...(is(config.recoverUnsaved, 'boolean') ? { recoverUnsaved: config.recoverUnsaved } : {}),\r\n    ...(is(config.welcome, 'boolean') ? { welcome: config.welcome } : {}),\r\n    ...(is(config.showSpacing, 'boolean') ? { showSpacing: config.showSpacing } : {}),\r\n    ...(is(config.readonly, 'boolean') ? { readonly: config.readonly } : {}),\r\n    ...(is(config.allowLangChange, 'boolean') ? { allowLangChange: config.allowLangChange } : {}),\r\n    ...(includes(editorIds, config.activeEditor) ? { activeEditor: config.activeEditor } : {}),\r\n    ...(is(config.languages, 'array', 'string')\r\n      ? { languages: removeDuplicates(config.languages) }\r\n      : {}),\r\n    ...(isEditor(config.markup)\r\n      ? { markup: validateEditorProps(config.markup as Editor, 'markup') }\r\n      : {}),\r\n    ...(isEditor(config.style)\r\n      ? { style: validateEditorProps(config.style as Editor, 'style') }\r\n      : {}),\r\n    ...(isEditor(config.script)\r\n      ? { script: validateEditorProps(config.script as Editor, 'script') }\r\n      : {}),\r\n    ...(is(config.tools, 'object')\r\n      ? { tools: validateToolsProps(config.tools as Config['tools']) }\r\n      : {}),\r\n    ...(is(config.tests, 'object')\r\n      ? { tests: validateTestsProps(config.tests as Partial<Editor>) }\r\n      : {}),\r\n    ...(includes(zoomLevels, Number(config.zoom))\r\n      ? { zoom: Number(config.zoom) as Config['zoom'] }\r\n      : {}),\r\n    ...(is(config.stylesheets, 'array', 'string')\r\n      ? { stylesheets: removeDuplicates(config.stylesheets) }\r\n      : {}),\r\n    ...(is(config.scripts, 'array', 'string') ? { scripts: removeDuplicates(config.scripts) } : {}),\r\n    ...(is(config.cssPreset, 'string') ? { cssPreset: config.cssPreset } : {}),\r\n    ...(is(config.processors, 'array', 'string')\r\n      ? { processors: removeDuplicates(config.processors) }\r\n      : {}),\r\n    ...(is(config.customSettings, 'object') ? { customSettings: config.customSettings } : {}),\r\n    ...(includes(editors, config.editor) ? { editor: config.editor } : {}),\r\n    ...(is(config.fontFamily, 'string') ? { fontFamily: config.fontFamily } : {}),\r\n    ...(is(config.fontSize, 'number') ? { fontSize: Number(config.fontSize) } : {}),\r\n    ...(is(config.useTabs, 'boolean') ? { useTabs: config.useTabs } : {}),\r\n    ...(is(config.tabSize, 'number') ? { tabSize: Number(config.tabSize) } : {}),\r\n    ...(is(config.lineNumbers, 'boolean') ? { lineNumbers: config.lineNumbers } : {}),\r\n    ...(is(config.wordWrap, 'boolean') ? { wordWrap: config.wordWrap } : {}),\r\n    ...(is(config.closeBrackets, 'boolean') ? { closeBrackets: config.closeBrackets } : {}),\r\n    ...(is(config.semicolons, 'boolean') ? { semicolons: config.semicolons } : {}),\r\n    ...(is(config.singleQuote, 'boolean') ? { singleQuote: config.singleQuote } : {}),\r\n    ...(is(config.trailingComma, 'boolean') ? { trailingComma: config.trailingComma } : {}),\r\n    ...(is(config.emmet, 'boolean') ? { emmet: config.emmet } : {}),\r\n    ...(includes(editorModes, config.editorMode) ? { editorMode: config.editorMode } : {}),\r\n    ...(is(config.imports, 'object') ? { imports: config.imports } : {}),\r\n    ...(is(config.types, 'object') ? { types: config.types } : {}),\r\n    ...(is(config.version, 'string') ? { version: config.version } : {}),\r\n  };\r\n};\r\n", "import type { ContentConfig, Config, UserConfig, EditorConfig, FormatterConfig } from '../models';\r\nimport { cloneObject } from '../utils';\r\nimport { defaultConfig } from './default-config';\r\nimport { upgradeConfig } from './upgrade-config';\r\nimport { validateConfig } from './validate-config';\r\n\r\nlet appConfig = defaultConfig;\r\nexport const getConfig = (): Config => cloneObject(appConfig);\r\n\r\nexport const setConfig = (newConfig: Config) => {\r\n  appConfig = cloneObject(newConfig);\r\n};\r\n\r\nexport const getContentConfig = (config: Config | ContentConfig): ContentConfig =>\r\n  cloneObject({\r\n    title: config.title,\r\n    description: config.description,\r\n    tags: config.tags,\r\n    activeEditor: config.activeEditor,\r\n    languages: config.languages,\r\n    markup: config.markup,\r\n    style: config.style,\r\n    script: config.script,\r\n    stylesheets: config.stylesheets,\r\n    scripts: config.scripts,\r\n    cssPreset: config.cssPreset,\r\n    processors: config.processors,\r\n    customSettings: config.customSettings,\r\n    imports: config.imports,\r\n    types: config.types,\r\n    tests: config.tests,\r\n    version: config.version,\r\n  });\r\n\r\nexport const getUserConfig = (config: Config | UserConfig): UserConfig => ({\r\n  autoupdate: config.autoupdate,\r\n  autosave: config.autosave,\r\n  delay: config.delay,\r\n  formatOnsave: config.formatOnsave,\r\n  recoverUnsaved: config.recoverUnsaved,\r\n  welcome: config.welcome,\r\n  showSpacing: config.showSpacing,\r\n  theme: config.theme,\r\n  ...getEditorConfig(config),\r\n  ...getFormatterConfig(config),\r\n});\r\n\r\nexport const getEditorConfig = (config: Config | UserConfig): EditorConfig => ({\r\n  editor: config.editor ?? ((config as Config).readonly === true ? 'codejar' : undefined),\r\n  fontFamily: config.fontFamily,\r\n  fontSize: config.fontSize,\r\n  useTabs: config.useTabs,\r\n  tabSize: config.tabSize,\r\n  lineNumbers: config.lineNumbers,\r\n  wordWrap: config.wordWrap,\r\n  closeBrackets: config.closeBrackets,\r\n  emmet: config.emmet,\r\n  editorMode: config.editorMode,\r\n});\r\n\r\nexport const getFormatterConfig = (config: Config | UserConfig): FormatterConfig => ({\r\n  useTabs: config.useTabs,\r\n  tabSize: config.tabSize,\r\n  semicolons: config.semicolons,\r\n  singleQuote: config.singleQuote,\r\n  trailingComma: config.trailingComma,\r\n});\r\n\r\nexport const upgradeAndValidate = (config: Partial<Config>) =>\r\n  validateConfig(upgradeConfig(config as any));\r\n", "import { languages, getLanguageByAlias, getLanguageEditorId } from '../languages';\r\nimport type { EditorId, Language, Config } from '../models';\r\n\r\nexport interface SourceFile {\r\n  filename: string;\r\n  content: string;\r\n  language?: Language;\r\n  editorId?: EditorId;\r\n}\r\n\r\nexport interface FileData {\r\n  rawURL: string;\r\n  extension: Language;\r\n  startLine: number;\r\n  endLine: number;\r\n}\r\n\r\nexport const getValidUrl = (url: string) => {\r\n  try {\r\n    return url.startsWith('https://') ? new URL(url) : new URL('https://' + url);\r\n  } catch (error) {\r\n    return;\r\n  }\r\n};\r\n\r\nexport const populateConfig = (files: SourceFile[], params: { [key: string]: string }) => {\r\n  if (files.length === 0) return {};\r\n\r\n  // select files based on language in query params (e.g. ?html=index.html&js=script.js)\r\n  const languagesInParams = Object.keys(params).some(getLanguageByAlias);\r\n  if (languagesInParams) {\r\n    return Object.keys(params).reduce((output: Partial<Config>, param: string) => {\r\n      const language = getLanguageByAlias(param);\r\n      if (!language) return output;\r\n      const file = files.find((file) => file?.filename === params[param]);\r\n      if (!file) return output;\r\n\r\n      const editorId = getLanguageEditorId(language);\r\n      if (!editorId || output[editorId]) return output;\r\n\r\n      return {\r\n        ...output,\r\n        [editorId]: {\r\n          language,\r\n          content: file.content,\r\n        },\r\n      };\r\n    }, {} as Partial<Config>);\r\n  }\r\n\r\n  // select languages from files\r\n  const code = files\r\n    .map((file) => {\r\n      const extension = file.filename.split('.')[file.filename.split('.').length - 1];\r\n      const language: Language = file.language || getLanguageByAlias(extension) || 'html';\r\n      const editorId = file.editorId || getLanguageEditorId(language) || 'markup';\r\n      return {\r\n        ...file,\r\n        language,\r\n        editorId,\r\n      };\r\n    })\r\n    .sort((a, b) => {\r\n      if (\r\n        // put default files first\r\n        a.editorId === b.editorId &&\r\n        ((a.editorId === 'markup' && a.filename.toLowerCase().startsWith('index.')) ||\r\n          (a.editorId === 'style' && a.filename.toLowerCase().startsWith('style.')) ||\r\n          (a.editorId === 'script' && a.filename.toLowerCase().startsWith('script.')))\r\n      ) {\r\n        return -1;\r\n      }\r\n      if (\r\n        // put default files first\r\n        a.editorId === b.editorId &&\r\n        ((b.editorId === 'markup' && b.filename.toLowerCase().startsWith('index.')) ||\r\n          (b.editorId === 'style' && b.filename.toLowerCase().startsWith('style.')) ||\r\n          (b.editorId === 'script' && b.filename.toLowerCase().startsWith('script.')))\r\n      ) {\r\n        return 1;\r\n      }\r\n      if (\r\n        // put readme last\r\n        a.editorId === b.editorId &&\r\n        a.editorId === 'markup'\r\n      ) {\r\n        if (a.filename.toLowerCase().startsWith('readme')) return 1;\r\n        if (b.filename.toLowerCase().startsWith('readme')) return -1;\r\n      }\r\n      if (a.language === b.language) {\r\n        // if same language, sort by filename\r\n        return a.filename.localeCompare(b.filename);\r\n      }\r\n      return (\r\n        // then sort by language\r\n        languages.findIndex((language) => language.name === a.language) -\r\n        languages.findIndex((language) => language.name === b.language)\r\n      );\r\n    })\r\n    .reduce((output: Partial<Config>, file) => {\r\n      // tests\r\n      if (file.filename.toLowerCase().match(new RegExp('.(test|spec)\\\\.[jt]sx?'))) {\r\n        if (output.tests?.content) return output;\r\n        return {\r\n          ...output,\r\n          tests: {\r\n            language: file.language,\r\n            content: file.content,\r\n          },\r\n        };\r\n      }\r\n\r\n      // code\r\n      if (!file.editorId || output[file.editorId]) return output;\r\n      return {\r\n        ...output,\r\n        [file.editorId]: {\r\n          language: file.language,\r\n          content: file.content,\r\n        },\r\n      };\r\n    }, {} as Partial<Config>);\r\n\r\n  // extract external styles and scripts\r\n  const stylesheets: string[] = [];\r\n  const stylesFile = files.find((file) => file.filename === 'styles');\r\n  if (stylesFile?.content) {\r\n    try {\r\n      const urls: string[] = [];\r\n      const domparser = new DOMParser();\r\n      const doc = domparser.parseFromString(stylesFile.content, 'text/html');\r\n      doc.querySelectorAll<HTMLLinkElement>('link[rel=\"stylesheet\"]').forEach((stylesheet) => {\r\n        urls.push(stylesheet.href);\r\n      });\r\n      if (urls.length === 0) {\r\n        stylesFile.content\r\n          .trim()\r\n          .split('\\n')\r\n          .forEach((line) => {\r\n            urls.push(line);\r\n          });\r\n      }\r\n      urls.forEach((url) => {\r\n        try {\r\n          stylesheets.push(new URL(url).href);\r\n        } catch (error) {\r\n          // not url\r\n        }\r\n      });\r\n    } catch (error) {\r\n      // not DOM\r\n    }\r\n  }\r\n\r\n  const scripts: string[] = [];\r\n  const scriptsFile = files.find((file) => file.filename === 'scripts');\r\n  if (scriptsFile?.content) {\r\n    try {\r\n      const urls: string[] = [];\r\n      const domparser = new DOMParser();\r\n      const doc = domparser.parseFromString(scriptsFile.content, 'text/html');\r\n      doc.querySelectorAll('script').forEach((script) => {\r\n        urls.push(script.src);\r\n      });\r\n      if (urls.length === 0) {\r\n        scriptsFile.content\r\n          .trim()\r\n          .split('\\n')\r\n          .forEach((line) => {\r\n            urls.push(line);\r\n          });\r\n      }\r\n      urls.forEach((url) => {\r\n        try {\r\n          scripts.push(new URL(url).href);\r\n        } catch (error) {\r\n          // not url\r\n        }\r\n      });\r\n    } catch (error) {\r\n      // not DOM\r\n    }\r\n  }\r\n  return {\r\n    ...code,\r\n    stylesheets,\r\n    scripts,\r\n  };\r\n};\r\n\r\nexport const hostPatterns = {\r\n  github: /^(?:(?:http|https):\\/\\/)?github.com\\/(?:.*)/g,\r\n  githubGist: /^(?:(?:http|https):\\/\\/)?gist.github.com(?:\\/\\S*)?\\/(\\w+)/g,\r\n  gitlab: /^(?:(?:http|https):\\/\\/)?gitlab.com\\/(?:.*)/g,\r\n  codepen: /^(?:(?:http|https):\\/\\/)?codepen.io\\/(\\w+)\\/pen\\/(\\w+)/g,\r\n  jsbin: /^(?:(?:(?:http|https):\\/\\/)?(?:\\w+.)?)?jsbin.com\\/((\\w)+(\\/\\d)?)(?:.*)/g,\r\n};\r\n", "import type { User } from '../models';\n// eslint-disable-next-line import/no-internal-modules\nimport { getGithubHeaders } from '../services/github';\nimport { hostPatterns, populateConfig } from './utils';\n\nexport const isGithubDir = (url: string, pattern = new RegExp(hostPatterns.github)) => {\n  if (!pattern.test(url)) return;\n  try {\n    const urlObj = getValidUrl(url);\n    const pathSplit = urlObj.pathname.split('/');\n    return pathSplit[3] === 'tree' || pathSplit.length === 3;\n  } catch (error) {\n    return;\n  }\n};\nconst getValidUrl = (url: string) =>\n  url.startsWith('https://') ? new URL(url) : new URL('https://' + url);\n\nexport const importFromGithubDir = async (\n  url: string,\n  params: { [key: string]: string },\n  loggedInUser: User | null | void,\n) => {\n  try {\n    const urlObj = url.startsWith('https://') ? new URL(url) : new URL('https://' + url);\n\n    const pathSplit = urlObj.pathname.split('/');\n    const rootDir = pathSplit.length === 3;\n    const user = pathSplit[1];\n    const repository = pathSplit[2];\n\n    let branch: string;\n    let dir = '';\n    if (rootDir) {\n      branch = await fetch(`https://api.github.com/repos/${user}/${repository}`, {\n        ...(loggedInUser ? { headers: getGithubHeaders(loggedInUser) } : {}),\n      })\n        .then((res) => res.json())\n        .then((data) => data.default_branch);\n    } else {\n      branch = pathSplit[4];\n      dir = pathSplit.slice(5, pathSplit.length).join('/');\n    }\n    const apiURL = `https://api.github.com/repos/${user}/${repository}/git/trees/${branch}?recursive=true`;\n\n    const tree = await fetch(apiURL, {\n      ...(loggedInUser ? { headers: getGithubHeaders(loggedInUser) } : {}),\n    })\n      .then((res) => res.json())\n      .then((data) => data.tree);\n\n    const dirFiles = tree.filter((node: any) =>\n      rootDir\n        ? node.type === 'blob'\n        : node.type === 'blob' &&\n          node.path.startsWith(dir) &&\n          node.path.split('/').length === dir.split('/').length + 1,\n    );\n\n    const files = await Promise.all(\n      Object.values(dirFiles).map(async (file: any) => {\n        const filename = file.path.split('/')[file.path.split('/').length - 1];\n        const content = atob(\n          await fetch(file.url, {\n            ...(loggedInUser ? { headers: getGithubHeaders(loggedInUser) } : {}),\n          })\n            .then((res) => res.json())\n            .then((data) => data.content),\n        );\n\n        return {\n          filename,\n          content,\n        };\n      }),\n    );\n\n    return populateConfig(files, params);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error('Cannot fetch directory: ' + url);\n    // eslint-disable-next-line no-console\n    console.error(error);\n    return {};\n  }\n};\n", "import { getLanguageByAlias, getLanguageEditorId } from '../languages';\r\nimport type { Language, Config, User } from '../models';\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport { getGithubHeaders } from '../services/github';\r\nimport { isGithubDir } from './github-dir';\r\nimport { hostPatterns } from './utils';\r\n\r\nexport const isGithubUrl = (url: string, pattern = new RegExp(hostPatterns.github)) => {\r\n  if (!pattern.test(url)) return;\r\n  try {\r\n    const urlObj = getValidUrl(url);\r\n    const pathSplit = urlObj.pathname.split('/');\r\n    return pathSplit[3] === 'blob';\r\n  } catch (error) {\r\n    return;\r\n  }\r\n};\r\n\r\nexport const isGithub = (url: string) => isGithubDir(url) || isGithubUrl(url);\r\n\r\nconst getValidUrl = (url: string) =>\r\n  url.startsWith('https://') ? new URL(url) : new URL('https://' + url);\r\n\r\n// based on https://github.com/yusanshi/embed-like-gist\r\nconst getFileData = (urlObj: URL): FileData => {\r\n  const pathSplit = urlObj.pathname.split('/');\r\n  const user = pathSplit[1];\r\n  const repo = pathSplit[2];\r\n  const ref = pathSplit[4];\r\n  const filePath = pathSplit.slice(5, pathSplit.length).join('/');\r\n  const filename = filePath.split('/')[filePath.split('/').length - 1];\r\n  const extension = (filename.split('.')[filename.split('.').length - 1] || 'md') as Language;\r\n  const lineSplit = urlObj.hash.split('-');\r\n  const startLine = urlObj.hash !== '' ? Number(lineSplit[0].replace('#L', '')) : -1;\r\n  const endLine =\r\n    urlObj.hash !== '' && lineSplit.length > 1 ? Number(lineSplit[1].replace('L', '')) : startLine;\r\n  const apiUrl = `https://api.github.com/repos/${user}/${repo}/contents/${filePath}?ref=${ref}`;\r\n  return {\r\n    user,\r\n    repo,\r\n    ref,\r\n    path: filePath,\r\n    filename,\r\n    extension,\r\n    startLine,\r\n    endLine,\r\n    apiUrl,\r\n  };\r\n};\r\n\r\ninterface FileData {\r\n  user: string;\r\n  repo: string;\r\n  ref: string;\r\n  path: string;\r\n  filename: string;\r\n  extension: Language;\r\n  startLine: number;\r\n  endLine: number;\r\n  apiUrl: string;\r\n}\r\n\r\nconst getContent = async (\r\n  fileData: FileData,\r\n  loggedInUser: User | null | void,\r\n): Promise<Partial<Config>> => {\r\n  const { apiUrl, extension, startLine, endLine } = fileData;\r\n  try {\r\n    const fileContent = await fetch(apiUrl, {\r\n      ...(loggedInUser ? { headers: getGithubHeaders(loggedInUser) } : {}),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => atob(data.content));\r\n    const content =\r\n      startLine > 0\r\n        ? fileContent\r\n            .split('\\n')\r\n            .slice(startLine - 1, endLine)\r\n            .join('\\n')\r\n        : fileContent;\r\n    const language = getLanguageByAlias(extension) || 'html';\r\n    const editorId = getLanguageEditorId(language) || 'markup';\r\n    return {\r\n      [editorId]: {\r\n        language,\r\n        content,\r\n      },\r\n      activeEditor: editorId,\r\n    };\r\n  } catch (error) {\r\n    // eslint-disable-next-line no-console\r\n    console.error('Cannot fetch: ' + apiUrl);\r\n    return {};\r\n  }\r\n};\r\n\r\nexport const importFromGithub = (\r\n  url: string,\r\n  loggedInUser: User | null | void,\r\n): Promise<Partial<Config>> => {\r\n  const validUrl = getValidUrl(url);\r\n  const fileData = getFileData(validUrl);\r\n  return getContent(fileData, loggedInUser);\r\n};\r\n", "import { getImports } from '../compiler';\r\nimport type { EditorLibrary, Types } from '../models';\r\nimport { typesService } from '../services';\r\nimport { objectFilter } from '../utils';\r\n\r\nexport const createTypeLoader = () => {\r\n  let loadedTypes: Types = {};\r\n\r\n  const getTypeContents = async (type: Types): Promise<EditorLibrary> => {\r\n    let content = '';\r\n    const name = Object.keys(type)[0];\r\n    const value = Object.values(type)[0];\r\n    const url = typeof value === 'string' ? value : value.url;\r\n    const declareAsModule = typeof value === 'string' || value.declareAsModule === true;\r\n    if (url) {\r\n      try {\r\n        const res = await fetch(url);\r\n        const dts = await res.text();\r\n        content = declareAsModule ? `declare module '${name}' {${dts}}` : dts;\r\n      } catch {\r\n        content = `declare module '${name}': any`;\r\n      }\r\n    }\r\n    loadedTypes = { ...loadedTypes, ...type };\r\n    return {\r\n      filename: `file:///node_modules/${name}/index.d.ts`,\r\n      content,\r\n    };\r\n  };\r\n\r\n  const loadTypes = (types: Types) =>\r\n    Promise.all(Object.keys(types).map((t) => getTypeContents({ [t]: types[t] })));\r\n\r\n  const load = async (code: string, configTypes: Types, forceLoad = false) => {\r\n    const imports = getImports(code);\r\n\r\n    const codeTypes: Types = imports.reduce((accTypes, lib) => {\r\n      let currentType: Types;\r\n      const loaded =\r\n        Object.keys(loadedTypes).find((t) => lib === t) ||\r\n        (Object.keys(loadedTypes).find((t) => lib.startsWith(t + '/')) &&\r\n          !Object.keys(configTypes).find((t) => lib === t));\r\n      const fromConfig =\r\n        Object.keys(configTypes).find((t) => lib === t) ||\r\n        Object.keys(configTypes).find((t) => lib.startsWith(t + '/'));\r\n      if (loaded && !forceLoad) {\r\n        currentType = {};\r\n      } else if (fromConfig) {\r\n        currentType = { [fromConfig]: configTypes[fromConfig] };\r\n      } else {\r\n        currentType = { [lib]: '' };\r\n      }\r\n      return {\r\n        ...accTypes,\r\n        ...currentType,\r\n      };\r\n    }, {} as Types);\r\n\r\n    const typesToGet = Object.keys(codeTypes).filter((key) => codeTypes[key] === '');\r\n    const fetchedTypes = await typesService.getTypeUrls(typesToGet);\r\n\r\n    const autoloadTypes: Types = objectFilter(\r\n      configTypes,\r\n      (value, key) =>\r\n        (!Object.keys(loadedTypes).includes(key) || forceLoad) &&\r\n        typeof value !== 'string' &&\r\n        value.autoload === true,\r\n    );\r\n\r\n    return loadTypes({ ...codeTypes, ...fetchedTypes, ...autoloadTypes });\r\n  };\r\n\r\n  return {\r\n    load,\r\n  };\r\n};\r\n", "import { chaiUrl, vendorsBaseUrl } from '../vendors';\n\nexport const testImports = {\n  '@testing-library/dom': vendorsBaseUrl + '@testing-library/dom.js',\n  '@testing-library/jest-dom': vendorsBaseUrl + '@testing-library/jest-dom.js',\n  '@testing-library/react': vendorsBaseUrl + '@testing-library/react.js',\n  chai: chaiUrl,\n};\n", "import {\r\n  createImportMap,\r\n  createCSSModulesImportMap,\r\n  getImports,\r\n  hasImports,\r\n  isModuleScript,\r\n} from '../compiler';\r\nimport { cssPresets, getLanguageCompiler, getLanguageExtension } from '../languages';\r\nimport type { Cache, EditorId, Config, CompileInfo } from '../models';\r\nimport { getAppCDN, modulesService } from '../services';\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport { testImports } from '../toolspane/test-imports';\r\nimport { escapeScript, getAbsoluteUrl, isRelativeUrl, objectMap } from '../utils';\r\nimport { esModuleShimsPath, jestLiteUrl, spacingJsUrl } from '../vendors';\r\n\r\nexport const createResultPage = async ({\r\n  code,\r\n  config,\r\n  forExport,\r\n  template,\r\n  baseUrl,\r\n  singleFile,\r\n  runTests,\r\n  compileInfo,\r\n}: {\r\n  code: Cache;\r\n  config: Config;\r\n  forExport: boolean;\r\n  template: string;\r\n  baseUrl: string;\r\n  singleFile: boolean;\r\n  runTests: boolean;\r\n  compileInfo: CompileInfo;\r\n}): Promise<string> => {\r\n  const absoluteBaseUrl = getAbsoluteUrl(baseUrl);\r\n\r\n  const domParser = new DOMParser();\r\n  const dom = domParser.parseFromString(template, 'text/html');\r\n\r\n  // if export => clean, else => add utils\r\n  if (forExport) {\r\n    dom.querySelector('script')?.remove();\r\n  } else {\r\n    const utilsScript = dom.createElement('script');\r\n    utilsScript.src = absoluteBaseUrl + '{{hash:result-utils.js}}';\r\n    dom.head.appendChild(utilsScript);\r\n  }\r\n\r\n  // title\r\n  dom.title = config.title;\r\n\r\n  // html classes\r\n  if (config.customSettings.htmlClasses) {\r\n    dom.documentElement.classList.add(...config.customSettings.htmlClasses.split(' '));\r\n  }\r\n\r\n  // head content\r\n  if (config.customSettings.head) {\r\n    dom.head.innerHTML += config.customSettings.head;\r\n  }\r\n\r\n  // CSS Preset\r\n  if (config.cssPreset) {\r\n    const presetUrl = cssPresets.find((preset) => preset.id === config.cssPreset)?.url;\r\n    if (presetUrl) {\r\n      const cssPreset = dom.createElement('link');\r\n      cssPreset.rel = 'stylesheet';\r\n      cssPreset.id = '__livecodes__css-preset';\r\n      cssPreset.href = getAbsoluteUrl(presetUrl, absoluteBaseUrl);\r\n      dom.head.appendChild(cssPreset);\r\n    }\r\n  }\r\n\r\n  // external stylesheets\r\n  config.stylesheets.forEach((url) => {\r\n    const stylesheet = dom.createElement('link');\r\n    stylesheet.rel = 'stylesheet';\r\n    stylesheet.href = url;\r\n    dom.head.appendChild(stylesheet);\r\n  });\r\n\r\n  // editor styles\r\n  if (singleFile) {\r\n    const style = code.style.compiled;\r\n    const styleElement = dom.createElement('style');\r\n    styleElement.id = '__livecodes_styles__';\r\n    styleElement.innerHTML = style;\r\n    dom.head.appendChild(styleElement);\r\n  } else {\r\n    const EditorStylesheet = dom.createElement('link');\r\n    EditorStylesheet.rel = 'stylesheet';\r\n    EditorStylesheet.href = './style.css';\r\n    dom.head.appendChild(EditorStylesheet);\r\n  }\r\n\r\n  // editor markup\r\n  const markup = code.markup.compiled;\r\n  dom.body.innerHTML += markup;\r\n\r\n  // cleanup custom configurations and scripts\r\n  if (code.script.language === 'blockly') {\r\n    const extra = dom.querySelectorAll(\r\n      'script[type=\"blockly/script\"], script[data-type=\"blockly/script\"], xml[type=\"blockly/xml\"], xml[data-type=\"blockly/xml\"]',\r\n    );\r\n    extra.forEach((el) => el.remove());\r\n  }\r\n\r\n  // runtime styles & scripts\r\n  const runtimeDependencies = (['markup', 'style', 'script'] as EditorId[]).map(\r\n    (editorId: EditorId) => ({\r\n      language: code[editorId].language,\r\n      compiled: code[editorId].compiled,\r\n    }),\r\n  );\r\n\r\n  const compiledTests = runTests ? code.tests?.compiled || '' : '';\r\n\r\n  const importFromScript =\r\n    getImports(markup).includes('./script') ||\r\n    (runTests && !forExport && getImports(compiledTests).includes('./script'));\r\n\r\n  let compilerImports = {};\r\n\r\n  for (const { language, compiled } of runtimeDependencies) {\r\n    const compiler = getLanguageCompiler(language);\r\n    if (!compiler) continue;\r\n\r\n    const compilerStyles =\r\n      typeof compiler.styles === 'function'\r\n        ? compiler.styles({ compiled, baseUrl: absoluteBaseUrl, config })\r\n        : compiler.styles || [];\r\n    compilerStyles.forEach((depStyleUrl) => {\r\n      const stylesheet = dom.createElement('link');\r\n      stylesheet.rel = 'stylesheet';\r\n      stylesheet.href = isRelativeUrl(depStyleUrl) ? absoluteBaseUrl + depStyleUrl : depStyleUrl;\r\n      dom.head.appendChild(stylesheet);\r\n    });\r\n    const compilerScripts =\r\n      typeof compiler.scripts === 'function'\r\n        ? compiler.scripts({ compiled, baseUrl: absoluteBaseUrl, config })\r\n        : compiler.scripts || [];\r\n    compilerScripts.forEach((depScriptUrl) => {\r\n      const depScript = dom.createElement('script');\r\n      depScript.src = isRelativeUrl(depScriptUrl) ? absoluteBaseUrl + depScriptUrl : depScriptUrl;\r\n      if (compiler.deferScripts) {\r\n        depScript.defer = true;\r\n      }\r\n      if (depScriptUrl.includes('-script-esm.')) {\r\n        depScript.type = 'module';\r\n      }\r\n      dom.head.appendChild(depScript);\r\n    });\r\n    if (compiler.inlineScript) {\r\n      if (typeof compiler.inlineScript === 'function') {\r\n        compiler.inlineScript = await compiler.inlineScript({\r\n          baseUrl,\r\n        });\r\n      }\r\n      const inlineScript = document.createElement('script');\r\n      inlineScript.innerHTML = compiler.inlineScript;\r\n      dom.head.appendChild(inlineScript);\r\n    }\r\n    if (compiler.imports) {\r\n      compilerImports = {\r\n        ...compilerImports,\r\n        ...objectMap(compiler.imports, (url) => getAbsoluteUrl(url, baseUrl)),\r\n      };\r\n    }\r\n  }\r\n\r\n  const styleExtension = getLanguageExtension(code.style.language);\r\n\r\n  // import maps\r\n  const userImports =\r\n    config.customSettings.mapImports === false\r\n      ? {}\r\n      : {\r\n          ...(hasImports(code.script.compiled)\r\n            ? createImportMap(code.script.compiled, config)\r\n            : {}),\r\n          ...(hasImports(code.markup.compiled)\r\n            ? createImportMap(code.markup.compiled, config)\r\n            : {}),\r\n          ...(runTests && !forExport && hasImports(compiledTests)\r\n            ? createImportMap(compiledTests, config)\r\n            : {}),\r\n          ...(importFromScript\r\n            ? { './script': 'data:text/javascript;base64,' + btoa(code.script.compiled) }\r\n            : {}),\r\n          ...createCSSModulesImportMap(\r\n            code.script.compiled,\r\n            code.style.compiled,\r\n            compileInfo.cssModules,\r\n            styleExtension,\r\n          ),\r\n          ...createCSSModulesImportMap(\r\n            code.markup.compiled,\r\n            code.style.compiled,\r\n            compileInfo.cssModules,\r\n            styleExtension,\r\n          ),\r\n        };\r\n\r\n  const importMaps = {\r\n    ...userImports,\r\n    ...compilerImports,\r\n    ...(runTests ? testImports : {}),\r\n    ...config.imports,\r\n    ...config.customSettings.imports,\r\n  };\r\n  if (Object.keys(importMaps).length > 0) {\r\n    const esModuleShims = dom.createElement('script');\r\n    esModuleShims.src = modulesService.getUrl(esModuleShimsPath, getAppCDN());\r\n    esModuleShims.async = true;\r\n    dom.head.appendChild(esModuleShims);\r\n\r\n    const importMapsScript = dom.createElement('script');\r\n    importMapsScript.type = 'importmap';\r\n    importMapsScript.innerHTML = `{\"imports\": ${JSON.stringify(importMaps, null, 2)}}`;\r\n    dom.head.appendChild(importMapsScript);\r\n  }\r\n\r\n  // external scripts\r\n  config.scripts.forEach((url) => {\r\n    const externalScript = dom.createElement('script');\r\n    externalScript.src = url;\r\n    dom.head.appendChild(externalScript);\r\n  });\r\n\r\n  if (!importFromScript) {\r\n    // editor script\r\n    const script = code.script.compiled;\r\n    const scriptElement = dom.createElement('script');\r\n    if (singleFile) {\r\n      scriptElement.innerHTML = escapeScript(script);\r\n    } else {\r\n      scriptElement.src = './script.js';\r\n    }\r\n    dom.body.appendChild(scriptElement);\r\n\r\n    // script type\r\n    const scriptType = getLanguageCompiler(code.script.language)?.scriptType;\r\n    if (scriptType) {\r\n      scriptElement.type = scriptType;\r\n    } else if (config.customSettings.scriptType != null) {\r\n      // do not add type if scriptType === ''\r\n      if (config.customSettings.scriptType) {\r\n        scriptElement.type = config.customSettings.scriptType;\r\n      }\r\n    } else if (isModuleScript(script)) {\r\n      scriptElement.type = 'module';\r\n    }\r\n  }\r\n\r\n  // spacing\r\n  if (config.showSpacing && !forExport) {\r\n    const spacingScript = dom.createElement('script');\r\n    spacingScript.src = spacingJsUrl;\r\n    dom.body.appendChild(spacingScript);\r\n  }\r\n\r\n  // tests\r\n  if (runTests && !forExport) {\r\n    const jestScript = dom.createElement('script');\r\n    jestScript.src = jestLiteUrl;\r\n    dom.body.appendChild(jestScript);\r\n\r\n    const testScript = dom.createElement('script');\r\n    testScript.type = 'module';\r\n    testScript.innerHTML = `\r\nconst {\r\n  afterAll,\r\n  afterEach,\r\n  beforeAll,\r\n  beforeEach,\r\n  describe,\r\n  describe: { only: fdescribe, skip: xdescribe },\r\n  it,\r\n  test,\r\n  test: { only: fit, skip: xtest, skip: xit },\r\n  expect,\r\n  jest } = window.jestLite.core;\r\n\r\n${escapeScript(compiledTests)}\r\n\r\nwindow.jestLite.core.run().then(results => {\r\n  parent.postMessage({type: 'testResults', payload: {results}}, '*');\r\n}).catch((error) => {\r\n  parent.postMessage({type: 'testResults', payload: {error: error.message || String(error)}}, '*');\r\n});\r\n    `;\r\n    dom.body.appendChild(testScript);\r\n  }\r\n\r\n  return '<!DOCTYPE html>\\n' + dom.documentElement.outerHTML;\r\n};\r\n", "export const getToolbarElement = () => document.querySelector('#toolbar') as HTMLElement;\r\nexport const getProjectTitleElement = () => document.querySelector('#project-title') as HTMLElement;\r\nexport const getEditorContainerElement = () =>\r\n  document.querySelector('#editor-container') as HTMLElement;\r\nexport const getEditorsElement = () => document.querySelector('#editors') as HTMLElement;\r\nexport const getMarkupElement = () => document.querySelector('#markup') as HTMLElement;\r\nexport const getStyleElement = () => document.querySelector('#style') as HTMLElement;\r\nexport const getScriptElement = () => document.querySelector('#script') as HTMLElement;\r\nexport const getOutputElement = () => document.querySelector('#output') as HTMLElement;\r\nexport const getResultElement = () => document.querySelector('#result') as HTMLElement;\r\nexport const getResultIFrameElement = () =>\r\n  document.querySelector('#result > iframe') as HTMLIFrameElement;\r\nexport const getGutterElement = () =>\r\n  document.querySelector('#editor-container .gutter') as HTMLElement;\r\nexport const getLogoLink = () => document.querySelector('#logo a') as HTMLAnchorElement;\r\nexport const getRunButton = () => document.querySelector('#run-button') as HTMLElement;\r\nexport const getCodeRunButton = () => document.querySelector('#code-run-button') as HTMLElement;\r\nexport const getEditorToolbar = () => document.querySelector('#editor-tools') as HTMLElement;\r\nexport const getCopyButton = () => document.querySelector('#editor-tools #copy-btn') as HTMLElement;\r\nexport const getUndoButton = () => document.querySelector('#editor-tools #undo-btn') as HTMLElement;\r\nexport const getRedoButton = () => document.querySelector('#editor-tools #redo-btn') as HTMLElement;\r\nexport const getFormatButton = () =>\r\n  document.querySelector('#editor-tools #format-btn') as HTMLElement;\r\nexport const getEditorModeNode = () => document.querySelector<HTMLElement>('#editor-mode');\r\nexport const getEditorStatus = () =>\r\n  document.querySelector('#editor-tools #editor-status') as HTMLElement;\r\nexport const getExternalResourcesBtn = () =>\r\n  document.querySelector('#editor-tools #external-resources-btn') as HTMLElement;\r\nexport const getExternalResourcesMark = () =>\r\n  document.querySelector('#editor-tools #external-resources-mark') as HTMLElement;\r\nexport const getResultButton = () => document.querySelector('#result-button') as HTMLElement;\r\nexport const getFullscreenButton = () =>\r\n  document.querySelector('#fullscreen-button') as HTMLElement;\r\nexport const getEditorTitles = () =>\r\n  document.querySelectorAll<HTMLElement>('.editor-title:not(.hidden)');\r\nexport const getEditorDivs = () => document.querySelectorAll<HTMLElement>('#editors > .editor');\r\nexport const getToolspaneElement = () =>\r\n  document.querySelector('#output #tools-pane') as HTMLElement;\r\nexport const getToolspaneBar = () =>\r\n  document.querySelector('#output #tools-pane-bar') as HTMLElement;\r\nexport const getToolspaneButtons = () =>\r\n  document.querySelector('#tools-pane-buttons') as HTMLElement;\r\nexport const getToolspaneTitles = () => document.querySelector<HTMLElement>('#tools-pane-titles');\r\nexport const getToolspaneLoader = () => document.querySelector<HTMLElement>('#tools-pane-loading');\r\nexport const getZoomButtonValue = () =>\r\n  document.querySelector<HTMLElement>('#zoom-button #zoom-value');\r\nexport const getModalSaveButton = () =>\r\n  document.querySelector('#modal #prompt-save-btn') as HTMLElement;\r\nexport const getModalDoNotSaveButton = () =>\r\n  document.querySelector('#modal #prompt-donot-save-btn') as HTMLElement;\r\nexport const getModalCancelButton = () =>\r\n  document.querySelector('#modal #prompt-cancel-btn') as HTMLElement;\r\n\r\nexport const getModalRecoverButton = () =>\r\n  document.querySelector('#modal #prompt-recover-btn') as HTMLElement;\r\nexport const getModalSavePreviousButton = () =>\r\n  document.querySelector('#modal #prompt-save-previous-btn') as HTMLElement;\r\nexport const getModalCancelRecoverButton = () =>\r\n  document.querySelector('#modal #prompt-cancel-recover-btn') as HTMLElement;\r\nexport const getModalUnsavedName = () =>\r\n  document.querySelector('#modal #unsaved-project-name') as HTMLElement;\r\nexport const getModalUnsavedLastModified = () =>\r\n  document.querySelector('#modal #unsaved-project-last-modified') as HTMLElement;\r\nexport const getModalDisableRecoverCheckbox = () =>\r\n  document.querySelector('#modal #disable-recover-checkbox') as HTMLInputElement;\r\n\r\nexport const getLanguageMenuLinks = () =>\r\n  document.querySelectorAll<HTMLElement>('#select-editor .language-item a');\r\n\r\nexport const getLanguageMenuButtons = () =>\r\n  document.querySelectorAll<HTMLElement>('#select-editor .language-menu-button');\r\n\r\nexport const getstyleMenu = () =>\r\n  document.querySelector<HTMLElement>('#style-selector .dropdown-menu');\r\n\r\nexport const getSettingToggles = () =>\r\n  document.querySelectorAll<HTMLInputElement>('#settings-menu input');\r\n\r\nexport const getCssPresetLinks = () =>\r\n  document.querySelectorAll<HTMLAnchorElement>('#css-preset-menu a');\r\n\r\nexport const getSettingsMenuScroller = () =>\r\n  document.querySelector<HTMLElement>('#settings-menu-container');\r\nexport const getSettingsButton = () => document.querySelector<HTMLElement>('#settings-button');\r\n\r\nexport const getExportJSONLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-json');\r\n\r\nexport const getExportResultLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-result');\r\n\r\nexport const getExportSourceLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-src');\r\n\r\nexport const getExportGithubGistLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-githubGist');\r\n\r\nexport const getExportCodepenLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-codepen');\r\n\r\nexport const getExportJsfiddleLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#export-menu #export-jsfiddle');\r\n\r\nexport const getLoginLink = () => document.querySelector<HTMLAnchorElement>('#login-link');\r\n\r\nexport const getLogoutLink = () => document.querySelector<HTMLAnchorElement>('#logout-link');\r\n\r\nexport const getNewLink = () => document.querySelector<HTMLAnchorElement>('#new-link');\r\n\r\nexport const getOpenLink = () => document.querySelector<HTMLAnchorElement>('#open-link');\r\n\r\nexport const getSaveLink = () => document.querySelector<HTMLAnchorElement>('#save-link');\r\n\r\nexport const getForkLink = () => document.querySelector<HTMLAnchorElement>('#fork-link');\r\n\r\nexport const getSaveAsTemplateLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#template-link');\r\n\r\nexport const getExternalResourcesLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#external-resources-link');\r\n\r\nexport const getCustomSettingsLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#custom-settings-link');\r\n\r\nexport const getShareLink = () => document.querySelector<HTMLAnchorElement>('#share-link');\r\n\r\nexport const getEmbedLink = () => document.querySelector<HTMLAnchorElement>('#embed-link');\r\n\r\nexport const getEditorSettingsLink = () =>\r\n  document.querySelector<HTMLAnchorElement>('#editor-settings-link');\r\n\r\nexport const getDeployLink = () => document.querySelector<HTMLAnchorElement>('#deploy-link');\r\n\r\nexport const getSyncLink = () => document.querySelector<HTMLAnchorElement>('#sync-link');\r\n\r\nexport const getSyncIndicator = () => document.querySelector<HTMLAnchorElement>('#sync-indicator');\r\n\r\nexport const getImportLink = () => document.querySelector<HTMLAnchorElement>('#import-link');\r\n\r\nexport const getBackupLink = () => document.querySelector<HTMLAnchorElement>('#backup-link');\r\n\r\nexport const getBroadcastLink = () => document.querySelector<HTMLAnchorElement>('#broadcast-link');\r\n\r\nexport const getWelcomeLink = () => document.querySelector<HTMLAnchorElement>('#welcome-link');\r\n\r\nexport const getAboutLink = () => document.querySelector<HTMLAnchorElement>('#about-link');\r\n\r\nexport const getAutoupdateToggle = () =>\r\n  document.querySelector('#settings-menu input#autoupdate') as HTMLInputElement;\r\n\r\nexport const getDelayValue = () =>\r\n  document.querySelector('#settings-menu #delay-value') as HTMLElement;\r\n\r\nexport const getDelayRange = () =>\r\n  document.querySelector('#settings-menu input#delay-range') as HTMLInputElement;\r\n\r\nexport const getAutosaveToggle = () =>\r\n  document.querySelector('#settings-menu input#autosave') as HTMLInputElement;\r\n\r\nexport const getAutosyncToggle = () =>\r\n  document.querySelector('#settings-menu input#autosync') as HTMLInputElement;\r\n\r\nexport const getFormatOnsaveToggle = () =>\r\n  document.querySelector('#settings-menu input#formatOnsave') as HTMLInputElement;\r\n\r\nexport const getProcessorToggles = () =>\r\n  document.querySelectorAll<HTMLInputElement>('#style-selector input');\r\n\r\nexport const getEmmetToggle = () =>\r\n  document.querySelector('#settings-menu input#emmet') as HTMLInputElement;\r\n\r\nexport const getThemeToggle = () =>\r\n  document.querySelector('#settings-menu input#theme') as HTMLInputElement;\r\n\r\nexport const getShowWelcomeToggle = () =>\r\n  document.querySelector('#settings-menu input#welcome') as HTMLInputElement;\r\n\r\nexport const getRecoverToggle = () =>\r\n  document.querySelector('#settings-menu input#recover-unsaved') as HTMLInputElement;\r\n\r\nexport const getSpacingToggle = () =>\r\n  document.querySelector('#settings-menu input#show-spacing') as HTMLInputElement;\r\n\r\nexport const getCSSPresetLinks = () =>\r\n  document.querySelectorAll<HTMLAnchorElement>('#css-preset-menu a');\r\n\r\nexport const getProjectInfoLink = () =>\r\n  document.querySelector('#settings-menu #info-link') as HTMLInputElement;\r\n\r\nexport const getAssetsLink = () =>\r\n  document.querySelector('#settings-menu #assets-link') as HTMLInputElement;\r\n\r\nexport const getSnippetsLink = () =>\r\n  document.querySelector('#settings-menu #snippets-link') as HTMLInputElement;\r\n\r\nexport const getInfoTitleInput = () =>\r\n  document.querySelector('#info-container input#title-input') as HTMLInputElement;\r\n\r\nexport const getInfoDescription = () =>\r\n  document.querySelector('#info-container #description-textarea') as HTMLTextAreaElement;\r\n\r\nexport const getInfoTagsInput = () =>\r\n  document.querySelector('#info-container input#tags-input') as HTMLInputElement;\r\n\r\nexport const getSaveInfoButton = () =>\r\n  document.querySelector<HTMLElement>('#info-container #info-save-btn');\r\n\r\nexport const getExternalResourcesTextareas = () =>\r\n  document.querySelectorAll<HTMLTextAreaElement>('#resources-container textarea');\r\n\r\nexport const getExternalResourcesCssPresetInputs = () =>\r\n  document.querySelectorAll<HTMLInputElement>('#resources-container input[type=\"radio\"]');\r\n\r\nexport const getLoadResourcesButton = () =>\r\n  document.querySelector<HTMLElement>('#resources-container #resources-load-btn');\r\n\r\nexport const getCustomSettingsEditor = () =>\r\n  document.querySelector<HTMLElement>('#custom-settings-container #custom-settings-editor');\r\n\r\nexport const getLoadCustomSettingsButton = () =>\r\n  document.querySelector<HTMLElement>('#custom-settings-container #custom-settings-load-btn');\r\n\r\nexport const getTestEditor = () =>\r\n  document.querySelector<HTMLElement>('#test-editor-container #test-editor');\r\n\r\nexport const getLoadTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-editor-container #test-load-btn');\r\n\r\nexport const getEditTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-container #edit-tests-btn');\r\n\r\nexport const getRunTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-container #run-tests-btn');\r\n\r\nexport const getWatchTestsButton = () =>\r\n  document.querySelector<HTMLElement>('#test-container #watch-tests-btn');\r\n\r\nexport const getUrlImportForm = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector<HTMLFormElement>('#url-import-form');\r\nexport const getUrlImportButton = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#url-import-btn') as HTMLButtonElement;\r\nexport const getUrlImportInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#code-url') as HTMLInputElement;\r\nexport const getCodeImportInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#local-code-input') as HTMLInputElement;\r\n\r\nexport const getImportJsonUrlForm = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#json-url-import-form') as HTMLInputElement;\r\nexport const getImportJsonUrlButton = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#json-url-import-btn') as HTMLInputElement;\r\nexport const getImportJsonUrlInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#json-url') as HTMLInputElement;\r\n\r\nexport const getBulkImportJsonUrlForm = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-json-url-import-form') as HTMLInputElement;\r\nexport const getBulkImportJsonUrlButton = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-json-url-import-btn') as HTMLInputElement;\r\nexport const getBulkImportJsonUrlInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-json-url') as HTMLInputElement;\r\nexport const getLinkToSavedProjects = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#link-to-saved-projects') as HTMLAnchorElement;\r\n\r\nexport const getImportFileInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#file-input') as HTMLInputElement;\r\n\r\nexport const getImportFileInputLabel = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('.file-input-label') as HTMLInputElement;\r\n\r\nexport const getBulkImportFileInput = (importContainer: HTMLElement) =>\r\n  importContainer.querySelector('#bulk-file-input') as HTMLInputElement;\r\n\r\nexport const getNewRepoForm = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector<HTMLFormElement>('#new-repo-form');\r\nexport const getNewRepoButton = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-btn') as HTMLButtonElement;\r\nexport const getNewRepoNameInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-name') as HTMLInputElement;\r\nexport const getNewRepoNameError = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-name-error') as HTMLElement;\r\nexport const getNewRepoMessageInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-message') as HTMLInputElement;\r\nexport const getNewRepoCommitSource = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-source') as HTMLInputElement;\r\nexport const getNewRepoAutoSync = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#new-repo-autosync') as HTMLInputElement;\r\n\r\nexport const getExistingRepoForm = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector<HTMLFormElement>('#existing-repo-form');\r\nexport const getExistingRepoButton = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-btn') as HTMLButtonElement;\r\nexport const getExistingRepoNameInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-name') as HTMLInputElement;\r\nexport const getExistingRepoMessageInput = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-message') as HTMLInputElement;\r\nexport const getExistingRepoCommitSource = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-source') as HTMLInputElement;\r\nexport const getExistingRepoAutoSync = (deployContainer: HTMLElement) =>\r\n  deployContainer.querySelector('#existing-repo-autosync') as HTMLInputElement;\r\n\r\nexport const getStarterTemplatesTab = (templatesContainer: HTMLElement) =>\r\n  templatesContainer.querySelector<HTMLElement>(\r\n    '#templates-tabs [data-target=\"templates-starter\"]',\r\n  );\r\nexport const getStarterTemplatesList = (templatesContainer: HTMLElement) =>\r\n  templatesContainer.querySelector<HTMLElement>('#starter-templates-list');\r\nexport const getUserTemplatesScreen = (templatesContainer: HTMLElement) =>\r\n  templatesContainer.querySelector('#templates-user .modal-screen') as HTMLElement;\r\n\r\nexport const getBulkImportButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#bulk-import-button') as HTMLElement;\r\n\r\nexport const getExportAllButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#export-all-button') as HTMLElement;\r\n\r\nexport const getDeleteAllButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#delete-all-button') as HTMLElement;\r\n\r\nexport const getAddAssetButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#assets-add-asset-button') as HTMLElement;\r\n\r\nexport const getAssetsDeleteAllButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#assets-delete-all-button') as HTMLElement;\r\n\r\nexport const getAssetsButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#assets-button') as HTMLElement;\r\n\r\nexport const getAssetDataUrlFileInput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-data-url-file-input') as HTMLInputElement;\r\n\r\nexport const getAssetDataUrlOutput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#data-url-output') as HTMLElement;\r\n\r\nexport const getAssetGHPagesFileInput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-gh-pages-file-input') as HTMLInputElement;\r\n\r\nexport const getAssetGHPagesFileInputLabel = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-gh-pages-file-input-label') as HTMLElement;\r\n\r\nexport const getAssetGHPagesFileInputButton = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#asset-gh-pages-file-input-button') as HTMLElement;\r\n\r\nexport const getAssetGHPagesOutput = (listContainer: HTMLElement) =>\r\n  listContainer.querySelector('#gh-pages-output') as HTMLElement;\r\n\r\nexport const getSyncStatus = (syncContainer: HTMLElement | undefined) =>\r\n  (syncContainer || document).querySelector<HTMLElement>('#sync-status');\r\n\r\nexport const getStartSyncBtns = (syncContainer: HTMLElement | undefined) =>\r\n  (syncContainer || document).querySelectorAll<HTMLButtonElement>('.start-sync-btn');\r\n\r\nexport const getBackupForm = (backupContainer: HTMLElement) =>\r\n  backupContainer.querySelector('#backup-form') as HTMLFormElement;\r\n\r\nexport const getBackupBtn = (backupContainer: HTMLElement) =>\r\n  backupContainer.querySelector('#backup-btn') as HTMLButtonElement;\r\n\r\nexport const getBackupCheckedInputs = (backupContainer: HTMLElement) =>\r\n  backupContainer.querySelectorAll<HTMLInputElement>('#backup input[type=\"checkbox\"]:checked');\r\n\r\nexport const getAddSnippetButton = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#snippets-add-snippet-button') as HTMLElement;\r\n\r\nexport const getSnippetsDeleteAllButton = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#snippets-delete-all-button') as HTMLElement;\r\n\r\nexport const getSnippetLanguageSelect = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#language-select') as HTMLSelectElement;\r\n\r\nexport const getAddSnippetEditor = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-editor') as HTMLElement;\r\n\r\nexport const getSnippetTitleInput = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-title-input') as HTMLInputElement;\r\n\r\nexport const getSnippetDescriptionArea = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-description-textarea') as HTMLTextAreaElement;\r\n\r\nexport const getSaveSnippetBtn = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#add-snippet-save-btn') as HTMLButtonElement;\r\n\r\nexport const getSnippetsBtn = (snippetsContainer: HTMLElement) =>\r\n  snippetsContainer.querySelector('#snippets-button') as HTMLButtonElement;\r\n\r\nexport const getBroadcastStatusLabel = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-status') as HTMLElement;\r\n\r\nexport const getBroadcastForm = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-form') as HTMLFormElement;\r\n\r\nexport const getBroadcastServerUrlInput = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-server-url') as HTMLInputElement;\r\n\r\nexport const getBroadcastSourceCheckbox = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-source') as HTMLInputElement;\r\n\r\nexport const getBroadcastBtn = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-btn') as HTMLButtonElement;\r\n\r\nexport const getBroadcastChannelUrlSection = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-channel-url-section') as HTMLElement;\r\n\r\nexport const getBroadcastChannelUrl = (broadcastContainer: HTMLElement) =>\r\n  broadcastContainer.querySelector('#broadcast-channel-url') as HTMLAnchorElement;\r\n\r\nexport const getBroadcastStatusBtn = () =>\r\n  document.querySelector('#broadcast-status-btn') as HTMLElement | null;\r\n\r\nexport const getQrCodeContainer = () => document.querySelector('#qrcode-container') as HTMLElement;\r\n\r\nexport const getEditorSettingsFormatLink = (editorSettingsContainer: HTMLElement) =>\r\n  editorSettingsContainer.querySelector('#editor-settings-format-link') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkNew = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-new') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkOpen = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-open') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkImport = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-import') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkDefaultTemplateLi = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('.default-template-li') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkNoDefaultTemplate = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#no-default-template') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkLoadDefault = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-load-default') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkRecentOpen = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-recent-open') as HTMLAnchorElement;\r\n\r\nexport const getWelcomeLinkTemplates = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-link-templates') as HTMLAnchorElement;\r\n\r\nexport const getModalShowWelcomeCheckbox = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #show-welcome-checkbox') as HTMLInputElement;\r\n\r\nexport const getModalWelcomeRecover = (welcomeContainer = document) =>\r\n  welcomeContainer.querySelector('#modal #welcome-recover') as HTMLElement;\r\n\r\nexport const getModalWelcomeScreen = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#welcome-screen-container .modal-screen') as HTMLElement;\r\n\r\nexport const getModalWelcomeRecent = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #welcome-recent') as HTMLElement;\r\n\r\nexport const getModalWelcomeRecentList = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #welcome-recent-list') as HTMLElement;\r\n\r\nexport const getModalWelcomeTemplateList = (welcomeContainer: HTMLElement) =>\r\n  welcomeContainer.querySelector('#modal #welcome-template-list') as HTMLElement;\r\n", "import { defaultConfig, getContentConfig } from '../config';\r\nimport type { Cache, Code, EditorId, Language } from '../models';\r\n\r\nconst defaultContentConfig = getContentConfig(defaultConfig);\r\nconst initialCache: Cache = {\r\n  ...defaultContentConfig,\r\n  markup: { ...defaultContentConfig.markup, compiled: '', modified: '' },\r\n  style: { ...defaultContentConfig.style, compiled: '', modified: '' },\r\n  script: { ...defaultContentConfig.script, compiled: '', modified: '' },\r\n  tests: { language: 'javascript', ...defaultContentConfig.tests, compiled: '' },\r\n  result: '',\r\n  styleOnlyUpdate: false,\r\n};\r\n\r\nlet cache = initialCache;\r\n\r\nexport const getCache = (): Cache => ({ ...cache });\r\n\r\nexport const setCache = (newCache = initialCache) => {\r\n  cache = {\r\n    ...newCache,\r\n    markup: {\r\n      modified: newCache.markup.compiled === cache.markup.compiled ? cache.markup.modified : '',\r\n      ...newCache.markup,\r\n    },\r\n    style: {\r\n      modified: newCache.style.compiled === cache.style.compiled ? cache.style.modified : '',\r\n      ...newCache.style,\r\n    },\r\n    script: {\r\n      modified: newCache.script.compiled === cache.script.compiled ? cache.script.modified : '',\r\n      ...newCache.script,\r\n    },\r\n    tests: {\r\n      language: 'javascript',\r\n      compiled: '',\r\n      ...newCache.tests,\r\n    },\r\n    result: newCache.result || '',\r\n  };\r\n};\r\n\r\nexport const updateCache = (editorId: EditorId, language: Language, modified: string) => {\r\n  if (cache[editorId].language === language) {\r\n    cache[editorId].modified = modified;\r\n  }\r\n};\r\n\r\nexport const getCachedCode = (): Code => ({\r\n  markup: {\r\n    language: cache.markup.language,\r\n    content: cache.markup.content || '',\r\n    compiled: cache.markup.modified || cache.markup.compiled || '',\r\n  },\r\n  style: {\r\n    language: cache.style.language,\r\n    content: cache.style.content || '',\r\n    compiled: cache.style.modified || cache.style.compiled || '',\r\n  },\r\n  script: {\r\n    language: cache.script.language,\r\n    content: cache.script.content || '',\r\n    compiled: cache.script.modified || cache.script.compiled || '',\r\n  },\r\n  result: cache.result || '',\r\n});\r\n", "import type { ContentConfig, Cache, EditorCache } from '../models';\r\n\r\nconst removeExtra = <T>(editor: T, keys: Array<keyof T>) => {\r\n  const contentEditor = { ...editor };\r\n  keys.forEach((key) => delete contentEditor[key]);\r\n  return contentEditor;\r\n};\r\nexport const cacheIsValid = (cache: Cache, config: ContentConfig) => {\r\n  const excludedKeys: Array<keyof ContentConfig> = [\r\n    'activeEditor',\r\n    'title',\r\n    'description',\r\n    'tests',\r\n  ];\r\n  const extraCache: Array<keyof EditorCache> = ['compiled', 'modified'];\r\n\r\n  const contentCache = {\r\n    ...removeExtra(cache, ['result', 'styleOnlyUpdate', ...excludedKeys]),\r\n    markup: removeExtra(cache.markup, extraCache),\r\n    style: removeExtra(cache.style, extraCache),\r\n    script: removeExtra(cache.script, extraCache),\r\n  };\r\n  const contentConfig = removeExtra(config, excludedKeys);\r\n\r\n  return JSON.stringify(contentCache) === JSON.stringify(contentConfig);\r\n};\r\n", "/* eslint-disable import/no-internal-modules */\r\nimport type { createEventsManager } from '../events';\r\nimport { infoScreen } from '../html';\r\nimport type { createModal } from '../modal';\r\nimport * as UI from '../UI';\r\nimport { loadScript, loadStylesheet, removeDuplicates } from '../utils/utils';\r\nimport { tagifyBaseUrl } from '../vendors';\r\nimport type { Config } from '../models';\r\nimport type { ProjectStorage } from '../storage';\r\n\r\nexport const getTags = (value: string): string[] => {\r\n  try {\r\n    return JSON.parse(value).map((tag: { value: string }) => tag.value);\r\n  } catch {\r\n    // tagify is not loaded\r\n    return value.split(',').map((tag: string) => tag.trim());\r\n  }\r\n};\r\n\r\nexport const createProjectInfoUI = async (\r\n  config: Config,\r\n  storage: ProjectStorage,\r\n  modal: ReturnType<typeof createModal>,\r\n  eventsManager: ReturnType<typeof createEventsManager>,\r\n  onSave: (title: string, description: string, tags: string[]) => void,\r\n) => {\r\n  const div = document.createElement('div');\r\n  div.innerHTML = infoScreen;\r\n  const projectInfoContainer = div.firstChild as HTMLElement;\r\n  modal.show(projectInfoContainer);\r\n\r\n  const titleInput = UI.getInfoTitleInput();\r\n  titleInput.value = config.title;\r\n  titleInput.focus();\r\n\r\n  const descriptionTextarea = UI.getInfoDescription();\r\n  descriptionTextarea.value = config.description;\r\n\r\n  const tagsInput = UI.getInfoTagsInput();\r\n  tagsInput.value = removeDuplicates(config.tags).join(', ');\r\n\r\n  eventsManager.addEventListener(UI.getSaveInfoButton(), 'click', async () => {\r\n    UI.getProjectTitleElement().textContent = titleInput.value;\r\n    onSave(titleInput.value, descriptionTextarea.value, getTags(tagsInput.value));\r\n    modal.close();\r\n  });\r\n\r\n  loadStylesheet(tagifyBaseUrl + 'tagify.css', 'tagify-styles');\r\n  await loadScript(tagifyBaseUrl + 'tagify.min.js', 'Tagify');\r\n  const Tagify = (window as any).Tagify;\r\n  if (Tagify) {\r\n    new Tagify(tagsInput, {\r\n      whitelist: Array.from(\r\n        new Set((await storage.getList()).map((item) => item.tags).flat()),\r\n      ).sort((a, b) => (b > a ? -1 : 1)),\r\n      dropdown: {\r\n        maxItems: 40,\r\n        enabled: 0,\r\n        closeOnSelect: false,\r\n        highlightFirst: true,\r\n      },\r\n    });\r\n  }\r\n};\r\n", "export const loadingMessage = (message = 'Loading...') => {\n  const loadingDiv = document.createElement('div');\n  loadingDiv.innerHTML = message;\n  loadingDiv.classList.add('modal-message');\n  return loadingDiv;\n};\n", "import type { createEventsManager } from '../events';\r\nimport { loginScreen } from '../html';\r\nimport type { GithubScope, User } from '../models';\r\nimport { getLoginLink, getLogoutLink } from './selectors';\r\n\r\nexport const createLoginContainer = (\r\n  eventsManager: ReturnType<typeof createEventsManager>,\r\n  loginCallback: (scopes: GithubScope[]) => void,\r\n) => {\r\n  const div = document.createElement('div');\r\n  div.innerHTML = loginScreen;\r\n  const loginContainer = div.firstChild as HTMLElement;\r\n\r\n  const reposCheckBox = loginContainer.querySelector('#public_repo') as HTMLInputElement;\r\n  const privateReposCheckBox = loginContainer.querySelector('#repo') as HTMLInputElement;\r\n  const gistsCheckBox = loginContainer.querySelector('#gist') as HTMLInputElement;\r\n  const loginButton = loginContainer.querySelector('#login-btn') as HTMLButtonElement;\r\n\r\n  eventsManager.addEventListener(\r\n    reposCheckBox,\r\n    'change',\r\n    () => {\r\n      privateReposCheckBox.checked = reposCheckBox.checked;\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    privateReposCheckBox,\r\n    'change',\r\n    () => {\r\n      if (privateReposCheckBox.checked) {\r\n        reposCheckBox.checked = true;\r\n      }\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    loginButton,\r\n    'click',\r\n    () => {\r\n      const scopes = [\r\n        ...(reposCheckBox.checked && !privateReposCheckBox.checked\r\n          ? [reposCheckBox.value as GithubScope]\r\n          : []),\r\n        ...(privateReposCheckBox.checked ? [privateReposCheckBox.value as GithubScope] : []),\r\n        ...(gistsCheckBox.checked ? [gistsCheckBox.value as GithubScope] : []),\r\n      ];\r\n      loginCallback(scopes);\r\n    },\r\n    false,\r\n  );\r\n\r\n  return loginContainer;\r\n};\r\n\r\nexport const displayLoggedIn = (user: User) => {\r\n  const loginLink = getLoginLink();\r\n  if (loginLink) {\r\n    loginLink.style.display = 'none';\r\n  }\r\n  const logOutLink = getLogoutLink();\r\n  if (logOutLink) {\r\n    const displayName = user.displayName || user.username;\r\n    logOutLink.innerHTML = `Log out`;\r\n    logOutLink.classList.add('hint--bottom');\r\n    logOutLink.dataset.hint = 'Logged in as ' + displayName;\r\n    logOutLink.style.display = 'block';\r\n  }\r\n};\r\n\r\nexport const displayLoggedOut = () => {\r\n  const loginLink = getLoginLink();\r\n  if (loginLink) {\r\n    loginLink.style.display = 'block';\r\n  }\r\n  const logOutLink = getLogoutLink();\r\n  if (logOutLink) {\r\n    logOutLink.innerHTML = 'Log out';\r\n    logOutLink.style.display = 'none';\r\n  }\r\n};\r\n", "import type { createEventsManager } from '../events';\nimport type { createModal } from '../modal';\nimport type { Config, ContentConfig, Language, LanguageSpecs, Screen } from '../models';\nimport type { createNotifications } from '../notifications';\nimport type { SavedProject, ProjectStorage } from '../storage';\nimport { openScreen } from '../html';\nimport { getDate, isMobile, downloadFile, loadScript, loadStylesheet } from '../utils';\nimport { flexSearchUrl, tagifyBaseUrl } from '../vendors';\nimport { getTags } from './info';\nimport { getBulkImportButton, getDeleteAllButton, getExportAllButton } from './selectors';\n\nexport const createOpenItem = (\n  item: SavedProject,\n  list: HTMLElement,\n  getLanguageTitle: (language: Language) => string,\n  getLanguageByAlias: (alias?: string) => Language | undefined,\n  isTemplate = false,\n) => {\n  const li = document.createElement('li');\n  list.appendChild(li);\n\n  const link = document.createElement('a');\n  link.href = '#';\n  link.dataset.id = item.id;\n  link.classList.add('open-project-link');\n  const lastModified = isMobile()\n    ? new Date(item.lastModified).toLocaleDateString()\n    : new Date(item.lastModified).toLocaleString();\n\n  const langs: HTMLElement[] = [];\n  if (!isMobile()) {\n    item.languages.forEach((lang) => {\n      const langEl = document.createElement('span');\n      langEl.classList.add('language-tag');\n      langEl.dataset.lang = getLanguageByAlias(lang);\n      if (isTemplate) {\n        langEl.classList.add('template-tag');\n      } else {\n        langEl.title = 'filter by language';\n      }\n      langEl.textContent = getLanguageTitle(lang);\n      langs.push(langEl);\n    });\n  }\n\n  const userTags: HTMLElement[] = [];\n  item.tags = [...new Set(item.tags)].filter(Boolean);\n  if (!isMobile() && item.tags.length > 0) {\n    item.tags.forEach((tag) => {\n      const tagEl = document.createElement('span');\n      tagEl.classList.add('user-tag');\n      tagEl.dataset.tag = tag;\n      if (isTemplate) {\n        tagEl.classList.add('template-tag');\n      } else {\n        tagEl.title = 'filter by tag';\n      }\n      tagEl.textContent = tag;\n      userTags.push(tagEl);\n    });\n  }\n\n  const title = document.createElement('div');\n  title.classList.add('open-title', 'overflow-text');\n  title.textContent = item.title;\n  link.appendChild(title);\n\n  const lastModifiedText = document.createElement('div');\n  lastModifiedText.classList.add('light');\n  lastModifiedText.textContent = 'Last modified: ' + lastModified;\n  link.appendChild(lastModifiedText);\n\n  const tags = document.createElement('div');\n  tags.classList.add('project-tags');\n  langs.forEach((lang) => tags.append(lang));\n  tags.innerHTML += userTags.length > 0 ? ' <span class=\"light\">|</span> ' : '';\n  userTags.forEach((tag) => tags.append(tag));\n  link.appendChild(tags);\n\n  const setAsDefault = document.createElement('div');\n  setAsDefault.classList.add('template-default');\n\n  const setAsDefaultLink = document.createElement('span');\n  setAsDefaultLink.innerText = 'Set as default';\n  setAsDefaultLink.classList.add('template-default-link');\n  setAsDefault.appendChild(setAsDefaultLink);\n\n  const defaultTemplateLabel = document.createElement('span');\n  defaultTemplateLabel.classList.add('default-template-label');\n  defaultTemplateLabel.innerText = 'Default template ';\n  setAsDefault.appendChild(defaultTemplateLabel);\n\n  const removeDefaultLink = document.createElement('span');\n  removeDefaultLink.innerText = '(unset)';\n  removeDefaultLink.classList.add('template-remove-default-link');\n  defaultTemplateLabel.appendChild(removeDefaultLink);\n\n  if (isTemplate) {\n    link.appendChild(setAsDefault);\n  }\n  li.appendChild(link);\n\n  const deleteButton = document.createElement('button');\n  deleteButton.classList.add('delete-button');\n  li.appendChild(deleteButton);\n\n  return { link, deleteButton, setAsDefaultLink, removeDefaultLink };\n};\n\nconst createItemLoader = (item: SavedProject) => {\n  const loading = document.createElement('div');\n  loading.innerHTML = `\n    <div class=\"modal-message\">Loading...</div>\n    <div class=\"modal-message\">${item.title}</div>\n    `;\n  return loading;\n};\n\nconst organizeProjects = (\n  getProjects: () => Promise<SavedProject[]>,\n  showProjects: (projects: SavedProject[]) => Promise<void>,\n  eventsManager: ReturnType<typeof createEventsManager>,\n  languages: LanguageSpecs[],\n) => {\n  let sortBy: 'lastModified' | 'title' = 'lastModified';\n  let sortByDirection: 'asc' | 'desc' = 'desc';\n  let language: Language;\n  let tags: string[] = [];\n  let tagify: any;\n  let searchResults: string[] = [];\n\n  const lastModifiedButton = document.querySelector(\n    '#list-container #sort-by-last-modified',\n  ) as HTMLElement;\n  const titleButton = document.querySelector('#list-container #sort-by-title') as HTMLElement;\n  const sortedAscButton = document.querySelector('#list-container #sorted-asc') as HTMLElement;\n  const sortedDescButton = document.querySelector('#list-container #sorted-desc') as HTMLElement;\n  const languageSelect = document.querySelector(\n    '#list-container #language-filter',\n  ) as HTMLSelectElement;\n  const filterTagsInput = document.querySelector(\n    '#list-container #filter-tags',\n  ) as HTMLInputElement;\n  const searchProjectsInput = document.querySelector(\n    '#list-container #search-projects',\n  ) as HTMLInputElement;\n  const resetFiltersLink = document.querySelector('#list-container #reset-filters') as HTMLElement;\n\n  languages\n    .map((x) => ({\n      name: x.name,\n      title: x.longTitle || x.title,\n    }))\n    .sort((a, b) =>\n      a.title.toLowerCase() < b.title.toLowerCase()\n        ? -1\n        : a.title.toLowerCase() > b.title.toLowerCase()\n        ? 1\n        : 0,\n    )\n    .forEach((lang) => {\n      const option = document.createElement('option');\n      option.text = lang.title;\n      option.value = lang.name;\n      languageSelect.appendChild(option);\n    });\n\n  const getFilteredAndSorted = async () =>\n    (await getProjects())\n      .filter((p) => (language ? p.languages.includes(language) : true))\n      .filter((p) =>\n        tags.length > 0 ? tags.map((t) => p.tags.includes(t)).every((x) => x === true) : true,\n      )\n      .filter((p) =>\n        searchProjectsInput.value.trim() !== '' ? searchResults.includes(p.id) : true,\n      )\n      .sort((a, b) =>\n        sortBy === 'lastModified' && sortByDirection === 'asc'\n          ? a.lastModified - b.lastModified\n          : sortBy === 'lastModified' && sortByDirection === 'desc'\n          ? b.lastModified - a.lastModified\n          : sortBy === 'title' && sortByDirection === 'asc' && a.title < b.title\n          ? -1\n          : sortBy === 'title' && sortByDirection === 'asc' && a.title > b.title\n          ? 1\n          : sortBy === 'title' && sortByDirection === 'desc' && a.title < b.title\n          ? 1\n          : sortBy === 'title' && sortByDirection === 'desc' && a.title > b.title\n          ? -1\n          : 0,\n      );\n\n  const registerLanguageFilters = () => {\n    const projectTags = document.querySelectorAll<HTMLElement>('.project-tags span');\n    projectTags.forEach((tag) => {\n      if (tag.dataset.lang) {\n        eventsManager.addEventListener(\n          tag,\n          'click',\n          async (ev) => {\n            ev.stopPropagation();\n            languageSelect.value = tag.dataset.lang || '';\n            await filterByLanguage();\n          },\n          false,\n        );\n      } else if (tag.dataset.tag) {\n        eventsManager.addEventListener(\n          tag,\n          'click',\n          async (ev) => {\n            ev.stopPropagation();\n            if (tagify) {\n              tagify.removeAllTags();\n              tagify.addTags(tag.dataset.tag);\n              await filterByTags();\n            }\n          },\n          false,\n        );\n      }\n    });\n  };\n\n  const reloadProjects = async () => {\n    showProjects(await getFilteredAndSorted());\n    registerLanguageFilters();\n  };\n\n  const sortAscending = () => {\n    sortByDirection = 'asc';\n    sortedAscButton.style.display = 'unset';\n    sortedDescButton.style.display = 'none';\n  };\n\n  const sortDescending = () => {\n    sortByDirection = 'desc';\n    sortedAscButton.style.display = 'none';\n    sortedDescButton.style.display = 'unset';\n  };\n\n  const filterByTags = async (value = filterTagsInput.value) => {\n    tags = getTags(value).filter((x) => x !== '');\n    await reloadProjects();\n  };\n\n  const filterByLanguage = async (value = languageSelect.value) => {\n    language = value as Language;\n    await reloadProjects();\n  };\n\n  eventsManager.addEventListener(\n    lastModifiedButton,\n    'click',\n    async (ev) => {\n      ev.preventDefault();\n      if (sortBy !== 'lastModified') {\n        sortDescending();\n      } else if (sortByDirection === 'asc') {\n        sortDescending();\n      } else {\n        sortAscending();\n      }\n      sortBy = 'lastModified';\n      lastModifiedButton.classList.add('active');\n      titleButton.classList.remove('active');\n      await reloadProjects();\n    },\n    false,\n  );\n\n  eventsManager.addEventListener(\n    titleButton,\n    'click',\n    async (ev) => {\n      ev.preventDefault();\n      if (sortBy !== 'title') {\n        sortAscending();\n      } else if (sortByDirection === 'asc') {\n        sortDescending();\n      } else {\n        sortAscending();\n      }\n      sortBy = 'title';\n      lastModifiedButton.classList.remove('active');\n      titleButton.classList.add('active');\n      await reloadProjects();\n    },\n    false,\n  );\n\n  eventsManager.addEventListener(\n    sortedAscButton,\n    'click',\n    async (ev) => {\n      ev.preventDefault();\n      sortDescending();\n      await reloadProjects();\n    },\n    false,\n  );\n\n  eventsManager.addEventListener(\n    sortedDescButton,\n    'click',\n    async (ev) => {\n      ev.preventDefault();\n      sortAscending();\n      await reloadProjects();\n    },\n    false,\n  );\n\n  eventsManager.addEventListener(\n    filterTagsInput,\n    'keyup',\n    () => filterByTags(filterTagsInput.value),\n    false,\n  );\n\n  eventsManager.addEventListener(\n    languageSelect,\n    'change',\n    async () => {\n      await filterByLanguage();\n    },\n    false,\n  );\n  registerLanguageFilters();\n\n  loadStylesheet(tagifyBaseUrl + 'tagify.css', 'tagify-styles');\n  loadScript(tagifyBaseUrl + 'tagify.min.js', 'Tagify').then(async (Tagify: any) => {\n    if (Tagify) {\n      tagify = new Tagify(filterTagsInput, {\n        whitelist: Array.from(new Set((await getProjects()).map((item) => item.tags).flat())).sort(\n          (a, b) => (b > a ? -1 : 1),\n        ),\n        dropdown: {\n          maxItems: 40,\n          enabled: 0,\n          closeOnSelect: false,\n          highlightFirst: true,\n        },\n      });\n\n      tagify.on('change', () => filterByTags(JSON.stringify(tagify?.value || '')));\n    }\n  });\n\n  loadScript(flexSearchUrl, 'FlexSearch').then(async (FlexSearch: any) => {\n    const index = new FlexSearch.Document({\n      index: ['title', 'description', 'tags', 'languages'],\n      tokenize: 'full',\n      worker: true,\n    });\n\n    await Promise.all((await getProjects()).map((p) => index.add(p)));\n\n    eventsManager.addEventListener(\n      searchProjectsInput,\n      'keyup',\n      async () => {\n        const result = await index.searchAsync(searchProjectsInput.value);\n        searchResults = result.map((field: any) => field.result).flat();\n        await reloadProjects();\n      },\n      false,\n    );\n  });\n\n  eventsManager.addEventListener(\n    resetFiltersLink,\n    'click',\n    async (ev) => {\n      ev.preventDefault();\n      sortBy = 'lastModified';\n      sortByDirection = 'desc';\n      language = '' as Language;\n      tags = [];\n      searchResults = [];\n      lastModifiedButton.classList.add('active');\n      titleButton.classList.remove('active');\n      sortDescending();\n      languageSelect.value = '';\n      tagify?.removeAllTags();\n      searchProjectsInput.value = '';\n      await reloadProjects();\n    },\n    false,\n  );\n};\n\nexport const createSavedProjectsList = async ({\n  projectStorage,\n  eventsManager,\n  showScreen,\n  getContentConfig,\n  notifications,\n  modal,\n  loadConfig,\n  getProjectId,\n  setProjectId,\n  languages,\n  getLanguageTitle,\n  getLanguageByAlias,\n}: {\n  projectStorage: ProjectStorage;\n  eventsManager: ReturnType<typeof createEventsManager>;\n  showScreen: (screen: Screen['screen']) => void;\n  getContentConfig: (config: Config | ContentConfig) => ContentConfig;\n  notifications: ReturnType<typeof createNotifications>;\n  modal: ReturnType<typeof createModal>;\n  loadConfig: (config: ContentConfig) => Promise<void>;\n  getProjectId: () => string | undefined;\n  setProjectId: (id: string) => void;\n  languages: LanguageSpecs[];\n  getLanguageTitle: (language: Language) => string;\n  getLanguageByAlias: (alias?: string) => Language | undefined;\n}) => {\n  const div = document.createElement('div');\n  div.innerHTML = openScreen;\n  const listContainer = div.firstChild as HTMLElement;\n  const noDataMessage = listContainer.querySelector('.no-data') as HTMLElement;\n  const noMatchMessage = listContainer.querySelector('#no-match.no-data') as HTMLElement;\n  const projectsContainer = listContainer.querySelector('#projects-container') as HTMLElement;\n  const list = document.createElement('ul') as HTMLElement;\n  list.classList.add('open-list');\n  let savedProjects = await projectStorage.getList();\n  let visibleProjects = savedProjects;\n\n  const bulkImportButton = getBulkImportButton(listContainer);\n  const exportAllButton = getExportAllButton(listContainer);\n  const deleteAllButton = getDeleteAllButton(listContainer);\n\n  eventsManager.addEventListener(\n    bulkImportButton,\n    'click',\n    () => {\n      showScreen('import');\n    },\n    false,\n  );\n\n  eventsManager.addEventListener(\n    exportAllButton,\n    'click',\n    async () => {\n      const data = (await projectStorage.getAllData())\n        .filter((item) => visibleProjects.find((p) => p.id === item.id))\n        .map((item) => ({\n          ...item,\n          config: getContentConfig(item.config),\n        }))\n        .sort((a, b) => a.lastModified - b.lastModified);\n\n      const filename = 'livecodes_export_' + getDate();\n      const content = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(data));\n      downloadFile(filename, 'json', content);\n    },\n    false,\n  );\n\n  eventsManager.addEventListener(\n    deleteAllButton,\n    'click',\n    async () => {\n      notifications.confirm(`Delete ${visibleProjects.length} projects?`, async () => {\n        for (const p of visibleProjects) {\n          await projectStorage.deleteItem(p.id);\n          if (getProjectId() === p.id) {\n            setProjectId('');\n          }\n        }\n        visibleProjects = [];\n        savedProjects = await projectStorage.getList();\n        await showList(visibleProjects);\n      });\n    },\n    false,\n  );\n\n  projectsContainer.appendChild(list);\n\n  const showList = async (projects: SavedProject[]) => {\n    visibleProjects = projects;\n    list.innerHTML = '';\n    projects.forEach((item) => {\n      const { link, deleteButton } = createOpenItem(\n        item,\n        list,\n        getLanguageTitle,\n        getLanguageByAlias,\n      );\n\n      eventsManager.addEventListener(\n        link,\n        'click',\n        async (event) => {\n          event.preventDefault();\n\n          const loading = createItemLoader(item);\n          modal.show(loading, { size: 'small' });\n\n          const itemId = (link as HTMLElement).dataset.id || '';\n          const savedProject = (await projectStorage.getItem(itemId))?.config;\n          if (savedProject) {\n            await loadConfig(savedProject);\n            setProjectId(itemId);\n          }\n          modal.close();\n          loading.remove();\n        },\n        false,\n      );\n\n      eventsManager.addEventListener(\n        deleteButton,\n        'click',\n        () => {\n          notifications.confirm(`Delete project: ${item.title}?`, async () => {\n            if (item.id === getProjectId()) {\n              setProjectId('');\n            }\n            await projectStorage.deleteItem(item.id);\n            visibleProjects = visibleProjects.filter((p) => p.id !== item.id);\n            const li = deleteButton.parentElement as HTMLElement;\n            li.classList.add('hidden');\n            setTimeout(() => {\n              showList(visibleProjects);\n            }, 500);\n          });\n        },\n        false,\n      );\n    });\n\n    if (projects.length === 0) {\n      list.classList.add('hidden');\n      deleteAllButton.classList.add('hidden');\n      exportAllButton.classList.add('hidden');\n      if ((await projectStorage.getList()).length === 0) {\n        noDataMessage.classList.remove('hidden');\n        noMatchMessage.classList.add('hidden');\n      } else {\n        noDataMessage.classList.add('hidden');\n        noMatchMessage.classList.remove('hidden');\n      }\n    } else {\n      list.classList.remove('hidden');\n      deleteAllButton.classList.remove('hidden');\n      exportAllButton.classList.remove('hidden');\n      noDataMessage.classList.add('hidden');\n      noMatchMessage.classList.add('hidden');\n    }\n  };\n\n  await showList(savedProjects);\n\n  const getProjects = () => projectStorage.getList();\n  modal.show(listContainer, { isAsync: true });\n  organizeProjects(getProjects, showList, eventsManager, languages);\n};\n", "// The programming goals of Split.js are to deliver readable, understandable and\n// maintainable code, while at the same time manually optimizing for tiny minified file size,\n// browser compatibility without additional requirements\n// and very few assumptions about the user's page layout.\nvar global = typeof window !== 'undefined' ? window : null;\nvar ssr = global === null;\nvar document = !ssr ? global.document : undefined;\n\n// Save a couple long function names that are used frequently.\n// This optimization saves around 400 bytes.\nvar addEventListener = 'addEventListener';\nvar removeEventListener = 'removeEventListener';\nvar getBoundingClientRect = 'getBoundingClientRect';\nvar gutterStartDragging = '_a';\nvar aGutterSize = '_b';\nvar bGutterSize = '_c';\nvar HORIZONTAL = 'horizontal';\nvar NOOP = function () { return false; };\n\n// Helper function determines which prefixes of CSS calc we need.\n// We only need to do this once on startup, when this anonymous function is called.\n//\n// Tests -webkit, -moz and -o prefixes. Modified from StackOverflow:\n// http://stackoverflow.com/questions/16625140/js-feature-detection-to-detect-the-usage-of-webkit-calc-over-calc/16625167#16625167\nvar calc = ssr\n    ? 'calc'\n    : ((['', '-webkit-', '-moz-', '-o-']\n          .filter(function (prefix) {\n              var el = document.createElement('div');\n              el.style.cssText = \"width:\" + prefix + \"calc(9px)\";\n\n              return !!el.style.length\n          })\n          .shift()) + \"calc\");\n\n// Helper function checks if its argument is a string-like type\nvar isString = function (v) { return typeof v === 'string' || v instanceof String; };\n\n// Helper function allows elements and string selectors to be used\n// interchangeably. In either case an element is returned. This allows us to\n// do `Split([elem1, elem2])` as well as `Split(['#id1', '#id2'])`.\nvar elementOrSelector = function (el) {\n    if (isString(el)) {\n        var ele = document.querySelector(el);\n        if (!ele) {\n            throw new Error((\"Selector \" + el + \" did not match a DOM element\"))\n        }\n        return ele\n    }\n\n    return el\n};\n\n// Helper function gets a property from the properties object, with a default fallback\nvar getOption = function (options, propName, def) {\n    var value = options[propName];\n    if (value !== undefined) {\n        return value\n    }\n    return def\n};\n\nvar getGutterSize = function (gutterSize, isFirst, isLast, gutterAlign) {\n    if (isFirst) {\n        if (gutterAlign === 'end') {\n            return 0\n        }\n        if (gutterAlign === 'center') {\n            return gutterSize / 2\n        }\n    } else if (isLast) {\n        if (gutterAlign === 'start') {\n            return 0\n        }\n        if (gutterAlign === 'center') {\n            return gutterSize / 2\n        }\n    }\n\n    return gutterSize\n};\n\n// Default options\nvar defaultGutterFn = function (i, gutterDirection) {\n    var gut = document.createElement('div');\n    gut.className = \"gutter gutter-\" + gutterDirection;\n    return gut\n};\n\nvar defaultElementStyleFn = function (dim, size, gutSize) {\n    var style = {};\n\n    if (!isString(size)) {\n        style[dim] = calc + \"(\" + size + \"% - \" + gutSize + \"px)\";\n    } else {\n        style[dim] = size;\n    }\n\n    return style\n};\n\nvar defaultGutterStyleFn = function (dim, gutSize) {\n    var obj;\n\n    return (( obj = {}, obj[dim] = (gutSize + \"px\"), obj ));\n};\n\n// The main function to initialize a split. Split.js thinks about each pair\n// of elements as an independant pair. Dragging the gutter between two elements\n// only changes the dimensions of elements in that pair. This is key to understanding\n// how the following functions operate, since each function is bound to a pair.\n//\n// A pair object is shaped like this:\n//\n// {\n//     a: DOM element,\n//     b: DOM element,\n//     aMin: Number,\n//     bMin: Number,\n//     dragging: Boolean,\n//     parent: DOM element,\n//     direction: 'horizontal' | 'vertical'\n// }\n//\n// The basic sequence:\n//\n// 1. Set defaults to something sane. `options` doesn't have to be passed at all.\n// 2. Initialize a bunch of strings based on the direction we're splitting.\n//    A lot of the behavior in the rest of the library is paramatized down to\n//    rely on CSS strings and classes.\n// 3. Define the dragging helper functions, and a few helpers to go with them.\n// 4. Loop through the elements while pairing them off. Every pair gets an\n//    `pair` object and a gutter.\n// 5. Actually size the pair elements, insert gutters and attach event listeners.\nvar Split = function (idsOption, options) {\n    if ( options === void 0 ) options = {};\n\n    if (ssr) { return {} }\n\n    var ids = idsOption;\n    var dimension;\n    var clientAxis;\n    var position;\n    var positionEnd;\n    var clientSize;\n    var elements;\n\n    // Allow HTMLCollection to be used as an argument when supported\n    if (Array.from) {\n        ids = Array.from(ids);\n    }\n\n    // All DOM elements in the split should have a common parent. We can grab\n    // the first elements parent and hope users read the docs because the\n    // behavior will be whacky otherwise.\n    var firstElement = elementOrSelector(ids[0]);\n    var parent = firstElement.parentNode;\n    var parentStyle = getComputedStyle ? getComputedStyle(parent) : null;\n    var parentFlexDirection = parentStyle ? parentStyle.flexDirection : null;\n\n    // Set default options.sizes to equal percentages of the parent element.\n    var sizes = getOption(options, 'sizes') || ids.map(function () { return 100 / ids.length; });\n\n    // Standardize minSize and maxSize to an array if it isn't already.\n    // This allows minSize and maxSize to be passed as a number.\n    var minSize = getOption(options, 'minSize', 100);\n    var minSizes = Array.isArray(minSize) ? minSize : ids.map(function () { return minSize; });\n    var maxSize = getOption(options, 'maxSize', Infinity);\n    var maxSizes = Array.isArray(maxSize) ? maxSize : ids.map(function () { return maxSize; });\n\n    // Get other options\n    var expandToMin = getOption(options, 'expandToMin', false);\n    var gutterSize = getOption(options, 'gutterSize', 10);\n    var gutterAlign = getOption(options, 'gutterAlign', 'center');\n    var snapOffset = getOption(options, 'snapOffset', 30);\n    var snapOffsets = Array.isArray(snapOffset) ? snapOffset : ids.map(function () { return snapOffset; });\n    var dragInterval = getOption(options, 'dragInterval', 1);\n    var direction = getOption(options, 'direction', HORIZONTAL);\n    var cursor = getOption(\n        options,\n        'cursor',\n        direction === HORIZONTAL ? 'col-resize' : 'row-resize'\n    );\n    var gutter = getOption(options, 'gutter', defaultGutterFn);\n    var elementStyle = getOption(\n        options,\n        'elementStyle',\n        defaultElementStyleFn\n    );\n    var gutterStyle = getOption(options, 'gutterStyle', defaultGutterStyleFn);\n\n    // 2. Initialize a bunch of strings based on the direction we're splitting.\n    // A lot of the behavior in the rest of the library is paramatized down to\n    // rely on CSS strings and classes.\n    if (direction === HORIZONTAL) {\n        dimension = 'width';\n        clientAxis = 'clientX';\n        position = 'left';\n        positionEnd = 'right';\n        clientSize = 'clientWidth';\n    } else if (direction === 'vertical') {\n        dimension = 'height';\n        clientAxis = 'clientY';\n        position = 'top';\n        positionEnd = 'bottom';\n        clientSize = 'clientHeight';\n    }\n\n    // 3. Define the dragging helper functions, and a few helpers to go with them.\n    // Each helper is bound to a pair object that contains its metadata. This\n    // also makes it easy to store references to listeners that that will be\n    // added and removed.\n    //\n    // Even though there are no other functions contained in them, aliasing\n    // this to self saves 50 bytes or so since it's used so frequently.\n    //\n    // The pair object saves metadata like dragging state, position and\n    // event listener references.\n\n    function setElementSize(el, size, gutSize, i) {\n        // Split.js allows setting sizes via numbers (ideally), or if you must,\n        // by string, like '300px'. This is less than ideal, because it breaks\n        // the fluid layout that `calc(% - px)` provides. You're on your own if you do that,\n        // make sure you calculate the gutter size by hand.\n        var style = elementStyle(dimension, size, gutSize, i);\n\n        Object.keys(style).forEach(function (prop) {\n            // eslint-disable-next-line no-param-reassign\n            el.style[prop] = style[prop];\n        });\n    }\n\n    function setGutterSize(gutterElement, gutSize, i) {\n        var style = gutterStyle(dimension, gutSize, i);\n\n        Object.keys(style).forEach(function (prop) {\n            // eslint-disable-next-line no-param-reassign\n            gutterElement.style[prop] = style[prop];\n        });\n    }\n\n    function getSizes() {\n        return elements.map(function (element) { return element.size; })\n    }\n\n    // Supports touch events, but not multitouch, so only the first\n    // finger `touches[0]` is counted.\n    function getMousePosition(e) {\n        if ('touches' in e) { return e.touches[0][clientAxis] }\n        return e[clientAxis]\n    }\n\n    // Actually adjust the size of elements `a` and `b` to `offset` while dragging.\n    // calc is used to allow calc(percentage + gutterpx) on the whole split instance,\n    // which allows the viewport to be resized without additional logic.\n    // Element a's size is the same as offset. b's size is total size - a size.\n    // Both sizes are calculated from the initial parent percentage,\n    // then the gutter size is subtracted.\n    function adjust(offset) {\n        var a = elements[this.a];\n        var b = elements[this.b];\n        var percentage = a.size + b.size;\n\n        a.size = (offset / this.size) * percentage;\n        b.size = percentage - (offset / this.size) * percentage;\n\n        setElementSize(a.element, a.size, this[aGutterSize], a.i);\n        setElementSize(b.element, b.size, this[bGutterSize], b.i);\n    }\n\n    // drag, where all the magic happens. The logic is really quite simple:\n    //\n    // 1. Ignore if the pair is not dragging.\n    // 2. Get the offset of the event.\n    // 3. Snap offset to min if within snappable range (within min + snapOffset).\n    // 4. Actually adjust each element in the pair to offset.\n    //\n    // ---------------------------------------------------------------------\n    // |    | <- a.minSize               ||              b.minSize -> |    |\n    // |    |  | <- this.snapOffset      ||     this.snapOffset -> |  |    |\n    // |    |  |                         ||                        |  |    |\n    // |    |  |                         ||                        |  |    |\n    // ---------------------------------------------------------------------\n    // | <- this.start                                        this.size -> |\n    function drag(e) {\n        var offset;\n        var a = elements[this.a];\n        var b = elements[this.b];\n\n        if (!this.dragging) { return }\n\n        // Get the offset of the event from the first side of the\n        // pair `this.start`. Then offset by the initial position of the\n        // mouse compared to the gutter size.\n        offset =\n            getMousePosition(e) -\n            this.start +\n            (this[aGutterSize] - this.dragOffset);\n\n        if (dragInterval > 1) {\n            offset = Math.round(offset / dragInterval) * dragInterval;\n        }\n\n        // If within snapOffset of min or max, set offset to min or max.\n        // snapOffset buffers a.minSize and b.minSize, so logic is opposite for both.\n        // Include the appropriate gutter sizes to prevent overflows.\n        if (offset <= a.minSize + a.snapOffset + this[aGutterSize]) {\n            offset = a.minSize + this[aGutterSize];\n        } else if (\n            offset >=\n            this.size - (b.minSize + b.snapOffset + this[bGutterSize])\n        ) {\n            offset = this.size - (b.minSize + this[bGutterSize]);\n        }\n\n        if (offset >= a.maxSize - a.snapOffset + this[aGutterSize]) {\n            offset = a.maxSize + this[aGutterSize];\n        } else if (\n            offset <=\n            this.size - (b.maxSize - b.snapOffset + this[bGutterSize])\n        ) {\n            offset = this.size - (b.maxSize + this[bGutterSize]);\n        }\n\n        // Actually adjust the size.\n        adjust.call(this, offset);\n\n        // Call the drag callback continously. Don't do anything too intensive\n        // in this callback.\n        getOption(options, 'onDrag', NOOP)(getSizes());\n    }\n\n    // Cache some important sizes when drag starts, so we don't have to do that\n    // continously:\n    //\n    // `size`: The total size of the pair. First + second + first gutter + second gutter.\n    // `start`: The leading side of the first element.\n    //\n    // ------------------------------------------------\n    // |      aGutterSize -> |||                      |\n    // |                     |||                      |\n    // |                     |||                      |\n    // |                     ||| <- bGutterSize       |\n    // ------------------------------------------------\n    // | <- start                             size -> |\n    function calculateSizes() {\n        // Figure out the parent size minus padding.\n        var a = elements[this.a].element;\n        var b = elements[this.b].element;\n\n        var aBounds = a[getBoundingClientRect]();\n        var bBounds = b[getBoundingClientRect]();\n\n        this.size =\n            aBounds[dimension] +\n            bBounds[dimension] +\n            this[aGutterSize] +\n            this[bGutterSize];\n        this.start = aBounds[position];\n        this.end = aBounds[positionEnd];\n    }\n\n    function innerSize(element) {\n        // Return nothing if getComputedStyle is not supported (< IE9)\n        // Or if parent element has no layout yet\n        if (!getComputedStyle) { return null }\n\n        var computedStyle = getComputedStyle(element);\n\n        if (!computedStyle) { return null }\n\n        var size = element[clientSize];\n\n        if (size === 0) { return null }\n\n        if (direction === HORIZONTAL) {\n            size -=\n                parseFloat(computedStyle.paddingLeft) +\n                parseFloat(computedStyle.paddingRight);\n        } else {\n            size -=\n                parseFloat(computedStyle.paddingTop) +\n                parseFloat(computedStyle.paddingBottom);\n        }\n\n        return size\n    }\n\n    // When specifying percentage sizes that are less than the computed\n    // size of the element minus the gutter, the lesser percentages must be increased\n    // (and decreased from the other elements) to make space for the pixels\n    // subtracted by the gutters.\n    function trimToMin(sizesToTrim) {\n        // Try to get inner size of parent element.\n        // If it's no supported, return original sizes.\n        var parentSize = innerSize(parent);\n        if (parentSize === null) {\n            return sizesToTrim\n        }\n\n        if (minSizes.reduce(function (a, b) { return a + b; }, 0) > parentSize) {\n            return sizesToTrim\n        }\n\n        // Keep track of the excess pixels, the amount of pixels over the desired percentage\n        // Also keep track of the elements with pixels to spare, to decrease after if needed\n        var excessPixels = 0;\n        var toSpare = [];\n\n        var pixelSizes = sizesToTrim.map(function (size, i) {\n            // Convert requested percentages to pixel sizes\n            var pixelSize = (parentSize * size) / 100;\n            var elementGutterSize = getGutterSize(\n                gutterSize,\n                i === 0,\n                i === sizesToTrim.length - 1,\n                gutterAlign\n            );\n            var elementMinSize = minSizes[i] + elementGutterSize;\n\n            // If element is too smal, increase excess pixels by the difference\n            // and mark that it has no pixels to spare\n            if (pixelSize < elementMinSize) {\n                excessPixels += elementMinSize - pixelSize;\n                toSpare.push(0);\n                return elementMinSize\n            }\n\n            // Otherwise, mark the pixels it has to spare and return it's original size\n            toSpare.push(pixelSize - elementMinSize);\n            return pixelSize\n        });\n\n        // If nothing was adjusted, return the original sizes\n        if (excessPixels === 0) {\n            return sizesToTrim\n        }\n\n        return pixelSizes.map(function (pixelSize, i) {\n            var newPixelSize = pixelSize;\n\n            // While there's still pixels to take, and there's enough pixels to spare,\n            // take as many as possible up to the total excess pixels\n            if (excessPixels > 0 && toSpare[i] - excessPixels > 0) {\n                var takenPixels = Math.min(\n                    excessPixels,\n                    toSpare[i] - excessPixels\n                );\n\n                // Subtract the amount taken for the next iteration\n                excessPixels -= takenPixels;\n                newPixelSize = pixelSize - takenPixels;\n            }\n\n            // Return the pixel size adjusted as a percentage\n            return (newPixelSize / parentSize) * 100\n        })\n    }\n\n    // stopDragging is very similar to startDragging in reverse.\n    function stopDragging() {\n        var self = this;\n        var a = elements[self.a].element;\n        var b = elements[self.b].element;\n\n        if (self.dragging) {\n            getOption(options, 'onDragEnd', NOOP)(getSizes());\n        }\n\n        self.dragging = false;\n\n        // Remove the stored event listeners. This is why we store them.\n        global[removeEventListener]('mouseup', self.stop);\n        global[removeEventListener]('touchend', self.stop);\n        global[removeEventListener]('touchcancel', self.stop);\n        global[removeEventListener]('mousemove', self.move);\n        global[removeEventListener]('touchmove', self.move);\n\n        // Clear bound function references\n        self.stop = null;\n        self.move = null;\n\n        a[removeEventListener]('selectstart', NOOP);\n        a[removeEventListener]('dragstart', NOOP);\n        b[removeEventListener]('selectstart', NOOP);\n        b[removeEventListener]('dragstart', NOOP);\n\n        a.style.userSelect = '';\n        a.style.webkitUserSelect = '';\n        a.style.MozUserSelect = '';\n        a.style.pointerEvents = '';\n\n        b.style.userSelect = '';\n        b.style.webkitUserSelect = '';\n        b.style.MozUserSelect = '';\n        b.style.pointerEvents = '';\n\n        self.gutter.style.cursor = '';\n        self.parent.style.cursor = '';\n        document.body.style.cursor = '';\n    }\n\n    // startDragging calls `calculateSizes` to store the inital size in the pair object.\n    // It also adds event listeners for mouse/touch events,\n    // and prevents selection while dragging so avoid the selecting text.\n    function startDragging(e) {\n        // Right-clicking can't start dragging.\n        if ('button' in e && e.button !== 0) {\n            return\n        }\n\n        // Alias frequently used variables to save space. 200 bytes.\n        var self = this;\n        var a = elements[self.a].element;\n        var b = elements[self.b].element;\n\n        // Call the onDragStart callback.\n        if (!self.dragging) {\n            getOption(options, 'onDragStart', NOOP)(getSizes());\n        }\n\n        // Don't actually drag the element. We emulate that in the drag function.\n        e.preventDefault();\n\n        // Set the dragging property of the pair object.\n        self.dragging = true;\n\n        // Create two event listeners bound to the same pair object and store\n        // them in the pair object.\n        self.move = drag.bind(self);\n        self.stop = stopDragging.bind(self);\n\n        // All the binding. `window` gets the stop events in case we drag out of the elements.\n        global[addEventListener]('mouseup', self.stop);\n        global[addEventListener]('touchend', self.stop);\n        global[addEventListener]('touchcancel', self.stop);\n        global[addEventListener]('mousemove', self.move);\n        global[addEventListener]('touchmove', self.move);\n\n        // Disable selection. Disable!\n        a[addEventListener]('selectstart', NOOP);\n        a[addEventListener]('dragstart', NOOP);\n        b[addEventListener]('selectstart', NOOP);\n        b[addEventListener]('dragstart', NOOP);\n\n        a.style.userSelect = 'none';\n        a.style.webkitUserSelect = 'none';\n        a.style.MozUserSelect = 'none';\n        a.style.pointerEvents = 'none';\n\n        b.style.userSelect = 'none';\n        b.style.webkitUserSelect = 'none';\n        b.style.MozUserSelect = 'none';\n        b.style.pointerEvents = 'none';\n\n        // Set the cursor at multiple levels\n        self.gutter.style.cursor = cursor;\n        self.parent.style.cursor = cursor;\n        document.body.style.cursor = cursor;\n\n        // Cache the initial sizes of the pair.\n        calculateSizes.call(self);\n\n        // Determine the position of the mouse compared to the gutter\n        self.dragOffset = getMousePosition(e) - self.end;\n    }\n\n    // adjust sizes to ensure percentage is within min size and gutter.\n    sizes = trimToMin(sizes);\n\n    // 5. Create pair and element objects. Each pair has an index reference to\n    // elements `a` and `b` of the pair (first and second elements).\n    // Loop through the elements while pairing them off. Every pair gets a\n    // `pair` object and a gutter.\n    //\n    // Basic logic:\n    //\n    // - Starting with the second element `i > 0`, create `pair` objects with\n    //   `a = i - 1` and `b = i`\n    // - Set gutter sizes based on the _pair_ being first/last. The first and last\n    //   pair have gutterSize / 2, since they only have one half gutter, and not two.\n    // - Create gutter elements and add event listeners.\n    // - Set the size of the elements, minus the gutter sizes.\n    //\n    // -----------------------------------------------------------------------\n    // |     i=0     |         i=1         |        i=2       |      i=3     |\n    // |             |                     |                  |              |\n    // |           pair 0                pair 1             pair 2           |\n    // |             |                     |                  |              |\n    // -----------------------------------------------------------------------\n    var pairs = [];\n    elements = ids.map(function (id, i) {\n        // Create the element object.\n        var element = {\n            element: elementOrSelector(id),\n            size: sizes[i],\n            minSize: minSizes[i],\n            maxSize: maxSizes[i],\n            snapOffset: snapOffsets[i],\n            i: i,\n        };\n\n        var pair;\n\n        if (i > 0) {\n            // Create the pair object with its metadata.\n            pair = {\n                a: i - 1,\n                b: i,\n                dragging: false,\n                direction: direction,\n                parent: parent,\n            };\n\n            pair[aGutterSize] = getGutterSize(\n                gutterSize,\n                i - 1 === 0,\n                false,\n                gutterAlign\n            );\n            pair[bGutterSize] = getGutterSize(\n                gutterSize,\n                false,\n                i === ids.length - 1,\n                gutterAlign\n            );\n\n            // if the parent has a reverse flex-direction, switch the pair elements.\n            if (\n                parentFlexDirection === 'row-reverse' ||\n                parentFlexDirection === 'column-reverse'\n            ) {\n                var temp = pair.a;\n                pair.a = pair.b;\n                pair.b = temp;\n            }\n        }\n\n        // Determine the size of the current element. IE8 is supported by\n        // staticly assigning sizes without draggable gutters. Assigns a string\n        // to `size`.\n        //\n        // Create gutter elements for each pair.\n        if (i > 0) {\n            var gutterElement = gutter(i, direction, element.element);\n            setGutterSize(gutterElement, gutterSize, i);\n\n            // Save bound event listener for removal later\n            pair[gutterStartDragging] = startDragging.bind(pair);\n\n            // Attach bound event listener\n            gutterElement[addEventListener](\n                'mousedown',\n                pair[gutterStartDragging]\n            );\n            gutterElement[addEventListener](\n                'touchstart',\n                pair[gutterStartDragging]\n            );\n\n            parent.insertBefore(gutterElement, element.element);\n\n            pair.gutter = gutterElement;\n        }\n\n        setElementSize(\n            element.element,\n            element.size,\n            getGutterSize(\n                gutterSize,\n                i === 0,\n                i === ids.length - 1,\n                gutterAlign\n            ),\n            i\n        );\n\n        // After the first iteration, and we have a pair object, append it to the\n        // list of pairs.\n        if (i > 0) {\n            pairs.push(pair);\n        }\n\n        return element\n    });\n\n    function adjustToMin(element) {\n        var isLast = element.i === pairs.length;\n        var pair = isLast ? pairs[element.i - 1] : pairs[element.i];\n\n        calculateSizes.call(pair);\n\n        var size = isLast\n            ? pair.size - element.minSize - pair[bGutterSize]\n            : element.minSize + pair[aGutterSize];\n\n        adjust.call(pair, size);\n    }\n\n    elements.forEach(function (element) {\n        var computedSize = element.element[getBoundingClientRect]()[dimension];\n\n        if (computedSize < element.minSize) {\n            if (expandToMin) {\n                adjustToMin(element);\n            } else {\n                // eslint-disable-next-line no-param-reassign\n                element.minSize = computedSize;\n            }\n        }\n    });\n\n    function setSizes(newSizes) {\n        var trimmed = trimToMin(newSizes);\n        trimmed.forEach(function (newSize, i) {\n            if (i > 0) {\n                var pair = pairs[i - 1];\n\n                var a = elements[pair.a];\n                var b = elements[pair.b];\n\n                a.size = trimmed[i - 1];\n                b.size = newSize;\n\n                setElementSize(a.element, a.size, pair[aGutterSize], a.i);\n                setElementSize(b.element, b.size, pair[bGutterSize], b.i);\n            }\n        });\n    }\n\n    function destroy(preserveStyles, preserveGutter) {\n        pairs.forEach(function (pair) {\n            if (preserveGutter !== true) {\n                pair.parent.removeChild(pair.gutter);\n            } else {\n                pair.gutter[removeEventListener](\n                    'mousedown',\n                    pair[gutterStartDragging]\n                );\n                pair.gutter[removeEventListener](\n                    'touchstart',\n                    pair[gutterStartDragging]\n                );\n            }\n\n            if (preserveStyles !== true) {\n                var style = elementStyle(\n                    dimension,\n                    pair.a.size,\n                    pair[aGutterSize]\n                );\n\n                Object.keys(style).forEach(function (prop) {\n                    elements[pair.a].element.style[prop] = '';\n                    elements[pair.b].element.style[prop] = '';\n                });\n            }\n        });\n    }\n\n    return {\n        setSizes: setSizes,\n        getSizes: getSizes,\n        collapse: function collapse(i) {\n            adjustToMin(elements[i]);\n        },\n        destroy: destroy,\n        parent: parent,\n        pairs: pairs,\n    }\n};\n\nexport default Split;\n", "import Split from 'split.js';\nimport { customEvents } from '../events';\n\nexport const createSplitPanes = () => {\n  const gutterSize = 10;\n  let destroyed = false;\n  const split = Split(['#editors', '#output'], {\n    minSize: [0, 0],\n    gutterSize,\n    elementStyle: (_dimension, size, gutterSize) => {\n      window.dispatchEvent(new Event(customEvents.resizeEditor));\n      return {\n        'flex-basis': `calc(${size}% - ${gutterSize}px)`,\n      };\n    },\n    gutterStyle: (_dimension, gutterSize) => ({\n      'flex-basis': `${gutterSize}px`,\n    }),\n    onDragStart() {\n      setAnimation(false);\n    },\n    onDragEnd() {\n      setAnimation(true);\n    },\n  });\n\n  const gutter = document.querySelector('.gutter');\n  if (gutter) {\n    const handle = document.createElement('div');\n    handle.id = 'handle';\n    gutter.appendChild(handle);\n  }\n\n  const setAnimation = (animate: boolean) => {\n    const editorsElement: HTMLElement | null = document.querySelector('#editors');\n    const outputElement: HTMLElement | null = document.querySelector('#output');\n    if (!outputElement || !editorsElement) return;\n\n    if (animate) {\n      editorsElement.style.transition = 'flex-basis 0.5s';\n      outputElement.style.transition = 'flex-basis 0.5s';\n    } else {\n      editorsElement.style.transition = 'none';\n      outputElement.style.transition = 'none';\n    }\n  };\n\n  const show = (pane: 'code' | 'output', full = false) => {\n    const smallScreen = window.innerWidth < 800;\n    const codeOpen = smallScreen || full ? [100, 0] : [50, 50];\n    const outputOpen = smallScreen || full ? [0, 100] : [50, 50];\n    if (pane === 'code' && (split.getSizes()[0] < 10 || full)) {\n      split.setSizes(codeOpen);\n    } else if (pane === 'output' && (split.getSizes()[1] < 10 || full)) {\n      if (split.getSizes()[0] < 10) {\n        // toggle result\n        split.setSizes(codeOpen);\n      } else {\n        split.setSizes(outputOpen);\n      }\n    }\n  };\n\n  const destroy = (preserveStyles?: boolean | undefined, preserveGutters?: boolean | undefined) => {\n    if (!destroyed) {\n      split.destroy(preserveStyles, preserveGutters);\n      destroyed = true;\n    }\n  };\n\n  setAnimation(true);\n\n  return {\n    show,\n    destroy,\n  };\n};\n", "import type { createEventsManager } from '../events';\r\nimport { templatesScreen } from '../html';\r\nimport type { Template } from '../models';\r\n\r\nexport const createTemplatesContainer = (\r\n  eventsManager: ReturnType<typeof createEventsManager>,\r\n  loadUserTemplates: () => void,\r\n) => {\r\n  const div = document.createElement('div');\r\n  div.innerHTML = templatesScreen;\r\n  const templatesContainer = div.firstChild as HTMLElement;\r\n\r\n  const tabs = templatesContainer.querySelectorAll<HTMLElement>('#templates-tabs li');\r\n  tabs.forEach((tab) => {\r\n    eventsManager.addEventListener(tab, 'click', () => {\r\n      tabs.forEach((t) => t.classList.remove('active'));\r\n      tab.classList.add('active');\r\n\r\n      document.querySelectorAll('#templates-screens > div').forEach((screen) => {\r\n        screen.classList.remove('active');\r\n      });\r\n      const target = templatesContainer.querySelector('#' + tab.dataset.target);\r\n      target?.classList.add('active');\r\n      if (tab.dataset.target === 'templates-user') {\r\n        loadUserTemplates();\r\n      }\r\n    });\r\n  });\r\n  return templatesContainer;\r\n};\r\n\r\nexport const createStarterTemplateLink = (\r\n  template: Template,\r\n  starterTemplatesList: HTMLElement | null,\r\n  baseUrl: string,\r\n) => {\r\n  const li = document.createElement('li');\r\n  const link = document.createElement('a');\r\n  link.href = '?template=' + template.name;\r\n  link.innerHTML = `\r\n<img src=\"${baseUrl + template.thumbnail}\" />\r\n<div>${template.title}</div>\r\n`;\r\n  li.appendChild(link);\r\n  starterTemplatesList?.appendChild(li);\r\n  return link;\r\n};\r\n\r\nexport const noUserTemplates = `\r\n<div class=\"modal-message no-data\">\r\n  <div>You have no saved templates.</div>\r\n  <div class=\"description\">\r\n    You can save a project as a template from\r\n    <wbr />(App&nbsp;menu&nbsp;>&nbsp;Save&nbsp;as&nbsp;> Template).\r\n  </div>\r\n</div>\r\n`;\r\n", "import { getEditorConfig } from '../config';\r\nimport { createEditor, getFontFamily } from '../editor';\r\nimport type { createEventsManager } from '../events';\r\nimport { getLanguageExtension, languages, mapLanguage } from '../languages';\r\nimport type {\r\n  Editors,\r\n  Config,\r\n  CodeEditor,\r\n  EditorOptions,\r\n  Language,\r\n  CompiledCodeViewer,\r\n} from '../models';\r\nimport { getToolspaneButtons, getToolspaneElement } from '../UI';\r\n\r\nexport const createCompiledCodeViewer = (\r\n  config: Config,\r\n  baseUrl: string,\r\n  _editors: Editors,\r\n  _eventsManager: ReturnType<typeof createEventsManager>,\r\n  isEmbed: boolean,\r\n  _runTests: () => Promise<void>,\r\n): CompiledCodeViewer => {\r\n  let compiledCodeElement: HTMLElement;\r\n  let editor: CodeEditor;\r\n  let languageLabel: HTMLElement;\r\n\r\n  const createElements = () => {\r\n    if (compiledCodeElement) return;\r\n    const toolsPaneElement = getToolspaneElement();\r\n\r\n    const container = document.createElement('div');\r\n    container.id = 'compiled-code-container';\r\n    toolsPaneElement.appendChild(container);\r\n\r\n    compiledCodeElement = document.createElement('div');\r\n    compiledCodeElement.id = 'compiled-code';\r\n    container.appendChild(compiledCodeElement);\r\n\r\n    const toolsPaneButtons = getToolspaneButtons();\r\n    if (toolsPaneButtons) {\r\n      languageLabel = document.createElement('div');\r\n      languageLabel.id = 'compiled-code-language-label';\r\n      languageLabel.style.display = 'none';\r\n      toolsPaneButtons.prepend(languageLabel);\r\n    }\r\n  };\r\n\r\n  const createCompiledEditor = (force = false) => {\r\n    if (editor && !force) return editor;\r\n\r\n    const editorOptions: EditorOptions = {\r\n      baseUrl,\r\n      container: compiledCodeElement,\r\n      language: 'javascript',\r\n      value: '',\r\n      readonly: true,\r\n      mode: config.mode,\r\n      editorId: 'compiled',\r\n      theme: config.theme,\r\n      isEmbed,\r\n      mapLanguage,\r\n      getLanguageExtension,\r\n      getFormatterConfig: () => ({}),\r\n      getFontFamily,\r\n      ...getEditorConfig(config),\r\n    };\r\n    return createEditor(editorOptions);\r\n  };\r\n\r\n  // workaround to fix \"cannot-redeclare-block-scoped-variable\" error\r\n  // https://stackoverflow.com/questions/40900791/cannot-redeclare-block-scoped-variable-in-unrelated-files\r\n  const fixTypes = (language: Language, content: string) => {\r\n    if (language === 'javascript' && (window as any).monaco && editor.monaco) {\r\n      editor?.setValue(content + '\\nexport {}');\r\n      const monacoEditor = editor.monaco;\r\n      const lineCount = monacoEditor.getModel()?.getLineCount() || 1;\r\n      monacoEditor.setHiddenAreas([]);\r\n      monacoEditor.setHiddenAreas([\r\n        new (window as any).monaco.Range(lineCount + 1, 0, lineCount + 2, 0),\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const update = (language: Language, content: string, label?: string) => {\r\n    if (!editor) return;\r\n    editor.setLanguage(language, content);\r\n    fixTypes(language, content);\r\n    if (languageLabel) {\r\n      const compiledLanguage = languages.find((lang) => lang.name === label);\r\n      const title = compiledLanguage?.longTitle || compiledLanguage?.title || label || '';\r\n      languageLabel.innerHTML = title;\r\n    }\r\n  };\r\n\r\n  const load = async () => {\r\n    createElements();\r\n    editor = await createCompiledEditor();\r\n  };\r\n\r\n  const reloadEditor = async (newConfig: Config) => {\r\n    config = newConfig;\r\n    if (!compiledCodeElement) {\r\n      await load();\r\n      return;\r\n    }\r\n    editor?.destroy();\r\n    editor = await createCompiledEditor(true);\r\n  };\r\n\r\n  return {\r\n    name: 'compiled',\r\n    title: 'Compiled',\r\n    load,\r\n    onActivate: () => {\r\n      if (languageLabel) {\r\n        languageLabel.style.display = 'unset';\r\n      }\r\n    },\r\n    onDeactivate: () => {\r\n      if (languageLabel) {\r\n        languageLabel.style.display = 'none';\r\n      }\r\n    },\r\n    getEditor: () => editor,\r\n    update,\r\n    reloadEditor,\r\n  };\r\n};\r\n", "import LunaConsole from 'luna-console';\r\nimport { createEditor, getFontFamily } from '../editor';\r\nimport type { createEventsManager } from '../events';\r\nimport type { Editors, Config, Console, CodeEditor, EditorOptions } from '../models';\r\nimport { isMobile } from '../utils';\r\nimport { sandboxService } from '../services';\r\nimport { getToolspaneButtons, getToolspaneElement } from '../UI';\r\nimport { getLanguageExtension, mapLanguage } from '../languages';\r\nimport { getEditorConfig } from '../config';\r\n\r\nexport const createConsole = (\r\n  config: Config,\r\n  baseUrl: string,\r\n  _editors: Editors,\r\n  eventsManager: ReturnType<typeof createEventsManager>,\r\n  isEmbed: boolean,\r\n  _runTests: () => Promise<void>,\r\n): Console => {\r\n  let consoleEmulator: InstanceType<typeof LunaConsole>;\r\n  let editor: CodeEditor;\r\n\r\n  let consoleElement: HTMLElement;\r\n  const sourceSelector = '#result > iframe';\r\n  let clearButton: HTMLButtonElement;\r\n\r\n  const commands: string[] = [];\r\n  let commandsIndex = -1;\r\n\r\n  const blur = () => {\r\n    if (document.activeElement instanceof HTMLElement) {\r\n      document.activeElement.blur();\r\n    }\r\n  };\r\n\r\n  const htmlToElement = (html: string) => {\r\n    const tag = html.substr(1, 4);\r\n    if (['html', 'head'].includes(tag)) {\r\n      return html;\r\n    }\r\n    if (tag === 'body') {\r\n      const el = document.createElement(tag);\r\n      el.innerHTML = html;\r\n      return el;\r\n    }\r\n    const template = document.createElement('template');\r\n    html = html.trim();\r\n    template.innerHTML = html;\r\n    return template.content.firstChild;\r\n  };\r\n\r\n  const convertTypes = (\r\n    args: Array<{\r\n      type: 'element' | 'node' | 'document' | 'window' | 'function' | 'other';\r\n      content: any;\r\n    }>,\r\n  ) =>\r\n    args.map((arg) => {\r\n      if (arg.type === 'element') {\r\n        return htmlToElement(arg.content);\r\n      }\r\n      return arg.content;\r\n    });\r\n\r\n  const createConsoleEmulator = () => {\r\n    if (consoleEmulator) {\r\n      consoleEmulator.destroy();\r\n      consoleEmulator = new LunaConsole(consoleElement);\r\n      return consoleEmulator;\r\n    }\r\n\r\n    consoleEmulator = new LunaConsole(consoleElement);\r\n    eventsManager.addEventListener(window, 'message', (event: any) => {\r\n      if (\r\n        !consoleElement ||\r\n        event.origin !== sandboxService.getOrigin() ||\r\n        event.data.type !== 'console'\r\n      ) {\r\n        return;\r\n      }\r\n      const message = event.data;\r\n      const api = [\r\n        'output', // to output messages from console input\r\n        'log',\r\n        'error',\r\n        'info',\r\n        'warn',\r\n        'dir',\r\n        'time',\r\n        'timeLog',\r\n        'timeEnd',\r\n        'clear',\r\n        'count',\r\n        'countReset',\r\n        'assert',\r\n        'table',\r\n        'group',\r\n        'groupCollapsed',\r\n        'groupEnd',\r\n      ];\r\n      if (api.includes(message.method)) {\r\n        (consoleEmulator as any)[message.method](...convertTypes(message.args));\r\n      }\r\n    });\r\n\r\n    return consoleEmulator;\r\n  };\r\n\r\n  const createConsoleInput = async (force = false) => {\r\n    if (editor && !force) return editor;\r\n\r\n    const container = document.querySelector('#console-input') as HTMLElement;\r\n    if (!container) throw new Error('Console input container not found');\r\n\r\n    const editorOptions: EditorOptions = {\r\n      baseUrl,\r\n      container,\r\n      language: 'javascript',\r\n      value: '',\r\n      readonly: false,\r\n      mode: config.mode,\r\n      editorId: 'console',\r\n      theme: config.theme,\r\n      isEmbed,\r\n      mapLanguage,\r\n      getLanguageExtension,\r\n      getFormatterConfig: () => ({}),\r\n      getFontFamily,\r\n      ...getEditorConfig(config),\r\n    };\r\n    const consoleEditor = await createEditor(editorOptions);\r\n\r\n    consoleEditor.addKeyBinding('exec', consoleEditor.keyCodes.Enter, () => {\r\n      const command = consoleEditor.getValue();\r\n      const iframe = document.querySelector(sourceSelector) as HTMLIFrameElement;\r\n      (consoleEmulator as any).insert({\r\n        type: 'input',\r\n        args: [command],\r\n        ignoreFilter: true,\r\n      });\r\n      iframe.contentWindow?.postMessage({ console: command }, '*');\r\n      commands.push(command);\r\n      consoleEditor.setValue('', false);\r\n      commandsIndex = -1;\r\n    });\r\n\r\n    consoleEditor.addKeyBinding('prev', consoleEditor.keyCodes.UpArrow, () => {\r\n      const currentIndex = commandsIndex === -1 ? commands.length : commandsIndex;\r\n      commandsIndex = currentIndex === 0 ? 0 : currentIndex - 1;\r\n      consoleEditor.setValue(commands[commandsIndex]);\r\n    });\r\n\r\n    consoleEditor.addKeyBinding('next', consoleEditor.keyCodes.DownArrow, () => {\r\n      const currentIndex = commandsIndex === -1 ? commands.length - 1 : commandsIndex;\r\n      commandsIndex = currentIndex === commands.length - 1 ? -1 : currentIndex + 1;\r\n      consoleEditor.setValue(commands[commandsIndex] || '');\r\n    });\r\n\r\n    const minHeight = 25;\r\n    container.style.minHeight = minHeight + 'px';\r\n\r\n    consoleEditor.onContentChanged(() => {\r\n      if (!consoleEditor.monaco) return;\r\n      const height =\r\n        consoleEditor.monaco.getContentHeight() < minHeight\r\n          ? minHeight\r\n          : consoleEditor.monaco.getContentHeight() * 2;\r\n      container.style.height = height + 'px';\r\n    });\r\n\r\n    if (editor) return consoleEditor;\r\n\r\n    // workaround to remove 'luna-console-' added to variable names called by console input\r\n    const observer = new MutationObserver(() => {\r\n      const newLogs = consoleElement.querySelectorAll(\r\n        '.luna-console-input pre.luna-console-code:not(.visible)',\r\n      );\r\n      if (newLogs.length === 0) return;\r\n      newLogs.forEach((log) => {\r\n        const pattern = /(luna-console-)(?!keyword|string|operator|number|json|hidden)/g;\r\n        log.innerHTML = log.innerHTML.replace(pattern, '');\r\n        log.classList.add('visible');\r\n      });\r\n    });\r\n    observer.observe(consoleElement, { subtree: true, childList: true });\r\n\r\n    const gutterSelector = consoleEditor.monaco ? '.glyph-margin' : '.cm-gutters';\r\n\r\n    const margin = document.querySelector('#console-input ' + gutterSelector) as HTMLElement;\r\n    if (margin) {\r\n      const indicator = document.createElement('div') as HTMLElement;\r\n      indicator.id = 'console-input-indicator';\r\n      indicator.innerHTML = `<svg fill=\"currentColor\" preserveAspectRatio=\"xMidYMid meet\" height=\"1em\" width=\"1em\" viewBox=\"0 0 40 40\" style=\"vertical-align: top;\"><g><path d=\"m16.6 10l10 10-10 10-2.3-2.3 7.7-7.7-7.7-7.7z\"></path></g></svg>`;\r\n      margin.appendChild(indicator);\r\n    }\r\n\r\n    return consoleEditor;\r\n  };\r\n\r\n  const createConsoleElements = () => {\r\n    if (consoleElement) return;\r\n    const toolsPaneElement = getToolspaneElement();\r\n\r\n    const container = document.createElement('div');\r\n    container.id = 'console-container';\r\n    toolsPaneElement.appendChild(container);\r\n\r\n    consoleElement = document.createElement('div');\r\n    consoleElement.id = 'console';\r\n    container.appendChild(consoleElement);\r\n\r\n    const consoleInput = document.createElement('div');\r\n    consoleInput.id = 'console-input';\r\n    container.appendChild(consoleInput);\r\n\r\n    const toolsPaneButtons = getToolspaneButtons();\r\n    if (toolsPaneButtons) {\r\n      const btnContainer = document.createElement('span');\r\n      btnContainer.classList.add('hint--top-left');\r\n      btnContainer.dataset.hint = 'Clear console';\r\n\r\n      clearButton = document.createElement('button');\r\n      clearButton.classList.add('clear-button');\r\n      clearButton.style.display = 'none';\r\n      eventsManager.addEventListener(\r\n        clearButton,\r\n        'click',\r\n        () => {\r\n          consoleEmulator.clear();\r\n        },\r\n        false,\r\n      );\r\n      eventsManager.addEventListener(\r\n        clearButton,\r\n        'touchstart',\r\n        () => {\r\n          consoleEmulator.clear();\r\n        },\r\n        false,\r\n      );\r\n      btnContainer.appendChild(clearButton);\r\n      toolsPaneButtons.prepend(btnContainer);\r\n    }\r\n  };\r\n\r\n  const load = async () => {\r\n    createConsoleElements();\r\n    consoleEmulator = createConsoleEmulator();\r\n    if (config.readonly || config.mode === 'codeblock' || config.mode === 'editor') {\r\n      return;\r\n    } else {\r\n      editor = await createConsoleInput();\r\n    }\r\n  };\r\n\r\n  const reloadEditor = async (newConfig: Config) => {\r\n    config = newConfig;\r\n    if (!editor) {\r\n      await load();\r\n      return;\r\n    }\r\n    editor?.destroy();\r\n    editor = await createConsoleInput(true);\r\n  };\r\n\r\n  return {\r\n    name: 'console',\r\n    title: 'Console',\r\n    load,\r\n    onActivate: () => {\r\n      if (!isMobile() && !isEmbed) {\r\n        editor?.focus();\r\n      }\r\n      if (clearButton) {\r\n        clearButton.style.display = 'unset';\r\n      }\r\n    },\r\n    onDeactivate: () => {\r\n      blur();\r\n      if (clearButton) {\r\n        clearButton.style.display = 'none';\r\n      }\r\n    },\r\n    getEditor: () => editor,\r\n    reloadEditor,\r\n    log: (...args: any[]) => consoleEmulator?.log(...args),\r\n    info: (...args: any[]) => consoleEmulator?.info(...args),\r\n    table: (...args: any[]) => consoleEmulator?.table(...args),\r\n    warn: (...args: any[]) => consoleEmulator?.warn(...args),\r\n    error: (...args: any[]) => consoleEmulator?.error(...args),\r\n    clear: () => consoleEmulator?.clear(),\r\n    // filterLog: (filter: string) => consoleEmulator?.filterLog(filter),\r\n    evaluate: (code: string) => consoleEmulator?.evaluate(code),\r\n  };\r\n};\r\n", "export const run =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><title>Play</title><path d=\"M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z\" fill=\"none\" stroke=\"currentColor\" stroke-miterlimit=\"10\" stroke-width=\"32\"/></svg>';\n\nexport const checked =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"checked\" viewBox=\"0 0 512 512\"><title>Checkbox</title><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M352 176L217.6 336 160 272\"/><rect x=\"64\" y=\"64\" width=\"384\" height=\"384\" rx=\"48\" ry=\"48\" fill=\"none\" stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"32\"/></svg>';\n\nexport const unchecked =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"unchecked\" viewBox=\"0 0 512 512\"><title>Square</title><path d=\"M416 448H96a32.09 32.09 0 01-32-32V96a32.09 32.09 0 0132-32h320a32.09 32.09 0 0132 32v320a32.09 32.09 0 01-32 32z\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"/></svg>';\n\nexport const reset =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><title>Refresh</title><path d=\"M320 146s24.36-12-64-12a160 160 0 10160 160\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"32\"/><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M256 58l80 80-80 80\"/></svg>';\n\nexport const edit =\n  '<svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"></path></svg>';\n\nexport const copy = `\n  <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n     viewBox=\"0 0 210.107 210.107\" style=\"enable-background:new 0 0 210.107 210.107;\" xml:space=\"preserve\">\n  <g>\n    <path d=\"M168.506,0H80.235C67.413,0,56.981,10.432,56.981,23.254v2.854h-15.38\n      c-12.822,0-23.254,10.432-23.254,23.254v137.492c0,12.822,10.432,23.254,23.254,23.254h88.271\n      c12.822,0,23.253-10.432,23.253-23.254V184h15.38c12.822,0,23.254-10.432,23.254-23.254V23.254C191.76,10.432,181.328,0,168.506,0z\n       M138.126,186.854c0,4.551-3.703,8.254-8.253,8.254H41.601c-4.551,0-8.254-3.703-8.254-8.254V49.361\n      c0-4.551,3.703-8.254,8.254-8.254h88.271c4.551,0,8.253,3.703,8.253,8.254V186.854z M176.76,160.746\n      c0,4.551-3.703,8.254-8.254,8.254h-15.38V49.361c0-12.822-10.432-23.254-23.253-23.254H71.981v-2.854\n      c0-4.551,3.703-8.254,8.254-8.254h88.271c4.551,0,8.254,3.703,8.254,8.254V160.746z\"/>\n  </g>\n  </svg>`;\n", "import type { Config, Editors, EventsManager, TestResult, TestViewer } from '../models';\r\nimport { getToolspaneElement } from '../UI';\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport * as icons from '../UI/icons';\r\n\r\nexport const createTestViewer = (\r\n  _config: Config,\r\n  _baseUrl: string,\r\n  _editors: Editors,\r\n  eventsManager: EventsManager,\r\n  isEmbed: boolean,\r\n  runTests: () => Promise<void>,\r\n): TestViewer => {\r\n  let testResultsElement: HTMLElement;\r\n  const loading = '<div class=\"test-summary\">Loading tests...</div>';\r\n\r\n  const createElements = () => {\r\n    if (testResultsElement) return;\r\n    const toolsPaneElement = getToolspaneElement();\r\n\r\n    const container = document.createElement('div');\r\n    container.id = 'test-container';\r\n    toolsPaneElement.appendChild(container);\r\n\r\n    const testActions = document.createElement('div');\r\n    testActions.id = 'test-actions';\r\n    testActions.classList.add('buttons');\r\n    testActions.innerHTML = `\r\n    <a id=\"run-tests-btn\" href=\"#\" class=\"button hint--top\" data-hint=\"Ctrl/Cmd + Alt + T\">\r\n      ${icons.run} Run\r\n    </a>\r\n    <a id=\"watch-tests-btn\" href=\"#\" class=\"button disabled hint--top\" data-hint=\"Run tests when code changes\">\r\n      ${icons.checked} ${icons.unchecked} Watch\r\n    </a>\r\n    <a id=\"reset-tests-btn\" href=\"#\" class=\"button\">${icons.reset} Reset</a>\r\n    ${isEmbed ? '' : '<a id=\"edit-tests-btn\" href=\"#\" class=\"button\">' + icons.edit + ' Edit</a>'}\r\n    `;\r\n    container.appendChild(testActions);\r\n\r\n    testResultsElement = document.createElement('div');\r\n    testResultsElement.id = 'test-results';\r\n    testResultsElement.classList.add('luna-console');\r\n    testResultsElement.innerHTML = loading;\r\n    container.appendChild(testResultsElement);\r\n\r\n    eventsManager.addEventListener(\r\n      document.querySelector('#reset-tests-btn') as HTMLElement,\r\n      'click',\r\n      (ev: Event) => {\r\n        ev.preventDefault();\r\n        resetTests();\r\n      },\r\n    );\r\n  };\r\n\r\n  const resetTests = () => {\r\n    testResultsElement.querySelectorAll<HTMLElement>('.test-result').forEach((item) => {\r\n      item.querySelectorAll('.test-error').forEach((err) => err.remove());\r\n      if (item.classList.contains('pass')) {\r\n        item.classList.remove('pass');\r\n      }\r\n      if (item.classList.contains('fail')) {\r\n        item.classList.remove('fail');\r\n      }\r\n    });\r\n    const testSummary = testResultsElement.querySelector<HTMLElement>('.test-summary');\r\n    if (testSummary) {\r\n      testSummary.innerText = '';\r\n    }\r\n  };\r\n\r\n  const clearTests = () => {\r\n    if (testResultsElement) {\r\n      testResultsElement.innerHTML = loading;\r\n    }\r\n  };\r\n\r\n  const showResults = ({ results, error }: { results: TestResult[]; error?: string }) => {\r\n    if (!testResultsElement) {\r\n      createElements();\r\n    }\r\n    testResultsElement.innerHTML = '';\r\n\r\n    if (error) {\r\n      testResultsElement.innerHTML =\r\n        '<div class=\"no-tests\"><span class=\"fail\">Test error!</span></div>';\r\n      return;\r\n    }\r\n\r\n    if (results.length === 0) {\r\n      testResultsElement.innerHTML = '<div class=\"no-tests\">This project has no tests!</div>';\r\n      return;\r\n    }\r\n\r\n    results.forEach((result) => {\r\n      const item = document.createElement('div');\r\n      item.innerText = result.testPath.filter((p) => p !== 'ROOT_DESCRIBE_BLOCK').join(' \u203A ');\r\n      item.classList.add('test-result', result.status);\r\n      result.errors\r\n        .map((err) => err.split('at Object.<anonymous>')[0]?.trim())\r\n        .map((err) =>\r\n          err.startsWith('AssertionError: ') ? err.replace('AssertionError: ', '') : err,\r\n        )\r\n        .forEach((err) => {\r\n          const testError = document.createElement('pre');\r\n          testError.classList.add('test-error');\r\n          testError.innerText = err;\r\n          item.appendChild(testError);\r\n        });\r\n      testResultsElement.appendChild(item);\r\n    });\r\n\r\n    const passed = results.filter((r) => r.status === 'pass').length;\r\n    const failed = results.filter((r) => r.status === 'fail').length;\r\n    const total = results.length;\r\n    const duration = results.reduce((totalDuration, r) => totalDuration + r.duration, 0) / 1000;\r\n    const summary = document.createElement('div');\r\n    summary.classList.add('test-summary');\r\n    summary.innerHTML = `\r\n    Tests: ${failed !== 0 ? '<span class=\"fail\">' + failed + ' failed</span>,' : ''}\r\n           ${passed !== 0 ? '<span class=\"pass\">' + passed + ' passed</span>,' : ''}\r\n           ${total} total <br />\r\n    Time: ${duration}s\r\n`;\r\n    testResultsElement.prepend(summary);\r\n  };\r\n\r\n  return {\r\n    name: 'tests',\r\n    title: 'Tests',\r\n    load: async () => {\r\n      createElements();\r\n    },\r\n    onActivate: () => {\r\n      runTests();\r\n    },\r\n    onDeactivate: () => {\r\n      //\r\n    },\r\n    showResults,\r\n    resetTests,\r\n    clearTests,\r\n  };\r\n};\r\n", "import Split from 'split.js';\r\nimport type {\r\n  Editors,\r\n  Config,\r\n  ToolList,\r\n  ToolsPaneStatus,\r\n  EventsManager,\r\n  ToolsPane,\r\n  Tool,\r\n} from '../models';\r\nimport { getResultElement, getToolspaneBar } from '../UI';\r\nimport { createCompiledCodeViewer } from './compiled-code-viewer';\r\nimport { createConsole } from './console';\r\nimport { createTestViewer } from './test-viewer';\r\n\r\nexport const createToolsPane = (\r\n  config: Config,\r\n  baseUrl: string,\r\n  editors: Editors,\r\n  eventsManager: EventsManager,\r\n  isEmbed: boolean,\r\n  runTests: () => Promise<void>,\r\n): ToolsPane => {\r\n  let toolsSplit: Split.Instance;\r\n  let status: ToolsPaneStatus;\r\n  let activeToolId = 0;\r\n\r\n  const fullList: ToolList = [\r\n    {\r\n      name: 'console',\r\n      factory: createConsole,\r\n    },\r\n    {\r\n      name: 'compiled',\r\n      factory: createCompiledCodeViewer,\r\n    },\r\n    {\r\n      name: 'tests',\r\n      factory: createTestViewer,\r\n    },\r\n  ];\r\n\r\n  const isEnabled = (tool: ToolList[number]) =>\r\n    config.tools.enabled === 'all' || config.tools.enabled.includes(tool.name);\r\n\r\n  const toolList: ToolList = fullList.filter(isEnabled);\r\n\r\n  const populateTools = (\r\n    config: Config,\r\n    baseUrl: string,\r\n    editors: Editors,\r\n    eventsManager: EventsManager,\r\n    isEmbed: boolean,\r\n    runTests: () => Promise<void>,\r\n  ) =>\r\n    toolList.map((tool) =>\r\n      tool.factory(config, baseUrl, editors, eventsManager, isEmbed, runTests),\r\n    );\r\n\r\n  const allTools = populateTools(config, baseUrl, editors, eventsManager, isEmbed, runTests);\r\n  const tools = [...allTools];\r\n\r\n  const result = getResultElement();\r\n  const gutterSize = 30;\r\n  type Sizes = {\r\n    [key in ToolsPaneStatus]: [number, number];\r\n  };\r\n\r\n  const sizes: Sizes = {\r\n    closed: [100, 0],\r\n    open: [60, 40],\r\n    full: [0, 100],\r\n    none: [100, 0],\r\n    '': [100, 0],\r\n  };\r\n\r\n  const setAnimation = (animate: boolean) => {\r\n    if (animate) {\r\n      result.style.transition = 'height 0.5s';\r\n    } else {\r\n      result.style.transition = 'none';\r\n    }\r\n  };\r\n\r\n  const setHidden = (hide: boolean) => {\r\n    if (hide) {\r\n      toolsSplit.collapse(1);\r\n      result.style.minHeight = '100%';\r\n    } else {\r\n      result.style.minHeight = 'unset';\r\n    }\r\n  };\r\n\r\n  const setActiveTool = (toolId: number) => {\r\n    activeToolId = toolId;\r\n\r\n    document.querySelectorAll('#tools-pane-bar .tools-pane-title').forEach((title, index) => {\r\n      if (toolId === index) {\r\n        title.classList.add('active');\r\n      } else {\r\n        title.classList.remove('active');\r\n      }\r\n    });\r\n\r\n    document.querySelectorAll('#tools-pane > div').forEach((container, index) => {\r\n      if (toolId === index) {\r\n        container.classList.add('active');\r\n      } else {\r\n        container.classList.remove('active');\r\n      }\r\n    });\r\n\r\n    tools.forEach((tool, index) => {\r\n      if (toolId === index) {\r\n        tool.onActivate();\r\n      } else {\r\n        tool.onDeactivate();\r\n      }\r\n    });\r\n  };\r\n\r\n  const sizeChanged = () => {\r\n    const consoleButtons = document.querySelector(\r\n      '#tools-pane-bar #tools-pane-buttons',\r\n    ) as HTMLElement;\r\n    if (toolsSplit.getSizes()[0] > 90) {\r\n      consoleButtons.style.visibility = 'hidden';\r\n    } else {\r\n      if (consoleButtons.style.visibility === 'hidden') {\r\n        consoleButtons.style.visibility = 'visible';\r\n        tools[activeToolId]?.onActivate();\r\n      }\r\n    }\r\n  };\r\n\r\n  const open = (toolId: number, maximize = false) => {\r\n    if (maximize) {\r\n      toolsSplit.collapse(0);\r\n      status = 'full';\r\n    } else {\r\n      toolsSplit.setSizes(sizes.open);\r\n      status = 'open';\r\n    }\r\n    sizeChanged();\r\n    setActiveTool(toolId);\r\n  };\r\n\r\n  const close = () => {\r\n    toolsSplit.collapse(1);\r\n    status = 'closed';\r\n    sizeChanged();\r\n    tools.forEach((tool) => tool.onDeactivate());\r\n  };\r\n\r\n  const createToolsSplit = () => {\r\n    if (toolsSplit) {\r\n      return toolsSplit;\r\n    }\r\n\r\n    toolsSplit = Split(['#result', '#tools-pane'], {\r\n      sizes: sizes.closed,\r\n      gutterSize,\r\n      direction: 'vertical',\r\n      elementStyle: (_dimension, size, gutterSize) => ({\r\n        height: `calc(${size}% - ${gutterSize}px)`,\r\n      }),\r\n      gutterStyle: (_dimension, gutterSize) => ({\r\n        height: `${gutterSize}px`,\r\n      }),\r\n      onDragStart() {\r\n        setAnimation(false);\r\n      },\r\n      onDragEnd() {\r\n        setAnimation(true);\r\n      },\r\n      onDrag() {\r\n        sizeChanged();\r\n      },\r\n    });\r\n\r\n    const toolsPaneBar = document.querySelector('#output .gutter') as HTMLElement;\r\n    toolsPaneBar.id = 'tools-pane-bar';\r\n\r\n    const toolsPaneTitles = document.createElement('div');\r\n    toolsPaneTitles.id = 'tools-pane-titles';\r\n    toolsPaneBar.appendChild(toolsPaneTitles);\r\n\r\n    tools.forEach((tool, index) => {\r\n      const toolTitle = document.createElement('div');\r\n      toolTitle.dataset.id = String(index);\r\n      toolTitle.classList.add('tools-pane-title', tool.name);\r\n      toolTitle.innerHTML = tool.title;\r\n      toolsPaneTitles.appendChild(toolTitle);\r\n\r\n      let timer: any;\r\n      eventsManager.addEventListener(\r\n        toolTitle,\r\n        'click',\r\n        (event: any) => {\r\n          if (event.detail === 1) {\r\n            timer = setTimeout(() => {\r\n              if (toolsSplit.getSizes()[0] > 90) {\r\n                open(index);\r\n              } else if (!toolTitle.classList.contains('active')) {\r\n                setActiveTool(index);\r\n              } else {\r\n                close();\r\n              }\r\n            }, 200);\r\n          }\r\n        },\r\n        false,\r\n      );\r\n      eventsManager.addEventListener(\r\n        toolTitle,\r\n        'dblclick',\r\n        () => {\r\n          clearTimeout(timer);\r\n          if (toolsSplit.getSizes()[0] < 10) {\r\n            close();\r\n          } else {\r\n            open(index, true);\r\n          }\r\n        },\r\n        false,\r\n      );\r\n      eventsManager.addEventListener(\r\n        toolTitle,\r\n        'touchstart',\r\n        () => {\r\n          if (toolsSplit.getSizes()[0] > 90) {\r\n            open(index);\r\n          } else if (!toolTitle.classList.contains('active')) {\r\n            setActiveTool(index);\r\n          } else {\r\n            close();\r\n          }\r\n        },\r\n        {\r\n          capture: false,\r\n          passive: true,\r\n        },\r\n      );\r\n    });\r\n\r\n    eventsManager.addEventListener(\r\n      window,\r\n      'resize',\r\n      () => {\r\n        const toolsPane = document.querySelector('#tools-pane') as HTMLElement;\r\n        if (!toolsPane) return;\r\n        if (toolsSplit.getSizes()[0] < 10) {\r\n          result.style.height = '0';\r\n          toolsPane.style.height = `calc(100% - ${gutterSize}px)`;\r\n        } else if (toolsSplit.getSizes()[0] > 90) {\r\n          result.style.height = `calc(100% - ${gutterSize}px)`;\r\n          toolsPane.style.height = '0';\r\n        }\r\n      },\r\n      false,\r\n    );\r\n\r\n    const loading = document.createElement('div');\r\n    loading.id = 'tools-pane-loading';\r\n    loading.style.display = 'none';\r\n    toolsPaneBar.appendChild(loading);\r\n\r\n    const buttons = document.createElement('div');\r\n    buttons.id = 'tools-pane-buttons';\r\n    toolsPaneBar.appendChild(buttons);\r\n\r\n    const btnContainer = document.createElement('span');\r\n    btnContainer.classList.add('hint--top-left');\r\n    btnContainer.dataset.hint = 'Close';\r\n    const closeButton = document.createElement('button');\r\n    closeButton.classList.add('delete-button');\r\n\r\n    eventsManager.addEventListener(\r\n      closeButton,\r\n      'click',\r\n      () => {\r\n        close();\r\n      },\r\n      false,\r\n    );\r\n    eventsManager.addEventListener(\r\n      closeButton,\r\n      'touchstart',\r\n      () => {\r\n        close();\r\n      },\r\n      false,\r\n    );\r\n    btnContainer.appendChild(closeButton);\r\n    buttons.appendChild(btnContainer);\r\n\r\n    return toolsSplit;\r\n  };\r\n\r\n  const resize = (newStatus: ToolsPaneStatus) => {\r\n    if (newStatus === 'none') {\r\n      setHidden(true);\r\n    } else {\r\n      setHidden(false);\r\n    }\r\n\r\n    if (newStatus === 'closed') {\r\n      close();\r\n    } else if (newStatus === 'full') {\r\n      open(activeToolId, true);\r\n    } else if (newStatus === 'open') {\r\n      open(activeToolId);\r\n    }\r\n\r\n    status = newStatus;\r\n    sizeChanged();\r\n  };\r\n\r\n  const load = async () => {\r\n    const initialLoad = status === undefined;\r\n    activeToolId = getToolId(config.tools.active);\r\n    status = config.tools.status || 'closed';\r\n\r\n    if (initialLoad) {\r\n      toolsSplit = createToolsSplit();\r\n      toolsSplit.setSizes(sizes[status]);\r\n      sizeChanged();\r\n      if (status === 'none') {\r\n        // setHidden(true);\r\n        getToolspaneBar().style.pointerEvents = 'none';\r\n      }\r\n      tools.forEach(async (tool) => {\r\n        await tool.load();\r\n      });\r\n    }\r\n    setActiveTool(activeToolId);\r\n  };\r\n\r\n  const getToolId = (name: Tool['name'] | '') => {\r\n    const id = tools.findIndex((t) => t?.name === name);\r\n    return id > -1 ? id : 0;\r\n  };\r\n\r\n  const disableTool = (name: Tool['name']) => {\r\n    const id = tools.findIndex((t) => t?.name === name);\r\n    if (id === -1) return;\r\n    delete tools[id];\r\n    if (activeToolId === id) {\r\n      setActiveTool(tools.findIndex((t) => t));\r\n    }\r\n    if (name in api) {\r\n      delete api[name];\r\n    }\r\n    const domTitle = document.querySelector<HTMLElement>('#tools-pane-titles .' + name);\r\n    if (domTitle) {\r\n      domTitle.classList.remove('active');\r\n      domTitle.style.display = 'none';\r\n    }\r\n    if (tools.filter((t) => t).length === 0) {\r\n      resize('none');\r\n    }\r\n  };\r\n\r\n  const enableTool = (name: Tool['name']) => {\r\n    // wrong title\r\n    const id = allTools.findIndex((t) => t.name === name);\r\n    if (id === -1) return;\r\n    // already enabled\r\n    if (tools.find((t) => t?.name === name)) return;\r\n\r\n    if (tools.filter((t) => t).length === 0) {\r\n      resize('closed');\r\n      setActiveTool(id);\r\n    }\r\n\r\n    api[name] = allTools[id] as any;\r\n    tools[id] = allTools[id];\r\n\r\n    const toolTitle = document.querySelector<HTMLElement>('.tools-pane-title.' + name);\r\n    if (toolTitle) {\r\n      toolTitle.style.display = 'flex';\r\n    }\r\n  };\r\n\r\n  const api: ToolsPane = {\r\n    load,\r\n    open: () => resize('open'),\r\n    close: () => resize('closed'),\r\n    maximize: () => resize('full'),\r\n    hide: () => resize('none'),\r\n    getStatus: () => status,\r\n    getActiveTool: () => tools[activeToolId]?.name,\r\n    setActiveTool: (title: Tool['name']) => setActiveTool(getToolId(title)),\r\n    disableTool,\r\n    enableTool,\r\n    // console, compiled, tests\r\n    ...toolList.reduce((acc, tool, index) => ({ ...acc, [tool.name]: tools[index] }), {}),\r\n  };\r\n\r\n  return api;\r\n};\r\n", "type SDKFile = 'esm' | 'umd' | 'react' | 'vue' | 'types';\r\n\r\nconst sdkFiles: Record<SDKFile, string> = {\r\n  esm: 'livecodes.js',\r\n  umd: 'livecodes.umd.js',\r\n  react: 'react.js',\r\n  vue: 'vue.js',\r\n  types: 'index.d.ts',\r\n};\r\n\r\nexport const permanentUrlService = {\r\n  getAppUrl: () => `https://v${process.env.VERSION}.livecodes.io/`,\r\n  getSDKUrl: (file: SDKFile = 'esm') =>\r\n    `https://cdn.jsdelivr.net/npm/livecodes@${process.env.SDK_VERSION}/${sdkFiles[file]}`,\r\n};\r\n", "/* eslint-disable import/no-internal-modules */\r\nimport { createEditor, createCustomEditors, getFontFamily } from './editor';\r\nimport {\r\n  languages,\r\n  getLanguageEditorId,\r\n  getLanguageCompiler,\r\n  languageIsEnabled,\r\n  processors,\r\n  processorIsEnabled,\r\n  getLanguageByAlias,\r\n  mapLanguage,\r\n  createLanguageMenus,\r\n  createProcessorItem,\r\n  getLanguageTitle,\r\n  getLanguageSpecs,\r\n  getLanguageExtension,\r\n} from './languages';\r\nimport {\r\n  fakeStorage,\r\n  createStores,\r\n  initializeStores,\r\n  type Stores,\r\n  type StorageItem,\r\n} from './storage';\r\nimport type {\r\n  API,\r\n  Cache,\r\n  CodeEditor,\r\n  EditorId,\r\n  EditorLanguages,\r\n  EditorOptions,\r\n  Editors,\r\n  GithubScope,\r\n  Language,\r\n  Config,\r\n  Screen,\r\n  ShareData,\r\n  Template,\r\n  User,\r\n  ContentConfig,\r\n  Theme,\r\n  UserConfig,\r\n  Await,\r\n  Code,\r\n  CustomEditors,\r\n  BlocklyContent,\r\n  CustomSettings,\r\n  Types,\r\n  TestResult,\r\n  ToolsPane,\r\n  UserData,\r\n  AppData,\r\n  Processor,\r\n  APICommands,\r\n  CompileInfo,\r\n} from './models';\r\nimport type { GitHubFile } from './services/github';\r\nimport type {\r\n  BroadcastData,\r\n  BroadcastInfo,\r\n  BroadcastResponseData,\r\n  BroadcastResponseError,\r\n} from './UI/broadcast';\r\nimport { getFormatter } from './formatter';\r\nimport { createNotifications } from './notifications';\r\nimport { createModal } from './modal';\r\nimport {\r\n  settingsMenuHTML,\r\n  resultTemplate,\r\n  customSettingsScreen,\r\n  testEditorScreen,\r\n  savePromptScreen,\r\n  recoverPromptScreen,\r\n  resultPopupHTML,\r\n  welcomeScreen,\r\n  aboutScreen,\r\n} from './html';\r\nimport { exportJSON } from './export/export-json';\r\nimport { createEventsManager } from './events';\r\nimport { getStarterTemplates, getTemplate } from './templates';\r\nimport {\r\n  buildConfig,\r\n  defaultConfig,\r\n  getConfig,\r\n  getContentConfig,\r\n  getEditorConfig,\r\n  getFormatterConfig,\r\n  getParams,\r\n  getUserConfig,\r\n  setConfig,\r\n  upgradeAndValidate,\r\n} from './config';\r\nimport { isGithub } from './import/github';\r\nimport {\r\n  copyToClipboard,\r\n  debounce,\r\n  getValidUrl,\r\n  loadStylesheet,\r\n  stringify,\r\n  stringToValidJson,\r\n} from './utils';\r\nimport { compress } from './utils/compression';\r\nimport { getCompiler, getAllCompilers, cjs2esm, getCompileResult } from './compiler';\r\nimport { createTypeLoader } from './types';\r\nimport { createResultPage } from './result';\r\nimport * as UI from './UI/selectors';\r\nimport { createAuthService, sandboxService, shareService } from './services';\r\nimport { cacheIsValid, getCache, getCachedCode, setCache, updateCache } from './cache';\r\nimport {\r\n  chaiTypesUrl,\r\n  fscreenUrl,\r\n  hintCssUrl,\r\n  jestTypesUrl,\r\n  lunaConsoleStylesUrl,\r\n  lunaObjViewerStylesUrl,\r\n  snackbarUrl,\r\n} from './vendors';\r\nimport { createToolsPane } from './toolspane';\r\nimport {\r\n  createOpenItem,\r\n  createProjectInfoUI,\r\n  createSplitPanes,\r\n  createStarterTemplateLink,\r\n  displayLoggedIn,\r\n  displayLoggedOut,\r\n  getResultElement,\r\n  loadingMessage,\r\n  noUserTemplates,\r\n  createLoginContainer,\r\n  createTemplatesContainer,\r\n  getFullscreenButton,\r\n} from './UI';\r\nimport { customEvents } from './events/custom-events';\r\nimport { populateConfig } from './import/utils';\r\nimport { permanentUrlService } from './services/permanent-url';\r\n\r\nconst stores: Stores = createStores();\r\nconst eventsManager = createEventsManager();\r\nconst notifications = createNotifications();\r\nconst modal = createModal();\r\nlet split: ReturnType<typeof createSplitPanes> | null = createSplitPanes();\r\nconst typeLoader = createTypeLoader();\r\nconst screens: Screen[] = [];\r\nconst params = getParams(); // query string params\r\nconst iframeScrollPosition = { x: 0, y: 0 };\r\n\r\nlet baseUrl: string;\r\nlet isEmbed: boolean;\r\nlet isLite: boolean;\r\nlet compiler: Await<ReturnType<typeof getCompiler>>;\r\nlet formatter: ReturnType<typeof getFormatter>;\r\nlet editors: Editors;\r\nlet customEditors: CustomEditors;\r\nlet toolsPane: ToolsPane | undefined;\r\nlet authService: ReturnType<typeof createAuthService> | undefined;\r\nlet editorLanguages: EditorLanguages | undefined;\r\nlet resultLanguages: Language[] = [];\r\nlet projectId: string;\r\nlet isSaved = true;\r\nlet changingContent = false;\r\nlet consoleInputCodeCompletion: any;\r\nlet starterTemplates: Template[];\r\nlet watchTests = false;\r\nlet initialized = false;\r\nlet isDestroyed = false;\r\nconst broadcastInfo: BroadcastInfo = {\r\n  isBroadcasting: false,\r\n  channel: '',\r\n  channelUrl: '',\r\n  channelToken: '',\r\n  broadcastSource: false,\r\n};\r\nlet resultPopup: Window | null = null;\r\n\r\nconst getEditorLanguage = (editorId: EditorId = 'markup') => editorLanguages?.[editorId];\r\nconst getEditorLanguages = () => Object.values(editorLanguages || {});\r\nconst getActiveEditor = () => editors[getConfig().activeEditor || 'markup'];\r\nconst setActiveEditor = async (config: Config) => showEditor(config.activeEditor);\r\n\r\nconst loadStyles = () =>\r\n  Promise.all(\r\n    [snackbarUrl, hintCssUrl, lunaObjViewerStylesUrl, lunaConsoleStylesUrl].map((url) =>\r\n      loadStylesheet(url, undefined, '#app-styles'),\r\n    ),\r\n  );\r\n\r\nconst createIframe = (container: HTMLElement, result = '', service = sandboxService) =>\r\n  new Promise((resolve, reject) => {\r\n    if (!container) {\r\n      reject('Result container not found');\r\n      return;\r\n    }\r\n\r\n    let iframe = UI.getResultIFrameElement();\r\n    if (!iframe) {\r\n      iframe = document.createElement('iframe');\r\n      iframe.name = 'result';\r\n      iframe.id = 'result-frame';\r\n      iframe.setAttribute(\r\n        'allow',\r\n        'accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share',\r\n      );\r\n      iframe.setAttribute('allowtransparency', 'true');\r\n      iframe.setAttribute('allowpaymentrequest', 'true');\r\n      iframe.setAttribute('allowfullscreen', 'true');\r\n      iframe.setAttribute(\r\n        'sandbox',\r\n        'allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts',\r\n      );\r\n    }\r\n\r\n    if (['codeblock', 'editor'].includes(getConfig().mode)) {\r\n      result = '';\r\n    }\r\n\r\n    const scriptLang = getEditorLanguage('script') || 'javascript';\r\n    const compilers = getAllCompilers(languages, getConfig(), baseUrl);\r\n    const editorsText = `${getConfig().markup.content}\r\n      ${getConfig().style.content}\r\n      ${getConfig().script.content}\r\n      `;\r\n    const iframeIsPlaced = iframe.parentElement === container;\r\n    const styleOnlyUpdate = iframeIsPlaced && getCache().styleOnlyUpdate;\r\n    const liveReload =\r\n      iframeIsPlaced &&\r\n      compilers[scriptLang]?.liveReload &&\r\n      resultLanguages.includes(scriptLang) &&\r\n      !editorsText.includes('__livecodes_reload__');\r\n\r\n    if (styleOnlyUpdate) {\r\n      // load the updated styles only\r\n      const domParser = new DOMParser();\r\n      const dom = domParser.parseFromString(result, 'text/html');\r\n      const stylesElement = dom.querySelector('#__livecodes_styles__');\r\n      if (stylesElement) {\r\n        const styles = stylesElement.innerHTML;\r\n        iframe.contentWindow?.postMessage({ styles }, service.getOrigin());\r\n      } else {\r\n        iframe.contentWindow?.postMessage({ result }, service.getOrigin());\r\n      }\r\n      resolve('loaded');\r\n    } else if (liveReload) {\r\n      // allows only sending the updated code to the iframe without full page reload\r\n      iframe.contentWindow?.postMessage({ result }, service.getOrigin());\r\n      resolve('loaded');\r\n    } else {\r\n      // full page reload\r\n      let loaded = false;\r\n      eventsManager.addEventListener(iframe, 'load', function onload() {\r\n        eventsManager.removeEventListener(iframe, 'load', onload);\r\n\r\n        if (!result || loaded) {\r\n          resolve('loaded');\r\n          return; // prevent infinite loop\r\n        }\r\n\r\n        iframe.contentWindow?.postMessage({ result }, service.getOrigin());\r\n        loaded = true;\r\n        resolve('loaded');\r\n      });\r\n\r\n      iframe.remove(); // avoid changing browser history\r\n      const { markup, style, script } = getConfig();\r\n      const query = `?markup=${markup.language}&style=${style.language}&script=${\r\n        script.language\r\n      }&isEmbed=${isEmbed}&isLoggedIn=${Boolean(authService?.isLoggedIn())}`;\r\n      const scrollPosition =\r\n        params.scrollPosition === false ||\r\n        (iframeScrollPosition.x === 0 && iframeScrollPosition.y === 0)\r\n          ? ''\r\n          : `#livecodes-scroll-position:${iframeScrollPosition.x},${iframeScrollPosition.y}`;\r\n      iframe.src = service.getResultUrl() + query + scrollPosition;\r\n      container.appendChild(iframe);\r\n    }\r\n\r\n    resultLanguages = getEditorLanguages();\r\n  });\r\n\r\nconst loadModuleTypes = async (editors: Editors, config: Config) => {\r\n  const scriptLanguage = config.script.language;\r\n  if (\r\n    editors.script &&\r\n    ['typescript', 'javascript'].includes(mapLanguage(scriptLanguage)) &&\r\n    typeof editors.script.addTypes === 'function'\r\n  ) {\r\n    const configTypes = {\r\n      ...getLanguageCompiler(scriptLanguage)?.types,\r\n      ...config.types,\r\n      ...config.customSettings.types,\r\n    };\r\n    const libs = await typeLoader.load(getConfig().script.content || '', configTypes);\r\n    libs.forEach((lib) => editors.script.addTypes?.(lib));\r\n  }\r\n};\r\n\r\nconst highlightSelectedLanguage = (editorId: EditorId, language: Language) => {\r\n  const menuItems = document.querySelectorAll<HTMLElement>(\r\n    `.dropdown-menu-${editorId} .language-item a`,\r\n  );\r\n  menuItems.forEach((item) => {\r\n    if (item.dataset.lang === language) {\r\n      item.parentElement?.classList.add('active');\r\n    } else {\r\n      item.parentElement?.classList.remove('active');\r\n    }\r\n  });\r\n};\r\n\r\nconst setEditorTitle = (editorId: EditorId, title: string) => {\r\n  const editorTitle = document.querySelector(`#${editorId}-selector span`);\r\n  const language = getLanguageByAlias(title);\r\n  if (!editorTitle || !language) return;\r\n  editorTitle.innerHTML = languages.find((lang) => lang.name === language)?.title || '';\r\n  highlightSelectedLanguage(editorId, language);\r\n};\r\n\r\nconst createCopyButtons = () => {\r\n  const editorIds: EditorId[] = ['markup', 'style', 'script'];\r\n  const copyImgHtml = `<span><img src=\"${baseUrl}assets/images/copy.svg\" alt=\"copy\"></span>`;\r\n  editorIds.forEach((editorId) => {\r\n    const copyButton = document.createElement('div');\r\n    copyButton.innerHTML = copyImgHtml;\r\n    copyButton.classList.add('copy-button', 'tool-buttons');\r\n    copyButton.title = 'Copy';\r\n    document.getElementById(editorId)?.appendChild(copyButton);\r\n    eventsManager.addEventListener(copyButton, 'click', () => {\r\n      if (copyToClipboard(editors?.[editorId]?.getValue())) {\r\n        copyButton.innerHTML = `<span><img src=\"${baseUrl}assets/images/tick.svg\" alt=\"copied\"></span>`;\r\n        copyButton.classList.add('hint--left', 'visible');\r\n        copyButton.dataset.hint = 'Copied!';\r\n        copyButton.title = '';\r\n        setTimeout(() => {\r\n          copyButton.innerHTML = copyImgHtml;\r\n          copyButton.classList.remove('hint--left', 'visible');\r\n          copyButton.dataset.hint = '';\r\n          copyButton.title = 'Copy';\r\n        }, 2000);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst createEditors = async (config: Config) => {\r\n  if (editors) {\r\n    Object.values(editors).forEach((editor: CodeEditor) => editor.destroy());\r\n    resetEditorModeStatus();\r\n  }\r\n\r\n  const baseOptions = {\r\n    baseUrl,\r\n    mode: config.mode,\r\n    readonly: config.readonly,\r\n    theme: config.theme,\r\n    ...getEditorConfig(config),\r\n    isEmbed,\r\n    mapLanguage,\r\n    getLanguageExtension,\r\n    getFormatterConfig: () => getFormatterConfig(getConfig()),\r\n    getFontFamily,\r\n  };\r\n  const markupOptions: EditorOptions = {\r\n    ...baseOptions,\r\n    container: UI.getMarkupElement(),\r\n    editorId: 'markup',\r\n    language: languageIsEnabled(config.markup.language, config)\r\n      ? config.markup.language\r\n      : (config.languages?.find((lang) => getLanguageEditorId(lang) === 'markup') as Language) ||\r\n        'html',\r\n    value: languageIsEnabled(config.markup.language, config) ? config.markup.content || '' : '',\r\n  };\r\n  const styleOptions: EditorOptions = {\r\n    ...baseOptions,\r\n    container: UI.getStyleElement(),\r\n    editorId: 'style',\r\n    language: languageIsEnabled(config.style.language, config)\r\n      ? config.style.language\r\n      : (config.languages?.find((lang) => getLanguageEditorId(lang) === 'style') as Language) ||\r\n        'css',\r\n    value: languageIsEnabled(config.style.language, config) ? config.style.content || '' : '',\r\n  };\r\n  const scriptOptions: EditorOptions = {\r\n    ...baseOptions,\r\n    container: UI.getScriptElement(),\r\n    editorId: 'script',\r\n    language: languageIsEnabled(config.script.language, config)\r\n      ? config.script.language\r\n      : (config.languages?.find((lang) => getLanguageEditorId(lang) === 'script') as Language) ||\r\n        'javascript',\r\n    value: languageIsEnabled(config.script.language, config) ? config.script.content || '' : '',\r\n  };\r\n\r\n  const markupEditor = await createEditor(markupOptions);\r\n  const styleEditor = await createEditor(styleOptions);\r\n  const scriptEditor = await createEditor(scriptOptions);\r\n\r\n  setEditorTitle('markup', markupOptions.language);\r\n  setEditorTitle('style', styleOptions.language);\r\n  setEditorTitle('script', scriptOptions.language);\r\n\r\n  editorLanguages = {\r\n    markup: markupOptions.language,\r\n    style: styleOptions.language,\r\n    script: scriptOptions.language,\r\n  };\r\n\r\n  editors = {\r\n    markup: markupEditor,\r\n    style: styleEditor,\r\n    script: scriptEditor,\r\n  };\r\n\r\n  (Object.keys(editors) as EditorId[]).forEach(async (editorId) => {\r\n    const language = editorLanguages?.[editorId] || 'html';\r\n    applyLanguageConfigs(language);\r\n    editors[editorId].registerFormatter(await formatter.getFormatFn(language));\r\n    registerRun(editorId, editors);\r\n  });\r\n\r\n  if (config.mode === 'codeblock') {\r\n    createCopyButtons();\r\n  }\r\n};\r\n\r\nconst reloadEditors = async (config: Config) => {\r\n  await createEditors(config);\r\n  await toolsPane?.console?.reloadEditor(config);\r\n  await toolsPane?.compiled?.reloadEditor(config);\r\n  updateCompiledCode();\r\n  handleChangeContent();\r\n};\r\n\r\nconst updateEditors = async (editors: Editors, config: Config) => {\r\n  const editorIds = Object.keys(editors) as Array<keyof Editors>;\r\n  for (const editorId of editorIds) {\r\n    const language = getLanguageByAlias(config[editorId].language);\r\n    if (language) {\r\n      await changeLanguage(language, config[editorId].content, true);\r\n    }\r\n  }\r\n};\r\n\r\nconst showMode = (config: Config) => {\r\n  const modes = {\r\n    full: '111',\r\n    editor: '110',\r\n    codeblock: '010',\r\n    result: '001',\r\n  };\r\n  const modeConfig = modes[config.mode] || '111';\r\n\r\n  const toolbarElement = UI.getToolbarElement();\r\n  const editorContainerElement = UI.getEditorContainerElement();\r\n  const editorsElement = UI.getEditorsElement();\r\n  const outputElement = UI.getOutputElement();\r\n  const resultElement = UI.getResultElement();\r\n  const gutterElement = UI.getGutterElement();\r\n  const runButton = UI.getRunButton();\r\n  const codeRunButton = UI.getCodeRunButton();\r\n  const editorTools = UI.getEditorToolbar();\r\n\r\n  const showToolbar = modeConfig[0] === '1';\r\n  const showEditor = modeConfig[1] === '1';\r\n  const showResult = modeConfig[2] === '1';\r\n\r\n  toolbarElement.style.display = 'flex';\r\n  editorsElement.style.display = 'flex';\r\n  resultElement.style.display = 'flex';\r\n  outputElement.style.display = 'block';\r\n  gutterElement.style.display = 'block';\r\n  runButton.style.visibility = 'visible';\r\n  codeRunButton.style.visibility = 'visible';\r\n\r\n  if (!showToolbar) {\r\n    toolbarElement.style.display = 'none';\r\n    editorContainerElement.style.height = '100%';\r\n  }\r\n  if (!showEditor) {\r\n    outputElement.style.flexBasis = '100%';\r\n    editorsElement.style.display = 'none';\r\n    split?.destroy(true);\r\n    split = null;\r\n  }\r\n  if (!showResult) {\r\n    editorsElement.style.flexBasis = '100%';\r\n    outputElement.style.display = 'none';\r\n    resultElement.style.display = 'none';\r\n    codeRunButton.style.display = 'none';\r\n    split?.destroy(true);\r\n    split = null;\r\n  }\r\n  if (config.mode === 'editor' || config.mode === 'codeblock') {\r\n    runButton.style.visibility = 'hidden';\r\n    codeRunButton.style.visibility = 'hidden';\r\n  }\r\n  if (config.mode === 'codeblock') {\r\n    editorTools.style.display = 'none';\r\n  }\r\n  if (config.mode === 'result') {\r\n    if (!['full', 'open', 'closed'].includes(toolsPane?.getStatus() || '')) {\r\n      toolsPane?.hide();\r\n    }\r\n  }\r\n  if (config.mode === 'full' && !split) {\r\n    split = createSplitPanes();\r\n  }\r\n  window.dispatchEvent(new Event(customEvents.resizeEditor));\r\n};\r\n\r\nconst showEditor = (editorId: EditorId = 'markup', isUpdate = false) => {\r\n  const titles = UI.getEditorTitles();\r\n  const editorIsVisible = () =>\r\n    Array.from(titles)\r\n      .map((title) => title.dataset.editor)\r\n      .includes(editorId);\r\n  if (!editorIsVisible()) {\r\n    // select first visible editor instead\r\n    editorId = (titles[0].dataset.editor as EditorId) || 'markup';\r\n  }\r\n  titles.forEach((selector) => selector.classList.remove('active'));\r\n  const activeTitle = document.getElementById(editorId + '-selector');\r\n  activeTitle?.classList.add('active');\r\n  const editorDivs = UI.getEditorDivs();\r\n  editorDivs.forEach((editor) => (editor.style.display = 'none'));\r\n  const activeEditor = document.getElementById(editorId) as HTMLElement;\r\n  activeEditor.style.display = 'block';\r\n  activeEditor.style.visibility = 'visible';\r\n  if (!isEmbed && !isUpdate) {\r\n    editors[editorId]?.focus();\r\n  }\r\n  if (!isUpdate) {\r\n    setConfig({\r\n      ...getConfig(),\r\n      activeEditor: editorId,\r\n    });\r\n  }\r\n  updateCompiledCode();\r\n  if (initialized || params.view !== 'result') {\r\n    split?.show('code');\r\n  }\r\n  showEditorModeStatus(editorId);\r\n};\r\n\r\nconst showEditorModeStatus = (editorId: EditorId) => {\r\n  const editorStatusNodes = document.querySelectorAll<HTMLElement>(\r\n    '#editor-status > span[data-status]',\r\n  );\r\n  editorStatusNodes.forEach((node) => {\r\n    if (node.dataset.status === editorId) {\r\n      // node.style.display = 'block';\r\n      node.style.position = 'unset';\r\n      node.style.width = 'unset';\r\n      node.style.overflow = 'unset';\r\n    } else {\r\n      // node.style.display = 'none';\r\n      node.style.position = 'absolute';\r\n      node.style.width = '0';\r\n      node.style.overflow = 'hidden';\r\n    }\r\n  });\r\n};\r\n\r\nconst resetEditorModeStatus = () => {\r\n  const editorModeNode = UI.getEditorModeNode();\r\n  if (editorModeNode) {\r\n    editorModeNode.textContent = '';\r\n  }\r\n  const editorStatusNodes = document.querySelectorAll<HTMLElement>(\r\n    '#editor-status > span[data-status]',\r\n  );\r\n  editorStatusNodes.forEach((node) => {\r\n    node.innerHTML = '';\r\n  });\r\n};\r\n\r\nconst addConsoleInputCodeCompletion = () => {\r\n  if (consoleInputCodeCompletion) {\r\n    consoleInputCodeCompletion.dispose();\r\n  }\r\n  if (\r\n    editorLanguages?.script &&\r\n    ['javascript', 'typescript'].includes(mapLanguage(editorLanguages.script))\r\n  ) {\r\n    if (editors.script && typeof editors.script.addTypes === 'function') {\r\n      consoleInputCodeCompletion = editors.script.addTypes({\r\n        content: getConfig().script.content + '\\n{}',\r\n        filename: 'script.js',\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nconst configureEditorTools = (language: Language) => {\r\n  if (getConfig().readonly || language === 'blockly' || language === 'richtext') {\r\n    UI.getEditorToolbar().classList.add('hidden');\r\n    return false;\r\n  }\r\n  UI.getEditorToolbar().classList.remove('hidden');\r\n\r\n  const langSpecs = getLanguageSpecs(language);\r\n  if (langSpecs?.formatter || langSpecs?.parser) {\r\n    UI.getFormatButton().classList.remove('disabled');\r\n  } else {\r\n    UI.getFormatButton().classList.add('disabled');\r\n  }\r\n  return true;\r\n};\r\n\r\nconst phpHelper = ({ editor, code }: { editor?: CodeEditor; code?: string }) => {\r\n  const addToken = (code: string) => (code.trim().startsWith('<?php') ? code : '<?php\\n' + code);\r\n  if (code) {\r\n    return addToken(code);\r\n  }\r\n  if (editor?.getLanguage() === 'php') {\r\n    editor.setValue(addToken(editor.getValue()));\r\n  }\r\n  return;\r\n};\r\n\r\nconst applyLanguageConfigs = async (language: Language) => {\r\n  const editorId = getLanguageEditorId(language);\r\n  if (!editorId || !language || !languageIsEnabled(language, getConfig())) return;\r\n\r\n  configureEditorTools(language);\r\n\r\n  (Object.keys(customEditors) as Language[]).forEach(async (lang) => {\r\n    await customEditors[lang]?.show(Object.values(editorLanguages || []).includes(lang), {\r\n      baseUrl,\r\n      editors,\r\n      config: getConfig(),\r\n      html: getCache().markup.compiled || getConfig().markup.content || '',\r\n      eventsManager,\r\n    });\r\n  });\r\n};\r\n\r\nconst changeLanguage = async (language: Language, value?: string, isUpdate = false) => {\r\n  const editorId = getLanguageEditorId(language);\r\n  if (!editorId || !language || !languageIsEnabled(language, getConfig())) return;\r\n  if (getLanguageSpecs(language)?.largeDownload) {\r\n    notifications.info(`Loading ${getLanguageTitle(language)}. This may take a while!`);\r\n  }\r\n  const editor = editors[editorId];\r\n  editor.setLanguage(language, value ?? (getConfig()[editorId].content || ''));\r\n  if (editorLanguages) {\r\n    editorLanguages[editorId] = language;\r\n  }\r\n  setEditorTitle(editorId, language);\r\n  showEditor(editorId, isUpdate);\r\n  phpHelper({ editor: editors.script });\r\n  if (!isEmbed && !isUpdate) {\r\n    setTimeout(() => editor.focus());\r\n  }\r\n  await compiler.load([language], getConfig());\r\n  formatter.getFormatFn(language).then((fn) => editor.registerFormatter(fn));\r\n  if (!isUpdate) {\r\n    setConfig({\r\n      ...getConfig(),\r\n      activeEditor: editorId,\r\n    });\r\n    if (getConfig().autoupdate) {\r\n      await run();\r\n    }\r\n  }\r\n  await setSavedStatus();\r\n  dispatchChangeEvent();\r\n  addConsoleInputCodeCompletion();\r\n  loadModuleTypes(editors, getConfig());\r\n  await applyLanguageConfigs(language);\r\n};\r\n\r\n// Shift + Enter triggers run\r\nconst registerRun = (editorId: EditorId, editors: Editors) => {\r\n  const editor = editors[editorId];\r\n  editor.addKeyBinding('run', editor.keyCodes.ShiftEnter, async () => {\r\n    await run();\r\n  });\r\n};\r\n\r\nconst updateCompiledCode = () => {\r\n  const getCompiledLanguage = (editorId: EditorId) => {\r\n    const defaultLang: { [key in EditorId]: Language } = {\r\n      markup: 'html',\r\n      style: 'css',\r\n      script: 'javascript',\r\n    };\r\n    const lang = getLanguageCompiler(getConfig()[editorId].language)?.compiledCodeLanguage;\r\n    return {\r\n      language: lang || defaultLang[editorId],\r\n      label: lang === 'json' ? 'JSON' : getLanguageByAlias(lang) || lang || defaultLang[editorId],\r\n    };\r\n  };\r\n  const compiledLanguages: { [key in EditorId]: { language: Language; label: string } } = {\r\n    markup: getCompiledLanguage('markup'),\r\n    style: getCompiledLanguage('style'),\r\n    script: getCompiledLanguage('script'),\r\n  };\r\n  if (toolsPane && toolsPane.compiled) {\r\n    const cache = getCache();\r\n    Object.keys(cache).forEach((editorId) => {\r\n      if (editorId !== getConfig().activeEditor) return;\r\n      let compiledCode = cache[editorId].modified || cache[editorId].compiled || '';\r\n      if (editorId === 'script' && getConfig().script.language === 'php') {\r\n        compiledCode = phpHelper({ code: compiledCode }) || '<?php\\n';\r\n      }\r\n      toolsPane?.compiled?.update(\r\n        compiledLanguages[editorId].language,\r\n        compiledCode,\r\n        compiledLanguages[editorId].label,\r\n      );\r\n    });\r\n  }\r\n};\r\n\r\nconst getResultPage = async ({\r\n  sourceEditor = undefined as EditorId | undefined,\r\n  forExport = false,\r\n  template = resultTemplate,\r\n  singleFile = true,\r\n  runTests = false,\r\n}) => {\r\n  updateConfig();\r\n  const config = getConfig();\r\n  const contentConfig = getContentConfig(config);\r\n\r\n  const markupContent = config.markup.content || '';\r\n  const styleContent = config.style.content || '';\r\n  const scriptContent = config.script.content || '';\r\n  const testsContent = config.tests?.content || '';\r\n  const markupLanguage = config.markup.language;\r\n  const styleLanguage = config.style.language;\r\n  const scriptLanguage = config.script.language;\r\n  const testsLanguage = config.tests?.language || 'typescript';\r\n  const scriptType = getLanguageCompiler(scriptLanguage)?.scriptType;\r\n\r\n  const forceCompileStyles =\r\n    config.processors.find((name) => processors.find((p) => name === p.name && p.needsHTML)) &&\r\n    (markupContent !== getCache().markup.content ||\r\n      scriptContent !== getCache().script.content); /* e.g. jsx */\r\n\r\n  const testsNotChanged =\r\n    config.tests?.language === getCache().tests?.language &&\r\n    config.tests?.content === getCache().tests?.content &&\r\n    getCache().tests?.compiled;\r\n\r\n  const markupCompileResult = await compiler.compile(markupContent, markupLanguage, config, {});\r\n  let compiledMarkup = markupCompileResult.code;\r\n\r\n  const compileResults = await Promise.all([\r\n    compiler.compile(styleContent, styleLanguage, config, {\r\n      html: compiledMarkup,\r\n      forceCompile: forceCompileStyles,\r\n    }),\r\n    compiler.compile(scriptContent, scriptLanguage, config, {\r\n      blockly:\r\n        scriptLanguage === 'blockly'\r\n          ? ((await customEditors.blockly?.getContent({\r\n              baseUrl,\r\n              editors,\r\n              config: getConfig(),\r\n              html: compiledMarkup,\r\n              eventsManager,\r\n            })) as BlocklyContent)\r\n          : {},\r\n    }),\r\n    runTests\r\n      ? testsNotChanged\r\n        ? Promise.resolve(getCache().tests?.compiled || '')\r\n        : compiler.compile(testsContent, testsLanguage, config, {})\r\n      : Promise.resolve(getCompileResult(getCache().tests?.compiled || '')),\r\n  ]);\r\n\r\n  let compileInfo: CompileInfo = {\r\n    ...markupCompileResult.info,\r\n  };\r\n\r\n  const [compiledStyle, compiledScript, compiledTests] = compileResults.map((result) => {\r\n    const { code, info } = getCompileResult(result);\r\n    compileInfo = {\r\n      ...compileInfo,\r\n      ...info,\r\n    };\r\n    return code;\r\n  });\r\n\r\n  if (compileInfo.modifiedHTML) {\r\n    compiledMarkup = compileInfo.modifiedHTML;\r\n  }\r\n\r\n  const compiledCode: Cache = {\r\n    ...contentConfig,\r\n    markup: {\r\n      ...contentConfig.markup,\r\n      compiled: compiledMarkup,\r\n    },\r\n    style: {\r\n      ...contentConfig.style,\r\n      compiled: compiledStyle,\r\n    },\r\n    script: {\r\n      ...contentConfig.script,\r\n      compiled:\r\n        config.customSettings.convertCommonjs === false || (scriptType && scriptType !== 'module')\r\n          ? compiledScript\r\n          : cjs2esm(compiledScript),\r\n    },\r\n    tests: {\r\n      language: testsLanguage,\r\n      ...contentConfig.tests,\r\n      compiled: compiledTests,\r\n    },\r\n  };\r\n\r\n  const result = await createResultPage({\r\n    code: compiledCode,\r\n    config,\r\n    forExport,\r\n    template,\r\n    baseUrl,\r\n    singleFile,\r\n    runTests,\r\n    compileInfo,\r\n  });\r\n\r\n  const styleOnlyUpdate = sourceEditor === 'style' && !compileInfo.cssModules;\r\n  setCache({\r\n    ...getCache(),\r\n    ...compiledCode,\r\n    result,\r\n    styleOnlyUpdate,\r\n  });\r\n\r\n  if (singleFile) {\r\n    if (broadcastInfo.isBroadcasting) {\r\n      broadcast();\r\n    }\r\n    if (resultPopup && !resultPopup.closed) {\r\n      resultPopup?.postMessage({ result }, location.origin);\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nconst setLoading = (status: boolean) => {\r\n  const loading = UI.getToolspaneLoader();\r\n  if (!loading) return;\r\n  if (status === true) {\r\n    loading.style.display = 'unset';\r\n  } else {\r\n    loading.style.display = 'none';\r\n  }\r\n};\r\n\r\nconst flushResult = () => {\r\n  const iframe = UI.getResultIFrameElement();\r\n  if (!iframe?.contentWindow) return;\r\n\r\n  setLoading(true);\r\n\r\n  iframe.contentWindow.postMessage({ flush: true }, '*');\r\n\r\n  const compiledLanguages = {\r\n    markup: getLanguageCompiler(getConfig().markup.language)?.compiledCodeLanguage || 'html',\r\n    style: getLanguageCompiler(getConfig().style.language)?.compiledCodeLanguage || 'css',\r\n    script: getLanguageCompiler(getConfig().script.language)?.compiledCodeLanguage || 'javascript',\r\n  };\r\n\r\n  const loadingComments: Partial<Record<Language, string>> = {\r\n    html: '<!-- loading -->',\r\n    css: '/* loading */',\r\n    javascript: '// loading',\r\n    wat: ';; loading',\r\n  };\r\n\r\n  updateCache(\r\n    'markup',\r\n    compiledLanguages.markup,\r\n    loadingComments[compiledLanguages.markup] || 'html',\r\n  );\r\n  updateCache('style', compiledLanguages.style, loadingComments[compiledLanguages.style] || 'css');\r\n  updateCache(\r\n    'script',\r\n    compiledLanguages.script,\r\n    loadingComments[compiledLanguages.script] || 'javascript',\r\n  );\r\n  setCache({\r\n    ...getCache(),\r\n    tests: {\r\n      language: 'javascript',\r\n      content: '',\r\n      compiled: '',\r\n    },\r\n  });\r\n\r\n  updateCompiledCode();\r\n  toolsPane?.tests?.clearTests();\r\n};\r\n\r\nconst setProjectTitle = (setDefault = false) => {\r\n  const projectTitle = UI.getProjectTitleElement();\r\n  if (!projectTitle) return;\r\n  const defaultTitle = defaultConfig.title;\r\n  if (setDefault && projectTitle.textContent?.trim() === '') {\r\n    projectTitle.textContent = defaultTitle;\r\n  }\r\n  const title = projectTitle.textContent || defaultTitle;\r\n  if (title === getConfig().title) return;\r\n\r\n  setConfig({ ...getConfig(), title });\r\n  if (getConfig().autosave) {\r\n    save(!projectId, false);\r\n  }\r\n  setWindowTitle();\r\n  setSavedStatus();\r\n  dispatchChangeEvent();\r\n};\r\n\r\nconst setWindowTitle = () => {\r\n  const title = getConfig().title;\r\n  const hostLabel = location.hostname.startsWith('dev.livecodes.io')\r\n    ? '(dev) '\r\n    : location.hostname.startsWith('127.0.0.1') || location.hostname.startsWith('localhost')\r\n    ? '(local) '\r\n    : '';\r\n  parent.document.title =\r\n    hostLabel + (title && title !== 'Untitled Project' ? title + ' - ' : '') + 'LiveCodes';\r\n};\r\n\r\nconst setExternalResourcesMark = () => {\r\n  const btn = UI.getExternalResourcesBtn();\r\n  const config = getConfig();\r\n  if (config.scripts.length > 0 || config.stylesheets.length > 0 || config.cssPreset) {\r\n    btn.classList.add('active');\r\n    btn.style.display = 'unset';\r\n  } else {\r\n    btn.classList.remove('active');\r\n    if (isEmbed) {\r\n      btn.style.display = 'none';\r\n    }\r\n  }\r\n};\r\n\r\nconst run = async (editorId?: EditorId, runTests = false) => {\r\n  setLoading(true);\r\n  const result = await getResultPage({ sourceEditor: editorId, runTests });\r\n  await createIframe(UI.getResultElement(), result);\r\n  toolsPane?.console?.clear();\r\n  updateCompiledCode();\r\n};\r\n\r\nconst runTests = () => run(undefined, true);\r\n\r\nconst updateUrl = (url: string, push = false) => {\r\n  if (push && !isEmbed) {\r\n    parent.history.pushState(null, '', url);\r\n  } else {\r\n    parent.history.replaceState(null, '', url);\r\n  }\r\n};\r\n\r\nconst format = async (allEditors = true) => {\r\n  if (allEditors) {\r\n    await Promise.all([editors.markup.format(), editors.style.format(), editors.script.format()]);\r\n  } else {\r\n    const activeEditor = getActiveEditor();\r\n    await activeEditor.format();\r\n    activeEditor.focus();\r\n  }\r\n  updateConfig();\r\n};\r\n\r\nconst save = async (notify = false, setTitle = true) => {\r\n  if (setTitle) {\r\n    setProjectTitle(true);\r\n  }\r\n\r\n  if (editors && getConfig().formatOnsave) {\r\n    await format(true);\r\n  }\r\n  const projectConfig = buildConfig(getConfig());\r\n  if (!projectId) {\r\n    projectId = (await stores.projects?.addItem(projectConfig)) || '';\r\n  } else {\r\n    await stores.projects?.updateItem(projectId, projectConfig);\r\n  }\r\n  await setSavedStatus();\r\n\r\n  if (notify) {\r\n    notifications.success('Project locally saved to device!');\r\n  }\r\n\r\n  await share(false);\r\n};\r\n\r\nconst fork = async () => {\r\n  projectId = '';\r\n  loadConfig({ ...getConfig(), title: getConfig().title + ' (fork)' });\r\n  await save();\r\n  notifications.success('Forked as a new project');\r\n};\r\n\r\nconst share = async (\r\n  shortUrl = false,\r\n  contentOnly = true,\r\n  urlUpdate = true,\r\n  includeResult = false,\r\n  permanentUrl = false,\r\n): Promise<ShareData> => {\r\n  const content = contentOnly ? getContentConfig(getConfig()) : getConfig();\r\n\r\n  const contentParam = shortUrl\r\n    ? '?x=id/' +\r\n      (await shareService.shareProject({\r\n        ...content,\r\n        result: includeResult ? getCache().result : undefined,\r\n      }))\r\n    : '?x=code/' + compress(JSON.stringify(content));\r\n\r\n  const currentUrl = (location.origin + location.pathname).split('/').slice(0, -1).join('/') + '/';\r\n\r\n  const url = permanentUrl ? permanentUrlService.getAppUrl() : currentUrl;\r\n\r\n  const shareURL = url + contentParam;\r\n\r\n  if (urlUpdate) {\r\n    updateUrl(currentUrl + contentParam, true);\r\n  }\r\n\r\n  const projectTitle = content.title !== defaultConfig.title ? content.title + ' - ' : '';\r\n\r\n  return {\r\n    title: projectTitle + 'LiveCodes',\r\n    url: shareURL,\r\n  };\r\n};\r\n\r\nconst updateConfig = () => {\r\n  const editorIds: EditorId[] = ['markup', 'style', 'script'];\r\n  editorIds.forEach((editorId) => {\r\n    setConfig({\r\n      ...getConfig(),\r\n      [editorId]: {\r\n        ...getConfig()[editorId],\r\n        language: getEditorLanguage(editorId),\r\n        content: editors[editorId].getValue(),\r\n      },\r\n    });\r\n  });\r\n};\r\n\r\nconst loadConfig = async (\r\n  newConfig: Partial<Config | ContentConfig>,\r\n  url?: string,\r\n  flush = true,\r\n) => {\r\n  changingContent = true;\r\n\r\n  const content = getContentConfig({\r\n    ...defaultConfig,\r\n    ...upgradeAndValidate(newConfig),\r\n  });\r\n  setConfig({\r\n    ...getConfig(),\r\n    ...content,\r\n  });\r\n  await importExternalContent({\r\n    config: getConfig(),\r\n  });\r\n  setProjectRecover();\r\n\r\n  if (flush) {\r\n    flushResult();\r\n  }\r\n\r\n  // load title\r\n  const projectTitle = UI.getProjectTitleElement();\r\n  projectTitle.textContent = getConfig().title;\r\n  setWindowTitle();\r\n\r\n  // reset url params\r\n  updateUrl(url || location.origin + location.pathname, true);\r\n\r\n  // reset iframe scroll position\r\n  iframeScrollPosition.x = 0;\r\n  iframeScrollPosition.y = 0;\r\n\r\n  // load config\r\n  await bootstrap(true);\r\n\r\n  changingContent = false;\r\n};\r\n\r\nconst setUserConfig = (newConfig: Partial<UserConfig> | null, save = true) => {\r\n  const userConfig = getUserConfig({\r\n    ...getConfig(),\r\n    ...(newConfig == null ? getUserConfig(defaultConfig) : newConfig),\r\n  });\r\n\r\n  setConfig({\r\n    ...getConfig(),\r\n    ...userConfig,\r\n  });\r\n  if (save) {\r\n    stores.userConfig?.setValue({\r\n      ...stores.userConfig.getValue(),\r\n      ...newConfig,\r\n    } as UserConfig);\r\n  }\r\n};\r\n\r\nconst loadUserConfig = (updateUI = true) => {\r\n  if (isEmbed) return;\r\n  const userConfig = stores.userConfig?.getValue();\r\n  setConfig(\r\n    buildConfig({\r\n      ...getConfig(),\r\n      ...userConfig,\r\n    }),\r\n  );\r\n  if (!updateUI) return;\r\n  loadSettings(getConfig());\r\n  setTheme(getConfig().theme);\r\n  showSyncStatus(true);\r\n};\r\n\r\nconst loadTemplate = async (templateId: string) => {\r\n  const templateConfig = (await stores.templates?.getItem(templateId))?.config;\r\n  if (templateConfig) {\r\n    await loadConfig(templateConfig);\r\n  }\r\n};\r\n\r\nconst dispatchChangeEvent = () => {\r\n  const changeEvent = new Event(customEvents.change);\r\n  document.dispatchEvent(changeEvent);\r\n  parent.dispatchEvent(changeEvent);\r\n};\r\n\r\nconst setSavedStatus = async () => {\r\n  if (isEmbed) return;\r\n  updateConfig();\r\n  const savedConfig = projectId && (await stores.projects?.getItem(projectId || ''))?.config;\r\n  isSaved =\r\n    changingContent ||\r\n    !!(\r\n      savedConfig &&\r\n      JSON.stringify(getContentConfig(savedConfig)) ===\r\n        JSON.stringify(getContentConfig(getConfig()))\r\n    );\r\n\r\n  const projectTitle = UI.getProjectTitleElement();\r\n  if (!isSaved) {\r\n    projectTitle.classList.add('unsaved');\r\n    setProjectRecover();\r\n  } else {\r\n    projectTitle.classList.remove('unsaved');\r\n    setProjectRecover(true);\r\n  }\r\n};\r\n\r\nconst checkSavedStatus = (doNotCloseModal = false): Promise<boolean> => {\r\n  if (isSaved || isEmbed) {\r\n    return Promise.resolve(true);\r\n  }\r\n  return new Promise((resolve) => {\r\n    const div = document.createElement('div');\r\n    div.innerHTML = savePromptScreen;\r\n    modal.show(div.firstChild as HTMLElement, { size: 'small' });\r\n    eventsManager.addEventListener(UI.getModalSaveButton(), 'click', async () => {\r\n      await save(true);\r\n      if (!doNotCloseModal) {\r\n        modal.close();\r\n      }\r\n      resolve(true);\r\n    });\r\n    eventsManager.addEventListener(UI.getModalDoNotSaveButton(), 'click', () => {\r\n      if (!doNotCloseModal) {\r\n        modal.close();\r\n      }\r\n      resolve(true);\r\n    });\r\n    eventsManager.addEventListener(UI.getModalCancelButton(), 'click', () => {\r\n      if (!doNotCloseModal) {\r\n        modal.close();\r\n      }\r\n      resolve(false);\r\n    });\r\n  });\r\n};\r\n\r\nconst checkSavedAndExecute = (fn: () => void, cancelFn?: () => void) => () =>\r\n  checkSavedStatus(true).then((confirmed) => {\r\n    if (confirmed) {\r\n      setTimeout(fn);\r\n    } else if (typeof cancelFn === 'function') {\r\n      setTimeout(cancelFn);\r\n    } else {\r\n      setTimeout(() => {\r\n        modal.close();\r\n      });\r\n    }\r\n  });\r\n\r\nconst setProjectRecover = (reset = false) => {\r\n  if (isEmbed) return;\r\n  stores.recover?.clear();\r\n  if (reset || !getConfig().recoverUnsaved) return;\r\n  stores.recover?.setValue({\r\n    config: getContentConfig(getConfig()),\r\n    lastModified: Date.now(),\r\n  });\r\n};\r\n\r\nconst checkRecoverStatus = (isWelcomeScreen = false) => {\r\n  if (!getConfig().recoverUnsaved || isEmbed) {\r\n    return Promise.resolve('recover disabled');\r\n  }\r\n  const unsavedItem = stores.recover?.getValue();\r\n  const unsavedProject = unsavedItem?.config;\r\n  if (!unsavedItem || !unsavedProject) {\r\n    return Promise.resolve('no unsaved project');\r\n  }\r\n  const projectName = unsavedProject.title;\r\n  return new Promise((resolve) => {\r\n    const welcomeRecover = UI.getModalWelcomeRecover();\r\n    if (isWelcomeScreen) {\r\n      welcomeRecover.style.display = 'unset';\r\n    } else {\r\n      const div = document.createElement('div');\r\n      div.innerHTML = recoverPromptScreen;\r\n      modal.show(div.firstChild as HTMLElement, { size: 'small', isAsync: true });\r\n    }\r\n\r\n    UI.getModalUnsavedName().textContent = projectName;\r\n    UI.getModalUnsavedName().title = projectName;\r\n    UI.getModalUnsavedLastModified().textContent = new Date(\r\n      unsavedItem.lastModified,\r\n    ).toLocaleString();\r\n    const disableRecoverCheckbox = UI.getModalDisableRecoverCheckbox();\r\n\r\n    eventsManager.addEventListener(UI.getModalRecoverButton(), 'click', async () => {\r\n      await loadConfig(unsavedProject);\r\n      await setSavedStatus();\r\n      modal.close();\r\n      resolve('recover');\r\n    });\r\n    eventsManager.addEventListener(UI.getModalSavePreviousButton(), 'click', async () => {\r\n      if (stores.projects) {\r\n        await stores.projects.addItem(unsavedProject);\r\n        notifications.success(`Project \"${projectName}\" saved to device.`);\r\n      }\r\n      if (isWelcomeScreen) {\r\n        welcomeRecover.style.maxHeight = '0';\r\n      } else {\r\n        modal.close();\r\n      }\r\n      setProjectRecover(true);\r\n      resolve('save and continue');\r\n    });\r\n    eventsManager.addEventListener(UI.getModalCancelRecoverButton(), 'click', () => {\r\n      if (isWelcomeScreen) {\r\n        welcomeRecover.style.maxHeight = '0';\r\n      } else {\r\n        modal.close();\r\n      }\r\n      setProjectRecover(true);\r\n      resolve('cancel recover');\r\n    });\r\n    eventsManager.addEventListener(disableRecoverCheckbox, 'change', () => {\r\n      setUserConfig({ recoverUnsaved: !disableRecoverCheckbox.checked });\r\n      loadSettings(getConfig());\r\n    });\r\n  });\r\n};\r\n\r\nconst configureEmmet = async (config: Config) => {\r\n  [editors.markup, editors.style].forEach((editor, editorIndex) => {\r\n    if (editor.monaco && editorIndex > 0) return; // emmet configuration for monaco is global\r\n    editor.changeSettings(getEditorConfig(config));\r\n  });\r\n};\r\n\r\nconst getTemplates = async (): Promise<Template[]> => {\r\n  if (starterTemplates) {\r\n    return starterTemplates;\r\n  }\r\n  starterTemplates = await getStarterTemplates(getConfig(), baseUrl);\r\n  return starterTemplates;\r\n};\r\n\r\nconst initializeAuth = async () => {\r\n  /** Lazy load authentication */\r\n  if (authService) return;\r\n  authService = createAuthService(isEmbed);\r\n  const user = await authService.getUser();\r\n  if (user) {\r\n    displayLoggedIn(user);\r\n  }\r\n};\r\n\r\nconst login = async () =>\r\n  new Promise<User | void>((resolve, reject) => {\r\n    const loginHandler = (scopes: GithubScope[]) => {\r\n      if (!authService) {\r\n        reject('Login error!');\r\n      } else {\r\n        authService\r\n          .signIn(scopes)\r\n          .then((user) => {\r\n            if (!user) {\r\n              reject('Login error!');\r\n            } else {\r\n              manageStoredUserData(user, 'restore');\r\n\r\n              const displayName = user.displayName || user.username;\r\n              const loginSuccessMessage = displayName\r\n                ? 'Logged in as: ' + displayName\r\n                : 'Logged in successfully';\r\n              notifications.success(loginSuccessMessage);\r\n              displayLoggedIn(user);\r\n              resolve(user);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            notifications.error('Login error!');\r\n          });\r\n      }\r\n      modal.close();\r\n    };\r\n\r\n    const loginContainer = createLoginContainer(eventsManager, loginHandler);\r\n    modal.show(loginContainer, { size: 'small' });\r\n  }).catch(() => {\r\n    notifications.error('Login error!');\r\n  });\r\n\r\nconst logout = () => {\r\n  if (!authService) return;\r\n  authService\r\n    ?.getUser()\r\n    .then(async (user) => {\r\n      if (!user) return;\r\n      await manageStoredUserData(user, 'clear');\r\n    })\r\n    .then(() =>\r\n      authService\r\n        ?.signOut()\r\n        .then(() => {\r\n          notifications.success('Logged out successfully');\r\n          displayLoggedOut();\r\n        })\r\n        .catch(() => {\r\n          notifications.error('Logout error!');\r\n        }),\r\n    );\r\n};\r\n\r\nconst getUser = async (fn?: () => void) => {\r\n  await initializeAuth();\r\n  let user = await authService?.getUser();\r\n  if (!user) {\r\n    user = await login();\r\n    if (typeof fn === 'function') {\r\n      fn();\r\n    }\r\n  }\r\n  return user;\r\n};\r\n\r\nconst getUserData = async (): Promise<UserData['data'] | null> => {\r\n  const user = await authService?.getUser();\r\n  if (!user || !stores.userData) return null;\r\n  const id = user.username || user.uid;\r\n  return (await stores.userData.getItem(id))?.data || null;\r\n};\r\n\r\nconst setUserData = async (data: UserData['data']) => {\r\n  const user = await authService?.getUser();\r\n  if (!user || !stores.userData) return null;\r\n  const id = user.username || user.uid;\r\n  const oldData = (await stores.userData.getItem(id))?.data;\r\n  const key = await stores.userData?.updateItem(id, {\r\n    id,\r\n    data: {\r\n      ...oldData,\r\n      ...data,\r\n    },\r\n  });\r\n  return key;\r\n};\r\n\r\nconst getAppData = () => stores.appData?.getValue() || null;\r\n\r\nconst setAppData = (data: AppData) => {\r\n  stores.appData?.setValue({\r\n    ...stores.appData.getValue(),\r\n    ...data,\r\n  });\r\n};\r\n\r\nconst manageStoredUserData = async (user: User, action: 'clear' | 'restore') => {\r\n  const storeKeys = (Object.keys(stores) as Array<keyof Stores>).filter(\r\n    (k) => !['recover', 'sync'].includes(k),\r\n  );\r\n  const syncModule: typeof import('./sync/sync') = await import(baseUrl + '{{hash:sync.js}}');\r\n  syncModule.init(baseUrl);\r\n\r\n  for (const storeKey of storeKeys) {\r\n    if (action === 'clear') {\r\n      await syncModule.exportToLocalSync({ user, storeKey });\r\n      stores[storeKey]?.clear();\r\n    } else {\r\n      await syncModule.restoreFromLocalSync({ user, storeKey });\r\n    }\r\n  }\r\n\r\n  if (action === 'clear') {\r\n    setUserConfig(defaultConfig);\r\n    broadcastInfo.isBroadcasting = false;\r\n    broadcastInfo.channel = '';\r\n    broadcastInfo.channelUrl = '';\r\n    broadcastInfo.channelToken = '';\r\n    broadcastInfo.broadcastSource = false;\r\n  }\r\n\r\n  loadUserConfig();\r\n};\r\n\r\nconst showSyncStatus = async (force = false) => {\r\n  if (isEmbed) return;\r\n  const lastSync = (await getUserData())?.sync?.lastSync;\r\n  if (lastSync || force) {\r\n    const syncUIModule: typeof import('./UI/sync-ui') = await import(\r\n      baseUrl + '{{hash:sync-ui.js}}'\r\n    );\r\n    syncUIModule.updateSyncStatus({ lastSync });\r\n  }\r\n};\r\n\r\nconst registerScreen = (screen: Screen['screen'], fn: Screen['show']) => {\r\n  const registered = screens.find((s) => s.screen.toLowerCase() === screen.toLowerCase());\r\n  if (registered) {\r\n    registered.show = fn;\r\n  } else {\r\n    screens.push({ screen: screen.toLowerCase() as Screen['screen'], show: fn });\r\n  }\r\n};\r\n\r\nconst showScreen = async (screen: Screen['screen'], options?: any) => {\r\n  const foundScreen = screens.find((s) => s.screen.toLowerCase() === screen.toLowerCase());\r\n  if (!foundScreen) return;\r\n  await foundScreen.show(options);\r\n  const modalElement = document.querySelector('#modal') as HTMLElement;\r\n  (modalElement.firstElementChild as HTMLElement)?.click();\r\n};\r\n\r\nconst loadSelectedScreen = () => {\r\n  const params = Object.fromEntries(\r\n    new URLSearchParams(parent.location.search) as unknown as Iterable<any>,\r\n  );\r\n  // ?new or ?screen=<screen_name>\r\n  const screen = params.new === '' ? 'new' : params.screen;\r\n  if (screen) {\r\n    showScreen(screen);\r\n  }\r\n};\r\n\r\nconst getAllEditors = (): CodeEditor[] => [\r\n  ...Object.values(editors),\r\n  ...[toolsPane?.console?.getEditor?.()],\r\n  ...[toolsPane?.compiled?.getEditor?.()],\r\n];\r\n\r\nconst setTheme = (theme: Theme) => {\r\n  const themes = ['light', 'dark'];\r\n  const root = document.querySelector(':root');\r\n  root?.classList.remove(...themes);\r\n  root?.classList.add(theme);\r\n  getAllEditors().forEach((editor) => {\r\n    editor?.setTheme(theme);\r\n    customEditors[editor?.getLanguage()]?.setTheme(theme);\r\n  });\r\n};\r\n\r\nconst loadSettings = (config: Config) => {\r\n  const processorToggles = UI.getProcessorToggles();\r\n  processorToggles.forEach((toggle) => {\r\n    const processor = toggle.dataset.processor as Processor;\r\n    if (!processor) return;\r\n    toggle.checked = config.processors.includes(processor);\r\n  });\r\n\r\n  if (isEmbed) return;\r\n\r\n  const autoupdateToggle = UI.getAutoupdateToggle();\r\n  autoupdateToggle.checked = config.autoupdate;\r\n\r\n  const delayValue = UI.getDelayValue();\r\n  const delayRange = UI.getDelayRange();\r\n  delayRange.value = String(config.delay);\r\n  delayValue.textContent = String(config.delay / 1000);\r\n\r\n  const autosaveToggle = UI.getAutosaveToggle();\r\n  autosaveToggle.checked = config.autosave;\r\n\r\n  const autosyncToggle = UI.getAutosyncToggle();\r\n  getUserData().then((userData) => {\r\n    autosyncToggle.checked = userData?.sync?.autosync || false;\r\n  });\r\n\r\n  const formatOnsaveToggle = UI.getFormatOnsaveToggle();\r\n  formatOnsaveToggle.checked = config.formatOnsave;\r\n\r\n  const themeToggle = UI.getThemeToggle();\r\n  themeToggle.checked = config.theme === 'dark';\r\n\r\n  const recoverToggle = UI.getRecoverToggle();\r\n  recoverToggle.checked = config.recoverUnsaved;\r\n\r\n  const showWelcomeToggle = UI.getShowWelcomeToggle();\r\n  showWelcomeToggle.checked = config.welcome;\r\n\r\n  const spacingToggle = UI.getSpacingToggle();\r\n  spacingToggle.checked = config.showSpacing;\r\n\r\n  UI.getCSSPresetLinks().forEach((link) => {\r\n    link.classList.remove('active');\r\n    if (config.cssPreset === link.dataset.preset) {\r\n      link.classList.add('active');\r\n    }\r\n    if (!config.cssPreset && link.dataset.preset === 'none') {\r\n      link.classList.add('active');\r\n    }\r\n  });\r\n};\r\n\r\nconst showLanguageInfo = (languageInfo: HTMLElement) => {\r\n  modal.show(languageInfo, { size: 'small' });\r\n};\r\n\r\nconst loadStarterTemplate = async (templateName: Template['name'], checkSaved = true) => {\r\n  const templates = await getTemplates();\r\n  const { title, thumbnail, ...templateConfig } =\r\n    templates.filter((template) => template.name === templateName)?.[0] || {};\r\n  if (templateConfig) {\r\n    setAppData({\r\n      recentTemplates: [\r\n        { name: templateName, title },\r\n        ...(getAppData()?.recentTemplates?.filter((t) => t.name !== templateName) || []),\r\n      ].slice(0, 5),\r\n    });\r\n    const doNotCheckAndExecute = (fn: () => void) => async () => fn();\r\n    (checkSaved ? checkSavedAndExecute : doNotCheckAndExecute)(() => {\r\n      projectId = '';\r\n      loadConfig(\r\n        {\r\n          ...defaultConfig,\r\n          ...templateConfig,\r\n        },\r\n        '?template=' + templateName,\r\n      );\r\n    })().finally(() => {\r\n      modal.close();\r\n    });\r\n  } else {\r\n    notifications.error('Failed loading template');\r\n  }\r\n};\r\n\r\nconst getPlaygroundState = (): Config & Code => {\r\n  const config = getConfig();\r\n  const cachedCode = getCachedCode();\r\n  return {\r\n    ...config,\r\n    ...cachedCode,\r\n    markup: {\r\n      ...config.markup,\r\n      ...cachedCode.markup,\r\n      position: editors.markup.getPosition(),\r\n    },\r\n    style: {\r\n      ...config.style,\r\n      ...cachedCode.style,\r\n      position: editors.style.getPosition(),\r\n    },\r\n    script: {\r\n      ...config.script,\r\n      ...cachedCode.script,\r\n      position: editors.script.getPosition(),\r\n    },\r\n    tools: {\r\n      enabled: config.tools.enabled,\r\n      active: toolsPane?.getActiveTool() ?? '',\r\n      status: toolsPane?.getStatus() ?? '',\r\n    },\r\n  };\r\n};\r\n\r\nconst zoom = (level: Config['zoom'] = 1) => {\r\n  const iframe = UI.getResultIFrameElement();\r\n  const zoomBtnValue = UI.getZoomButtonValue();\r\n  if (!iframe || !zoomBtnValue) return;\r\n\r\n  iframe.classList.remove('zoom25');\r\n  iframe.classList.remove('zoom50');\r\n\r\n  if (level === 0.5) {\r\n    iframe.classList.add('zoom50');\r\n  }\r\n\r\n  if (level === 0.25) {\r\n    iframe.classList.add('zoom25');\r\n  }\r\n\r\n  zoomBtnValue.textContent = String(level);\r\n};\r\n\r\nconst broadcast = async ({\r\n  serverUrl,\r\n  channel,\r\n  channelToken,\r\n  broadcastSource,\r\n}: Partial<BroadcastData> = {}): Promise<\r\n  BroadcastResponseData | BroadcastResponseError | undefined\r\n> => {\r\n  if (isEmbed) return;\r\n  const broadcastData = getAppData()?.broadcast;\r\n  if (!serverUrl) {\r\n    serverUrl = broadcastData?.serverUrl;\r\n  }\r\n  if (!serverUrl) return;\r\n  if (broadcastSource == null) {\r\n    broadcastSource = broadcastInfo.broadcastSource;\r\n  }\r\n  if (channel == null) {\r\n    channel = broadcastInfo.channel;\r\n  }\r\n  if (channelToken == null) {\r\n    channelToken = broadcastInfo.channelToken;\r\n  }\r\n  const userToken = broadcastData?.userToken;\r\n  const { result, ...data } = getPlaygroundState();\r\n  try {\r\n    const res = await fetch(serverUrl, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        result,\r\n        ...(broadcastSource ? { data } : {}),\r\n        ...(channel ? { channel } : {}),\r\n        ...(channelToken ? { channelToken } : {}),\r\n        ...(userToken ? { userToken } : {}),\r\n      }),\r\n    });\r\n    if (!res.ok) return;\r\n    return res.json();\r\n  } catch {\r\n    return;\r\n  }\r\n};\r\n\r\nconst setBroadcastStatus = (info: BroadcastInfo) => {\r\n  broadcastInfo.isBroadcasting = info.isBroadcasting;\r\n  broadcastInfo.channel = info.channel;\r\n  broadcastInfo.channelUrl = info.channelUrl;\r\n  broadcastInfo.channelToken = info.channelToken;\r\n  broadcastInfo.broadcastSource = info.broadcastSource;\r\n\r\n  const broadcastStatusBtn = UI.getBroadcastStatusBtn();\r\n  if (!broadcastStatusBtn) return;\r\n  if (info.isBroadcasting) {\r\n    broadcastStatusBtn.firstElementChild?.classList.add('active');\r\n    broadcastStatusBtn.dataset.hint = 'Broadcasting...';\r\n  } else {\r\n    broadcastStatusBtn.firstElementChild?.classList.remove('active');\r\n    broadcastStatusBtn.dataset.hint = 'Broadcast';\r\n  }\r\n};\r\n\r\nconst getVersion = (log = true) => {\r\n  // variables added in scripts/build.js\r\n  const appVersion = process.env.VERSION || '';\r\n  const sdkVersion = process.env.SDK_VERSION || '';\r\n  const commitSHA = process.env.GIT_COMMIT || '';\r\n  const repoUrl = process.env.REPO_URL || '';\r\n  const appUrl = permanentUrlService.getAppUrl();\r\n  const sdkUrl = permanentUrlService.getSDKUrl();\r\n\r\n  if (log) {\r\n    // eslint-disable-next-line no-console\r\n    console.log(`App Version: ${appVersion} (${repoUrl}/releases/tag/v${appVersion})`);\r\n    // eslint-disable-next-line no-console\r\n    console.log(\r\n      `SDK Version: ${sdkVersion} (https://www.npmjs.com/package/livecodes/v/${sdkVersion})`,\r\n    );\r\n    // eslint-disable-next-line no-console\r\n    console.log(`Git commit: ${commitSHA} (${repoUrl}/commit/${commitSHA})`);\r\n    // eslint-disable-next-line no-console\r\n    console.log(`App Permanent URL: ${appUrl}`);\r\n    // eslint-disable-next-line no-console\r\n    console.log(`SDK Permanent URL: ${sdkUrl}`);\r\n  }\r\n\r\n  return {\r\n    appVersion,\r\n    sdkVersion,\r\n    commitSHA,\r\n    appUrl,\r\n    sdkUrl,\r\n  };\r\n};\r\n\r\nconst resizeEditors = () => {\r\n  Object.values(editors).forEach((editor: CodeEditor) => {\r\n    setTimeout(() => {\r\n      if (editor.layout) {\r\n        editor.layout(); // resize monaco editor\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst handleTitleEdit = () => {\r\n  const projectTitle = UI.getProjectTitleElement();\r\n  if (!projectTitle) return;\r\n  projectTitle.textContent = getConfig().title || defaultConfig.title;\r\n\r\n  setWindowTitle();\r\n\r\n  const blurOnEnter = (e: KeyboardEvent) => {\r\n    if (e.which === 13) {\r\n      /* Enter */\r\n      e.preventDefault();\r\n      projectTitle.blur();\r\n    }\r\n  };\r\n\r\n  const removeFormatting = (e: any) => {\r\n    e.preventDefault();\r\n    const text = e.clipboardData.getData('text/plain');\r\n    document.execCommand('insertHTML', false, text);\r\n  };\r\n\r\n  eventsManager.addEventListener(projectTitle, 'input', () => setProjectTitle(), false);\r\n  eventsManager.addEventListener(projectTitle, 'blur', () => setProjectTitle(true), false);\r\n  eventsManager.addEventListener(projectTitle, 'keypress', blurOnEnter as any, false);\r\n  eventsManager.addEventListener(projectTitle, 'paste', removeFormatting, false);\r\n};\r\n\r\nconst handleResize = () => {\r\n  resizeEditors();\r\n  eventsManager.addEventListener(window, 'resize', resizeEditors, false);\r\n  eventsManager.addEventListener(window, customEvents.resizeEditor, resizeEditors, false);\r\n};\r\n\r\nconst handleIframeResize = () => {\r\n  const gutter = UI.getGutterElement();\r\n  if (!gutter) return;\r\n\r\n  const sizeLabel = document.createElement('div');\r\n  sizeLabel.id = 'size-label';\r\n  gutter.appendChild(sizeLabel);\r\n\r\n  const hideLabel = debounce(() => {\r\n    setTimeout(() => {\r\n      sizeLabel.classList.remove('visible');\r\n      setTimeout(() => {\r\n        sizeLabel.style.display = 'none';\r\n      }, 100);\r\n    }, 1000);\r\n  }, 1000);\r\n\r\n  eventsManager.addEventListener(window, 'message', (event: any) => {\r\n    const iframe = UI.getResultIFrameElement();\r\n    if (\r\n      !sizeLabel ||\r\n      !iframe ||\r\n      event.source !== iframe.contentWindow ||\r\n      event.data.type !== 'resize'\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    const sizes = event.data.sizes;\r\n    sizeLabel.innerHTML = `${sizes.width} x ${sizes.height}`;\r\n    sizeLabel.style.display = 'block';\r\n    sizeLabel.classList.add('visible');\r\n    hideLabel();\r\n  });\r\n};\r\n\r\nconst handleIframeScroll = () => {\r\n  eventsManager.addEventListener(window, 'message', (event: any) => {\r\n    const iframe = UI.getResultIFrameElement();\r\n    if (!iframe || event.source !== iframe.contentWindow || event.data.type !== 'scroll') {\r\n      return;\r\n    }\r\n\r\n    const position = event.data.position;\r\n    iframeScrollPosition.x = Number(position.x) || 0;\r\n    iframeScrollPosition.y = Number(position.y) || 0;\r\n  });\r\n};\r\n\r\nconst handleSelectEditor = () => {\r\n  UI.getEditorTitles().forEach((title) => {\r\n    eventsManager.addEventListener(\r\n      title,\r\n      'click',\r\n      () => {\r\n        showEditor(title.dataset.editor as EditorId);\r\n        setAppData({ language: getEditorLanguage(title.dataset.editor as EditorId) });\r\n        setProjectRecover();\r\n      },\r\n      false,\r\n    );\r\n  });\r\n};\r\n\r\nconst handleChangeLanguage = () => {\r\n  if (getConfig().allowLangChange) {\r\n    UI.getLanguageMenuLinks().forEach((menuItem) => {\r\n      eventsManager.addEventListener(\r\n        menuItem,\r\n        'mousedown', // fire this event before unhover\r\n        async () => {\r\n          await changeLanguage(menuItem.dataset.lang as Language);\r\n          setAppData({ language: menuItem.dataset.lang as Language });\r\n        },\r\n        false,\r\n      );\r\n    });\r\n  } else {\r\n    UI.getLanguageMenuButtons().forEach((menuButton) => {\r\n      menuButton.style.display = 'none';\r\n    });\r\n  }\r\n};\r\n\r\nconst handleChangeContent = () => {\r\n  const contentChanged = async (editorId: EditorId, loading: boolean) => {\r\n    updateConfig();\r\n    addConsoleInputCodeCompletion();\r\n\r\n    const shouldRunTests = Boolean(watchTests && getConfig().tests?.content);\r\n    if ((getConfig().autoupdate || shouldRunTests) && !loading) {\r\n      await run(editorId, shouldRunTests);\r\n    }\r\n\r\n    if (getConfig().markup.content !== getCache().markup.content) {\r\n      await getResultPage({ sourceEditor: editorId });\r\n    }\r\n\r\n    for (const key of Object.keys(customEditors)) {\r\n      if (getConfig()[editorId].language === key) {\r\n        await customEditors[key]?.show(true, {\r\n          baseUrl,\r\n          editors,\r\n          config: getConfig(),\r\n          html: getCache().markup.compiled || getConfig().markup.content || '',\r\n          eventsManager,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (getConfig().autosave) {\r\n      await save();\r\n    }\r\n\r\n    dispatchChangeEvent();\r\n    loadModuleTypes(editors, getConfig());\r\n  };\r\n\r\n  const debouncecontentChanged = (editorId: EditorId) =>\r\n    debounce(\r\n      async () => {\r\n        await contentChanged(editorId, changingContent);\r\n      },\r\n      () => getConfig().delay ?? defaultConfig.delay,\r\n    );\r\n\r\n  (Object.keys(editors) as EditorId[]).forEach((editorId) => {\r\n    editors[editorId].onContentChanged(debouncecontentChanged(editorId));\r\n    editors[editorId].onContentChanged(setSavedStatus);\r\n  });\r\n};\r\n\r\nconst handleHotKeys = () => {\r\n  const ctrl = (e: KeyboardEvent) => (navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey);\r\n  const hotKeys = async (e: KeyboardEvent) => {\r\n    if (!e) return;\r\n\r\n    // Ctrl + p opens the command palette\r\n    const activeEditor = getActiveEditor();\r\n    if (ctrl(e) && e.key.toLowerCase() === 'p' && activeEditor.monaco) {\r\n      e.preventDefault();\r\n      activeEditor.monaco.trigger('anyString', 'editor.action.quickCommand');\r\n      return;\r\n    }\r\n\r\n    // Ctrl + d prevents browser bookmark dialog\r\n    if (ctrl(e) && e.key.toLowerCase() === 'd') {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    if (isEmbed) return;\r\n\r\n    // Ctrl + Shift + S forks the project (save as...)\r\n    if (ctrl(e) && e.shiftKey && e.key.toLowerCase() === 's') {\r\n      e.preventDefault();\r\n      await fork();\r\n      return;\r\n    }\r\n\r\n    // Ctrl + S saves the project\r\n    if (ctrl(e) && e.key.toLowerCase() === 's') {\r\n      e.preventDefault();\r\n      await save(true);\r\n      return;\r\n    }\r\n\r\n    // Ctrl + Alt + T runs tests\r\n    if (ctrl(e) && e.altKey && e.key.toLowerCase() === 't') {\r\n      e.preventDefault();\r\n      split?.show('output');\r\n      toolsPane?.setActiveTool('tests');\r\n      if (toolsPane?.getStatus() === 'closed') {\r\n        toolsPane?.open();\r\n      }\r\n      await runTests();\r\n      return;\r\n    }\r\n\r\n    // Shift + Enter triggers run\r\n    if (e.shiftKey && e.key === 'Enter') {\r\n      e.preventDefault();\r\n      split?.show('output');\r\n      await run();\r\n      return;\r\n    }\r\n  };\r\n\r\n  eventsManager.addEventListener(window, 'keydown', hotKeys as any, true);\r\n};\r\n\r\nconst handleLogoLink = () => {\r\n  if (isEmbed || getConfig().mode === 'result') return;\r\n  const logoLink = UI.getLogoLink();\r\n  eventsManager.addEventListener(logoLink, 'click', async (event: Event) => {\r\n    event.preventDefault();\r\n    parent.postMessage({ args: 'home' }, location.origin);\r\n  });\r\n};\r\n\r\nconst handleRunButton = () => {\r\n  const handleRun = async () => {\r\n    split?.show('output');\r\n    await run();\r\n  };\r\n  eventsManager.addEventListener(UI.getRunButton(), 'click', handleRun);\r\n  eventsManager.addEventListener(UI.getCodeRunButton(), 'click', handleRun);\r\n};\r\n\r\nconst handleResultButton = () => {\r\n  eventsManager.addEventListener(UI.getResultButton(), 'click', () => split?.show('output', true));\r\n};\r\n\r\nconst handleEditorTools = () => {\r\n  if (!configureEditorTools(getActiveEditor().getLanguage())) return;\r\n\r\n  eventsManager.addEventListener(UI.getCopyButton(), 'click', () => {\r\n    if (copyToClipboard(getActiveEditor().getValue())) {\r\n      notifications.success('Code copied to clipboard');\r\n    } else {\r\n      notifications.error('Failed to copy code');\r\n    }\r\n  });\r\n\r\n  eventsManager.addEventListener(UI.getUndoButton(), 'click', () => {\r\n    const activeEditor = getActiveEditor();\r\n    activeEditor.undo();\r\n    activeEditor.focus();\r\n  });\r\n\r\n  eventsManager.addEventListener(UI.getRedoButton(), 'click', () => {\r\n    const activeEditor = getActiveEditor();\r\n    activeEditor.redo();\r\n    activeEditor.focus();\r\n  });\r\n\r\n  eventsManager.addEventListener(UI.getFormatButton(), 'click', async () => {\r\n    await format(false);\r\n  });\r\n\r\n  eventsManager.addEventListener(UI.getEditorStatus(), 'click', () => {\r\n    showScreen('editor-settings', { scrollToSelector: 'label[data-name=\"editorMode\"]' });\r\n  });\r\n};\r\n\r\nconst handleProcessors = () => {\r\n  const styleMenu = UI.getstyleMenu();\r\n  const processorList = processors\r\n    .filter((p) => processorIsEnabled(p.name, getConfig()))\r\n    .filter((p) => !p.hidden)\r\n    .map((p) => ({ name: p.name, title: p.title }));\r\n\r\n  if (!styleMenu || processorList.length === 0) {\r\n    return;\r\n  }\r\n\r\n  processorList.forEach((processor) => {\r\n    const processorItem = createProcessorItem(processor);\r\n    styleMenu.append(processorItem);\r\n    eventsManager.addEventListener(\r\n      processorItem,\r\n      'mousedown',\r\n      async (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        const toggle = processorItem.querySelector<HTMLInputElement>('input');\r\n        if (!toggle) return;\r\n        toggle.checked = !toggle.checked;\r\n\r\n        const processorName = toggle.dataset.processor as Processor;\r\n        if (!processorName || !processorList.find((p) => p.name === processorName)) return;\r\n\r\n        setConfig({\r\n          ...getConfig(),\r\n          processors: [\r\n            ...(toggle.checked\r\n              ? [...getConfig().processors, processorName]\r\n              : getConfig().processors.filter((p) => p !== processorName)),\r\n          ],\r\n        });\r\n        if (getConfig().autoupdate) {\r\n          await run();\r\n        }\r\n      },\r\n      false,\r\n    );\r\n\r\n    eventsManager.addEventListener(processorItem, 'click', async (event) => {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    });\r\n  });\r\n};\r\n\r\nconst handleSettingsMenu = () => {\r\n  const menuContainer = UI.getSettingsMenuScroller();\r\n  const settingsButton = UI.getSettingsButton();\r\n  if (!menuContainer || !settingsButton) return;\r\n  menuContainer.innerHTML = settingsMenuHTML;\r\n\r\n  // This fixes the behaviour where :\r\n  // clicking outside the settings menu but inside settings menu container,\r\n  // hides the settings menu but not the container\r\n  // on small screens the conatiner covers most of the screen\r\n  // which gives the effect of a non-responsive app\r\n  eventsManager.addEventListener(menuContainer, 'mousedown', (event) => {\r\n    if (event.target === menuContainer) {\r\n      menuContainer.classList.add('hidden');\r\n    }\r\n  });\r\n  eventsManager.addEventListener(settingsButton, 'mousedown', () => {\r\n    menuContainer.classList.remove('hidden');\r\n  });\r\n};\r\n\r\nconst handleSettings = () => {\r\n  const toggles = UI.getSettingToggles();\r\n  toggles.forEach((toggle) => {\r\n    eventsManager.addEventListener(toggle, 'change', async () => {\r\n      const configKey = toggle.dataset.config;\r\n      if (!configKey || !(configKey in getConfig())) return;\r\n\r\n      if (configKey === 'theme') {\r\n        setConfig({ ...getConfig(), theme: toggle.checked ? 'dark' : 'light' });\r\n        setTheme(getConfig().theme);\r\n      } else if (configKey === 'autosync') {\r\n        const syncData = (await getUserData())?.sync;\r\n        if (syncData?.repo) {\r\n          await setUserData({\r\n            sync: {\r\n              ...syncData,\r\n              autosync: toggle.checked,\r\n            },\r\n          });\r\n        }\r\n        if (toggle.checked && !syncData?.repo) {\r\n          toggle.checked = false;\r\n          await showScreen('sync');\r\n        }\r\n      } else {\r\n        setConfig({ ...getConfig(), [configKey]: toggle.checked });\r\n      }\r\n      setUserConfig(getUserConfig(getConfig()));\r\n\r\n      if (configKey === 'autoupdate' && getConfig()[configKey]) {\r\n        await run();\r\n      }\r\n      if (configKey === 'emmet') {\r\n        await configureEmmet(getConfig());\r\n      }\r\n      if (configKey === 'welcome') {\r\n        setUserConfig({\r\n          welcome: toggle.checked,\r\n        });\r\n      }\r\n      if (configKey === 'recoverUnsaved') {\r\n        setUserConfig({\r\n          recoverUnsaved: toggle.checked,\r\n        });\r\n        setProjectRecover();\r\n      }\r\n      if (configKey === 'showSpacing') {\r\n        setUserConfig({\r\n          showSpacing: toggle.checked,\r\n        });\r\n        if (getConfig().autoupdate) {\r\n          await run();\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  const delayRange = UI.getDelayRange();\r\n  eventsManager.addEventListener(delayRange, 'input', () => {\r\n    const delayValue = UI.getDelayValue();\r\n    const value = Number(delayRange.value);\r\n    delayValue.textContent = String(value / 1000);\r\n    setConfig({ ...getConfig(), delay: value });\r\n    setUserConfig(getUserConfig(getConfig()));\r\n  });\r\n};\r\n\r\nconst handleLogin = () => {\r\n  eventsManager.addEventListener(UI.getLoginLink(), 'click', login, false);\r\n  registerScreen('login', login);\r\n};\r\n\r\nconst handleLogout = () => {\r\n  eventsManager.addEventListener(UI.getLogoutLink(), 'click', logout, false);\r\n};\r\n\r\nconst handleNew = () => {\r\n  const templatesContainer = createTemplatesContainer(eventsManager, () => loadUserTemplates());\r\n  const userTemplatesScreen = UI.getUserTemplatesScreen(templatesContainer);\r\n\r\n  const loadUserTemplates = async () => {\r\n    const defaultTemplate = getAppData()?.defaultTemplate;\r\n    const userTemplates = ((await stores.templates?.getList()) || []).sort((a, b) =>\r\n      a.id === defaultTemplate ? -1 : b.id === defaultTemplate ? 1 : 0,\r\n    );\r\n\r\n    if (userTemplates.length === 0) {\r\n      userTemplatesScreen.innerHTML = noUserTemplates;\r\n      return;\r\n    }\r\n    userTemplatesScreen.innerHTML = '';\r\n\r\n    const list = document.createElement('ul') as HTMLElement;\r\n    list.classList.add('open-list');\r\n    userTemplatesScreen.appendChild(list);\r\n\r\n    userTemplates.forEach((item) => {\r\n      const { link, deleteButton, setAsDefaultLink, removeDefaultLink } = createOpenItem(\r\n        item,\r\n        list,\r\n        getLanguageTitle,\r\n        getLanguageByAlias,\r\n        true,\r\n      );\r\n\r\n      if (defaultTemplate === item.id) {\r\n        link.parentElement?.classList.add('selected');\r\n      }\r\n\r\n      eventsManager.addEventListener(\r\n        link,\r\n        'click',\r\n        async (event) => {\r\n          event.preventDefault();\r\n          const itemId = (link as HTMLElement).dataset.id || '';\r\n          const template = (await stores.templates?.getItem(itemId))?.config;\r\n          if (template) {\r\n            await loadConfig({\r\n              ...template,\r\n              title: defaultConfig.title,\r\n            });\r\n            projectId = '';\r\n          }\r\n          modal.close();\r\n        },\r\n        false,\r\n      );\r\n\r\n      eventsManager.addEventListener(\r\n        deleteButton,\r\n        'click',\r\n        async () => {\r\n          if (!stores.templates) return;\r\n          if (getAppData()?.defaultTemplate === item.id) {\r\n            setAppData({ defaultTemplate: null });\r\n          }\r\n          await stores.templates.deleteItem(item.id);\r\n          const li = deleteButton.parentElement as HTMLElement;\r\n          li.classList.add('hidden');\r\n          setTimeout(async () => {\r\n            li.style.display = 'none';\r\n            if (stores.templates && (await stores.templates.getList()).length === 0) {\r\n              list.remove();\r\n              userTemplatesScreen.innerHTML = noUserTemplates;\r\n            }\r\n          }, 500);\r\n        },\r\n        false,\r\n      );\r\n\r\n      eventsManager.addEventListener(\r\n        setAsDefaultLink,\r\n        'click',\r\n        (ev) => {\r\n          ev.stopPropagation();\r\n          setAppData({ defaultTemplate: item.id });\r\n          [...list.children].forEach((li) => {\r\n            li.classList.remove('selected');\r\n          });\r\n          link.parentElement?.classList.add('selected');\r\n        },\r\n        false,\r\n      );\r\n\r\n      eventsManager.addEventListener(\r\n        removeDefaultLink,\r\n        'click',\r\n        (ev) => {\r\n          ev.stopPropagation();\r\n          setAppData({ defaultTemplate: null });\r\n          link.parentElement?.classList.remove('selected');\r\n        },\r\n        false,\r\n      );\r\n    });\r\n  };\r\n\r\n  let starterTemplatesCache: Template[];\r\n  const createTemplatesUI = async () => {\r\n    const starterTemplatesList = UI.getStarterTemplatesList(templatesContainer);\r\n    const loadingText = starterTemplatesList?.firstElementChild;\r\n    if (!starterTemplatesCache) {\r\n      getTemplates()\r\n        .then((starterTemplates) => {\r\n          starterTemplatesCache = starterTemplates;\r\n          loadingText?.remove();\r\n          starterTemplates.forEach((template) => {\r\n            const link = createStarterTemplateLink(template, starterTemplatesList, baseUrl);\r\n            eventsManager.addEventListener(\r\n              link,\r\n              'click',\r\n              (event) => {\r\n                event.preventDefault();\r\n                loadStarterTemplate(template.name, /* checkSaved= */ false);\r\n              },\r\n              false,\r\n            );\r\n          });\r\n        })\r\n        .catch(() => {\r\n          loadingText?.remove();\r\n          notifications.error('Failed loading starter templates');\r\n        });\r\n    }\r\n\r\n    setTimeout(() => UI.getStarterTemplatesTab(templatesContainer)?.click());\r\n    modal.show(templatesContainer, { isAsync: true });\r\n  };\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getNewLink(),\r\n    'click',\r\n    checkSavedAndExecute(createTemplatesUI),\r\n    false,\r\n  );\r\n\r\n  registerScreen('new', checkSavedAndExecute(createTemplatesUI));\r\n};\r\n\r\nconst handleSave = () => {\r\n  eventsManager.addEventListener(UI.getSaveLink(), 'click', async (event) => {\r\n    (event as Event).preventDefault();\r\n    await save(true);\r\n  });\r\n};\r\n\r\nconst handleFork = () => {\r\n  eventsManager.addEventListener(UI.getForkLink(), 'click', async (event) => {\r\n    (event as Event).preventDefault();\r\n    await fork();\r\n  });\r\n};\r\n\r\nconst handleSaveAsTemplate = () => {\r\n  eventsManager.addEventListener(UI.getSaveAsTemplateLink(), 'click', async (event) => {\r\n    (event as Event).preventDefault();\r\n    if (stores.templates) {\r\n      await stores.templates.addItem(getConfig());\r\n      notifications.success('Saved as a new template');\r\n    }\r\n  });\r\n};\r\n\r\nconst handleOpen = () => {\r\n  const createList = async () => {\r\n    modal.show(loadingMessage());\r\n    const openModule: typeof import('./UI/open') = await import(baseUrl + '{{hash:open.js}}');\r\n    await openModule.createSavedProjectsList({\r\n      eventsManager,\r\n      getContentConfig,\r\n      getProjectId: () => projectId,\r\n      loadConfig,\r\n      modal,\r\n      notifications,\r\n      projectStorage: stores.projects || fakeStorage,\r\n      setProjectId: (id: string) => (projectId = id),\r\n      showScreen,\r\n      languages,\r\n      getLanguageTitle,\r\n      getLanguageByAlias,\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getOpenLink(),\r\n    'click',\r\n    checkSavedAndExecute(createList),\r\n    false,\r\n  );\r\n  registerScreen('open', checkSavedAndExecute(createList));\r\n};\r\n\r\nconst handleImport = () => {\r\n  const createImportUI = async () => {\r\n    modal.show(loadingMessage());\r\n    const importModule: typeof import('./UI/import') = await import(baseUrl + '{{hash:import.js}}');\r\n    importModule.createImportUI({\r\n      baseUrl,\r\n      modal,\r\n      notifications,\r\n      eventsManager,\r\n      getUser: authService?.getUser,\r\n      loadConfig,\r\n      populateConfig,\r\n      projectStorage: stores.projects,\r\n      showScreen,\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getImportLink(),\r\n    'click',\r\n    checkSavedAndExecute(createImportUI),\r\n    false,\r\n  );\r\n  registerScreen('import', checkSavedAndExecute(createImportUI));\r\n};\r\n\r\nconst handleExport = () => {\r\n  let exportModule: typeof import('./export/export');\r\n  const loadModule = async () => {\r\n    exportModule = exportModule || (await import(baseUrl + '{{hash:export.js}}'));\r\n  };\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getExportJSONLink(),\r\n    'click',\r\n    (event: Event) => {\r\n      event.preventDefault();\r\n      updateConfig();\r\n      exportJSON(getConfig());\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getExportResultLink(),\r\n    'click',\r\n    async (event: Event) => {\r\n      event.preventDefault();\r\n      updateConfig();\r\n      await loadModule();\r\n      exportModule.exportConfig(\r\n        getConfig(),\r\n        baseUrl,\r\n        'html',\r\n        await getResultPage({ forExport: true }),\r\n      );\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getExportSourceLink(),\r\n    'click',\r\n    async (event: Event) => {\r\n      event.preventDefault();\r\n      updateConfig();\r\n      const html = await getResultPage({ forExport: true });\r\n      await loadModule();\r\n      exportModule.exportConfig(getConfig(), baseUrl, 'src', {\r\n        html,\r\n        deps: { getLanguageExtension },\r\n      });\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getExportCodepenLink(),\r\n    'click',\r\n    async () => {\r\n      updateConfig();\r\n      if (!cacheIsValid(getCache(), getContentConfig(getConfig()))) {\r\n        await getResultPage({});\r\n      }\r\n      const cache = getCachedCode();\r\n      const compiled = {\r\n        markup: cache.markup.compiled,\r\n        style: cache.style.compiled,\r\n        script: cache.script.compiled,\r\n      };\r\n      await loadModule();\r\n      exportModule.exportConfig(getConfig(), baseUrl, 'codepen', {\r\n        baseUrl,\r\n        compiled,\r\n        deps: {\r\n          getLanguageExtension,\r\n          getLanguageCompiler,\r\n        },\r\n      });\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getExportJsfiddleLink(),\r\n    'click',\r\n    async () => {\r\n      updateConfig();\r\n      if (!cacheIsValid(getCache(), getContentConfig(getConfig()))) {\r\n        await getResultPage({});\r\n      }\r\n      const cache = getCachedCode();\r\n      const compiled = {\r\n        markup: cache.markup.compiled,\r\n        style: cache.style.compiled,\r\n        script: cache.script.compiled,\r\n      };\r\n      await loadModule();\r\n      exportModule.exportConfig(getConfig(), baseUrl, 'jsfiddle', {\r\n        baseUrl,\r\n        compiled,\r\n        deps: {\r\n          getLanguageExtension,\r\n          getLanguageCompiler,\r\n        },\r\n      });\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getExportGithubGistLink(),\r\n    'click',\r\n    async () => {\r\n      updateConfig();\r\n      const user = await getUser();\r\n      if (!user) return;\r\n      notifications.info('Creating a public GitHub gist...');\r\n      await loadModule();\r\n      exportModule.exportConfig(getConfig(), baseUrl, 'githubGist', {\r\n        user,\r\n        deps: { getLanguageExtension },\r\n      });\r\n    },\r\n    false,\r\n  );\r\n};\r\n\r\nconst handleShare = () => {\r\n  const createShareUI = async () => {\r\n    modal.show(loadingMessage(), { size: 'small' });\r\n    const importModule: typeof import('./UI/share') = await import(baseUrl + '{{hash:share.js}}');\r\n    const shareFn = (shortUrl = false, permanentUrl = false): Promise<ShareData> =>\r\n      share(\r\n        shortUrl,\r\n        /* contentOnly= */ true,\r\n        /* urlUpdate= */ false,\r\n        /* includeResult= */ true,\r\n        permanentUrl,\r\n      );\r\n    const shareContainer = await importModule.createShareContainer(shareFn, baseUrl, eventsManager);\r\n    modal.show(shareContainer, { size: 'small' });\r\n  };\r\n  eventsManager.addEventListener(\r\n    UI.getShareLink(),\r\n    'click',\r\n    async (event: Event) => {\r\n      event.preventDefault();\r\n      await createShareUI();\r\n    },\r\n    false,\r\n  );\r\n  registerScreen('share', createShareUI);\r\n};\r\n\r\nconst handleDeploy = () => {\r\n  const createDeployUI = async () => {\r\n    const user = await getUser();\r\n    if (!user) {\r\n      notifications.error('Authentication error!');\r\n      return;\r\n    }\r\n    modal.show(loadingMessage());\r\n\r\n    const getProjectDeployRepo = async () => {\r\n      if (!projectId) return;\r\n      return (await getUserData())?.deploys?.[projectId];\r\n    };\r\n\r\n    const setProjectDeployRepo = async (repo: string) => {\r\n      if (!projectId) return;\r\n      await setUserData({\r\n        deploys: {\r\n          ...(await getUserData())?.deploys,\r\n          [projectId]: repo,\r\n        },\r\n      });\r\n    };\r\n\r\n    const deployModule: typeof import('./UI/deploy') = await import(baseUrl + '{{hash:deploy.js}}');\r\n    deployModule.createDeployUI({\r\n      modal,\r\n      notifications,\r\n      eventsManager,\r\n      user,\r\n      deployRepo: await getProjectDeployRepo(),\r\n      deps: {\r\n        getResultPage,\r\n        getCache,\r\n        getConfig,\r\n        getContentConfig,\r\n        getLanguageExtension,\r\n        setProjectDeployRepo,\r\n      },\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getDeployLink(), 'click', createDeployUI, false);\r\n  registerScreen('deploy', createDeployUI);\r\n};\r\n\r\nconst handleSync = () => {\r\n  if (isEmbed) return;\r\n\r\n  const createSyncUI = async () => {\r\n    const user = await getUser();\r\n    if (!user) {\r\n      notifications.error('Authentication error!');\r\n      return;\r\n    }\r\n    modal.show(loadingMessage());\r\n\r\n    const syncUIModule: typeof import('./UI/sync-ui') = await import(\r\n      baseUrl + '{{hash:sync-ui.js}}'\r\n    );\r\n    syncUIModule.createSyncUI({\r\n      baseUrl,\r\n      modal,\r\n      notifications,\r\n      eventsManager,\r\n      user,\r\n      deps: {\r\n        getSyncData: async () => (await getUserData())?.sync || null,\r\n        setSyncData: async (syncData: UserData['data']['sync']) => {\r\n          await setUserData({ sync: syncData });\r\n          loadSettings(getConfig());\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getSyncLink(), 'click', createSyncUI, false);\r\n  registerScreen('sync', createSyncUI);\r\n};\r\n\r\nconst handleAutosync = async () => {\r\n  if (isEmbed) return;\r\n\r\n  const minute = 1000 * 60;\r\n  const syncFrequency = 30 * minute;\r\n  let syncInterval: number;\r\n  const sync = async () => {\r\n    if (isDestroyed) {\r\n      clearInterval(syncInterval);\r\n      return;\r\n    }\r\n\r\n    const syncData = (await getUserData())?.sync;\r\n    if (!syncData?.autosync) return;\r\n    if (Date.now() - syncData.lastSync < syncFrequency) return;\r\n    const user = await authService?.getUser();\r\n    const repo = syncData.repo;\r\n    if (!user || !repo) return;\r\n\r\n    const syncModule: typeof import('./sync/sync') = await import(baseUrl + '{{hash:sync.js}}');\r\n    syncModule.init(baseUrl);\r\n\r\n    const syncResult = await syncModule.sync({\r\n      user,\r\n      repo,\r\n      newRepo: false,\r\n    });\r\n    if (syncResult) {\r\n      setUserData({\r\n        sync: {\r\n          ...syncData,\r\n          lastSync: Date.now(),\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const triggerSync = () => {\r\n    setTimeout(() => {\r\n      sync();\r\n      syncInterval = window.setInterval(sync, syncFrequency);\r\n    }, minute);\r\n  };\r\n\r\n  triggerSync();\r\n};\r\n\r\nconst handlePersistantStorage = async () => {\r\n  if (isEmbed) return;\r\n\r\n  let alreadyRequested = false;\r\n\r\n  const unsubscribe = () => {\r\n    projectSubscription?.unsubscribe();\r\n    templateSubscription?.unsubscribe();\r\n    assetSubscription?.unsubscribe();\r\n  };\r\n\r\n  const requestPersistance = () => {\r\n    if (alreadyRequested) return unsubscribe();\r\n    setTimeout(async () => {\r\n      alreadyRequested = true;\r\n      if (navigator.storage && navigator.storage.persist) {\r\n        await navigator.storage.persist();\r\n      }\r\n    }, 2000);\r\n  };\r\n\r\n  const updateRecentProjects = (allProjects: StorageItem[]) => {\r\n    const recentProjects =\r\n      allProjects\r\n        ?.slice(0, 5)\r\n        .map((p) => ({ id: p.id, title: p.config.title, description: p.config.description })) || [];\r\n    setAppData({ recentProjects });\r\n  };\r\n\r\n  const projectSubscription = stores.projects?.subscribe(requestPersistance);\r\n  const templateSubscription = stores.templates?.subscribe(requestPersistance);\r\n  const assetSubscription = stores.assets?.subscribe(requestPersistance);\r\n\r\n  stores.projects?.subscribe(updateRecentProjects);\r\n};\r\n\r\nconst handleBackup = () => {\r\n  const createBackupUI = async () => {\r\n    modal.show(loadingMessage());\r\n    const backupModule: typeof import('./UI/backup') = await import(baseUrl + '{{hash:backup.js}}');\r\n    backupModule.createBackupUI({\r\n      baseUrl,\r\n      modal,\r\n      notifications,\r\n      eventsManager,\r\n      stores,\r\n      deps: {\r\n        loadUserConfig,\r\n      },\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getBackupLink(), 'click', createBackupUI, false);\r\n  registerScreen('backup', createBackupUI);\r\n};\r\n\r\nconst handleBroadcast = () => {\r\n  if (isEmbed) return;\r\n\r\n  const createBroadcastUI = async () => {\r\n    modal.show(loadingMessage());\r\n\r\n    const syncUIModule: typeof import('./UI/broadcast') = await import(\r\n      baseUrl + '{{hash:broadcast.js}}'\r\n    );\r\n    syncUIModule.createBroadcastUI({\r\n      modal,\r\n      notifications,\r\n      eventsManager,\r\n      deps: {\r\n        getBroadcastData: () => ({\r\n          ...broadcastInfo,\r\n          serverUrl: getAppData()?.broadcast?.serverUrl || '',\r\n        }),\r\n        setBroadcastData: (broadcastData) => {\r\n          setBroadcastStatus(broadcastData);\r\n          setAppData({\r\n            broadcast: {\r\n              ...getAppData()?.broadcast,\r\n              serverUrl: broadcastData.serverUrl,\r\n            },\r\n          });\r\n        },\r\n        broadcast,\r\n      },\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getBroadcastLink(), 'click', createBroadcastUI, false);\r\n  registerScreen('broadcast', createBroadcastUI);\r\n};\r\n\r\nconst handleWelcome = () => {\r\n  if (isEmbed) return;\r\n\r\n  const createWelcomeUI = async () => {\r\n    modal.show(loadingMessage());\r\n\r\n    const div = document.createElement('div');\r\n    div.innerHTML = welcomeScreen.replace(/{{baseUrl}}/g, baseUrl);\r\n    const welcomeContainer = div.firstChild as HTMLElement;\r\n    modal.show(welcomeContainer);\r\n\r\n    const showWelcomeCheckbox = UI.getModalShowWelcomeCheckbox(welcomeContainer);\r\n    showWelcomeCheckbox.checked = getConfig().welcome;\r\n\r\n    eventsManager.addEventListener(UI.getWelcomeLinkNew(welcomeContainer), 'click', () => {\r\n      showScreen('new');\r\n    });\r\n    eventsManager.addEventListener(UI.getWelcomeLinkOpen(welcomeContainer), 'click', () => {\r\n      showScreen('open');\r\n    });\r\n    eventsManager.addEventListener(UI.getWelcomeLinkImport(welcomeContainer), 'click', () => {\r\n      showScreen('import');\r\n    });\r\n    eventsManager.addEventListener(UI.getWelcomeLinkRecentOpen(welcomeContainer), 'click', () => {\r\n      showScreen('open');\r\n    });\r\n    eventsManager.addEventListener(UI.getWelcomeLinkTemplates(welcomeContainer), 'click', () => {\r\n      showScreen('new');\r\n    });\r\n    eventsManager.addEventListener(showWelcomeCheckbox, 'change', () => {\r\n      setUserConfig({ welcome: showWelcomeCheckbox.checked });\r\n      loadSettings(getConfig());\r\n    });\r\n\r\n    if (!initialized) {\r\n      checkRecoverStatus(/* isWelcomeScreen= */ true);\r\n    }\r\n\r\n    const loadRecentProject = async (pId: string) => {\r\n      modal.show(loadingMessage(), { size: 'small' });\r\n      const savedProject = (await stores.projects?.getItem(pId))?.config;\r\n      if (savedProject) {\r\n        await loadConfig(savedProject);\r\n        projectId = pId;\r\n      }\r\n      modal.close();\r\n    };\r\n\r\n    const recentProjects = getAppData()?.recentProjects?.slice(0, 5).reverse() || [];\r\n\r\n    const welcomeModalScreen = UI.getModalWelcomeScreen(welcomeContainer);\r\n    const welcomeRecent = UI.getModalWelcomeRecent(welcomeContainer);\r\n\r\n    if (recentProjects.length === 0 && welcomeModalScreen && welcomeRecent) {\r\n      welcomeRecent.style.display = 'none';\r\n      welcomeModalScreen.classList.add('no-recent');\r\n    } else {\r\n      const list = UI.getModalWelcomeRecentList(welcomeContainer);\r\n      recentProjects.forEach((p) => {\r\n        const item = document.createElement('li');\r\n        item.classList.add('overflow-ellipsis');\r\n\r\n        const link = document.createElement('a');\r\n        link.textContent = p.title;\r\n        link.title = p.description.trim() || p.title;\r\n        link.href = '#';\r\n\r\n        item.appendChild(link);\r\n        list?.prepend(item);\r\n\r\n        eventsManager.addEventListener(link, 'click', () =>\r\n          checkSavedStatus().then((confirmed) => {\r\n            if (confirmed) {\r\n              loadRecentProject(p.id);\r\n            }\r\n          }),\r\n        );\r\n      });\r\n    }\r\n\r\n    const defaultTemplateId = getAppData()?.defaultTemplate;\r\n    if (!defaultTemplateId) {\r\n      UI.getWelcomeLinkNoDefaultTemplate(welcomeContainer).style.display = 'unset';\r\n    } else {\r\n      const loadTemplateLink = UI.getWelcomeLinkLoadDefault(welcomeContainer);\r\n      eventsManager.addEventListener(\r\n        loadTemplateLink,\r\n        'click',\r\n        async (event) => {\r\n          event.preventDefault();\r\n          modal.show(loadingMessage(), { size: 'small' });\r\n          await loadTemplate(defaultTemplateId);\r\n          modal.close();\r\n        },\r\n        false,\r\n      );\r\n      loadTemplateLink.style.display = 'unset';\r\n    }\r\n    UI.getWelcomeLinkDefaultTemplateLi(welcomeContainer).style.visibility = 'visible';\r\n\r\n    const defaultTemplates: Array<{ name: Template['name']; title: string }> = [\r\n      {\r\n        name: 'blank',\r\n        title: 'Blank Project',\r\n      },\r\n      {\r\n        name: 'javascript',\r\n        title: 'JavaScript Starter',\r\n      },\r\n      {\r\n        name: 'typescript',\r\n        title: 'TypeScript Starter',\r\n      },\r\n      {\r\n        name: 'react',\r\n        title: 'React Starter',\r\n      },\r\n      {\r\n        name: 'vue',\r\n        title: 'Vue 3 Starter',\r\n      },\r\n    ];\r\n    const savedRecentTemplates = getAppData()?.recentTemplates || [];\r\n    const recentTemplates = [\r\n      ...savedRecentTemplates,\r\n      ...defaultTemplates.filter((t) => !savedRecentTemplates.map((r) => r.name).includes(t.name)),\r\n    ]\r\n      .slice(0, 5)\r\n      .reverse();\r\n\r\n    const templateList = UI.getModalWelcomeTemplateList(welcomeContainer);\r\n    recentTemplates.forEach((t) => {\r\n      const item = document.createElement('li');\r\n\r\n      const link = document.createElement('a');\r\n      link.textContent = t.title;\r\n      link.href = '#';\r\n\r\n      item.appendChild(link);\r\n      templateList?.prepend(item);\r\n\r\n      eventsManager.addEventListener(link, 'click', () =>\r\n        checkSavedStatus().then((confirmed) => {\r\n          if (confirmed) {\r\n            loadStarterTemplate(t.name);\r\n          }\r\n        }),\r\n      );\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getWelcomeLink(), 'click', createWelcomeUI);\r\n  registerScreen('welcome', createWelcomeUI);\r\n};\r\n\r\nconst handleAbout = () => {\r\n  if (isEmbed) return;\r\n\r\n  const createAboutUI = async () => {\r\n    const versions = getVersion();\r\n    const repoUrl = process.env.REPO_URL || '';\r\n    const div = document.createElement('div');\r\n    div.innerHTML = aboutScreen\r\n      .replace(/{{COMMIT_URL}}/g, `${repoUrl}/commit/${versions.commitSHA}`)\r\n      .replace(/{{APP_URL}}/g, versions.appUrl)\r\n      .replace(/{{SDK_URL}}/g, versions.sdkUrl);\r\n    const aboutContainer = div.firstChild as HTMLElement;\r\n    modal.show(aboutContainer);\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getAboutLink(), 'click', createAboutUI);\r\n  registerScreen('about', createAboutUI);\r\n};\r\n\r\nconst handleProjectInfo = () => {\r\n  const onSave = (title: string, description: string, tags: string[]) => {\r\n    setConfig({\r\n      ...getConfig(),\r\n      title,\r\n      description,\r\n      tags,\r\n    });\r\n    save(!projectId, true);\r\n  };\r\n  const createProjectInfo = () =>\r\n    createProjectInfoUI(getConfig(), stores.projects || fakeStorage, modal, eventsManager, onSave);\r\n\r\n  eventsManager.addEventListener(UI.getProjectInfoLink(), 'click', createProjectInfo, false);\r\n  registerScreen('info', createProjectInfo);\r\n};\r\n\r\nconst handleEmbed = () => {\r\n  const getUrlFn = async (permanentUrl = false) =>\r\n    (\r\n      await share(\r\n        /* shortUrl= */ true,\r\n        /* contentOnly= */ true,\r\n        /* urlUpdate= */ false,\r\n        /* includeResult= */ true,\r\n        permanentUrl,\r\n      )\r\n    ).url;\r\n  const config = getConfig();\r\n\r\n  const createEditorFn = async (container: HTMLElement) =>\r\n    createEditor({\r\n      baseUrl,\r\n      container,\r\n      editorId: 'embed',\r\n      getLanguageExtension,\r\n      isEmbed,\r\n      language: 'html',\r\n      mapLanguage,\r\n      readonly: true,\r\n      theme: config.theme,\r\n      value: '',\r\n      ...getEditorConfig(config),\r\n      editor: 'codejar',\r\n      getFormatterConfig: () => getFormatterConfig(getConfig()),\r\n      getFontFamily,\r\n    });\r\n  const createEmbedUI = async () => {\r\n    modal.show(loadingMessage());\r\n\r\n    const embedModule: typeof import('./UI/embed-ui') = await import(\r\n      baseUrl + '{{hash:embed-ui.js}}'\r\n    );\r\n    await embedModule.createEmbedUI({\r\n      baseUrl,\r\n      config: getContentConfig(getConfig()),\r\n      editorLanguages: {\r\n        markup: getLanguageTitle(getConfig().markup.language),\r\n        style: getLanguageTitle(getConfig().style.language),\r\n        script: getLanguageTitle(getConfig().script.language),\r\n      },\r\n      modal,\r\n      notifications,\r\n      eventsManager,\r\n      createEditorFn,\r\n      getUrlFn,\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getEmbedLink(), 'click', createEmbedUI, false);\r\n  registerScreen('embed', createEmbedUI);\r\n};\r\n\r\nconst handleEditorSettings = () => {\r\n  const changeSettings = (newConfig: Partial<UserConfig> | null) => {\r\n    if (!newConfig) return;\r\n    const shouldReload = newConfig.editor !== getConfig().editor;\r\n    setUserConfig(newConfig);\r\n    if (shouldReload) {\r\n      reloadEditors(getConfig());\r\n    } else {\r\n      getAllEditors().forEach((editor) => editor.changeSettings(newConfig as UserConfig));\r\n    }\r\n    showEditorModeStatus(getConfig().activeEditor || 'markup');\r\n  };\r\n  const createEditorSettingsUI = async ({\r\n    scrollToSelector = '',\r\n  }: { scrollToSelector?: string } = {}) => {\r\n    modal.show(loadingMessage());\r\n\r\n    const editorSettingsModule: typeof import('./UI/editor-settings') = await import(\r\n      baseUrl + '{{hash:editor-settings.js}}'\r\n    );\r\n    await editorSettingsModule.createEditorSettingsUI({\r\n      baseUrl,\r\n      modal,\r\n      eventsManager,\r\n      scrollToSelector,\r\n      deps: {\r\n        getUserConfig: () => getUserConfig(getConfig()),\r\n        createEditor,\r\n        getFormatFn: () => formatter.getFormatFn('jsx'),\r\n        changeSettings,\r\n      },\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getEditorSettingsLink(),\r\n    'click',\r\n    () => createEditorSettingsUI(),\r\n    false,\r\n  );\r\n  registerScreen('editor-settings', createEditorSettingsUI);\r\n};\r\n\r\nconst handleAssets = () => {\r\n  let assetsModule: typeof import('./UI/assets');\r\n  const loadModule = async () => {\r\n    modal.show(loadingMessage());\r\n    assetsModule = assetsModule || (await import(baseUrl + '{{hash:assets.js}}'));\r\n  };\r\n\r\n  const createList = async () => {\r\n    await loadModule();\r\n    await assetsModule.createAssetsList({\r\n      eventsManager,\r\n      modal,\r\n      notifications,\r\n      assetsStorage: stores.assets || fakeStorage,\r\n      showScreen,\r\n      baseUrl,\r\n    });\r\n  };\r\n\r\n  const createAddAsset = async (activeTab: number) => {\r\n    await loadModule();\r\n\r\n    const deployModule: typeof import('./UI/deploy') = await import(baseUrl + '{{hash:deploy.js}}');\r\n    const deployAsset = async (user: User, file: GitHubFile) =>\r\n      deployModule.deployFile({\r\n        file,\r\n        user,\r\n        repo: 'livecodes-assets',\r\n        branch: 'gh-pages',\r\n        message: 'add ' + file.path,\r\n        description: 'LiveCodes assets',\r\n        readmeContent: '#LiveCodes assets',\r\n      });\r\n    modal.show(\r\n      assetsModule.createAddAssetContainer({\r\n        eventsManager,\r\n        notifications,\r\n        assetsStorage: stores.assets || fakeStorage,\r\n        showScreen,\r\n        deployAsset,\r\n        getUser,\r\n        baseUrl,\r\n        activeTab,\r\n      }),\r\n      {\r\n        isAsync: true,\r\n      },\r\n    );\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getAssetsLink(), 'click', createList, false);\r\n  registerScreen('assets', createList);\r\n  registerScreen('add-asset', (tab: number) => {\r\n    setTimeout(() => createAddAsset(tab));\r\n  });\r\n};\r\n\r\nconst handleSnippets = () => {\r\n  let snippetsModule: typeof import('./UI/snippets');\r\n  const loadModule = async () => {\r\n    modal.show(loadingMessage());\r\n    snippetsModule = snippetsModule || (await import(baseUrl + '{{hash:snippets.js}}'));\r\n  };\r\n\r\n  const createEditorFn = async (options: Partial<EditorOptions>) =>\r\n    createEditor({\r\n      baseUrl,\r\n      container: null,\r\n      editorId: 'snippet',\r\n      getLanguageExtension,\r\n      isEmbed,\r\n      language: 'html',\r\n      value: '',\r\n      theme: getConfig().theme,\r\n      readonly: getConfig().readonly,\r\n      mapLanguage,\r\n      getFormatterConfig: () => getFormatterConfig(getConfig()),\r\n      getFontFamily,\r\n      ...getEditorConfig(getConfig()),\r\n      ...options,\r\n    });\r\n\r\n  const createList = async () => {\r\n    await loadModule();\r\n    await snippetsModule.createSnippetsList({\r\n      eventsManager,\r\n      modal,\r\n      notifications,\r\n      snippetsStorage: stores.snippets || fakeStorage,\r\n      deps: { createEditorFn, showScreen },\r\n    });\r\n  };\r\n\r\n  const createAddSnippet = async (snippetId?: string) => {\r\n    await loadModule();\r\n    const snippetContainer = await snippetsModule.createAddSnippetContainer({\r\n      snippetId,\r\n      eventsManager,\r\n      notifications,\r\n      snippetsStorage: stores.snippets || fakeStorage,\r\n      showScreen,\r\n      deps: {\r\n        createEditorFn,\r\n        getAppData,\r\n        setAppData,\r\n      },\r\n    });\r\n\r\n    modal.show(snippetContainer, {\r\n      isAsync: true,\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(UI.getSnippetsLink(), 'click', createList, false);\r\n  registerScreen('snippets', createList);\r\n  registerScreen('add-snippet', (snippetId?: string) => {\r\n    setTimeout(() => createAddSnippet(snippetId));\r\n  });\r\n};\r\n\r\nconst handleExternalResources = () => {\r\n  const createExrenalResourcesUI = async () => {\r\n    const loadResources = async () => {\r\n      setExternalResourcesMark();\r\n      await setSavedStatus();\r\n      modal.close();\r\n      if (getConfig().autoupdate) {\r\n        await run();\r\n      }\r\n    };\r\n\r\n    modal.show(loadingMessage());\r\n    const resourcesModule: typeof import('./UI/resources') = await import(\r\n      baseUrl + '{{hash:resources.js}}'\r\n    );\r\n    resourcesModule.createExternalResourcesUI({\r\n      baseUrl,\r\n      modal,\r\n      eventsManager,\r\n      deps: {\r\n        getConfig,\r\n        setConfig,\r\n        loadResources,\r\n      },\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getExternalResourcesLink(),\r\n    'click',\r\n    createExrenalResourcesUI,\r\n    false,\r\n  );\r\n  eventsManager.addEventListener(\r\n    UI.getExternalResourcesBtn(),\r\n    'click',\r\n    createExrenalResourcesUI,\r\n    false,\r\n  );\r\n  registerScreen('resources', createExrenalResourcesUI);\r\n};\r\n\r\nconst handleCustomSettings = () => {\r\n  const createCustomSettingsUI = async () => {\r\n    const config = getConfig();\r\n    // eslint-disable-next-line prefer-const\r\n    let customSettingsEditor: CodeEditor | undefined;\r\n    const div = document.createElement('div');\r\n    div.innerHTML = customSettingsScreen;\r\n    const customSettingsContainer = div.firstChild as HTMLElement;\r\n    modal.show(customSettingsContainer, {\r\n      onClose: () => {\r\n        customSettingsEditor?.destroy();\r\n      },\r\n    });\r\n\r\n    const options: EditorOptions = {\r\n      baseUrl,\r\n      mode: config.mode,\r\n      readonly: config.readonly,\r\n      editorId: 'customSettings',\r\n      container: UI.getCustomSettingsEditor(),\r\n      language: 'json' as Language,\r\n      value: stringify(config.customSettings, true),\r\n      theme: config.theme,\r\n      isEmbed,\r\n      mapLanguage,\r\n      getLanguageExtension,\r\n      getFormatterConfig: () => getFormatterConfig(getConfig()),\r\n      getFontFamily,\r\n      ...getEditorConfig(config),\r\n    };\r\n    customSettingsEditor = await createEditor(options);\r\n    customSettingsEditor?.focus();\r\n\r\n    eventsManager.addEventListener(UI.getLoadCustomSettingsButton(), 'click', async () => {\r\n      let customSettings: CustomSettings = {};\r\n      const editorContent = customSettingsEditor?.getValue() || '{}';\r\n      try {\r\n        customSettings = JSON.parse(editorContent);\r\n      } catch {\r\n        try {\r\n          customSettings = JSON.parse(stringToValidJson(editorContent));\r\n        } catch {\r\n          notifications.error('Failed parsing settings as JSON');\r\n          return;\r\n        }\r\n      }\r\n      if (customSettings !== getConfig().customSettings) {\r\n        compiler.clearCache();\r\n        setConfig({\r\n          ...getConfig(),\r\n          customSettings,\r\n        });\r\n        await setSavedStatus();\r\n        if (customSettings.types) {\r\n          loadModuleTypes(editors, getConfig());\r\n        }\r\n      }\r\n      customSettingsEditor?.destroy();\r\n      modal.close();\r\n      if (getConfig().autoupdate) {\r\n        await run();\r\n      }\r\n      dispatchChangeEvent();\r\n    });\r\n  };\r\n  eventsManager.addEventListener(\r\n    UI.getCustomSettingsLink(),\r\n    'click',\r\n    createCustomSettingsUI,\r\n    false,\r\n  );\r\n  registerScreen('custom-settings', createCustomSettingsUI);\r\n};\r\n\r\nconst handleTests = () => {\r\n  eventsManager.addEventListener(window, 'message', (ev: any) => {\r\n    if (ev.origin !== sandboxService.getOrigin()) return;\r\n    if (ev.data.type !== 'testResults') return;\r\n    toolsPane?.tests?.showResults(ev.data.payload);\r\n    const resultEvent = new CustomEvent<{ results: TestResult[]; error?: string }>(\r\n      customEvents.testResults,\r\n      {\r\n        detail: JSON.parse(JSON.stringify(ev.data.payload)),\r\n      },\r\n    );\r\n    document.dispatchEvent(resultEvent);\r\n  });\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getRunTestsButton(),\r\n    'click',\r\n    (ev: Event) => {\r\n      ev.preventDefault();\r\n      runTests();\r\n    },\r\n    false,\r\n  );\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getWatchTestsButton(),\r\n    'click',\r\n    (ev: Event) => {\r\n      ev.preventDefault();\r\n      watchTests = !watchTests;\r\n      if (watchTests) {\r\n        UI.getWatchTestsButton()?.classList.remove('disabled');\r\n        runTests();\r\n      } else {\r\n        UI.getWatchTestsButton()?.classList.add('disabled');\r\n      }\r\n    },\r\n    false,\r\n  );\r\n};\r\n\r\nconst handleTestEditor = () => {\r\n  const createTestEditorUI = async () => {\r\n    const config = getConfig();\r\n    // eslint-disable-next-line prefer-const\r\n    let testEditor: CodeEditor | undefined;\r\n    const div = document.createElement('div');\r\n    div.innerHTML = testEditorScreen;\r\n    const testEditorContainer = div.firstChild as HTMLElement;\r\n    modal.show(testEditorContainer, {\r\n      onClose: () => {\r\n        testEditor?.destroy();\r\n\r\n        // fix monaco mixing up model of script with test editors\r\n        if (editors.script.monaco) {\r\n          formatter\r\n            .getFormatFn(getConfig().script.language)\r\n            .then((fn) => editors.script.registerFormatter(fn));\r\n        }\r\n      },\r\n    });\r\n\r\n    const testLanguage: Language = config.tests?.language || 'tsx';\r\n    const editorLanguage: Language = 'jsx';\r\n    const options: EditorOptions = {\r\n      baseUrl,\r\n      mode: config.mode,\r\n      readonly: config.readonly,\r\n      editorId: 'tests',\r\n      container: UI.getTestEditor(),\r\n      language: editorLanguage,\r\n      value: config.tests?.content || '',\r\n      theme: config.theme,\r\n      isEmbed,\r\n      mapLanguage,\r\n      getLanguageExtension,\r\n      getFormatterConfig: () => getFormatterConfig(getConfig()),\r\n      getFontFamily,\r\n      ...getEditorConfig(config),\r\n    };\r\n    testEditor = await createEditor(options);\r\n    formatter.getFormatFn(editorLanguage).then((fn) => testEditor?.registerFormatter(fn));\r\n    testEditor?.focus();\r\n\r\n    if (typeof testEditor?.addTypes === 'function') {\r\n      const testTypes: Types = {\r\n        jest: {\r\n          url: jestTypesUrl,\r\n          autoload: true,\r\n        },\r\n        chai: {\r\n          url: chaiTypesUrl,\r\n          autoload: true,\r\n        },\r\n      };\r\n      typeLoader.load('', testTypes, true).then((libs) => {\r\n        libs.forEach((lib) => testEditor?.addTypes?.(lib));\r\n      });\r\n    }\r\n\r\n    eventsManager.addEventListener(UI.getLoadTestsButton(), 'click', async () => {\r\n      const editorContent = testEditor?.getValue() || '';\r\n      if (editorContent !== getConfig().tests?.content) {\r\n        compiler.clearCache();\r\n        setConfig({\r\n          ...getConfig(),\r\n          tests: {\r\n            language: testLanguage,\r\n            content: editorContent,\r\n          },\r\n        });\r\n        await setSavedStatus();\r\n      }\r\n      modal.close();\r\n      toolsPane?.tests?.resetTests();\r\n      await runTests();\r\n      dispatchChangeEvent();\r\n    });\r\n  };\r\n\r\n  eventsManager.addEventListener(\r\n    UI.getEditTestsButton(),\r\n    'click',\r\n    (ev: Event) => {\r\n      ev.preventDefault();\r\n      createTestEditorUI();\r\n    },\r\n    false,\r\n  );\r\n\r\n  registerScreen('test-editor', createTestEditorUI);\r\n};\r\n\r\nconst handleResultLoading = () => {\r\n  eventsManager.addEventListener(window, 'message', (event: any) => {\r\n    const iframe = UI.getResultIFrameElement();\r\n    if (!iframe || event.source !== iframe.contentWindow) {\r\n      return;\r\n    }\r\n    if (event.data.type === 'loading') {\r\n      setLoading(event.data.payload);\r\n    }\r\n    const language = event.data.payload?.language;\r\n    if (event.data.type === 'compiled' && language && getEditorLanguages().includes(language)) {\r\n      const editorId = getLanguageEditorId(language);\r\n      if (!editorId) return;\r\n      updateCache(editorId, language, event.data.payload.content || '');\r\n      updateCompiledCode();\r\n    }\r\n  });\r\n};\r\n\r\nconst handleResultPopup = () => {\r\n  const popupBtn = document.createElement('div');\r\n  popupBtn.classList.add('tool-buttons', 'hint--top');\r\n  popupBtn.dataset.hint = 'Show result in new window';\r\n  popupBtn.style.pointerEvents = 'all'; //  override setting to 'none' on toolspane bar\r\n  const imgUrl = baseUrl + 'assets/images/new-window.svg';\r\n  popupBtn.innerHTML = `<span id=\"show-result\"><img src=\"${imgUrl}\" /></span>`;\r\n  let url: string | undefined;\r\n  const openWindow = async () => {\r\n    if (resultPopup && !resultPopup.closed) {\r\n      resultPopup.focus();\r\n      return;\r\n    }\r\n    popupBtn.classList.add('loading');\r\n    const result = await getResultPage({ forExport: true, singleFile: true });\r\n    url = url || URL.createObjectURL(new Blob([resultPopupHTML], { type: 'text/html' }));\r\n    // add a notice to URL that it is a temporary URL to prevent users from sharing it.\r\n    // revoking the URL after opening the window prevents viewing the page source.\r\n    const notice = '#---TEMPORARY-URL---';\r\n    resultPopup = window.open(url + notice, 'livecodes-result', `width=800,height=400`);\r\n    eventsManager.addEventListener(\r\n      resultPopup,\r\n      'load',\r\n      () => {\r\n        resultPopup?.postMessage({ result }, location.origin);\r\n      },\r\n      { once: true },\r\n    );\r\n    popupBtn.classList.remove('loading');\r\n  };\r\n  eventsManager.addEventListener(popupBtn, 'click', openWindow);\r\n  eventsManager.addEventListener(popupBtn, 'touchstart', openWindow);\r\n  UI.getToolspaneTitles()?.appendChild(popupBtn);\r\n};\r\n\r\nconst handleResultZoom = () => {\r\n  const zoomBtn = document.createElement('div');\r\n  zoomBtn.id = 'zoom-button';\r\n  zoomBtn.classList.add('tool-buttons', 'hint--top');\r\n  zoomBtn.dataset.hint = 'Zoom';\r\n  zoomBtn.style.pointerEvents = 'all'; //  override setting to 'none' on toolspane bar\r\n  zoomBtn.innerHTML = `\r\n  <span class=\"text\">\r\n    <span id=\"zoom-value\">${String(Number(getConfig().zoom))}</span>\r\n    &times;\r\n  </span>`;\r\n\r\n  const toggleZoom = () => {\r\n    const config = getConfig();\r\n    const currentZoom = config.zoom;\r\n    const newZoom = currentZoom === 1 ? 0.5 : currentZoom === 0.5 ? 0.25 : 1;\r\n    setConfig({\r\n      ...config,\r\n      zoom: newZoom,\r\n    });\r\n    zoom(newZoom);\r\n  };\r\n\r\n  eventsManager.addEventListener(zoomBtn, 'click', toggleZoom);\r\n  eventsManager.addEventListener(zoomBtn, 'touchstart', toggleZoom);\r\n  UI.getToolspaneTitles()?.appendChild(zoomBtn);\r\n};\r\n\r\nconst handleBroadcastStatus = () => {\r\n  const broadcastStatusBtn = document.createElement('div');\r\n  broadcastStatusBtn.id = 'broadcast-status-btn';\r\n  broadcastStatusBtn.classList.add('tool-buttons', 'hint--top');\r\n  broadcastStatusBtn.dataset.hint = 'Broadcast';\r\n  broadcastStatusBtn.style.pointerEvents = 'all'; //  override setting to 'none' on toolspane bar\r\n  const imgUrl = baseUrl + 'assets/images/broadcast.svg';\r\n  broadcastStatusBtn.innerHTML = `\r\n  <span id=\"broadcast-status\">\r\n    <img src=\"${imgUrl}\" />\r\n    <span class=\"mark\"></span>\r\n  </span>`;\r\n  const showBroadcast = () => {\r\n    showScreen('broadcast');\r\n  };\r\n  eventsManager.addEventListener(broadcastStatusBtn, 'click', showBroadcast);\r\n  eventsManager.addEventListener(broadcastStatusBtn, 'touchstart', showBroadcast);\r\n  UI.getToolspaneTitles()?.appendChild(broadcastStatusBtn);\r\n};\r\n\r\nconst handleFullscreen = async () => {\r\n  if (!isEmbed) return;\r\n  const fullscreenButton = getFullscreenButton();\r\n  const buttonImg = fullscreenButton.querySelector('img')!;\r\n  const fscreen = (await import(fscreenUrl)).default;\r\n  if (!fscreen.fullscreenEnabled) {\r\n    fullscreenButton.style.visibility = 'hidden';\r\n    return;\r\n  }\r\n\r\n  eventsManager.addEventListener(fscreen, 'fullscreenchange', async () => {\r\n    if (!fscreen.fullscreenElement) {\r\n      buttonImg.src = buttonImg.src.replace('collapse.svg', 'expand.svg');\r\n      fullscreenButton.dataset.hint = 'Full Screen';\r\n      return;\r\n    }\r\n    buttonImg.src = buttonImg.src.replace('expand.svg', 'collapse.svg');\r\n    fullscreenButton.dataset.hint = 'Exit Full Screen';\r\n  });\r\n\r\n  eventsManager.addEventListener(fullscreenButton, 'click', async () => {\r\n    if (fscreen.fullscreenElement) {\r\n      await fscreen.exitFullscreen();\r\n      return;\r\n    }\r\n    await fscreen.requestFullscreen(document.body);\r\n  });\r\n};\r\n\r\nconst handleUnload = () => {\r\n  window.onbeforeunload = () => {\r\n    if (!isSaved) {\r\n      return 'Changes you made may not be saved.';\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n};\r\n\r\nconst loadToolsPane = async () => {\r\n  toolsPane = createToolsPane(getConfig(), baseUrl, editors, eventsManager, isEmbed, runTests);\r\n  await toolsPane.load();\r\n  handleTests();\r\n  handleResultZoom();\r\n  getResultElement().classList.remove('full');\r\n};\r\n\r\nconst basicHandlers = () => {\r\n  handleLogoLink();\r\n  handleResize();\r\n  handleIframeResize();\r\n  handleIframeScroll();\r\n  handleSelectEditor();\r\n  handleChangeLanguage();\r\n  handleChangeContent();\r\n  handleHotKeys();\r\n  handleRunButton();\r\n  handleResultButton();\r\n  handleEditorTools();\r\n  handleProcessors();\r\n  handleResultLoading();\r\n  if (isEmbed) {\r\n    handleExternalResources();\r\n    handleFullscreen();\r\n  }\r\n};\r\n\r\nconst extraHandlers = async () => {\r\n  handleTitleEdit();\r\n  handleSettingsMenu();\r\n  handleSettings();\r\n  handleProjectInfo();\r\n  handleCustomSettings();\r\n  handleTestEditor();\r\n  handleLogin();\r\n  handleLogout();\r\n  handleNew();\r\n  handleSave();\r\n  handleFork();\r\n  handleSaveAsTemplate();\r\n  handleOpen();\r\n  handleShare();\r\n  handleEmbed();\r\n  handleImport();\r\n  handleExport();\r\n  handleDeploy();\r\n  handleAssets();\r\n  handleSnippets();\r\n  handleEditorSettings();\r\n  handleSync();\r\n  handleAutosync();\r\n  handlePersistantStorage();\r\n  handleExternalResources();\r\n  handleBackup();\r\n  handleBroadcast();\r\n  handleWelcome();\r\n  handleAbout();\r\n  handleResultPopup();\r\n  handleBroadcastStatus();\r\n  handleUnload();\r\n};\r\n\r\nconst configureEmbed = (config: Config, eventsManager: ReturnType<typeof createEventsManager>) => {\r\n  document.body.classList.add('embed');\r\n  if (config.mode === 'result') {\r\n    document.body.classList.add('result');\r\n  }\r\n  if (config.mode === 'editor' || config.mode === 'codeblock') {\r\n    document.body.classList.add('no-result');\r\n  }\r\n\r\n  const logoLink = UI.getLogoLink();\r\n  logoLink.classList.add('hint--bottom-left');\r\n  logoLink.dataset.hint = 'Edit in LiveCodes \uD83E\uDC55';\r\n  logoLink.title = '';\r\n\r\n  eventsManager.addEventListener(logoLink, 'click', async (event: Event) => {\r\n    event.preventDefault();\r\n    window.open((await share(false, true, false)).url, '_blank');\r\n  });\r\n};\r\n\r\nconst configureLite = () => {\r\n  setConfig({\r\n    ...getConfig(),\r\n    editor: 'codejar',\r\n    emmet: false,\r\n    tools: {\r\n      enabled: [],\r\n      active: '',\r\n      status: 'none',\r\n    },\r\n  });\r\n  UI.getFormatButton().style.display = 'none';\r\n};\r\n\r\nconst configureModes = ({\r\n  config,\r\n  isEmbed,\r\n  isLite,\r\n}: {\r\n  config: Config;\r\n  isEmbed: boolean;\r\n  isLite: boolean;\r\n}) => {\r\n  if (config.mode === 'full') {\r\n    if (params.view === 'editor') {\r\n      split?.show('code', true);\r\n    }\r\n    if (params.view === 'result') {\r\n      split?.show('output', true);\r\n    }\r\n  }\r\n  if (config.mode === 'codeblock') {\r\n    setConfig({ ...config, readonly: true });\r\n  }\r\n  if (config.mode === 'editor' || config.mode === 'codeblock' || config.mode === 'result') {\r\n    split?.destroy();\r\n    split = null;\r\n  }\r\n  if (isLite) {\r\n    configureLite();\r\n  }\r\n  if (isEmbed || config.mode === 'result') {\r\n    configureEmbed(config, eventsManager);\r\n  }\r\n};\r\n\r\nconst importExternalContent = async (options: {\r\n  config?: Config;\r\n  configUrl?: string;\r\n  template?: string;\r\n  url?: string;\r\n}): Promise<boolean> => {\r\n  const { config = defaultConfig, configUrl, template, url } = options;\r\n  const editorIds: EditorId[] = ['markup', 'style', 'script'];\r\n  const hasContentUrls = (conf: Partial<Config>) =>\r\n    editorIds.filter((editorId) => conf[editorId]?.contentUrl && !conf[editorId]?.content).length >\r\n    0;\r\n\r\n  if (!configUrl && !template && !url && !hasContentUrls(config)) return false;\r\n\r\n  const loadingMessage = document.createElement('div');\r\n  loadingMessage.classList.add('modal-message');\r\n  loadingMessage.innerHTML = 'Loading Project...';\r\n  modal.show(loadingMessage, { size: 'small', isAsync: true });\r\n\r\n  let templateConfig: Partial<Config> = {};\r\n  let urlConfig: Partial<Config> = {};\r\n  let contentUrlConfig: Partial<Config> = {};\r\n  let configUrlConfig: Partial<Config> = {};\r\n\r\n  if (template) {\r\n    const templateObj = await getTemplate(template, config, baseUrl);\r\n    if (templateObj) {\r\n      templateConfig = upgradeAndValidate(templateObj);\r\n    } else {\r\n      notifications.error('Could not load template: ' + template);\r\n    }\r\n  }\r\n\r\n  if (url) {\r\n    let validUrl = url;\r\n    if (url.startsWith('http') || url.startsWith('data')) {\r\n      try {\r\n        validUrl = new URL(url).href;\r\n      } catch {\r\n        validUrl = decodeURIComponent(url);\r\n      }\r\n    }\r\n    // import code from hash: code / github / github gist / url html / ...etc\r\n    let user;\r\n    if (isGithub(validUrl) && !isEmbed) {\r\n      await initializeAuth();\r\n      user = await authService?.getUser();\r\n    }\r\n\r\n    const importModule: typeof import('./UI/import') = await import(baseUrl + '{{hash:import.js}}');\r\n    urlConfig = await importModule.importCode(validUrl, getParams(), getConfig(), user);\r\n\r\n    if (Object.keys(urlConfig).length === 0) {\r\n      notifications.error('Invalid import URL');\r\n    }\r\n  }\r\n\r\n  if (hasContentUrls(config)) {\r\n    // load content from config contentUrl\r\n    const editorsContent = await Promise.all(\r\n      editorIds.map((editorId) => {\r\n        const contentUrl = config[editorId].contentUrl;\r\n        if (contentUrl && getValidUrl(contentUrl) && !config[editorId].content) {\r\n          return fetch(contentUrl)\r\n            .then((res) => res.text())\r\n            .then((content) => ({\r\n              ...config[editorId],\r\n              content,\r\n            }));\r\n        } else {\r\n          return Promise.resolve(config[editorId]);\r\n        }\r\n      }),\r\n    );\r\n    contentUrlConfig = {\r\n      markup: editorsContent[0],\r\n      style: editorsContent[1],\r\n      script: editorsContent[2],\r\n    };\r\n  }\r\n\r\n  const validConfigUrl = getValidUrl(configUrl);\r\n  if (validConfigUrl) {\r\n    configUrlConfig = upgradeAndValidate(\r\n      await fetch(validConfigUrl)\r\n        .then((res) => res.json())\r\n        .catch(() => ({})),\r\n    );\r\n    if (hasContentUrls(configUrlConfig)) {\r\n      return importExternalContent({ config: { ...config, ...configUrlConfig } });\r\n    }\r\n  }\r\n\r\n  await loadConfig(\r\n    buildConfig({\r\n      ...config,\r\n      ...templateConfig,\r\n      ...urlConfig,\r\n      ...contentUrlConfig,\r\n      ...configUrlConfig,\r\n    }),\r\n    parent.location.href,\r\n    false,\r\n  );\r\n\r\n  modal.close();\r\n  return true;\r\n};\r\n\r\nconst loadDefaults = async () => {\r\n  if (\r\n    isEmbed ||\r\n    params['no-defaults'] ||\r\n    params.languages ||\r\n    params.template ||\r\n    params.config ||\r\n    params.active ||\r\n    params.activeEditor ||\r\n    getLanguageByAlias(params.lang) ||\r\n    getLanguageByAlias(params.language)\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  for (const param of Object.keys(params)) {\r\n    if (getLanguageByAlias(param)) return;\r\n  }\r\n\r\n  if ((getConfig().welcome && !params.screen) || params.screen === 'welcome') {\r\n    showScreen('welcome');\r\n    return;\r\n  }\r\n\r\n  const defaultTemplateId = getAppData()?.defaultTemplate;\r\n  if (defaultTemplateId) {\r\n    notifications.info('Loading default template');\r\n    await loadTemplate(defaultTemplateId);\r\n    return;\r\n  }\r\n\r\n  const lastUsedLanguage = getAppData()?.language;\r\n  if (lastUsedLanguage) {\r\n    changingContent = true;\r\n    await changeLanguage(lastUsedLanguage);\r\n    changingContent = false;\r\n  }\r\n  setProjectRecover(/* reset = */ true);\r\n};\r\n\r\nconst bootstrap = async (reload = false) => {\r\n  if (reload) {\r\n    await updateEditors(editors, getConfig());\r\n  }\r\n  phpHelper({ editor: editors.script });\r\n  setLoading(true);\r\n  zoom(getConfig().zoom);\r\n  await setActiveEditor(getConfig());\r\n  loadSettings(getConfig());\r\n  // TODO: Fix\r\n  toolsPane?.console?.clear();\r\n  if (!isEmbed) {\r\n    setTimeout(() => getActiveEditor().focus());\r\n  }\r\n  setExternalResourcesMark();\r\n  updateCompiledCode();\r\n  loadModuleTypes(editors, getConfig());\r\n  compiler.load(Object.values(editorLanguages || {}), getConfig()).then(() => {\r\n    if (!getConfig().autoupdate) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      if (\r\n        toolsPane?.getActiveTool() === 'tests' &&\r\n        ['open', 'full'].includes(toolsPane?.getStatus())\r\n      ) {\r\n        run(undefined, true);\r\n      } else {\r\n        run();\r\n      }\r\n    });\r\n  });\r\n  formatter.load(getEditorLanguages());\r\n  if (isEmbed && !getConfig().tests?.content?.trim()) {\r\n    toolsPane?.disableTool('tests');\r\n  }\r\n};\r\n\r\nconst initializeApp = async (\r\n  options?: {\r\n    config?: Partial<Config>;\r\n    baseUrl?: string;\r\n    isEmbed?: boolean;\r\n    isLite?: boolean;\r\n  },\r\n  initializeFn?: () => void | Promise<void>,\r\n) => {\r\n  const appConfig = options?.config ?? {};\r\n  baseUrl = options?.baseUrl ?? '/livecodes/';\r\n  isLite = options?.isLite ?? false;\r\n  isEmbed = isLite || (options?.isEmbed ?? false);\r\n\r\n  await initializeStores(stores, isEmbed);\r\n  loadUserConfig(/* updateUI = */ false);\r\n  setConfig(buildConfig({ ...getConfig(), ...appConfig }));\r\n  configureModes({ config: getConfig(), isEmbed, isLite });\r\n  compiler = await getCompiler({ config: getConfig(), baseUrl, eventsManager });\r\n  formatter = getFormatter(getConfig(), baseUrl, isLite);\r\n  customEditors = createCustomEditors({ baseUrl, eventsManager });\r\n  createLanguageMenus(\r\n    getConfig(),\r\n    baseUrl,\r\n    eventsManager,\r\n    showLanguageInfo,\r\n    loadStarterTemplate,\r\n    importExternalContent,\r\n  );\r\n  await createEditors(getConfig());\r\n  basicHandlers();\r\n  await initializeFn?.();\r\n  loadUserConfig(/* updateUI = */ true);\r\n  loadStyles();\r\n  await createIframe(UI.getResultElement());\r\n  showMode(getConfig());\r\n  loadSelectedScreen();\r\n  setTheme(getConfig().theme);\r\n  if (!isEmbed) {\r\n    initializeAuth().then(() => showSyncStatus());\r\n    checkRecoverStatus();\r\n  }\r\n  importExternalContent({\r\n    config: getConfig(),\r\n    configUrl: params.config,\r\n    template: params.template,\r\n    url: params.x || parent.location.hash.substring(1),\r\n  }).then(async (contentImported) => {\r\n    if (!contentImported) {\r\n      await bootstrap();\r\n      await loadDefaults();\r\n    }\r\n    if (isEmbed) {\r\n      parent.dispatchEvent(new Event(customEvents.ready));\r\n    }\r\n    initialized = true;\r\n  });\r\n  configureEmmet(getConfig());\r\n};\r\n\r\nconst createApi = (): API => {\r\n  const apiGetShareUrl = async (shortUrl = false) => (await share(shortUrl, true, false)).url;\r\n\r\n  const apiGetConfig = async (contentOnly = false): Promise<Config> => {\r\n    updateConfig();\r\n    const config = contentOnly ? getContentConfig(getConfig()) : getConfig();\r\n    return JSON.parse(JSON.stringify(config));\r\n  };\r\n\r\n  const apiSetConfig = async (newConfig: Partial<Config>): Promise<Config> => {\r\n    const newAppConfig = {\r\n      ...getConfig(),\r\n      ...buildConfig(newConfig),\r\n    };\r\n\r\n    // TODO: apply changes in App AppConfig, UserConfig & EditorConfig\r\n    if (newAppConfig.mode !== getConfig().mode) {\r\n      showMode(newAppConfig);\r\n    }\r\n\r\n    setConfig(newAppConfig);\r\n    await loadConfig(newAppConfig);\r\n    return newAppConfig;\r\n  };\r\n\r\n  const apiGetCode = async (): Promise<Code> => {\r\n    updateConfig();\r\n    if (!cacheIsValid(getCache(), getContentConfig(getConfig()))) {\r\n      await getResultPage({});\r\n    }\r\n    return JSON.parse(JSON.stringify(getCachedCode()));\r\n  };\r\n\r\n  const apiShow: API['show'] = async (\r\n    panel,\r\n    { full = false, line, column, zoom: zoomLevel } = {},\r\n  ) => {\r\n    if (panel === 'result') {\r\n      split?.show('output', full);\r\n      toolsPane?.close();\r\n      if (zoomLevel) {\r\n        zoom(zoomLevel);\r\n      }\r\n    } else if (panel === 'console' || panel === 'compiled' || panel === 'tests') {\r\n      split?.show('output');\r\n      toolsPane?.setActiveTool(panel);\r\n      if (full) {\r\n        toolsPane?.maximize();\r\n      } else {\r\n        toolsPane?.open();\r\n      }\r\n    } else if (Object.keys(editors).includes(panel)) {\r\n      showEditor(panel);\r\n      split?.show('code', full);\r\n      if (typeof line === 'number' && line > 0) {\r\n        const col = typeof column === 'number' && column > -1 ? column : 0;\r\n        getActiveEditor().setPosition({ lineNumber: line, column: col });\r\n        getActiveEditor().focus();\r\n      }\r\n    } else {\r\n      throw new Error('Invalid panel id');\r\n    }\r\n  };\r\n\r\n  const apiRunTests: API['runTests'] = () =>\r\n    new Promise((resolve) => {\r\n      eventsManager.addEventListener(\r\n        document,\r\n        customEvents.testResults,\r\n        ((ev: CustomEventInit<{ results: TestResult[] }>) => {\r\n          resolve({ results: ev.detail?.results || [] });\r\n        }) as any,\r\n        { once: true },\r\n      );\r\n      runTests();\r\n    });\r\n\r\n  const apiOnChange: API['onChange'] = (fn) => {\r\n    const handler = async function () {\r\n      fn({\r\n        code: await apiGetCode(),\r\n        config: await apiGetConfig(),\r\n      });\r\n    };\r\n    eventsManager.addEventListener(document, customEvents.change, handler);\r\n    return {\r\n      remove: () => {\r\n        eventsManager.removeEventListener(document, customEvents.change, handler);\r\n      },\r\n    };\r\n  };\r\n\r\n  const apiExec: API['exec'] = async (command: APICommands, ...args: any[]) => {\r\n    if (command === 'setBroadcastToken') {\r\n      if (isEmbed) return { error: 'Command unavailable for embeds' };\r\n      const broadcastData = getAppData()?.broadcast;\r\n      if (!broadcastData) return { error: 'Command unavailable' };\r\n      const token = args[0];\r\n      if (typeof token !== 'string') return { error: 'Invalid token!' };\r\n      setAppData({\r\n        broadcast: {\r\n          ...broadcastData,\r\n          userToken: token,\r\n        },\r\n      });\r\n      return { output: 'Broadcast user token set successfully' };\r\n    }\r\n    if (command === 'showVersion') {\r\n      const output = getVersion();\r\n      return { output };\r\n    }\r\n    return { error: 'Invalid command!' };\r\n  };\r\n\r\n  const apiDestroy = async () => {\r\n    getAllEditors().forEach((editor) => editor?.destroy());\r\n    eventsManager.removeEventListeners();\r\n    Object.values(stores).forEach((store) => store?.unsubscribeAll?.());\r\n    parent.dispatchEvent(new Event(customEvents.destroy));\r\n    formatter?.destroy();\r\n    document.body.innerHTML = '';\r\n    document.head.innerHTML = '';\r\n    isDestroyed = true;\r\n  };\r\n\r\n  const alreadyDestroyedMessage = 'Cannot call API methods after calling `destroy()`.';\r\n  const reject = () => Promise.reject(alreadyDestroyedMessage);\r\n  const throwError = () => {\r\n    throw new Error(alreadyDestroyedMessage);\r\n  };\r\n  const call = <T>(fn: () => Promise<T>) => (!isDestroyed ? fn() : reject());\r\n  const callSync = <T>(fn: () => T) => (!isDestroyed ? fn() : throwError());\r\n  return {\r\n    run: () => call(() => run()),\r\n    format: (allEditors) => call(() => format(allEditors)),\r\n    getShareUrl: (shortUrl) => call(() => apiGetShareUrl(shortUrl)),\r\n    getConfig: (contentOnly) => call(() => apiGetConfig(contentOnly)),\r\n    setConfig: (config) => call(() => apiSetConfig(config)),\r\n    getCode: () => call(() => apiGetCode()),\r\n    show: (pane, options) => call(() => apiShow(pane, options)),\r\n    runTests: () => call(() => apiRunTests()),\r\n    onChange: (fn) => callSync(() => apiOnChange(fn)),\r\n    exec: (command, ...args) => call(() => apiExec(command, ...args)),\r\n    destroy: () => call(() => apiDestroy()),\r\n  };\r\n};\r\n\r\nexport { createApi, initializeApp, loadToolsPane, extraHandlers };\r\n", "import { createApi, initializeApp, loadToolsPane, extraHandlers } from './core';\r\nimport type { API, Config } from './models';\r\n\r\nexport const app = async (config: Partial<Config>, baseUrl: string): Promise<API> => {\r\n  await initializeApp({ config, baseUrl }, async () => {\r\n    await loadToolsPane();\r\n    await extraHandlers();\r\n  });\r\n  return createApi();\r\n};\r\n"],
  "mappings": "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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
  "names": ["require_lz_string", "__commonJSMin", "exports", "module", "LZString", "f", "keyStrBase64", "keyStrUriSafe", "baseReverseDic", "getBaseValue", "alphabet", "character", "i", "input", "res", "a", "index", "compressed", "uncompressed", "buf", "TotalLen", "current_value", "result", "c", "bitsPerChar", "getCharFromInt", "value", "context_dictionary", "context_dictionaryToCreate", "context_c", "context_wc", "context_w", "context_enlargeIn", "context_dictSize", "context_numBits", "context_data", "context_data_val", "context_data_position", "ii", "length", "resetValue", "getNextValue", "dictionary", "next", "enlargeIn", "dictSize", "numBits", "entry", "w", "bits", "resb", "maxpower", "power", "data", "require_has", "__commonJSMin", "exports", "module", "hasOwnProp", "obj", "key", "require_keys", "__commonJSMin", "exports", "module", "has", "obj", "ret", "key", "require_escape", "__commonJSMin", "exports", "module", "keys", "str", "regTest", "regReplace", "replaceFn", "map", "regSrc", "match", "require_toStr", "__commonJSMin", "exports", "module", "val", "require_idxOf", "__commonJSMin", "exports", "module", "arr", "val", "fromIdx", "require_objToStr", "__commonJSMin", "exports", "module", "ObjToStr", "val", "require_isStr", "__commonJSMin", "exports", "module", "objToStr", "val", "require_isNum", "__commonJSMin", "exports", "module", "objToStr", "val", "require_isFn", "__commonJSMin", "exports", "module", "objToStr", "val", "objStr", "require_isArrLike", "__commonJSMin", "exports", "module", "isNum", "isFn", "MAX_ARR_IDX", "val", "len", "require_isUndef", "__commonJSMin", "exports", "module", "val", "require_optimizeCb", "__commonJSMin", "exports", "module", "isUndef", "fn", "ctx", "argCount", "val", "idx", "collection", "accumulator", "require_each", "__commonJSMin", "exports", "module", "isArrLike", "keys", "optimizeCb", "obj", "iterator", "ctx", "i", "len", "_keys", "require_values", "__commonJSMin", "exports", "module", "each", "obj", "ret", "val", "require_contain", "__commonJSMin", "exports", "module", "idxOf", "isStr", "isArrLike", "values", "arr", "val", "require_startWith", "__commonJSMin", "exports", "module", "str", "prefix", "require_escapeJsStr", "__commonJSMin", "exports", "module", "toStr", "str", "regEscapeChars", "char", "require_endWith", "__commonJSMin", "exports", "module", "str", "suffix", "idx", "require_isArr", "__commonJSMin", "exports", "module", "objToStr", "val", "require_isArgs", "__commonJSMin", "exports", "module", "objToStr", "val", "require_isEmpty", "__commonJSMin", "exports", "module", "isArrLike", "isArr", "isStr", "isArgs", "keys", "val", "require_upperFirst", "__commonJSMin", "exports", "module", "str", "require_util", "__commonJSMin", "exports", "__importDefault", "mod", "upperFirst_1", "getObjType", "obj", "require_isObj", "__commonJSMin", "exports", "module", "val", "type", "require_createAssigner", "__commonJSMin", "exports", "module", "isUndef", "each", "keysFn", "defaults", "obj", "src", "idx", "keys", "key", "require_extendOwn", "__commonJSMin", "exports", "module", "keys", "createAssigner", "require_isMatch", "__commonJSMin", "exports", "module", "keys", "obj", "src", "_keys", "len", "i", "key", "require_matcher", "__commonJSMin", "exports", "module", "extendOwn", "isMatch", "attrs", "obj", "require_identity", "__commonJSMin", "exports", "module", "val", "require_castPath", "__commonJSMin", "exports", "module", "has", "isArr", "str", "obj", "ret", "regPropName", "match", "number", "quote", "regEscapeChar", "require_safeGet", "__commonJSMin", "exports", "module", "isUndef", "castPath", "obj", "path", "prop", "require_property", "__commonJSMin", "exports", "module", "isArr", "safeGet", "path", "obj", "shallowProperty", "key", "require_safeCb", "__commonJSMin", "exports", "module", "isFn", "isObj", "isArr", "optimizeCb", "matcher", "identity", "property", "val", "ctx", "argCount", "require_map", "__commonJSMin", "exports", "module", "safeCb", "keys", "isArrLike", "obj", "iterator", "ctx", "_keys", "len", "results", "i", "curKey", "require_ltrim", "__commonJSMin", "exports", "module", "regSpace", "str", "chars", "start", "len", "charLen", "found", "i", "c", "require_rtrim", "__commonJSMin", "exports", "module", "str", "chars", "end", "charLen", "found", "c", "require_trim", "__commonJSMin", "exports", "module", "ltrim", "rtrim", "str", "chars", "require_isBrowser", "__commonJSMin", "exports", "module", "require_root", "__commonJSMin", "exports", "module", "isBrowser", "require_last", "__commonJSMin", "exports", "module", "arr", "len", "require_arrToMap", "__commonJSMin", "exports", "module", "each", "isUndef", "isFn", "arr", "val", "_isFn", "ret", "key", "require_lowerCase", "__commonJSMin", "exports", "module", "toStr", "str", "require_parseHtml", "__commonJSMin", "exports", "module", "last", "arrToMap", "startWith", "lowerCase", "html", "handler", "stack", "text", "lastHtml", "SPECIAL", "endIdx", "match", "regDoctype", "_match", "regEndTag", "parseEndTag", "_match2", "regStartTag", "parseStartTag", "_endIdx", "_text", "execRes", "_text2", "tag", "tagName", "rest", "unary", "attrs", "regAttr", "all", "$1", "$2", "$3", "$4", "pos", "i", "require_getProto", "__commonJSMin", "exports", "module", "isObj", "isFn", "getPrototypeOf", "ObjectCtr", "obj", "proto", "require_filter", "__commonJSMin", "exports", "module", "safeCb", "each", "obj", "predicate", "ctx", "ret", "val", "idx", "list", "require_unique", "__commonJSMin", "exports", "module", "filter", "arr", "cmp", "isEqual", "item", "idx", "len", "a", "b", "require_allKeys", "__commonJSMin", "exports", "module", "keys", "getProto", "unique", "getOwnPropertyNames", "getOwnPropertySymbols", "obj", "_ref", "_ref$prototype", "prototype", "_ref$unenumerable", "unenumerable", "_ref$symbol", "symbol", "ret", "getKeys", "key", "require_extend", "__commonJSMin", "exports", "module", "createAssigner", "allKeys", "require_toArr", "__commonJSMin", "exports", "module", "isArrLike", "map", "isArr", "isStr", "val", "require_create", "__commonJSMin", "exports", "module", "isObj", "proto", "objCreate", "noop", "require_inherits", "__commonJSMin", "exports", "module", "create", "Class", "SuperClass", "require_isMiniProgram", "__commonJSMin", "exports", "module", "isFn", "require_Class", "__commonJSMin", "exports", "module", "extend", "toArr", "inherits", "safeGet", "isMiniProgram", "methods", "statics", "Base", "makeClass", "parent", "className", "ctor", "args", "Class", "name", "superMethod", "require_reverse", "__commonJSMin", "exports", "module", "arr", "len", "ret", "i", "require_Stack", "__commonJSMin", "exports", "module", "Class", "reverse", "item", "iterator", "ctx", "items", "i", "j", "require_mapObj", "__commonJSMin", "exports", "module", "safeCb", "keys", "obj", "iterator", "ctx", "_keys", "len", "ret", "i", "curKey", "require_html", "__commonJSMin", "exports", "module", "parseHtml", "Stack", "isArr", "each", "isStr", "mapObj", "parse", "html", "ret", "stack", "tag", "attrs", "val", "unescapeQuote", "node", "lastNode", "text", "comment", "stringify", "tree", "key", "escapeQuote", "str", "require_toNum", "__commonJSMin", "exports", "module", "isNum", "isObj", "isFn", "isStr", "val", "temp", "require_util", "__commonJSMin", "exports", "__importDefault", "mod", "map_1", "trim_1", "root_1", "html_1", "isNum_1", "contain_1", "toNum_1", "classPrefix", "name", "prefix", "processClass", "str", "singleClass", "match", "tree", "traverseTree", "node", "handler", "i", "len", "hasTouchSupport", "touchEvents", "mouseEvents", "drag", "eventClient", "type", "e", "scrollbarWidth", "measuredScrollbarWidth", "scrollDiv", "innerDiv", "hasVerticalScrollbar", "el", "executeAfterTransition", "callback", "pxToNum", "require_getAbstract", "__commonJSMin", "exports", "__importDefault", "mod", "escape_1", "toStr_1", "contain_1", "startWith_1", "escapeJsStr_1", "each_1", "endWith_1", "isEmpty_1", "util_1", "util_2", "c", "getAbstract", "obj", "topObj", "level", "getterVal", "unenumerable", "json", "type", "parts", "names", "objEllipsis", "i", "passOpts", "doStringify", "keyWrapper", "numWrapper", "nullWrapper", "strWrapper", "boolWrapper", "specialWrapper", "strEscape", "str", "wrapperEnd", "wrapKey", "key", "wrapNum", "num", "wrapRegExp", "wrapBool", "bool", "wrapNull", "wrapStr", "SPECIAL_VAL", "objIteratee", "name", "escapeJsonStr", "descriptor", "isStr", "isArr", "isObj", "isNum", "isRegExp", "isSymbol", "isFn", "isBool", "len", "arrEllipsis", "canBeProto", "emptyObj", "proto", "require_slice", "__commonJSMin", "exports", "module", "arr", "start", "end", "len", "ret", "require_restArgs", "__commonJSMin", "exports", "module", "fn", "startIdx", "len", "rest", "i", "args", "require_partial", "__commonJSMin", "exports", "module", "restArgs", "toArr", "fn", "partials", "args", "require_before", "__commonJSMin", "exports", "module", "n", "fn", "memo", "require_once", "__commonJSMin", "exports", "module", "partial", "before", "require_clone", "__commonJSMin", "exports", "module", "isObj", "isArr", "extend", "obj", "require_Emitter", "__commonJSMin", "exports", "module", "Class", "has", "each", "slice", "once", "clone", "event", "listener", "events", "idx", "_this", "args", "val", "obj", "require_isBool", "__commonJSMin", "exports", "module", "val", "require_isNil", "__commonJSMin", "exports", "module", "val", "require_toSrc", "__commonJSMin", "exports", "module", "isNil", "fn", "fnToStr", "require_isPromise", "__commonJSMin", "exports", "module", "isObj", "isFn", "val", "require_isNaN", "__commonJSMin", "exports", "module", "isNum", "val", "require_isBuffer", "__commonJSMin", "exports", "module", "isFn", "val", "require_type", "__commonJSMin", "exports", "module", "objToStr", "isNaN", "lowerCase", "isBuffer", "val", "lower", "ret", "regObj", "require_mergeArr", "__commonJSMin", "exports", "module", "restArgs", "first", "arrays", "end", "i", "len", "arr", "j", "_len", "require_Select", "__commonJSMin", "exports", "module", "Class", "isStr", "each", "mergeArr", "selector", "rootSelect", "ret", "fn", "element", "idx", "require_safeEls", "__commonJSMin", "exports", "module", "isStr", "toArr", "Select", "val", "require_offset", "__commonJSMin", "exports", "module", "$safeEls", "els", "el", "clientRect", "require_show", "__commonJSMin", "exports", "module", "each", "$safeEls", "els", "el", "isHidden", "getDefDisplay", "elDisplay", "elName", "display", "require_splitCase", "__commonJSMin", "exports", "module", "regUpperCase", "regSeparator", "regTrim", "str", "require_kebabCase", "__commonJSMin", "exports", "module", "splitCase", "str", "require_memoize", "__commonJSMin", "exports", "module", "has", "fn", "hashFn", "memoize", "key", "cache", "address", "require_camelCase", "__commonJSMin", "exports", "module", "splitCase", "str", "arr", "ret", "capitalize", "val", "idx", "match", "require_prefix", "__commonJSMin", "exports", "module", "memoize", "camelCase", "upperFirst", "has", "kebabCase", "name", "regPrefixes", "style", "i", "prefixes", "prefixName", "camelCaseResult", "require_css", "__commonJSMin", "exports", "module", "isStr", "isObj", "kebabCase", "isUndef", "contain", "isNum", "$safeEls", "prefix", "each", "nodes", "name", "val", "isGetter", "getCss", "css", "setCss", "node", "cssText", "key", "addPx", "cssNumProps", "needPx", "require_attr", "__commonJSMin", "exports", "module", "toArr", "isObj", "isStr", "each", "isUndef", "$safeEls", "els", "name", "val", "isGetter", "getAttr", "attrs", "setAttr", "names", "node", "el", "require_property", "__commonJSMin", "exports", "module", "isUndef", "each", "$safeEls", "propFactory", "name", "nodes", "val", "node", "require_remove", "__commonJSMin", "exports", "module", "each", "$safeEls", "els", "el", "parent", "require_data", "__commonJSMin", "exports", "module", "$attr", "isStr", "isObj", "each", "$safeEls", "nodes", "name", "val", "dataName", "key", "require_delegate", "__commonJSMin", "exports", "module", "Class", "contain", "retTrue", "retFalse", "trigger", "handlers", "handler", "handlerQueue", "formatHandlers", "i", "j", "matched", "ret", "current", "delegateCount", "selector", "matches", "el", "type", "fn", "events", "e", "require_event", "__commonJSMin", "exports", "module", "delegate", "isUndef", "$safeEls", "each", "eventFactory", "type", "nodes", "event", "selector", "handler", "node", "require_some", "__commonJSMin", "exports", "module", "safeCb", "isArrLike", "keys", "obj", "predicate", "ctx", "_keys", "len", "key", "require_class", "__commonJSMin", "exports", "module", "toArr", "some", "$safeEls", "isStr", "each", "els", "name", "names", "safeName", "el", "classList", "regName", "require_insert", "__commonJSMin", "exports", "module", "each", "$safeEls", "isStr", "insertFactory", "type", "nodes", "val", "node", "parentNode", "require__", "__commonJSMin", "exports", "module", "Select", "$offset", "$show", "$css", "$attr", "$property", "last", "$remove", "$data", "$event", "$class", "$insert", "isUndef", "isStr", "selector", "idx", "event", "handler", "val", "result", "name", "isGetter", "require_flatten", "__commonJSMin", "exports", "module", "isArr", "arr", "flat", "res", "len", "i", "cur", "require_difference", "__commonJSMin", "exports", "module", "restArgs", "flatten", "filter", "contain", "arr", "args", "val", "require_chunk", "__commonJSMin", "exports", "module", "arr", "size", "ret", "i", "len", "start", "end", "require_noop", "__commonJSMin", "exports", "module", "require_Visitor", "__commonJSMin", "exports", "__importDefault", "mod", "extend_1", "Visitor", "val", "extra", "visited", "id", "obj", "i", "len", "require_util", "__commonJSMin", "exports", "__importDefault", "mod", "toStr_1", "trim_1", "toNum_1", "startWith_1", "escape_1", "str", "getFnAbstract", "extractFnHead", "regFnHead", "fnHead", "sortObjName", "a", "b", "numA", "numB", "lenA", "lenB", "len", "i", "codeA", "codeB", "cmpResult", "cmpCode", "transCode", "code", "require_uniqId", "__commonJSMin", "exports", "module", "idCounter", "prefix", "id", "require_util", "__commonJSMin", "exports", "__importDefault", "mod", "map_1", "trim_1", "classPrefix", "name", "prefix", "str", "singleClass", "require_Static", "__commonJSMin", "exports", "__importDefault", "mod", "_1", "startWith_1", "isObj_1", "uniqId_1", "upperFirst_1", "toNum_1", "chunk_1", "each_1", "isNaN_1", "isNum_1", "isBool_1", "isStr_1", "keys_1", "lowerCase_1", "Emitter_1", "util_1", "util_2", "c", "JsonViewer", "container", "e", "map", "$this", "circularId", "$firstSpan", "$ul", "data", "createMap", "firstLevel", "ret", "type", "typeKeys", "i", "len", "key", "val", "keyType", "wrapKey", "id", "referenceId", "objAbstract", "getObjAbstract", "icon", "obj", "keyClass", "arr", "objToArr", "splitBigArr", "values", "idx", "enumerable", "startIdx", "endIdx", "value", "require_object_viewer", "__commonJSMin", "exports", "module", "__importDefault", "mod", "_a", "Emitter_1", "getProto_1", "isNum_1", "isBool_1", "lowerCase_1", "isObj_1", "isArr_1", "upperFirst_1", "keys_1", "each_1", "toSrc_1", "isPromise_1", "type_1", "_1", "difference_1", "allKeys_1", "filter_1", "chunk_1", "toStr_1", "noop_1", "Visitor_1", "util_1", "Static_1", "util_2", "c", "getObjAbstract", "data", "type", "container", "unenumerable", "accessGetter", "e", "map", "$this", "circularId", "$firstSpan", "$ul", "firstLevel", "visitor", "self", "isBigArr", "visitedObj", "ret", "types", "enumerableKeys", "unenumerableKeys", "symbolKeys", "virtualKeys", "virtualData", "key", "idx", "val", "obj", "startIdx", "endIdx", "typeKeys", "i", "len", "descriptor", "hasGetter", "hasSetter", "proto", "id", "keyType", "t", "valType", "wrapKey", "extra", "objAbstract", "icon", "keyClass", "require_isErr", "__commonJSMin", "exports", "module", "objToStr", "val", "require_isPrimitive", "__commonJSMin", "exports", "module", "val", "type", "require_defaults", "__commonJSMin", "exports", "module", "createAssigner", "allKeys", "require_isEl", "__commonJSMin", "exports", "module", "val", "require_toInt", "__commonJSMin", "exports", "module", "toNum", "val", "require_isNull", "__commonJSMin", "exports", "module", "val", "require_h", "__commonJSMin", "exports", "module", "isEl", "isStr", "startWith", "$class", "$css", "each", "isFn", "tag", "attrs", "_len", "children", "_key", "_parseTag", "parseTag", "tagName", "id", "classes", "el", "child", "val", "key", "words", "word", "i", "len", "c", "_i", "_len2", "require_now", "__commonJSMin", "exports", "module", "require_isSymbol", "__commonJSMin", "exports", "module", "val", "require_safeSet", "__commonJSMin", "exports", "module", "castPath", "isUndef", "toStr", "isSymbol", "isStr", "obj", "path", "val", "lastProp", "prop", "require_defineProp", "__commonJSMin", "exports", "module", "castPath", "isStr", "isObj", "each", "obj", "prop", "descriptor", "defineProp", "path", "lastProp", "require_pick", "__commonJSMin", "exports", "module", "isStr", "isArr", "contain", "each", "obj", "filter", "omit", "keys", "val", "key", "ret", "iteratee", "require_stringifyAll", "__commonJSMin", "exports", "module", "escapeJsStr", "type", "toStr", "endWith", "toSrc", "keys", "each", "Class", "getProto", "difference", "extend", "isPromise", "filter", "now", "allKeys", "contain", "isObj", "isMiniProgram", "create", "startWith", "safeSet", "defineProp", "pick", "isArrLike", "obj", "_ref", "self", "_ref$startTime", "startTime", "_ref$timeout", "timeout", "_ref$depth", "depth", "_ref$curDepth", "curDepth", "_ref$visitor", "visitor", "Visitor", "_ref$unenumerable", "unenumerable", "_ref$symbol", "symbol", "_ref$accessGetter", "accessGetter", "_ref$ignore", "ignore", "json", "options", "t", "wrapStr", "val", "parts", "visitedObj", "id", "enumerableKeys", "iterateObj", "unenumerableKeys", "symbolKeys", "key", "prototype", "proto", "name", "descriptor", "hasGetter", "hasSetter", "e", "wrapKey", "escapeJsonStr", "str", "visited", "i", "len", "map", "parse", "correctReference", "reference", "value", "enumerable", "newObj", "strToRegExp", "Fn", "defineProps", "handleGetterSetter", "_reference", "isGetterAndSetter", "realKey", "retTimeout", "lastSlash", "require_nextTick", "__commonJSMin", "exports", "module", "cb", "ensureCallable", "fn", "require_extractUrls", "__commonJSMin", "exports", "module", "unique", "trim", "map", "toArr", "str", "urlList", "regUrl", "url", "require_escapeRegExp", "__commonJSMin", "exports", "module", "str", "require_linkify", "__commonJSMin", "exports", "module", "extractUrls", "each", "escapeRegExp", "str", "hyperlink", "defHyperlink", "urlList", "url", "require_highlight", "__commonJSMin", "exports", "module", "each", "defaults", "str", "lang", "style", "defStyle", "language", "subLangSi", "subLangs", "val", "$1", "$2", "key", "levels", "$0", "end", "tag", "lastTag", "s", "$tmpl", "i", "require_min", "__commonJSMin", "exports", "module", "arr", "ret", "i", "len", "require_stripIndent", "__commonJSMin", "exports", "module", "isStr", "toArr", "min", "map", "trim", "literals", "str", "_len", "placeholders", "_key", "len", "lines", "indentLens", "_i", "_len2", "line", "_indent", "regStartSpaces", "indent", "require_output", "__commonJSMin", "exports", "module", "OutputLine", "parent", "line", "index", "pattern", "lastCheckedOutput", "indent", "alignment", "next", "item", "last_newline_index", "result", "IndentStringCache", "options", "baseIndentString", "column", "indent_level", "Output", "force_newline", "eol", "last_item", "sweet_code", "token", "x", "printable_token", "output_length", "eat_newlines", "starts_with", "ends_with", "potentialEmptyLine", "require_token", "__commonJSMin", "exports", "module", "Token", "type", "text", "newlines", "whitespace_before", "require_acorn", "__commonJSMin", "exports", "baseASCIIidentifierStartChars", "baseASCIIidentifierChars", "nonASCIIidentifierStartChars", "nonASCIIidentifierChars", "identifierStart", "identifierChars", "require_options", "__commonJSMin", "exports", "module", "Options", "options", "merge_child_field", "_mergeOpts", "name", "default_value", "option_value", "result", "selection_list", "item", "allOptions", "childFieldName", "finalOpts", "_normalizeOpts", "convertedOpts", "key", "newKey", "require_options", "__commonJSMin", "exports", "module", "BaseOptions", "validPositionValues", "Options", "options", "raw_brace_style", "brace_style_split", "bs", "require_inputscanner", "__commonJSMin", "exports", "module", "regexp_has_sticky", "InputScanner", "input_string", "val", "index", "pattern", "pattern_match", "starting_pattern", "until_pattern", "until_after", "match", "match_index", "match_from", "result", "flags", "literal_string", "start", "testVal", "require_tokenstream", "__commonJSMin", "exports", "module", "TokenStream", "parent_token", "val", "index", "token", "require_pattern", "__commonJSMin", "exports", "module", "Pattern", "input_scanner", "parent", "result", "pattern", "require_whitespacepattern", "__commonJSMin", "exports", "module", "Pattern", "WhitespacePattern", "input_scanner", "parent", "whitespace_chars", "newline_chars", "resulting_string", "matches", "result", "regexp", "input_string", "start_index", "next_match", "require_tokenizer", "__commonJSMin", "exports", "module", "InputScanner", "Token", "TokenStream", "WhitespacePattern", "TOKEN", "Tokenizer", "input_string", "options", "current", "previous", "open_token", "open_stack", "comments", "previous_token", "resulting_string", "current_token", "type", "text", "token", "require_directives", "__commonJSMin", "exports", "module", "Directives", "start_block_pattern", "end_block_pattern", "text", "directives", "directive_match", "input", "require_templatablepattern", "__commonJSMin", "exports", "module", "Pattern", "template_names", "TemplatablePattern", "input_scanner", "parent", "pattern", "language", "result", "options", "next", "items", "resulting_string", "c", "peek1", "require_tokenizer", "__commonJSMin", "exports", "module", "InputScanner", "BaseTokenizer", "BASETOKEN", "Directives", "acorn", "Pattern", "TemplatablePattern", "in_array", "what", "arr", "TOKEN", "directives_core", "number_pattern", "digit", "dot_pattern", "positionable_operators", "punct", "punct_pattern", "line_starters", "reserved_words", "reserved_word_pattern", "in_html_comment", "Tokenizer", "input_string", "options", "pattern_reader", "templatable", "current_token", "open_token", "previous_token", "token", "c", "resulting_string", "sharp", "comment", "directives", "unescape_string", "esc", "in_char_class", "xmlStr", "match", "rootTag", "isCurlyRoot", "depth", "isEndTag", "tagName", "isSingletonTag", "s", "out", "escaped", "input_scan", "matched", "delimiter", "allow_unescaped_newlines", "start_sub", "current_char", "pattern", "next", "require_beautifier", "__commonJSMin", "exports", "module", "Output", "Token", "acorn", "Options", "Tokenizer", "line_starters", "positionable_operators", "TOKEN", "in_array", "what", "arr", "ltrim", "s", "generateMapFromStrings", "list", "result", "x", "reserved_word", "token", "word", "reserved_array", "words", "special_words", "validPositionValues", "OPERATOR_POSITION", "OPERATOR_POSITION_BEFORE_OR_PRESERVE", "MODE", "remove_redundant_indentation", "output", "frame", "split_linebreaks", "out", "idx", "is_array", "mode", "is_expression", "all_lines_start_with", "lines", "c", "i", "line", "each_line_matches_indent", "indent", "len", "Beautifier", "source_text", "options", "flags_base", "next_indent_level", "next_flags", "baseIndentString", "tokenizer", "sweet_code", "eol", "current_token", "preserve_statement_flags", "newlines", "keep_whitespace", "comment_token", "j", "newline_restricted_tokens", "force_linewrap", "shouldPreserveOrForce", "operatorLogicApplies", "shouldPrintOperatorNewline", "force_newline", "next_token", "popped", "start", "next_mode", "peek_back_two", "peek_back_three", "second_token", "empty_braces", "empty_anonymous_function", "index", "check_token", "prefix", "isGeneratorAsterisk", "isUnary", "space_before", "space_after", "in_ternary", "isColon", "isTernaryColon", "isOtherColon", "javadoc", "starless", "lastIndent", "lastIndentLength", "require_javascript", "__commonJSMin", "exports", "module", "Beautifier", "Options", "js_beautify", "js_source_text", "options", "beautifier", "require_options", "__commonJSMin", "exports", "module", "BaseOptions", "Options", "options", "space_around_selector_separator", "brace_style_split", "bs", "require_beautifier", "__commonJSMin", "exports", "module", "Options", "Output", "InputScanner", "Directives", "directives_core", "lineBreak", "allLineBreaks", "whitespaceChar", "whitespacePattern", "block_comment_pattern", "comment_pattern", "Beautifier", "source_text", "options", "endChars", "result", "allowAtLeastOneNewLine", "newline_count", "openParen", "i", "ch", "output_string", "isAfterSpace", "eol", "baseIndentString", "parenLevel", "insideRule", "insidePropertyValue", "enteringConditionalGroup", "insideAtExtend", "insideAtImport", "topCharacter", "whitespace", "previous_ch", "comment", "directives", "variableOrRule", "sweetCode", "require_css", "__commonJSMin", "exports", "module", "Beautifier", "Options", "css_beautify", "source_text", "options", "beautifier", "require_options", "__commonJSMin", "exports", "module", "BaseOptions", "Options", "options", "require_tokenizer", "__commonJSMin", "exports", "module", "BaseTokenizer", "BASETOKEN", "Directives", "TemplatablePattern", "Pattern", "TOKEN", "directives_core", "Tokenizer", "input_string", "options", "templatable_reader", "pattern_reader", "literal_regexp", "current_token", "open_token", "previous_token", "token", "c", "resulting_string", "directives", "peek1", "content", "tag_name", "require_beautifier", "__commonJSMin", "exports", "module", "Options", "Output", "Tokenizer", "TOKEN", "lineBreak", "allLineBreaks", "Printer", "options", "base_indent_string", "pattern", "value", "non_breaking", "token", "raw_token", "newlines", "n", "force", "level", "get_type_attribute", "start_token", "result", "get_custom_beautifier_name", "tag_check", "typeAttribute", "in_array", "what", "arr", "TagFrame", "parent", "parser_token", "indent_level", "TagStack", "printer", "new_frame", "frame", "tag_list", "stop_list", "tag", "Beautifier", "source_text", "js_beautify", "css_beautify", "optionHtml", "eol", "baseIndentString", "last_token", "last_tag_token", "TagOpenParserToken", "tokens", "sweet_code", "wrapped", "force_attr_wrap", "is_only_attribute", "peek_index", "peek_token", "local", "text", "_beautifier", "script_indent_level", "pre", "post", "html_source", "beautifier", "indentation", "matched", "Child_options", "child_options", "white", "tag_check_match", "foundIfOnCurrentLine", "do_end_expand", "p_closers", "p_parent_excludes", "p_parent", "require_html", "__commonJSMin", "exports", "module", "Beautifier", "Options", "style_html", "html_source", "options", "js_beautify", "css_beautify", "beautifier", "require_src", "__commonJSMin", "exports", "module", "js_beautify", "css_beautify", "html_beautify", "style_html", "html_source", "options", "js", "css", "require_js", "__commonJSMin", "exports", "module", "get_beautify", "js_beautify", "css_beautify", "html_beautify", "beautify", "src", "config", "mod", "beautifier", "require_Log", "__commonJSMin", "exports", "__importDefault", "mod", "getAbstract_1", "luna_object_viewer_1", "isObj_1", "isStr_1", "isErr_1", "isPrimitive_1", "defaults_1", "isEl_1", "toStr_1", "toNum_1", "toInt_1", "escape_1", "isNull_1", "isUndef_1", "isFn_1", "toArr_1", "isArr_1", "unique_1", "contain_1", "isEmpty_1", "clone_1", "noop_1", "each_1", "trim_1", "lowerCase_1", "keys_1", "_1", "h_1", "Emitter_1", "stringifyAll_1", "nextTick_1", "linkify_1", "highlight_1", "util_1", "stripIndent_1", "js_beautify_1", "regJsUrl", "emptyHighlightStyle", "Log", "console", "type", "args", "id", "group", "targetGroup", "header", "ignoreFilter", "accessGetter", "unenumerable", "lazyEvaluation", "collapsed", "icon", "c", "$container", "count", "$countContainer", "$icon", "$count", "time", "$timeContainer", "silent", "height", "width", "i", "len", "cb", "setSrc", "result", "obj", "options", "stringify", "src", "$json", "staticViewer", "objViewer", "msg", "err", "url", "data", "html", "indent", "indentLevel", "Value", "table", "ret", "filter", "columns", "val", "idx", "column", "lines", "stack", "match", "htmlForEl", "needStrSubstitution", "str", "isInCss", "newStr", "arg", "correctStyle", "rules", "style", "rule", "name", "key", "require_perfNow", "__commonJSMin", "exports", "module", "now", "root", "performance", "process", "loadTime", "getNanoSeconds", "hr", "require_isRegExp", "__commonJSMin", "exports", "module", "objToStr", "val", "require_copy", "__commonJSMin", "exports", "module", "extend", "noop", "text", "cb", "el", "body", "e", "require_debounce", "__commonJSMin", "exports", "module", "fn", "wait", "immediate", "timeout", "ctx", "args", "throttler", "require_throttle", "__commonJSMin", "exports", "module", "debounce", "fn", "wait", "require_xpath", "__commonJSMin", "exports", "module", "xpath", "ret", "nodesSnapshot", "i", "require_isDate", "__commonJSMin", "exports", "module", "objToStr", "val", "require_repeat", "__commonJSMin", "exports", "module", "str", "n", "ret", "require_lpad", "__commonJSMin", "exports", "module", "repeat", "toStr", "str", "len", "chars", "strLen", "require_dateFormat", "__commonJSMin", "exports", "module", "isStr", "isDate", "toStr", "lpad", "date", "mask", "utc", "gmt", "regNum", "maskSlice", "prefix", "d", "D", "m", "y", "H", "M", "s", "L", "o", "flags", "padZero", "regTimezone", "regTimezoneClip", "regToken", "match", "str", "len", "require_isHidden", "__commonJSMin", "exports", "module", "root", "getComputedStyle", "document", "el", "_ref", "_ref$display", "display", "_ref$visibility", "visibility", "_ref$opacity", "opacity", "_ref$size", "size", "_ref$viewport", "viewport", "_ref$overflow", "overflow", "computedStyle", "cur", "_computedStyle", "clientRect", "containerRect", "isOutside", "_cur", "_computedStyle2", "_overflow", "curRect", "require_Component", "__commonJSMin", "exports", "__importDefault", "mod", "Emitter_1", "_1", "util_1", "each_1", "Component", "container", "compName", "name", "val", "options", "newOptions", "oldVal", "selector", "require_raf", "__commonJSMin", "exports", "module", "now", "isBrowser", "raf", "cancel", "lastTime", "vendors", "i", "len", "cb", "curTime", "timeToCall", "id", "require_console", "__commonJSMin", "exports", "module", "__importDefault", "mod", "Log_1", "isUndef_1", "perfNow_1", "now_1", "isStr_1", "extend_1", "uniqId_1", "isRegExp_1", "isFn_1", "Stack_1", "isEmpty_1", "contain_1", "copy_1", "each_1", "toArr_1", "keys_1", "last_1", "throttle_1", "xpath_1", "lowerCase_1", "dateFormat_1", "isHidden_1", "stripIndent_1", "util_1", "Component_1", "raf", "u", "isAndroid", "c", "id", "Console", "container", "maxNum", "asyncRender", "showHeader", "filter", "accessGetter", "unenumerable", "lazyEvaluation", "scrollHeight", "offsetHeight", "scrollTop", "isAtBottom", "lastScrollTop", "lastTimestamp", "timestamp", "duration", "distance", "speedTolerance", "topTolerance", "bottomTolerance", "options", "value", "selectors", "path", "data", "columns", "name", "val", "label", "counter", "args", "obj", "startTime", "silent", "code", "e", "log", "targetGroup", "logs", "i", "len", "type", "header", "getCurTime", "getFrom", "groupStack", "group", "lastLog", "firstLog", "height", "displayLogs", "idx", "lastDisplayLog", "startIdx", "endIdx", "middleLog", "middleIdx", "timeout", "asyncList", "done", "num", "jsInput", "ret", "$el", "el", "clientWidth", "top", "bottom", "topSpaceHeight", "bottomSpaceHeight", "currentHeight", "fakeEl", "fakeFrag", "width", "frag", "lines", "debounce", "fn", "delay", "timeout", "args", "decodeHTML", "html", "txt", "escapeScript", "code", "escapeCode", "slash", "safeName", "name", "symbol", "isMobile", "mobile", "userAgent", "a", "safari", "isRelativeUrl", "url", "getAbsoluteUrl", "baseUrl", "cloneObject", "x", "objectMap", "obj", "fn", "k", "v", "i", "objectFilter", "predicate", "copyToClipboard", "text", "textarea", "ex", "stringToValidJson", "str", "matchedStr", "stringify", "pretty", "getRandomString", "downloadFile", "filename", "extension", "content", "loadScript", "resolve", "reject", "script", "removeEventListeners", "onLoad", "onError", "loadStylesheet", "id", "insertBefore", "stylesheet", "removeComments", "src", "removeStrings", "removeCommentsAndStrings", "getLanguageCustomSettings", "language", "config", "getValidUrl", "url", "validUrl", "toCamelCase", "str", "_match", "p1", "p2", "removeDuplicates", "arr", "createInstance", "url", "instancePromise", "getImportInstance", "moduleCDNs", "npmCDNs", "ghCDNs", "modulesService", "moduleName", "isModule", "defaultCDN", "moduleUrl", "getCdnUrl", "path", "cdn", "getAppCDN", "testModule", "preferredCDN", "cdns", "modName", "post", "i", "TEMPLATES", "pattern", "template", "getUrl", "getModuleUrl", "modulesService", "vendorsBaseUrl", "artTemplateUrl", "getUrl", "asciidocUrl", "assemblyscriptLoaderUrl", "astroBaseUrl", "getUrl", "babelUrl", "getUrl", "biwaschemeUrl", "brythonBaseUrl", "getUrl", "chaiUrl", "getModuleUrl", "chaiTypesUrl", "cherryCljsBaseUrl", "clioBaseUrl", "getUrl", "coffeeScriptUrl", "dotUrl", "getUrl", "ejsUrl", "esModuleShimsPath", "etaUrl", "getUrl", "fontAnonymousProUrl", "getUrl", "fontCascadiaCodeUrl", "fontCodeNewRomanUrl", "fontComicMonoUrl", "fontCourierPrimeUrl", "fontDECTerminalModernUrl", "fontDejaVuMonoUrl", "fontFantasqueUrl", "fontFiraCodeUrl", "fontFixedsysUrl", "fontHackUrl", "fontHermitUrl", "fontIBMPlexMonoUrl", "fontInconsolataUrl", "fontIosevkaUrl", "fontJetbrainsMonoUrl", "fontMenloUrl", "fontMonofurUrl", "fontMonoidUrl", "fontNotoUrl", "fontNovaMonoUrl", "fontOpenDyslexicUrl", "fontProFontWindowsUrl", "fontRobotoMonoUrl", "fontSFMonoUrl", "fontSourceCodeProUrl", "fontSpaceMonoUrl", "fontSudoVarUrl", "fontUbuntuMonoUrl", "fontVictorMonoUrl", "fscreenUrl", "go2jsBaseUrl", "getUrl", "handlebarsBaseUrl", "getUrl", "hintCssUrl", "getUrl", "imbaBaseUrl", "getUrl", "jestLiteUrl", "jestTypesUrl", "jsclUrl", "liquidJsUrl", "getUrl", "localforageUrl", "luaUrl", "lunaObjViewerStylesUrl", "lunaConsoleStylesUrl", "malinaVersion", "malinaUrl", "markedUrl", "mjmlUrl", "getUrl", "mustacheUrl", "getUrl", "normalizeCssUrl", "getUrl", "nunjucksBaseUrl", "opalBaseUrl", "parinferUrl", "postcssImportUrlUrl", "getUrl", "prettierBaseUrl", "prettierPhpUrl", "requireUrl", "getUrl", "resetCssUrl", "getUrl", "riotBaseUrl", "snackbarUrl", "spacingJsUrl", "sqlFormatterUrl", "sqljsBaseUrl", "stencilUrl", "stylisUrl", "tagifyBaseUrl", "getUrl", "tailwindcssUrl", "tauPrologBaseUrl", "twigUrl", "getUrl", "typescriptUrl", "uniterUrl", "vue3CdnUrl", "getUrl", "vue2CdnUrl", "vueSfcLoaderCdnBaseUrl", "wabtjsUrl", "lightningcss", "vendorsBaseUrl", "_config", "baseUrl", "postcss", "vendorsBaseUrl", "_config", "baseUrl", "autoprefixer", "vendorsBaseUrl", "config", "getLanguageCustomSettings", "cssnano", "nanoPlugins", "postcssPlugins", "plugin", "processor", "opts", "postcssImportUrl", "postcssImportUrlUrl", "postcssPresetEnv", "purgecss", "_baseUrl", "options", "tokencss", "customSettings", "extendTokens", "base", "tokens", "result", "key", "tokensConfig", "cssModules", "_cssFileName", "json", "_outputFileName", "addClasses", "removeClasses", "tailwindcss", "tailwindcssUrl", "_config", "baseUrl", "unocss", "vendorsBaseUrl", "_config", "baseUrl", "windicss", "vendorsBaseUrl", "_config", "baseUrl", "processors", "tailwindcss", "windicss", "unocss", "tokencss", "purgecss", "postcssImportUrl", "autoprefixer", "postcssPresetEnv", "lightningcss", "cssnano", "cssModules", "postcss", "getLanguageByAlias", "alias", "aliasLowerCase", "languages", "language", "ext", "getLanguageTitle", "languageSpecs", "lang", "getLanguageEditorId", "getLanguageExtension", "getLanguageSpecs", "getLanguageCompiler", "compiler", "mapLanguage", "languageIsEnabled", "config", "processorIsEnabled", "processor", "processors", "p", "processorIsActivated", "getActivatedProcessors", "editorId", "getCustomSettings", "language", "config", "settings", "getLanguageCustomSettings", "getLanguageEditorId", "asciidoc", "asciidocUrl", "asciidoctor", "code", "config", "getLanguageCustomSettings", "prettierUrl", "prettierBaseUrl", "parserPlugins", "prettierPhpUrl", "vendorsBaseUrl", "babel", "parserPlugins", "babelUrl", "code", "config", "getLanguageCustomSettings", "css", "parserPlugins", "code", "haml", "vendorsBaseUrl", "_config", "baseUrl", "html", "parserPlugins", "code", "javascript", "parserPlugins", "code", "jsx", "parserPlugins", "tsx", "parserPlugins", "less", "parserPlugins", "vendorsBaseUrl", "code", "config", "getLanguageCustomSettings", "markdown", "parserPlugins", "markedUrl", "code", "config", "getLanguageCustomSettings", "compileInCompiler", "content", "language", "config", "options", "worker", "resolve", "handler", "ev", "message", "runOutsideWorker", "code", "config", "worker", "resolve", "mdx", "remarkGfm", "vendorsBaseUrl", "compiled", "getLanguageCustomSettings", "jsx", "str", "result", "escapeCode", "js", "compileInCompiler", "parserPlugins", "pug", "parserPlugins", "vendorsBaseUrl", "_config", "baseUrl", "scss", "parserPlugins", "vendorsBaseUrl", "_config", "baseUrl", "sass", "svelte", "parserPlugins", "vendorsBaseUrl", "_config", "baseUrl", "stylus", "vendorsBaseUrl", "code", "typescriptOptions", "typescript", "parserPlugins", "typescriptUrl", "code", "config", "language", "getLanguageCustomSettings", "loaderCdnUrl", "vueSfcLoaderCdnBaseUrl", "vue", "parserPlugins", "_config", "baseUrl", "vue3CdnUrl", "loaderCdnUrl", "vueSfcLoaderCdnBaseUrl", "vue2", "parserPlugins", "_config", "baseUrl", "vue2CdnUrl", "stencil", "parserPlugins", "stencilUrl", "code", "config", "getLanguageCustomSettings", "vendorsBaseUrl", "coffeescript", "coffeeScriptUrl", "code", "config", "getLanguageCustomSettings", "livescript", "vendorsBaseUrl", "code", "config", "getLanguageCustomSettings", "assemblyscriptUrl", "vendorsBaseUrl", "assemblyscript", "parserPlugins", "_config", "baseUrl", "assemblyscriptLoaderUrl", "brythonUrl", "brythonBaseUrl", "stdlibUrl", "python", "code", "compiled", "config", "autoloadStdlib", "options", "getLanguageCustomSettings", "importsPattern", "stdlib", "loader", "loaderUrl", "getImports", "code", "requireMap", "arr", "mod", "opalBaseUrl", "ruby", "config", "autoloadStdlib", "options", "getLanguageCustomSettings", "compiled", "imports", "stdlib", "php", "parserPlugins", "code", "uniterUrl", "perl", "code", "baseUrl", "vendorsBaseUrl", "luaFmtUrl", "vendorsBaseUrl", "luaFormatter", "code", "cursorOffset", "lua", "luaUrl", "parenFormatter", "url", "parinferUrl", "value", "commonlisp", "code", "baseUrl", "jsclUrl", "scheme", "parenFormatter", "code", "biwaschemeUrl", "solid", "parserPlugins", "vendorsBaseUrl", "_config", "baseUrl", "solidTsx", "parserPlugins", "pyodide", "code", "baseUrl", "liquid", "parserPlugins", "liquidJsUrl", "_config", "baseUrl", "ejs", "parserPlugins", "ejsUrl", "_config", "baseUrl", "url", "handlebarsBaseUrl", "runtimeUrl", "handlebars", "parserPlugins", "_config", "baseUrl", "dot", "parserPlugins", "dotUrl", "_config", "baseUrl", "url", "nunjucksBaseUrl", "runtimeUrl", "nunjucks", "parserPlugins", "_config", "baseUrl", "go", "go2jsBaseUrl", "code", "formatted", "err", "resolve", "jsCode", "runOutsideWorker", "code", "baseUrl", "language", "rescriptCompiler", "formatterFactory", "rescript", "reason", "formatterFactory", "ocaml", "formatterUrl", "vendorsBaseUrl", "scriptType", "wat", "value", "formatted", "error", "wabtjsUrl", "_config", "baseUrl", "compilerCdnUrl", "riotBaseUrl", "cdnUrl", "riot", "parserPlugins", "_config", "baseUrl", "scriptType", "sql", "sqlFormatterUrl", "value", "sqljsBaseUrl", "_config", "baseUrl", "reactNativeWebUrl", "vendorsBaseUrl", "reactNative", "parserPlugins", "code", "config", "language", "typescriptOptions", "getLanguageCustomSettings", "reactNativeTsx", "parserPlugins", "code", "config", "language", "typescriptOptions", "getLanguageCustomSettings", "reactNativeWebUrl", "blockly", "_code", "options", "twig", "parserPlugins", "twigUrl", "_config", "baseUrl", "compilerURL", "astroBaseUrl", "astro", "parserPlugins", "_config", "baseUrl", "malina", "parserPlugins", "_config", "baseUrl", "malinaVersion", "cdnUrl", "vendorsBaseUrl", "cpp", "code", "baseUrl", "julia", "code", "baseUrl", "clang", "code", "baseUrl", "tcl", "code", "baseUrl", "requireUrl", "prolog", "code", "baseUrl", "tauPrologBaseUrl", "clio", "clioBaseUrl", "_config", "baseUrl", "richtext", "_code", "config", "runOutsideWorker", "code", "baseUrl", "config", "diagramsCompiler", "diagrams", "parserPlugins", "imba", "imbaBaseUrl", "_config", "baseUrl", "mustache", "parserPlugins", "mustacheUrl", "_config", "baseUrl", "artTemplate", "parserPlugins", "artTemplateUrl", "_config", "baseUrl", "r", "code", "baseUrl", "civetUrl", "vendorsBaseUrl", "civet", "code", "fennel", "parenFormatter", "luaUrl", "_config", "baseUrl", "teal", "luaFormatter", "luaUrl", "_config", "baseUrl", "stylis", "stylisUrl", "code", "compile", "serialize", "stringify", "middleware", "prefixer", "flow", "parserPlugins", "vendorsBaseUrl", "code", "config", "getLanguageCustomSettings", "mjml", "parserPlugins", "mjmlUrl", "code", "config", "html", "errors", "getLanguageCustomSettings", "err", "sucrase", "parserPlugins", "vendorsBaseUrl", "code", "config", "getLanguageCustomSettings", "eta", "parserPlugins", "etaUrl", "_config", "baseUrl", "getAllCompilers", "languages", "config", "baseUrl", "language", "processors", "languageIsEnabled", "compilers", "compiler", "lang", "getCompilerUrl", "url", "isRelativeUrl", "allowedOrigin", "origin", "createEventsManager", "events", "element", "eventType", "fn", "options", "event", "ev", "customEvents", "createPub", "subscribers", "fn", "data", "fakeStorage", "fakeSimpleStorage", "localforage", "dbName", "stores", "generateId", "loadLocalforage", "store", "loadScript", "localforageUrl", "createStorage", "name", "isEmbed", "fakeStorage", "pub", "createPub", "subscribe", "fn", "unsubscribeAll", "notifyPub", "getAllData", "data", "load", "getList", "list", "item", "a", "b", "getItem", "id", "updateItem", "value", "notify", "addItem", "createProjectStorage", "name", "isEmbed", "storage", "createStorage", "getList", "item", "b", "updateItem", "id", "config", "newItem", "addItem", "generateId", "newProjects", "createSimpleStorage", "name", "isEmbed", "fakeSimpleStorage", "pub", "createPub", "subscribe", "fn", "unsubscribeAll", "notifyPub", "getValue", "setValue", "value", "createStores", "cloneObject", "initializeStores", "stores", "isEmbed", "createProjectStorage", "createStorage", "createSimpleStorage", "import_lz_string", "compress", "decompress", "compressed", "isJSON", "decoded", "keyStorage", "loadStorage", "createStorage", "encode", "text", "decode", "encoded", "saveKey", "key", "compress", "loadKey", "decompress", "generateKey", "keyPair", "publicKey", "privateKey", "keyString", "importKey", "encrypt", "importedKey", "encrypted", "decrypt", "decrypted", "fakeAuthService", "createAuthService", "isEmbed", "initializeApp", "getApp", "getAuth", "signInWithPopup", "signOut", "GithubAuthProvider", "firebaseConfig", "firebaseApp", "auth", "currentUser", "firebase", "getImportInstance", "getToken", "getUserInfo", "resolve", "unsubscribe", "user", "scopes", "provider", "scope", "result", "token", "saveToken", "fetchUserName", "deleteUserData", "uid", "encrypt", "decrypt", "saveUsername", "username", "fromLocalStorage", "fromUserInfo", "login", "cfPagesBaseUrl", "serviceBaseUrl", "cfPagesBaseUrl", "version", "sandboxService", "dpasteGetUrl", "dpastePostUrl", "apiUrl", "dpasteService", "id", "res", "config", "apiService", "allowedOrigin", "shareService", "typesService", "types", "fetchedTypes", "allowedOrigin", "createCompilerSandbox", "sandboxUrl", "resolve", "frameId", "iframe", "importsPattern", "dynamicImportsPattern", "getImports", "code", "removeComments", "arr", "needsBundler", "mod", "isBare", "createImportMap", "config", "libName", "key", "modulesService", "acc", "curr", "hasImports", "hasExports", "removeCommentsAndStrings", "hasAwait", "isModuleScript", "styleimportsPattern", "hasStyleImports", "code", "cjs2esm", "code", "strippedCode", "removeComments", "requirePattern", "requires", "str", "arr", "imports", "id", "i", "lookup", "createCSSModulesImportMap", "compiledScript", "compiledStyle", "cssTokens", "extension", "scriptImports", "getImports", "extensions", "ext", "filename", "escapeCode", "cssModule", "key", "toCamelCase", "acc", "curr", "getCompileResult", "result", "createCompiler", "config", "baseUrl", "eventsManager", "compilers", "compilerSandbox", "compilerOrigin", "sandboxService", "reloads", "initialize", "resolve", "getAllCompilers", "languages", "processors", "compilerUrl", "createCompilerSandbox", "getAppCDN", "event", "configMessage", "createLanguageCompiler", "language", "content", "options", "reject", "handler", "message", "compileMessage", "load", "languageCompiler", "loadMessage", "cache", "compile", "enabledProcessors", "getActivatedProcessors", "languageSettings", "stringify", "getCustomSettings", "compiler", "res", "compiled", "getCompileResult", "processed", "postProcess", "info", "code", "postcssRequired", "editorId", "getLanguageEditorId", "hasStyleImports", "processor", "processorIsEnabled", "processorIsActivated", "process", "processResult", "result", "clearCache", "key", "getCompiler", "options", "mode", "createFakeCompiler", "createCompiler", "_languages", "_config", "content", "_language", "getCompileResult", "clojurescript", "parenFormatter", "cherryCljsBaseUrl", "code", "config", "options", "compiled", "compileInCompiler", "languages", "html", "markdown", "mdx", "astro", "pug", "asciidoc", "haml", "mustache", "handlebars", "ejs", "eta", "nunjucks", "liquid", "dot", "twig", "artTemplate", "mjml", "diagrams", "richtext", "css", "scss", "sass", "less", "stylus", "stylis", "javascript", "typescript", "flow", "babel", "sucrase", "jsx", "tsx", "reactNative", "reactNativeTsx", "vue", "vue2", "svelte", "stencil", "solid", "solidTsx", "riot", "malina", "coffeescript", "livescript", "civet", "clio", "imba", "rescript", "reason", "ocaml", "python", "pyodide", "r", "ruby", "go", "php", "cpp", "clang", "perl", "lua", "teal", "fennel", "julia", "scheme", "commonlisp", "clojurescript", "tcl", "assemblyscript", "wat", "sql", "prolog", "blockly", "createLanguageMenus", "config", "baseUrl", "eventsManager", "showLanguageInfo", "loadStarterTemplate", "importCode", "editorIds", "rootList", "editorsNumber", "editorId", "editorSelector", "menuScroller", "languageMenu", "editorLanguages", "languages", "language", "languageIsEnabled", "changeLanguageButton", "processorsHeader", "processors", "p", "processorIsEnabled", "languageItem", "languageLink", "tooltip", "infoIcon", "languageInfo", "getLanguageInfo", "templateLink", "templateName", "event", "codeLink", "codeUrl", "createProcessorItem", "processor", "processorItem", "languageInfoHTML", "mod", "cssPresets", "normalizeCssUrl", "resetCssUrl", "createFakeEditor", "options", "value", "language", "v", "lang", "getLanguageEditorId", "fonts", "fontAnonymousProUrl", "fontCascadiaCodeUrl", "fontCodeNewRomanUrl", "fontComicMonoUrl", "fontCourierPrimeUrl", "fontDECTerminalModernUrl", "fontDejaVuMonoUrl", "fontFantasqueUrl", "fontFiraCodeUrl", "fontFixedsysUrl", "fontHackUrl", "fontHermitUrl", "fontIBMPlexMonoUrl", "fontInconsolataUrl", "fontIosevkaUrl", "fontJetbrainsMonoUrl", "fontMenloUrl", "fontMonofurUrl", "fontMonoidUrl", "fontNotoUrl", "fontNovaMonoUrl", "fontOpenDyslexicUrl", "fontProFontWindowsUrl", "fontRobotoMonoUrl", "fontSFMonoUrl", "fontSourceCodeProUrl", "fontSpaceMonoUrl", "fontSudoVarUrl", "fontUbuntuMonoUrl", "fontVictorMonoUrl", "getFontFamily", "font", "defaultFonts", "fontName", "f", "getEditorFileName", "editorName", "loadEditor", "options", "baseUrl", "fileName", "editorUrl", "editorModule", "createCodeEditor", "selectEditor", "editor", "mode", "editorId", "isMobile", "getEditorOptions", "codeblockOptions", "compiledCodeOptions", "consoleOptions", "embedOptions", "loadFont", "fontName", "font", "fonts", "f", "loadStylesheet", "createEditor", "editorOptions", "createFakeEditor", "codeEditor", "changeSettings", "settings", "handler", "event", "registerEditorCommands", "enable", "eventsManager", "createBlocklyEditor", "baseUrl", "eventsManager", "blockly", "loadBlockly", "editorContainer", "blocklyElement", "show", "options", "blocklyEditor", "registerEditorCommands", "theme", "createQuillEditor", "baseUrl", "eventsManager", "quillEditor", "loadEditor", "editorContainer", "editorElement", "show", "options", "registerEditorCommands", "theme", "createCustomEditors", "options", "createBlocklyEditor", "createQuillEditor", "createFormatter", "baseUrl", "worker", "getAppCDN", "configMessage", "languages", "resolve", "reject", "handler", "event", "message", "loadMessage", "language", "value", "cursorOffset", "formatterConfig", "formatMessage", "getFormatter", "config", "baseUrl", "isLite", "readonly", "mode", "createFakeFormatter", "createFormatter", "_languages", "_language", "value", "cursorOffset", "_call", "body", "then", "direct", "result", "e", "_invokeIgnored", "_empty", "_await", "value", "instances", "instanceStackStatus", "themes", "Snackbar", "message", "options", "this$1", "timeout", "actions", "position", "theme", "maxStack", "prototypeAccessors", "wrapper", "el", "ref", "backgroundColor", "textColor", "boxShadow", "actionColor", "container", "text", "loop", "action", "list", "i", "style", "text$1", "callback", "button", "key", "positionInstances", "l", "instance", "hidden", "_this", "resolve", "eventName", "getAnimationEvent", "index", "animations", "createSnackbar", "actionStyle", "lightTheme", "infoTheme", "successTheme", "warningTheme", "dangerTheme", "closeButton", "actionStyle", "_button", "snackbar", "acceptButton", "createNotifications", "message", "dismissable", "createSnackbar", "infoTheme", "closeButton", "successTheme", "warningTheme", "dangerTheme", "confirmCallback", "cancelCallback", "confirmAction", "acceptButton", "_button", "snackbar", "cancelAction", "lightTheme", "createModal", "overlay", "modalContainer", "modal", "isOpening", "onCloseFn", "show", "container", "size", "closeButton", "isAsync", "onClose", "scrollToSelector", "target", "closeContainer", "closeBtn", "close", "cornerCloseBtn", "onClickOutside", "escapeListener", "ev", "notificationBar", "event", "replaceValues", "str", "resultTemplate", "result_default", "appHTML", "app_default", "settingsMenuHTML", "settings_menu_default", "languageInfo", "language_info_default", "customSettingsScreen", "custom_settings_default", "testEditorScreen", "test_editor_default", "importScreen", "import_default", "deployScreen", "deploy_default", "syncScreen", "sync_default", "backupScreen", "backup_default", "broadcastScreen", "broadcast_default", "welcomeScreen", "welcome_default", "aboutScreen", "about_default", "infoScreen", "project_info_default", "resourcesScreen", "external_resources_default", "loginScreen", "login_default", "savePromptScreen", "save_prompt_default", "recoverPromptScreen", "recover_prompt_default", "templatesScreen", "templates_default", "openScreen", "open_default", "assetsScreen", "assets_default", "addAssetScreen", "add_asset_default", "snippetsScreen", "snippets_default", "addSnippetScreen", "add_snippet_default", "shareScreen", "share_default", "embedScreen", "embed_default", "editorSettingsScreen", "editor_settings_default", "resultPopupHTML", "result_popup_default", "exportJSON", "config", "filename", "extension", "content", "downloadFile", "mapBaseUrl", "content", "baseUrl", "replaceUrl", "url", "getAbsoluteUrl", "modulesService", "loadTemplates", "getStarterTemplates", "config", "template", "enabledLanguages", "getLanguageByAlias", "templateLanguages", "language", "lang", "objectMap", "getTemplate", "name", "defaultConfig", "buildConfig", "appConfig", "defaultConfig", "userConfig", "upgradeAndValidate", "config", "params", "getParams", "version", "paramsConfig", "loadParamConfig", "activeEditor", "fixLanguageNames", "getLanguageByAlias", "queryParams", "key", "acc", "language", "editorId", "getLanguageEditorId", "value", "content", "decodeHTML", "lang", "editorIds", "paramsActiveEditor", "paramsActive", "processor", "tag", "url", "allTools", "toolsNotSpecified", "t", "cloneObject", "status", "paramToolsList", "paramToolsStatus", "paramTools", "k", "tool", "upgradeSteps", "oldConfig", "version", "config", "clone", "p", "defaultConfig", "l", "renameProperty", "getLanguageEditorId", "imports", "acc", "mod", "types", "upgradeConfig", "oldVersion", "isValidVersion", "currentVersion", "isEarlier", "a", "b", "step", "numbers", "n", "comparedTo", "versionNumbers", "comparedToNumbers", "i", "obj", "oldProp", "newProp", "_", "newObj", "validateConfig", "config", "is", "x", "type", "arrayType", "l", "includes", "arr", "modes", "themes", "editorModes", "tools", "toolsPaneStatus", "editors", "editorIds", "zoomLevels", "isEditor", "validateEditorProps", "editorId", "getLanguageEditorId", "getLanguageByAlias", "defaultConfig", "validateTestsProps", "validateToolsProps", "t", "removeDuplicates", "appConfig", "defaultConfig", "getConfig", "cloneObject", "setConfig", "newConfig", "getContentConfig", "config", "getUserConfig", "getEditorConfig", "getFormatterConfig", "upgradeAndValidate", "validateConfig", "upgradeConfig", "populateConfig", "files", "params", "getLanguageByAlias", "output", "param", "language", "file", "editorId", "getLanguageEditorId", "code", "extension", "a", "b", "languages", "stylesheets", "stylesFile", "urls", "stylesheet", "line", "url", "scripts", "scriptsFile", "script", "hostPatterns", "isGithubDir", "url", "pattern", "hostPatterns", "pathSplit", "getValidUrl", "isGithubUrl", "url", "pattern", "hostPatterns", "getValidUrl", "isGithub", "isGithubDir", "createTypeLoader", "loadedTypes", "getTypeContents", "type", "content", "name", "value", "url", "declareAsModule", "dts", "loadTypes", "types", "t", "code", "configTypes", "forceLoad", "codeTypes", "getImports", "accTypes", "lib", "currentType", "loaded", "fromConfig", "typesToGet", "key", "fetchedTypes", "typesService", "autoloadTypes", "objectFilter", "testImports", "vendorsBaseUrl", "chaiUrl", "createResultPage", "code", "config", "forExport", "template", "baseUrl", "singleFile", "runTests", "compileInfo", "absoluteBaseUrl", "getAbsoluteUrl", "dom", "utilsScript", "presetUrl", "cssPresets", "preset", "cssPreset", "url", "stylesheet", "style", "styleElement", "EditorStylesheet", "markup", "el", "runtimeDependencies", "editorId", "compiledTests", "importFromScript", "getImports", "compilerImports", "language", "compiled", "compiler", "getLanguageCompiler", "depStyleUrl", "isRelativeUrl", "depScriptUrl", "depScript", "inlineScript", "objectMap", "styleExtension", "getLanguageExtension", "importMaps", "hasImports", "createImportMap", "createCSSModulesImportMap", "testImports", "esModuleShims", "modulesService", "esModuleShimsPath", "getAppCDN", "importMapsScript", "externalScript", "script", "scriptElement", "escapeScript", "scriptType", "isModuleScript", "spacingScript", "spacingJsUrl", "jestScript", "jestLiteUrl", "testScript", "getToolbarElement", "getProjectTitleElement", "getEditorContainerElement", "getEditorsElement", "getMarkupElement", "getStyleElement", "getScriptElement", "getOutputElement", "getResultElement", "getResultIFrameElement", "getGutterElement", "getLogoLink", "getRunButton", "getCodeRunButton", "getEditorToolbar", "getCopyButton", "getUndoButton", "getRedoButton", "getFormatButton", "getEditorModeNode", "getEditorStatus", "getExternalResourcesBtn", "getResultButton", "getFullscreenButton", "getEditorTitles", "getEditorDivs", "getToolspaneElement", "getToolspaneBar", "getToolspaneButtons", "getToolspaneTitles", "getToolspaneLoader", "getZoomButtonValue", "getModalSaveButton", "getModalDoNotSaveButton", "getModalCancelButton", "getModalRecoverButton", "getModalSavePreviousButton", "getModalCancelRecoverButton", "getModalUnsavedName", "getModalUnsavedLastModified", "getModalDisableRecoverCheckbox", "getLanguageMenuLinks", "getLanguageMenuButtons", "getstyleMenu", "getSettingToggles", "getSettingsMenuScroller", "getSettingsButton", "getExportJSONLink", "getExportResultLink", "getExportSourceLink", "getExportGithubGistLink", "getExportCodepenLink", "getExportJsfiddleLink", "getLoginLink", "getLogoutLink", "getNewLink", "getOpenLink", "getSaveLink", "getForkLink", "getSaveAsTemplateLink", "getExternalResourcesLink", "getCustomSettingsLink", "getShareLink", "getEmbedLink", "getEditorSettingsLink", "getDeployLink", "getSyncLink", "getImportLink", "getBackupLink", "getBroadcastLink", "getWelcomeLink", "getAboutLink", "getAutoupdateToggle", "getDelayValue", "getDelayRange", "getAutosaveToggle", "getAutosyncToggle", "getFormatOnsaveToggle", "getProcessorToggles", "getThemeToggle", "getShowWelcomeToggle", "getRecoverToggle", "getSpacingToggle", "getCSSPresetLinks", "getProjectInfoLink", "getAssetsLink", "getSnippetsLink", "getInfoTitleInput", "getInfoDescription", "getInfoTagsInput", "getSaveInfoButton", "getCustomSettingsEditor", "getLoadCustomSettingsButton", "getTestEditor", "getLoadTestsButton", "getEditTestsButton", "getRunTestsButton", "getWatchTestsButton", "getStarterTemplatesTab", "templatesContainer", "getStarterTemplatesList", "getUserTemplatesScreen", "getBroadcastStatusBtn", "getWelcomeLinkNew", "welcomeContainer", "getWelcomeLinkOpen", "getWelcomeLinkImport", "getWelcomeLinkDefaultTemplateLi", "getWelcomeLinkNoDefaultTemplate", "getWelcomeLinkLoadDefault", "getWelcomeLinkRecentOpen", "getWelcomeLinkTemplates", "getModalShowWelcomeCheckbox", "getModalWelcomeRecover", "getModalWelcomeScreen", "getModalWelcomeRecent", "getModalWelcomeRecentList", "getModalWelcomeTemplateList", "defaultContentConfig", "getContentConfig", "defaultConfig", "initialCache", "cache", "getCache", "setCache", "newCache", "updateCache", "editorId", "language", "modified", "getCachedCode", "removeExtra", "editor", "keys", "contentEditor", "key", "cacheIsValid", "cache", "config", "excludedKeys", "extraCache", "contentCache", "contentConfig", "getTags", "value", "tag", "createProjectInfoUI", "config", "storage", "modal", "eventsManager", "onSave", "div", "infoScreen", "projectInfoContainer", "titleInput", "getInfoTitleInput", "descriptionTextarea", "getInfoDescription", "tagsInput", "getInfoTagsInput", "removeDuplicates", "getSaveInfoButton", "getProjectTitleElement", "loadStylesheet", "tagifyBaseUrl", "loadScript", "Tagify", "item", "a", "b", "loadingMessage", "message", "loadingDiv", "createLoginContainer", "eventsManager", "loginCallback", "div", "loginScreen", "loginContainer", "reposCheckBox", "privateReposCheckBox", "gistsCheckBox", "loginButton", "scopes", "displayLoggedIn", "user", "loginLink", "getLoginLink", "logOutLink", "getLogoutLink", "displayName", "displayLoggedOut", "createOpenItem", "item", "list", "getLanguageTitle", "getLanguageByAlias", "isTemplate", "li", "link", "lastModified", "isMobile", "langs", "lang", "langEl", "userTags", "tag", "tagEl", "title", "lastModifiedText", "tags", "setAsDefault", "setAsDefaultLink", "defaultTemplateLabel", "removeDefaultLink", "deleteButton", "global", "ssr", "document", "addEventListener", "removeEventListener", "getBoundingClientRect", "gutterStartDragging", "aGutterSize", "bGutterSize", "HORIZONTAL", "NOOP", "calc", "prefix", "el", "isString", "v", "elementOrSelector", "ele", "getOption", "options", "propName", "def", "value", "getGutterSize", "gutterSize", "isFirst", "isLast", "gutterAlign", "defaultGutterFn", "i", "gutterDirection", "gut", "defaultElementStyleFn", "dim", "size", "gutSize", "style", "defaultGutterStyleFn", "obj", "Split", "idsOption", "ids", "dimension", "clientAxis", "position", "positionEnd", "clientSize", "elements", "firstElement", "parent", "parentStyle", "parentFlexDirection", "sizes", "minSize", "minSizes", "maxSize", "maxSizes", "expandToMin", "snapOffset", "snapOffsets", "dragInterval", "direction", "cursor", "gutter", "elementStyle", "gutterStyle", "setElementSize", "prop", "setGutterSize", "gutterElement", "getSizes", "element", "getMousePosition", "e", "adjust", "offset", "a", "b", "percentage", "drag", "calculateSizes", "aBounds", "bBounds", "innerSize", "computedStyle", "trimToMin", "sizesToTrim", "parentSize", "excessPixels", "toSpare", "pixelSizes", "pixelSize", "elementGutterSize", "elementMinSize", "newPixelSize", "takenPixels", "stopDragging", "self", "startDragging", "pairs", "id", "pair", "temp", "adjustToMin", "computedSize", "setSizes", "newSizes", "trimmed", "newSize", "destroy", "preserveStyles", "preserveGutter", "split_es_default", "createSplitPanes", "destroyed", "split", "split_es_default", "_dimension", "size", "gutterSize", "customEvents", "setAnimation", "gutter", "handle", "animate", "editorsElement", "outputElement", "show", "pane", "full", "smallScreen", "codeOpen", "outputOpen", "destroy", "preserveStyles", "preserveGutters", "createTemplatesContainer", "eventsManager", "loadUserTemplates", "div", "templatesScreen", "templatesContainer", "tabs", "tab", "t", "screen", "createStarterTemplateLink", "template", "starterTemplatesList", "baseUrl", "li", "link", "noUserTemplates", "createCompiledCodeViewer", "config", "baseUrl", "_editors", "_eventsManager", "isEmbed", "_runTests", "compiledCodeElement", "editor", "languageLabel", "createElements", "toolsPaneElement", "getToolspaneElement", "container", "toolsPaneButtons", "getToolspaneButtons", "createCompiledEditor", "force", "editorOptions", "mapLanguage", "getLanguageExtension", "getFontFamily", "getEditorConfig", "createEditor", "fixTypes", "language", "content", "monacoEditor", "lineCount", "update", "label", "compiledLanguage", "languages", "lang", "title", "load", "newConfig", "import_luna_console", "createConsole", "config", "baseUrl", "_editors", "eventsManager", "isEmbed", "_runTests", "consoleEmulator", "editor", "consoleElement", "sourceSelector", "clearButton", "commands", "commandsIndex", "blur", "htmlToElement", "html", "tag", "el", "template", "convertTypes", "args", "arg", "createConsoleEmulator", "LunaConsole", "event", "sandboxService", "message", "createConsoleInput", "force", "container", "editorOptions", "mapLanguage", "getLanguageExtension", "getFontFamily", "getEditorConfig", "consoleEditor", "createEditor", "command", "iframe", "currentIndex", "minHeight", "height", "newLogs", "log", "pattern", "gutterSelector", "margin", "indicator", "createConsoleElements", "toolsPaneElement", "getToolspaneElement", "consoleInput", "toolsPaneButtons", "getToolspaneButtons", "btnContainer", "load", "isMobile", "newConfig", "code", "run", "checked", "unchecked", "reset", "edit", "createTestViewer", "_config", "_baseUrl", "_editors", "eventsManager", "isEmbed", "runTests", "testResultsElement", "loading", "createElements", "toolsPaneElement", "getToolspaneElement", "container", "testActions", "run", "checked", "unchecked", "reset", "edit", "ev", "resetTests", "item", "err", "testSummary", "results", "error", "result", "p", "testError", "passed", "r", "failed", "total", "duration", "totalDuration", "summary", "createToolsPane", "config", "baseUrl", "editors", "eventsManager", "isEmbed", "runTests", "toolsSplit", "status", "activeToolId", "fullList", "createConsole", "createCompiledCodeViewer", "createTestViewer", "isEnabled", "tool", "toolList", "allTools", "tools", "result", "getResultElement", "gutterSize", "sizes", "setAnimation", "animate", "setHidden", "hide", "setActiveTool", "toolId", "title", "index", "container", "sizeChanged", "consoleButtons", "open", "maximize", "close", "createToolsSplit", "split_es_default", "_dimension", "size", "toolsPaneBar", "toolsPaneTitles", "toolTitle", "timer", "event", "toolsPane", "loading", "buttons", "btnContainer", "closeButton", "resize", "newStatus", "load", "initialLoad", "getToolId", "getToolspaneBar", "name", "id", "t", "api", "domTitle", "acc", "sdkFiles", "permanentUrlService", "file", "stores", "createStores", "eventsManager", "createEventsManager", "notifications", "createNotifications", "modal", "createModal", "split", "createSplitPanes", "typeLoader", "createTypeLoader", "screens", "params", "getParams", "iframeScrollPosition", "baseUrl", "isEmbed", "isLite", "compiler", "formatter", "editors", "customEditors", "toolsPane", "authService", "editorLanguages", "resultLanguages", "projectId", "isSaved", "changingContent", "consoleInputCodeCompletion", "starterTemplates", "watchTests", "initialized", "isDestroyed", "broadcastInfo", "resultPopup", "getEditorLanguage", "editorId", "getEditorLanguages", "getActiveEditor", "getConfig", "setActiveEditor", "config", "showEditor", "loadStyles", "snackbarUrl", "hintCssUrl", "lunaObjViewerStylesUrl", "lunaConsoleStylesUrl", "url", "loadStylesheet", "createIframe", "container", "result", "service", "sandboxService", "resolve", "reject", "iframe", "getResultIFrameElement", "scriptLang", "compilers", "getAllCompilers", "languages", "editorsText", "iframeIsPlaced", "styleOnlyUpdate", "getCache", "liveReload", "stylesElement", "styles", "loaded", "onload", "markup", "style", "script", "query", "scrollPosition", "loadModuleTypes", "scriptLanguage", "mapLanguage", "configTypes", "getLanguageCompiler", "lib", "highlightSelectedLanguage", "language", "item", "setEditorTitle", "title", "editorTitle", "getLanguageByAlias", "lang", "createCopyButtons", "editorIds", "copyImgHtml", "copyButton", "copyToClipboard", "createEditors", "editor", "resetEditorModeStatus", "baseOptions", "getEditorConfig", "getLanguageExtension", "getFormatterConfig", "getFontFamily", "markupOptions", "getMarkupElement", "languageIsEnabled", "getLanguageEditorId", "styleOptions", "getStyleElement", "scriptOptions", "getScriptElement", "markupEditor", "createEditor", "styleEditor", "scriptEditor", "applyLanguageConfigs", "registerRun", "reloadEditors", "updateCompiledCode", "handleChangeContent", "updateEditors", "changeLanguage", "showMode", "modeConfig", "toolbarElement", "getToolbarElement", "editorContainerElement", "getEditorContainerElement", "editorsElement", "getEditorsElement", "outputElement", "getOutputElement", "resultElement", "getResultElement", "gutterElement", "getGutterElement", "runButton", "getRunButton", "codeRunButton", "getCodeRunButton", "editorTools", "getEditorToolbar", "showToolbar", "showResult", "customEvents", "isUpdate", "titles", "getEditorTitles", "selector", "getEditorDivs", "activeEditor", "setConfig", "showEditorModeStatus", "node", "editorModeNode", "getEditorModeNode", "addConsoleInputCodeCompletion", "configureEditorTools", "langSpecs", "getLanguageSpecs", "getFormatButton", "phpHelper", "code", "addToken", "value", "getLanguageTitle", "fn", "run", "setSavedStatus", "dispatchChangeEvent", "getCompiledLanguage", "defaultLang", "compiledLanguages", "cache", "compiledCode", "getResultPage", "sourceEditor", "forExport", "template", "resultTemplate", "singleFile", "runTests", "updateConfig", "contentConfig", "getContentConfig", "markupContent", "styleContent", "scriptContent", "testsContent", "markupLanguage", "styleLanguage", "testsLanguage", "scriptType", "forceCompileStyles", "name", "processors", "p", "testsNotChanged", "markupCompileResult", "compiledMarkup", "compileResults", "getCompileResult", "compileInfo", "compiledStyle", "compiledScript", "compiledTests", "info", "cjs2esm", "createResultPage", "setCache", "broadcast", "setLoading", "status", "loading", "getToolspaneLoader", "flushResult", "loadingComments", "updateCache", "setProjectTitle", "setDefault", "projectTitle", "getProjectTitleElement", "defaultTitle", "defaultConfig", "save", "setWindowTitle", "hostLabel", "setExternalResourcesMark", "btn", "getExternalResourcesBtn", "updateUrl", "push", "format", "allEditors", "notify", "setTitle", "projectConfig", "buildConfig", "share", "fork", "loadConfig", "shortUrl", "contentOnly", "urlUpdate", "includeResult", "permanentUrl", "content", "contentParam", "shareService", "compress", "currentUrl", "shareURL", "permanentUrlService", "newConfig", "flush", "upgradeAndValidate", "importExternalContent", "setProjectRecover", "bootstrap", "setUserConfig", "userConfig", "getUserConfig", "loadUserConfig", "updateUI", "loadSettings", "setTheme", "showSyncStatus", "loadTemplate", "templateId", "templateConfig", "changeEvent", "savedConfig", "checkSavedStatus", "doNotCloseModal", "div", "savePromptScreen", "getModalSaveButton", "getModalDoNotSaveButton", "getModalCancelButton", "checkSavedAndExecute", "cancelFn", "confirmed", "reset", "checkRecoverStatus", "isWelcomeScreen", "unsavedItem", "unsavedProject", "projectName", "welcomeRecover", "getModalWelcomeRecover", "recoverPromptScreen", "getModalUnsavedName", "getModalUnsavedLastModified", "disableRecoverCheckbox", "getModalDisableRecoverCheckbox", "getModalRecoverButton", "getModalSavePreviousButton", "getModalCancelRecoverButton", "configureEmmet", "editorIndex", "getTemplates", "getStarterTemplates", "initializeAuth", "createAuthService", "user", "displayLoggedIn", "login", "loginContainer", "createLoginContainer", "scopes", "manageStoredUserData", "displayName", "loginSuccessMessage", "logout", "displayLoggedOut", "getUser", "getUserData", "id", "setUserData", "data", "oldData", "getAppData", "setAppData", "action", "storeKeys", "k", "syncModule", "storeKey", "force", "lastSync", "registerScreen", "screen", "registered", "s", "showScreen", "options", "foundScreen", "loadSelectedScreen", "getAllEditors", "theme", "themes", "root", "getProcessorToggles", "toggle", "processor", "autoupdateToggle", "getAutoupdateToggle", "delayValue", "getDelayValue", "delayRange", "getDelayRange", "autosaveToggle", "getAutosaveToggle", "autosyncToggle", "getAutosyncToggle", "userData", "formatOnsaveToggle", "getFormatOnsaveToggle", "themeToggle", "getThemeToggle", "recoverToggle", "getRecoverToggle", "showWelcomeToggle", "getShowWelcomeToggle", "spacingToggle", "getSpacingToggle", "getCSSPresetLinks", "link", "showLanguageInfo", "languageInfo", "loadStarterTemplate", "templateName", "checkSaved", "templates", "thumbnail", "t", "getPlaygroundState", "cachedCode", "getCachedCode", "zoom", "level", "zoomBtnValue", "getZoomButtonValue", "serverUrl", "channel", "channelToken", "broadcastSource", "broadcastData", "userToken", "res", "setBroadcastStatus", "broadcastStatusBtn", "getBroadcastStatusBtn", "getVersion", "log", "appVersion", "sdkVersion", "commitSHA", "repoUrl", "appUrl", "sdkUrl", "resizeEditors", "handleTitleEdit", "blurOnEnter", "e", "removeFormatting", "text", "handleResize", "handleIframeResize", "gutter", "sizeLabel", "hideLabel", "debounce", "event", "sizes", "handleIframeScroll", "position", "handleSelectEditor", "handleChangeLanguage", "getLanguageMenuLinks", "menuItem", "getLanguageMenuButtons", "menuButton", "contentChanged", "shouldRunTests", "key", "debouncecontentChanged", "handleHotKeys", "ctrl", "hotKeys", "handleLogoLink", "logoLink", "getLogoLink", "handleRunButton", "handleRun", "handleResultButton", "getResultButton", "handleEditorTools", "getCopyButton", "getUndoButton", "getRedoButton", "getEditorStatus", "handleProcessors", "styleMenu", "getstyleMenu", "processorList", "processorIsEnabled", "processorItem", "createProcessorItem", "processorName", "handleSettingsMenu", "menuContainer", "getSettingsMenuScroller", "settingsButton", "getSettingsButton", "settingsMenuHTML", "handleSettings", "getSettingToggles", "configKey", "syncData", "handleLogin", "getLoginLink", "handleLogout", "getLogoutLink", "handleNew", "templatesContainer", "createTemplatesContainer", "loadUserTemplates", "userTemplatesScreen", "getUserTemplatesScreen", "defaultTemplate", "userTemplates", "a", "b", "noUserTemplates", "list", "deleteButton", "setAsDefaultLink", "removeDefaultLink", "createOpenItem", "itemId", "li", "ev", "starterTemplatesCache", "createTemplatesUI", "starterTemplatesList", "getStarterTemplatesList", "loadingText", "createStarterTemplateLink", "getStarterTemplatesTab", "getNewLink", "handleSave", "getSaveLink", "handleFork", "getForkLink", "handleSaveAsTemplate", "getSaveAsTemplateLink", "handleOpen", "createList", "loadingMessage", "fakeStorage", "getOpenLink", "handleImport", "createImportUI", "populateConfig", "getImportLink", "handleExport", "exportModule", "loadModule", "getExportJSONLink", "exportJSON", "getExportResultLink", "getExportSourceLink", "html", "getExportCodepenLink", "cacheIsValid", "compiled", "getExportJsfiddleLink", "getExportGithubGistLink", "handleShare", "createShareUI", "importModule", "shareFn", "shareContainer", "getShareLink", "handleDeploy", "createDeployUI", "getProjectDeployRepo", "setProjectDeployRepo", "repo", "getDeployLink", "handleSync", "createSyncUI", "getSyncLink", "handleAutosync", "minute", "syncFrequency", "syncInterval", "sync", "handlePersistantStorage", "alreadyRequested", "unsubscribe", "projectSubscription", "templateSubscription", "assetSubscription", "requestPersistance", "updateRecentProjects", "allProjects", "recentProjects", "handleBackup", "createBackupUI", "getBackupLink", "handleBroadcast", "createBroadcastUI", "getBroadcastLink", "handleWelcome", "createWelcomeUI", "welcomeScreen", "welcomeContainer", "showWelcomeCheckbox", "getModalShowWelcomeCheckbox", "getWelcomeLinkNew", "getWelcomeLinkOpen", "getWelcomeLinkImport", "getWelcomeLinkRecentOpen", "getWelcomeLinkTemplates", "loadRecentProject", "pId", "savedProject", "welcomeModalScreen", "getModalWelcomeScreen", "welcomeRecent", "getModalWelcomeRecent", "getModalWelcomeRecentList", "defaultTemplateId", "getWelcomeLinkNoDefaultTemplate", "loadTemplateLink", "getWelcomeLinkLoadDefault", "getWelcomeLinkDefaultTemplateLi", "defaultTemplates", "savedRecentTemplates", "recentTemplates", "r", "templateList", "getModalWelcomeTemplateList", "getWelcomeLink", "handleAbout", "createAboutUI", "versions", "aboutScreen", "aboutContainer", "getAboutLink", "handleProjectInfo", "onSave", "description", "tags", "createProjectInfo", "createProjectInfoUI", "getProjectInfoLink", "handleEmbed", "getUrlFn", "createEditorFn", "createEmbedUI", "getEmbedLink", "handleEditorSettings", "changeSettings", "shouldReload", "createEditorSettingsUI", "scrollToSelector", "getEditorSettingsLink", "handleAssets", "assetsModule", "createAddAsset", "activeTab", "deployModule", "deployAsset", "file", "getAssetsLink", "tab", "handleSnippets", "snippetsModule", "createAddSnippet", "snippetId", "snippetContainer", "getSnippetsLink", "handleExternalResources", "createExrenalResourcesUI", "loadResources", "getExternalResourcesLink", "handleCustomSettings", "createCustomSettingsUI", "customSettingsEditor", "customSettingsScreen", "customSettingsContainer", "getCustomSettingsEditor", "stringify", "getLoadCustomSettingsButton", "customSettings", "editorContent", "stringToValidJson", "getCustomSettingsLink", "handleTests", "resultEvent", "getRunTestsButton", "getWatchTestsButton", "handleTestEditor", "createTestEditorUI", "testEditor", "testEditorScreen", "testEditorContainer", "testLanguage", "editorLanguage", "getTestEditor", "testTypes", "jestTypesUrl", "chaiTypesUrl", "libs", "getLoadTestsButton", "getEditTestsButton", "handleResultLoading", "handleResultPopup", "popupBtn", "imgUrl", "openWindow", "resultPopupHTML", "notice", "getToolspaneTitles", "handleResultZoom", "zoomBtn", "toggleZoom", "currentZoom", "newZoom", "handleBroadcastStatus", "showBroadcast", "handleFullscreen", "fullscreenButton", "getFullscreenButton", "buttonImg", "fscreen", "fscreenUrl", "handleUnload", "loadToolsPane", "createToolsPane", "basicHandlers", "extraHandlers", "configureEmbed", "configureLite", "configureModes", "configUrl", "hasContentUrls", "conf", "urlConfig", "contentUrlConfig", "configUrlConfig", "templateObj", "getTemplate", "validUrl", "isGithub", "editorsContent", "contentUrl", "getValidUrl", "validConfigUrl", "loadDefaults", "param", "lastUsedLanguage", "reload", "initializeApp", "initializeFn", "appConfig", "initializeStores", "getCompiler", "getFormatter", "createCustomEditors", "createLanguageMenus", "contentImported", "createApi", "apiGetShareUrl", "apiGetConfig", "apiSetConfig", "newAppConfig", "apiGetCode", "apiShow", "panel", "full", "line", "column", "zoomLevel", "col", "apiRunTests", "apiOnChange", "handler", "apiExec", "command", "args", "token", "apiDestroy", "store", "alreadyDestroyedMessage", "throwError", "call", "callSync", "pane", "app", "config", "baseUrl", "initializeApp", "loadToolsPane", "extraHandlers", "createApi"]
}
