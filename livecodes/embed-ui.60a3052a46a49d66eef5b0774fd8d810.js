var b={title:"Untitled Project",description:"",tags:[],autoupdate:!0,autosave:!1,delay:1500,formatOnsave:!1,mode:"full",theme:"dark",recoverUnsaved:!0,showSpacing:!1,welcome:!0,readonly:!1,allowLangChange:!0,activeEditor:void 0,languages:void 0,markup:{language:"html",content:""},style:{language:"css",content:""},script:{language:"javascript",content:""},stylesheets:[],scripts:[],cssPreset:"",imports:{},types:{},tests:{language:"typescript",content:""},tools:{enabled:"all",active:"",status:""},zoom:1,processors:[],customSettings:{},editor:void 0,fontFamily:void 0,fontSize:void 0,useTabs:!1,tabSize:2,lineNumbers:!0,wordWrap:!1,closeBrackets:!0,semicolons:!0,singleQuote:!1,trailingComma:!0,emmet:!0,editorMode:void 0,version:"4"};var K=`<div id="embed-container" class="modal-container">\r
  <div class="modal-title">Embed Project</div>\r
  <div id="embed-screen-container" class="modal-screen-container">\r
    <div class="modal-screen">\r
      <label>Preview</label>\r
      <div id="embed-preview-container">Loading Preview...</div>\r
      <form id="embed-form"></form>\r
      <label for="embed-code">Code</label>\r
      <div id="embed-code" class="custom-editor"></div>\r
      <button id="embed-copy-btn" class="wide-button">Copy Code</button>\r
      <div class="description">\r
        Please check the\r
        <a href="{{DOCS_BASE_URL}}configuration/" target="_blank" rel="noopener">documentations</a>\r
        for advanced configurations.\r
      </div>\r
    </div>\r
  </div>\r
</div>\r
`;var re=t=>t.replace(/{{APP_VERSION}}/g,"4").replace(/{{SDK_VERSION}}/g,"0.0.2").replace(/{{COMMIT_SHA}}/g,"b09b1b6").replace(/{{REPO_URL}}/g,"https://github.com/live-codes/livecodes").replace(/{{DOCS_BASE_URL}}/g,"/livecodes/docs/");var W=re(K);var $=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;");var L=(t,n=!0)=>t.replace(/\\/g,n?"\\\\":"\\").replace(/`/g,"\\`").replace(/<\/script>/g,"<\\/script>");var V=t=>JSON.parse(JSON.stringify(t));var J=t=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch(a){return console.warn("Copy to clipboard failed.",a),!1}finally{document.body.removeChild(n)}}return!1};var T=(t,n,a=!0)=>(a?"":" ".repeat(n))+t.split(`
`).join(`
`+" ".repeat(n));var Q=["jspm","skypack"],G=["jsdelivr","unpkg","fastly.jsdelivr"],X=["jsdelivr.gh","statically"],u={getModuleUrl:(t,{isModule:n=!0,defaultCDN:a="jspm"}={})=>{t=t.replace(/#nobundle/g,"");let d=Z(t,n,a);return d||(n?"https://jspm.dev/"+t:"https://cdn.jsdelivr.net/npm/"+t)},getUrl:(t,n)=>t.startsWith("http")?t:Z(t,!1,n||ne())||t,cdnLists:{npm:G,module:Q,gh:X},checkCDNs:async(t,n)=>{let a=[n,...u.cdnLists.npm].filter(Boolean);for(let d of a)try{if((await fetch(u.getUrl(t,d),{method:"HEAD"})).ok)return d}catch{}return u.cdnLists.npm[0]}},ne=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||u.cdnLists.npm[0]}catch{return u.cdnLists.npm[0]}},Z=(t,n,a)=>{let d=n&&t.startsWith("unpkg:")?"?module":"";t.startsWith("gh:")?t=t.replace("gh",X[0]):t.includes(":")||(t=(a||(n?Q[0]:G[0]))+":"+t);for(let g of se){let[y,R]=g;if(y.test(t))return t.replace(y,R)+d}return null},se=[[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(npm:)(.+)/i,"https://jspm.dev/$2"],[/^(node:)(.+)/i,"https://jspm.dev/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(jsdelivr.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm.run:)(.+)/i,"https://esm.run/$2"],[/^(esm.sh:)(.+)/i,"https://esm.sh/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var ie={esm:"livecodes.js",umd:"livecodes.umd.js",react:"react.js",vue:"vue.js",types:"index.d.ts"},Y={getAppUrl:()=>"https://v4.livecodes.io/",getSDKUrl:(t="esm")=>u.getUrl(`livecodes@0.0.2/${ie[t]}`)};var we=async({baseUrl:t,config:n,editorLanguages:a,modal:d,notifications:g,eventsManager:y,createEditorFn:R,getUrlFn:O})=>{let U=n.title,f=n.activeEditor||"markup",M=document.createElement("div");M.innerHTML=W;let w=M.firstChild;d.show(w,{isAsync:!0});let D=w.querySelector("#embed-preview-container"),S=w.querySelector("#embed-form"),I=w.querySelector("#embed-code"),P=w.querySelector("#embed-copy-btn");if(!D||!S||!I||!P)return;[{title:"Theme",name:"theme",options:[{label:"Dark",value:"dark",checked:!0},{label:"Light",value:"light"}]},{title:"Loading",name:"loading",options:[{label:"Lazy",value:"lazy",checked:!0},{label:"On-click",value:"click"},{label:"Eager",value:"eager"}]},{title:"Show Result Preview",name:"preview",options:[{value:"true",checked:!1}],help:"/livecodes/docs/features/embeds#result-page-preview"},{title:"Lite Mode",name:"lite",options:[{value:"true",checked:!1}],help:"/livecodes/docs/features/lite"},{title:"Read only",name:"readonly",options:[{value:"true",checked:!1}]},{title:"Display Mode",name:"mode",options:[{label:"Full",value:"full",checked:!0},{label:"Editor",value:"editor"},{label:"Code Block",value:"codeblock"},{label:"Result",value:"result"}],help:"/livecodes/docs/features/display-modes"},{title:"Default View",name:"view",options:[{label:"Split",value:"split",checked:!0},{label:"Editor",value:"editor"},{label:"Result",value:"result"}],help:"/livecodes/docs/features/default-view"},{title:"Active Editor",name:"activeEditor",options:[{label:a.markup,value:"markup",checked:f==="markup"},{label:a.style,value:"style",checked:f==="style"},{label:a.script,value:"script",checked:f==="script"}]},{title:"Tools",name:"tools",options:[{label:"Closed",value:"closed",checked:!0},{label:"Open",value:"open"},{label:"Full",value:"full"},{label:"None",value:"none"}],help:"/livecodes/docs/features/tools-pane"},{title:"Active Tool",name:"activeTool",options:[{label:"Console",value:"console",checked:!0},{label:"Compiled",value:"compiled"},{label:"Tests",value:"tests"}].filter(e=>!(e.value==="tests"&&!n.tests?.content)),help:"/livecodes/docs/features/tools-pane"},{title:"Permanent URL",name:"permanentUrl",options:[{value:"true",checked:!0}],help:"/livecodes/docs/features/permanent-url"},{title:"Embed Type",name:"type",options:[{label:"Script (CDN)",value:"cdn",checked:!0},{label:"Script (npm)",value:"npm"},{label:"React",value:"react"},{label:"Vue",value:"vue"},{label:"Iframe",value:"iframe"},{label:"HTML",value:"html"}]}].forEach(e=>{let r=document.createElement("label");if(r.innerHTML=e.title,S.appendChild(r),e.help){let s=document.createElement("a");s.href=e.help,s.target="_blank",s.classList.add("help-link"),s.title="Click for info...",r.appendChild(s);let c=document.createElement("img");c.src=t+"assets/icons/info.svg",s.appendChild(c)}let i=document.createElement("div");i.classList.add("input-container"),S.appendChild(i),e.options.forEach(s=>{let c=`embed-${e.name}`,l=`${c}-${s.value}`,C=!s.label&&s.value==="true",v=document.createElement("span");i.appendChild(v);let p=document.createElement("input");if(p.type=C?"checkbox":"radio",p.name=c,p.id=l,p.value=s.value,p.checked=s.checked||!1,v.appendChild(p),C)p.classList.add("switch");else{let o=document.createElement("label");o.classList.add("radio-label"),o.htmlFor=l,o.innerHTML=s.label||"",v.appendChild(o)}})});let x=await R(I),H="https://livecodes.io",_=Y.getSDKUrl("umd"),k=await O(!0),h=new URL(k),j=h.origin+h.pathname,A=document.createElement("iframe");A.id="embed-preview-iframe",D.innerHTML="",D.appendChild(A);let F=()=>"livecodes-"+(Math.random()+1).toString(36).substring(2),N=e=>`
<div id="${e}">
  <span>Open the project <a href="${k}" target="_blank">${U}</a> in <a href="${H}" target="_blank">LiveCodes</a>.</span>
</div>
`.trimStart(),E=e=>{let r={...e.mode!==b.mode?{mode:e.mode}:{},...e.theme!==b.theme?{theme:e.theme}:{},...e.tools!=="closed"||e.activeTool!=="console"?{tools:{enabled:e.tools==="none"?[]:"all",status:e.tools,active:e.activeTool}}:{},...e.readonly?{readonly:e.readonly}:{},...e.mode!=="result"&&e.activeEditor!==f?{activeEditor:e.activeEditor}:{}},i=h.searchParams.get("x");return{...j!=="https://livecodes.io/"?{appUrl:j}:{},...Object.keys(r).length>0?{config:r}:{},...i?{import:i}:{},...e.lite?{lite:e.lite}:{},...e.loading!=="lazy"?{loading:e.loading}:{},...e.loading==="click"&&e.preview?{params:{preview:!0}}:{},...e.view&&e.view!=="split"?{view:e.view}:{}}},q=e=>{let r=new URL(k);return r.searchParams.set(e.lite?"lite":"embed","true"),e.loading&&e.loading!=="lazy"&&r.searchParams.set("loading",String(e.loading)),e.loading==="click"&&e.preview&&r.searchParams.set("preview","true"),e.view&&e.view!=="split"&&r.searchParams.set("view",String(e.view)),e.mode!=="result"&&e.activeEditor&&e.activeEditor!==f&&r.searchParams.set("activeEditor",String(e.activeEditor)),e.mode&&e.mode!==b.mode&&r.searchParams.set("mode",String(e.mode)),e.theme&&e.theme!==b.theme&&r.searchParams.set("theme",String(e.theme)),e.tools&&(e.tools!=="closed"||e.activeTool!=="console")&&r.searchParams.set(e.tools==="none"?"tools":String(e.activeTool),String(e.tools)),e.readonly!==void 0&&r.searchParams.set("readonly",String(e.readonly)),decodeURIComponent(r.href)},ee={cdn:e=>{let r=F(),i=N(r),s=E(e),c=JSON.stringify(s,null,2),l=T(c,2);return`
${i}
<script src="${_}"><\/script>
<script>
  const options = ${l};
  livecodes.createPlayground("#${r}", options);
<\/script>
`.trimStart()},npm(e){let r=F(),i=N(r),s=E(e),c=JSON.stringify(s,null,2),l=T(c,2);return`
${i}
<script type="module">
  import { createPlayground } from "livecodes";
  const options = ${l};
  createPlayground("#${r}", options);
<\/script>
`.trimStart()},react(e){let r=E(e),i=JSON.stringify(r,null,2);return`
import LiveCodes from "livecodes/react";
export default function App() {
  const options = ${T(i,2)};
  return <LiveCodes {...options}></LiveCodes>;
}
`.trimStart()},vue(e){let r=E(e),i=JSON.stringify(r,null,2);return`
<script setup>
  import LiveCodes from 'livecodes/vue';
  const options = ${T(i,2)};
<\/script>

<template>
  <LiveCodes v-bind="options" />
</template>
`.trimStart()},iframe:e=>{let r=q(e),i=new URL(r);i.searchParams.delete("embed"),i.searchParams.delete("lite");let s=decodeURIComponent(i.href);return`
<iframe title="${U}" scrolling="no" loading="lazy" style="height:300px; width: 100%; border:1px solid black; border-radius:5px;" src="${r}">
  See the project <a href="${s}" target="_blank">${U}</a> on <a href="${H}" target="_blank">LiveCodes</a>.
</iframe>
`.trimStart()},html:e=>{let{import:r,...i}=E(e),s={...V(n),...i.config};return Object.keys(s).forEach(l=>{(JSON.stringify(s[l])===JSON.stringify(b[l])||l==="activeEditor"&&s.activeEditor==="markup"||["markup","style","script"].includes(l))&&delete s[l]}),Object.keys(s).length>0&&(i.config=s),`
<div class="livecodes" style="height: 300px;" data-options='${L(JSON.stringify(i).replace(/'/g,"&#39;"))}'>
<pre data-lang="${n.markup.language}">${L($(n.markup.content||""))}</pre>
<pre data-lang="${n.style.language}">${L($(n.style.content||""))}</pre>
<pre data-lang="${n.script.language}">${L($(n.script.content||""))}</pre>
</div>
<script defer src="${_}" data-prefill><\/script>
`.trimStart()}},m={preview:!1,view:"split",tools:"closed",activeTool:"console"},B=async()=>{let e=Array.from(new FormData(S)).reduce((o,[te,z])=>({...o,[te.replace("embed-","")]:z==="true"?!0:z}),{});k=await O(!!e.permanentUrl),h=new URL(k),j=h.origin+h.pathname;let r=document.querySelector('input[name="embed-preview"]');e.loading!=="click"?(r.checked=!1,r.disabled=!0,e.preview=!1):r.disabled=!1;let i=document.querySelectorAll('input[name="embed-view"]');e.mode!=="full"?(m.view=e.view||m.view,delete e.view,i.forEach(o=>{o.checked=!1,o.disabled=!0})):i.forEach(o=>{o.value===(e.view||m.view)&&(o.checked=!0),o.disabled=!1,o.checked&&(e.view=o.value)});let s=document.querySelectorAll('input[name="embed-tools"]'),c=document.querySelectorAll('input[name="embed-activeTool"]');e.lite?(m.tools=e.tools||m.tools,delete e.tools,s.forEach(o=>{o.checked=!1,o.disabled=!0})):s.forEach(o=>{o.value===(e.tools||m.tools)&&(o.checked=!0),o.disabled=!1,o.checked&&(e.tools=o.value)}),e.lite||e.tools==="none"?(m.activeTool=e.activeTool||m.activeTool,delete e.activeTool,c.forEach(o=>{o.checked=!1,o.disabled=!0})):c.forEach(o=>{o.value===(e.activeTool||m.activeTool)&&(o.checked=!0),o.disabled=!1,o.checked&&(e.activeTool=o.value)}),document.querySelectorAll('input[name="embed-activeEditor"]').forEach(o=>{e.mode==="result"?(o.checked=o.value===f,o.disabled=!0,delete e.activeEditor):o.disabled=!1}),A.src=q(e);let C=e.type,v=ee[C]?.(e),p=C==="react"?"jsx":"html";x.getLanguage()!==p?x.setLanguage(p,v):x.setValue(v)};y.addEventListener(S,"change",B),y.addEventListener(P,"click",async()=>{J(x.getValue())?g.success("Code copied to clipboard"):g.error("Failed to copy to clipboard")}),B()};export{we as createEmbedUI};
//# sourceMappingURL=embed-ui.js.map
